"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2996],{2996:(N,m,l)=>{l.r(m),l.d(m,{MyCalendarModule:()=>S});var s=l(86019),g=l(49133),y=l(87626),f=l(45598),v=l(4205),d=l(85993),u=l(57842),_=l(69215),C=l(21864),r=l(74464),x=l(50273),e=l(83668);function T(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",5),e.TgZ(2,"div",6),e.NdJ("click",function(){const c=e.CHM(t).$implicit;return e.oxw(2).navigateToDetail("edit",c.meta)}),e.TgZ(3,"label"),e._UZ(4,"span",7),e._uU(5),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&n){const t=o.$implicit;e.xp6(4),e.Q6J("ngClass",t.type),e.xp6(1),e.Oqu(t.title)}}function w(n,o){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,T,6,2,"ng-container",4),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.data)}}function Z(n,o){1&n&&(e.TgZ(0,"div"),e.ynx(1),e.TgZ(2,"div",5),e.TgZ(3,"div",8),e.TgZ(4,"label"),e._uU(5,"There is no activity today "),e.qZA(),e.qZA(),e.qZA(),e.BQk(),e.qZA())}let M=(()=>{class n{constructor(t,a){this.router=t,this.modalCrl=a,this.data=[]}ngOnInit(){}navigateToDetail(t,a){this.modalCrl.dismissAll(),this.router.navigate(["/activity/activity-management-detail"],{queryParams:{pageStatus:t,pageId:a}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(v.F0),e.Y36(d.FF))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-event-list"]],inputs:{data:"data"},decls:6,vars:2,consts:[[1,"modal-content"],[1,"modal-header"],["id","example-modal-sizes-title-lg",1,"modal-title","h4","left-border-image"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"row",2,"margin","10px 0px"],[1,"col",3,"click"],[2,"margin-right","5px",3,"ngClass"],[1,"col"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e._uU(3," Activity List "),e.qZA(),e.qZA(),e.YNc(4,w,2,1,"div",3),e.YNc(5,Z,6,0,"div",3),e.qZA()),2&t&&(e.xp6(4),e.Q6J("ngIf",a.data.length>0),e.xp6(1),e.Q6J("ngIf",0==a.data.length))},directives:[s.O5,s.sg,s.mk],styles:[".Open[_ngcontent-%COMP%]{height:10px;width:10px;border-radius:50%;display:inline-block;background-color:#3dc2ff}.Face[_ngcontent-%COMP%]{height:10px;width:10px;border-radius:50%;display:inline-block;background-color:#3880ff}.Online[_ngcontent-%COMP%]{height:10px;width:10px;border-radius:50%;display:inline-block;background-color:#ffc409}.Phone[_ngcontent-%COMP%]{height:10px;width:10px;border-radius:50%;display:inline-block;background-color:#2dd36f}"]}),n})();var D=l(95976);const O=["modalContent"];function A(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mwl-calendar-month-view",5),e.NdJ("dayClicked",function(i){return e.CHM(t),e.oxw().dayClicked(i.day)})("eventClicked",function(i){return e.CHM(t),e.oxw().handleEvent("Clicked",i.event)})("eventTimesChanged",function(i){return e.CHM(t),e.oxw().eventTimesChanged(i)}),e.qZA()}if(2&n){const t=e.oxw(),a=e.MAs(6);e.Q6J("cellTemplate",a)("events",t.events)("viewDate",t.viewDate)("refresh",t.refresh)("activeDayIsOpen",t.activeDayIsOpen)}}function F(n,o){if(1&n&&(e.TgZ(0,"span",10),e._uU(1),e.qZA()),2&n){const t=e.oxw().day;e.xp6(1),e.Oqu(t.badgeTotal)}}const E=function(n){return{backgroundColor:n}};function b(n,o){if(1&n&&e._UZ(0,"div",13),2&n){const t=o.$implicit,a=e.oxw(3);e.Q6J("ngStyle",e.VKq(1,E,a.getColor(t)))}}function I(n,o){if(1&n&&(e.TgZ(0,"span",10),e._uU(1),e.qZA()),2&n){const t=e.oxw(2).day;e.xp6(1),e.hij(" + ",t.events.length-20," ")}}function k(n,o){if(1&n&&(e.TgZ(0,"div",11),e.YNc(1,b,1,3,"div",12),e.ALo(2,"slice"),e.YNc(3,I,2,1,"span",7),e.qZA()),2&n){const t=e.oxw(),a=t.day,i=t.trackByEventId,c=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.Dn7(2,3,a.events,0,c.showAll?void 0:20))("ngForTrackBy",i),e.xp6(2),e.Q6J("ngIf",a.events.length>20)}}function P(n,o){if(1&n&&(e.TgZ(0,"div",6),e.YNc(1,F,2,1,"span",7),e.TgZ(2,"span",8),e._uU(3),e.ALo(4,"calendarDate"),e.qZA(),e.qZA(),e.YNc(5,k,4,7,"div",9)),2&n){const t=o.day,a=o.locale;e.xp6(1),e.Q6J("ngIf",t.badgeTotal>0),e.xp6(2),e.Oqu(e.Dn7(4,3,t.date,"monthViewDayNumber",a)),e.xp6(2),e.Q6J("ngIf",t.events.length>0)}}const p_Face={primary:"#3880ff",secondary:"#3880ff"},p_Online={primary:"#ffc409",secondary:"#ffc409"},p_Phone={primary:"#2dd36f",secondary:"#2dd36f"};let J=(()=>{class n{constructor(t,a,i,c){this.modal=t,this.activityService=a,this.router=i,this.modalCrl=c,this.view=r.wr.Month,this.calendarView=r.wr,this.viewDate=new Date,this.showAll=!1,this.actions=[{label:'<i class="fas fa-fw fa-pencil-alt"></i>',a11yLabel:"Edit",onClick:({event:h})=>{this.handleEvent("Edited",h)}}],this.refresh=new x.x,this.eventNumber=0,this.activityList=[],this.EventData=[],this.events=[],this.activeDayIsOpen=!1}ngOnInit(){}ngAfterViewInit(){this.getActivity()}getActivity(){this.activityService.getActivityList({status:"Open"}).subscribe(a=>{a&&(console.log("RES",a),this.activityList=a,this.EventData=this.activityList.map(i=>{let c;return"Face to Face"==i.activityType?c=p_Face:"Online"==i.activityType?c=p_Online:"Phone Call"==i.activityType&&(c=p_Phone),{start:new Date(i.planDate),end:new Date(i.planDate),title:i.activityTitle+"( "+i.activityType+" )",type:i.activityType,color:c,meta:i.activityNo,actions:this.actions}}),console.log(" this.EventData",this.EventData),this.events=this.EventData,this.eventNumber=this.events.length,this.refresh.next())})}dayClicked({date:t,events:a}){(0,_.Z)(t,this.viewDate)&&(this.activeDayIsOpen=((0,C.Z)(this.viewDate,t),!1),this.viewDate=t);const i=this.modalCrl.open(M,{size:"sm",backdrop:!0});i.componentInstance.isModal=!0,i.componentInstance.data=a,i.result.then(()=>{},c=>{}),console.log("day",t,"events",a)}eventTimesChanged({event:t,newStart:a,newEnd:i}){this.events=this.events.map(c=>c===t?Object.assign(Object.assign({},t),{start:a,end:i}):c),this.handleEvent("Dropped or resized",t)}handleEvent(t,a){this.navigateToDetail("edit",a.meta)}navigateToDetail(t,a){this.router.navigate(["/activity/activity-management-detail"],{queryParams:{pageStatus:t,pageId:a}})}addEvent(t){this.navigateToDetail("create",null)}deleteEvent(t){this.events=this.events.filter(a=>a!==t)}setView(t){this.view=t}closeOpenMonthViewDay(){this.activeDayIsOpen=!1}getColor(t){var a;return null===(a=t.color)||void 0===a?void 0:a.primary}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.FF),e.Y36(D.e),e.Y36(v.F0),e.Y36(d.FF))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-mycalendar"]],viewQuery:function(t,a){if(1&t&&e.Gf(O,7),2&t){let i;e.iGM(i=e.CRH())&&(a.modalContent=i.first)}},decls:7,vars:2,consts:[[1,"row"],[1,"col-12"],[3,"ngSwitch"],[3,"cellTemplate","events","viewDate","refresh","activeDayIsOpen","dayClicked","eventClicked","eventTimesChanged",4,"ngSwitchCase"],["customCellTemplate",""],[3,"cellTemplate","events","viewDate","refresh","activeDayIsOpen","dayClicked","eventClicked","eventTimesChanged"],[1,"cal-cell-top"],["class","cal-day-badge",4,"ngIf"],[1,"cal-day-number"],["class","cal-events",4,"ngIf"],[1,"cal-day-badge"],[1,"cal-events"],["class","cal-event",3,"ngStyle",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cal-event",3,"ngStyle"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"br"),e.TgZ(3,"div",2),e.YNc(4,A,1,5,"mwl-calendar-month-view",3),e.qZA(),e.YNc(5,P,6,7,"ng-template",null,4,e.W1O),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngSwitch",a.view),e.xp6(1),e.Q6J("ngSwitchCase",a.calendarView.Month))},directives:[s.RF,s.n9,r.GH,s.O5,s.sg,s.PC],pipes:[r.vk,s.OU],styles:[".cal-month-view[_ngcontent-%COMP%]   .cal-open-day-events[_ngcontent-%COMP%]{padding:10px 15px;overflow:auto!important;max-height:120px!important;line-height:30px!important}.cal-month-view[_ngcontent-%COMP%]   .cal-open-day-events[_ngcontent-%COMP%]{color:#000!important;background-color:#e7dede!important;box-shadow:inset 0 0 15px #ece6e6d2!important}","h3[_ngcontent-%COMP%]{margin:0 0 10px}pre[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:15px}"],changeDetection:0}),n})();var L=l(31145),Q=l(92424);let S=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[s.ez,g.u5,g.UX,y.vi,f.fA,d.M,u.A0,v.Bz.forChild([{path:"",component:J}]),L.JT.forRoot(),r._8.forRoot({provide:r._A,useFactory:Q.x})]]}),n})()}}]);