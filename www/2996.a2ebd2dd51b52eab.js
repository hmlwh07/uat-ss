"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2996],{2996:(N,g,l)=>{l.r(g),l.d(g,{MyCalendarModule:()=>Q});var s=l(86019),f=l(49133),y=l(87626),h=l(45598),p=l(4205),v=l(85993),_=l(57842),u=l(69215),C=l(21864),r=l(74464),T=l(50273),e=l(83668);function w(a,o){if(1&a){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",5),e.TgZ(2,"div",6),e.NdJ("click",function(){const c=e.CHM(t).$implicit;return e.oxw(2).navigateToDetail("edit",c.meta)}),e.TgZ(3,"div",7),e.TgZ(4,"div",8),e._UZ(5,"i",9),e.TgZ(6,"label",10),e._uU(7),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&a){const t=o.$implicit;e.xp6(3),e.Q6J("ngClass",t.type),e.xp6(2),e.Tol(t.icon),e.xp6(2),e.hij("",t.title," ")}}function x(a,o){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,w,8,4,"ng-container",4),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.data)}}function Z(a,o){1&a&&(e.TgZ(0,"div"),e.ynx(1),e.TgZ(2,"div",5),e.TgZ(3,"div",11),e.TgZ(4,"label"),e._uU(5,"There is no activity today "),e.qZA(),e.qZA(),e.qZA(),e.BQk(),e.qZA())}let D=(()=>{class a{constructor(t,n){this.router=t,this.modalCrl=n,this.data=[],this.day=new Date}ngOnInit(){}navigateToDetail(t,n){this.modalCrl.dismissAll(),this.router.navigate(["/activity/activity-management-detail"],{queryParams:{pageStatus:t,pageId:n}})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(p.F0),e.Y36(v.FF))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-event-list"]],inputs:{data:"data",day:"day"},decls:7,vars:6,consts:[[1,"modal-content"],[1,"modal-header"],["id","example-modal-sizes-title-lg",1,"modal-title","h4","left-border-image"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"row",2,"margin","10px 0px"],[1,"col",3,"click"],[1,"card","card-custom",3,"ngClass"],[2,"text-align","center"],[1,"icon"],[2,"margin-top","20px"],[1,"col"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e._uU(3),e.ALo(4,"date"),e.qZA(),e.qZA(),e.YNc(5,x,2,1,"div",3),e.YNc(6,Z,6,0,"div",3),e.qZA()),2&t&&(e.xp6(3),e.hij(" Activity List ( ",e.xi3(4,3,n.day,"dd/MM/yyyy")," ) "),e.xp6(2),e.Q6J("ngIf",n.data.length>0),e.xp6(1),e.Q6J("ngIf",0==n.data.length))},directives:[s.O5,s.sg,s.mk],pipes:[s.uU],styles:[".Open[_ngcontent-%COMP%]{background-color:#3dc2ff;color:#fff}.Face[_ngcontent-%COMP%]{background-color:#3880ff;color:#fff}.Online[_ngcontent-%COMP%]{background-color:#ffc409;color:#fff}.Phone[_ngcontent-%COMP%]{background-color:#2dd36f;color:#fff}.icon[_ngcontent-%COMP%]{font-size:1.5rem;position:absolute;left:5px;top:10px}"]}),a})();var A=l(95976);const M=["modalContent"];function O(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"mwl-calendar-month-view",9),e.NdJ("dayClicked",function(i){return e.CHM(t),e.oxw().dayClicked(i.day)})("eventClicked",function(i){return e.CHM(t),e.oxw().handleEvent("Clicked",i.event)})("eventTimesChanged",function(i){return e.CHM(t),e.oxw().eventTimesChanged(i)}),e.qZA()}if(2&a){const t=e.oxw(),n=e.MAs(16);e.Q6J("cellTemplate",n)("events",t.events)("viewDate",t.viewDate)("refresh",t.refresh)("activeDayIsOpen",t.activeDayIsOpen)}}function F(a,o){if(1&a&&(e.TgZ(0,"span",14),e._uU(1),e.qZA()),2&a){const t=e.oxw().day;e.xp6(1),e.Oqu(t.badgeTotal)}}const E=function(a){return{backgroundColor:a}};function I(a,o){if(1&a&&e._UZ(0,"div",17),2&a){const t=o.$implicit,n=e.oxw(3);e.Q6J("ngStyle",e.VKq(1,E,n.getColor(t)))}}function b(a,o){if(1&a&&(e.TgZ(0,"span",14),e._uU(1),e.qZA()),2&a){const t=e.oxw(2).day;e.xp6(1),e.hij(" + ",t.events.length-20," ")}}function k(a,o){if(1&a&&(e.TgZ(0,"div",15),e.YNc(1,I,1,3,"div",16),e.ALo(2,"slice"),e.YNc(3,b,2,1,"span",11),e.qZA()),2&a){const t=e.oxw(),n=t.day,i=t.trackByEventId,c=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.Dn7(2,3,n.events,0,c.showAll?void 0:20))("ngForTrackBy",i),e.xp6(2),e.Q6J("ngIf",n.events.length>20)}}function q(a,o){if(1&a&&(e.TgZ(0,"div",10),e.YNc(1,F,2,1,"span",11),e.TgZ(2,"span",12),e._uU(3),e.ALo(4,"calendarDate"),e.qZA(),e.qZA(),e.YNc(5,k,4,7,"div",13)),2&a){const t=o.day,n=o.locale;e.xp6(1),e.Q6J("ngIf",t.badgeTotal>0),e.xp6(2),e.Oqu(e.Dn7(4,3,t.date,"monthViewDayNumber",n)),e.xp6(2),e.Q6J("ngIf",t.events.length>0)}}const m_Face={primary:"#3880ff",secondary:"#3880ff"},m_Online={primary:"#ffc409",secondary:"#ffc409"},m_Phone={primary:"#2dd36f",secondary:"#2dd36f"};let J=(()=>{class a{constructor(t,n,i,c){this.modal=t,this.activityService=n,this.router=i,this.modalCrl=c,this.view=r.wr.Month,this.calendarView=r.wr,this.viewDate=new Date,this.showAll=!1,this.actions=[{label:'<i class="fas fa-fw fa-pencil-alt"></i>',a11yLabel:"Edit",onClick:({event:d})=>{this.handleEvent("Edited",d)}}],this.refresh=new T.x,this.eventNumber=0,this.activityList=[],this.EventData=[],this.events=[],this.activeDayIsOpen=!1}ngOnInit(){}ngAfterViewInit(){this.getActivity()}getActivity(){this.activityService.getActivityList({status:"Open"}).subscribe(n=>{n&&(console.log("RES",n),this.activityList=n,this.EventData=this.activityList.map(i=>{let c,d;return"Face to Face"==i.activityType?(c=m_Face,d="flaticon-users-1"):"Online"==i.activityType?(c=m_Online,d="flaticon-chat"):"Phone Call"==i.activityType&&(c=m_Phone,d="flaticon2-phone"),{start:new Date(i.planDate),end:new Date(i.planDate),title:i.activityTitle+"( "+i.activityType+" )",type:i.activityType,color:c,icon:d,meta:i.activityNo,actions:this.actions}}),console.log(" this.EventData",this.EventData),this.events=this.EventData,this.eventNumber=this.events.length,this.refresh.next())})}dayClicked({date:t,events:n}){(0,u.Z)(t,this.viewDate)&&(this.activeDayIsOpen=((0,C.Z)(this.viewDate,t),!1),this.viewDate=t);const i=this.modalCrl.open(D,{size:"sm",backdrop:!0});i.componentInstance.isModal=!0,i.componentInstance.data=n,i.componentInstance.day=t,i.result.then(()=>{},c=>{}),console.log("day",t,"events",n)}eventTimesChanged({event:t,newStart:n,newEnd:i}){this.events=this.events.map(c=>c===t?Object.assign(Object.assign({},t),{start:n,end:i}):c),this.handleEvent("Dropped or resized",t)}handleEvent(t,n){this.navigateToDetail("edit",n.meta)}navigateToDetail(t,n){this.router.navigate(["/activity/activity-management-detail"],{queryParams:{pageStatus:t,pageId:n}})}addEvent(t){this.navigateToDetail("create",null)}deleteEvent(t){this.events=this.events.filter(n=>n!==t)}setView(t){this.view=t}closeOpenMonthViewDay(){this.activeDayIsOpen=!1}getColor(t){var n;return null===(n=t.color)||void 0===n?void 0:n.primary}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(v.FF),e.Y36(A.e),e.Y36(p.F0),e.Y36(v.FF))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-mycalendar"]],viewQuery:function(t,n){if(1&t&&e.Gf(M,7),2&t){let i;e.iGM(i=e.CRH())&&(n.modalContent=i.first)}},decls:17,vars:8,consts:[[1,"row"],[1,"col-6"],[1,"col-md-6","text-left"],["mwlCalendarToday","",1,"btn","btn-sm","btn-primary",2,"text-align","right","float","right",3,"viewDate","viewDateChange"],[2,"font-size","1rem"],[1,"col-12"],[3,"ngSwitch"],[3,"cellTemplate","events","viewDate","refresh","activeDayIsOpen","dayClicked","eventClicked","eventTimesChanged",4,"ngSwitchCase"],["customCellTemplate",""],[3,"cellTemplate","events","viewDate","refresh","activeDayIsOpen","dayClicked","eventClicked","eventTimesChanged"],[1,"cal-cell-top"],["class","cal-day-badge",4,"ngIf"],[1,"cal-day-number"],["class","cal-events",4,"ngIf"],[1,"cal-day-badge"],[1,"cal-events"],["class","cal-event",3,"ngStyle",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cal-event",3,"ngStyle"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h4"),e._uU(4),e.ALo(5,"calendarDate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",1),e.TgZ(7,"div",3),e.NdJ("viewDateChange",function(c){return n.viewDate=c}),e.TgZ(8,"label",4),e._uU(9,"Today"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(10,"br"),e.TgZ(11,"div",0),e.TgZ(12,"div",5),e.TgZ(13,"div",6),e.YNc(14,O,1,5,"mwl-calendar-month-view",7),e.qZA(),e.YNc(15,q,6,7,"ng-template",null,8,e.W1O),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Oqu(e.Dn7(5,4,n.viewDate,n.view+"ViewTitle","en")),e.xp6(3),e.Q6J("viewDate",n.viewDate),e.xp6(6),e.Q6J("ngSwitch",n.view),e.xp6(1),e.Q6J("ngSwitchCase",n.calendarView.Month))},directives:[r.nA,s.RF,s.n9,r.GH,s.O5,s.sg,s.PC],pipes:[r.vk,s.OU],styles:[".cal-month-view[_ngcontent-%COMP%]   .cal-open-day-events[_ngcontent-%COMP%]{padding:10px 15px;overflow:auto!important;max-height:120px!important;line-height:30px!important}.cal-month-view[_ngcontent-%COMP%]   .cal-open-day-events[_ngcontent-%COMP%]{color:#000!important;background-color:#e7dede!important;box-shadow:inset 0 0 15px #ece6e6d2!important}","h3[_ngcontent-%COMP%]{margin:0 0 10px}pre[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:15px}"],changeDetection:0}),a})();var L=l(31145),P=l(92424);let Q=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[s.ez,f.u5,f.UX,y.vi,h.fA,v.M,_.A0,p.Bz.forChild([{path:"",component:J}]),L.JT.forRoot(),r._8.forRoot({provide:r._A,useFactory:P.x})]]}),a})()}}]);