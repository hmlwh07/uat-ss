"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1880],{48416:(F,h,r)=>{r.d(h,{a:()=>Z});var C=r(69808),n=r(93075),f=r(69544),d=r(50282),m=r(84095),u=r(65884),_=r(65981),g=r(64537),v=r(47493),T=r(63272),A=r(36277),x=r(7181),N=r(94142),t=r(5e3);let Z=(()=>{class p{}return p.\u0275fac=function(q){return new(q||p)},p.\u0275mod=t.oAB({type:p}),p.\u0275inj=t.cJS({imports:[[C.ez,n.u5,n.UX,f.vi,d.fA,m.Fk,u.FA,_.c,T.bz,x.j,v.Q,N.W,g.A0,A.m]]}),p})()},63117:(F,h,r)=>{r.d(h,{p:()=>j});var C=r(70655),n=r(93075),f=r(4128),d=r(54004),m=r(70262),u=r(39646),_=r(17606),g=r(90089),v=r(17585),T=r(86270),A=r(4721),x=r(71865),N=r(41018),t=r(5e3),Z=r(63272),p=r(69808),O=r(27670),q=r(64190),M=r(96592),D=r(25492),P=r(78680),b=r(65981),I=r(65884),L=r(21223),E=r(64537),w=r(98807);function U(s,c){1&s&&(t.TgZ(0,"div",83),t.TgZ(1,"div",84),t.TgZ(2,"h3",65),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA(),t.qZA()),2&s&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"FORM.create_lead")))}function V(s,c){if(1&s){const e=t.EpF();t.TgZ(0,"input",85),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).openNRCModal()}),t.qZA()}if(2&s){const e=t.oxw(2);t.ekj("is-invalid",e.isControlInvalid("identityNumber"))("is-valid",e.isControlValid("identityNumber"))}}function R(s,c){if(1&s&&t._UZ(0,"input",86),2&s){const e=t.oxw(2);t.ekj("is-invalid",e.isControlInvalid("identityNumber"))("is-valid",e.isControlValid("identityNumber"))}}function k(s,c){if(1&s){const e=t.EpF();t.TgZ(0,"div",51),t.TgZ(1,"a",87),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).checkExisting("customer")}),t._UZ(2,"span",88),t.qZA(),t.qZA()}}function S(s,c){if(1&s){const e=t.EpF();t.TgZ(0,"div",51),t.TgZ(1,"a",87),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).viewExisting("customer")}),t._UZ(2,"span",89),t.qZA(),t.qZA()}}function Q(s,c){if(1&s){const e=t.EpF();t.TgZ(0,"span",49),t.NdJ("click",function(a){return t.CHM(e),t.oxw(2).clearDate("prospectCustomer"),a.stopPropagation()}),t.TgZ(1,"span",50),t._uU(2,"\xd7"),t.qZA(),t.qZA()}}function J(s,c){if(1&s){const e=t.EpF();t.TgZ(0,"div",51),t.TgZ(1,"a",90),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).checkExisting("prospect")}),t._UZ(2,"span",88),t.qZA(),t.qZA()}}function Y(s,c){if(1&s){const e=t.EpF();t.TgZ(0,"div",51),t.TgZ(1,"a",87),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).viewExisting("prospect")}),t._UZ(2,"span",89),t.qZA(),t.qZA()}}function B(s,c){if(1&s){const e=t.EpF();t.TgZ(0,"div",1),t.TgZ(1,"div",2),t.TgZ(2,"form",3),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().createLead()}),t.TgZ(3,"div",4),t.YNc(4,U,5,3,"div",5),t.TgZ(5,"div",6),t.TgZ(6,"div"),t.TgZ(7,"div",7),t.TgZ(8,"div",8),t.TgZ(9,"div",9),t.TgZ(10,"label",10),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"div",11),t._UZ(14,"input",12),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",8),t.TgZ(16,"div",9),t.TgZ(17,"label",10),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"div",11),t.TgZ(21,"input",13),t.NdJ("change",function(){return t.CHM(e),t.oxw().calculateLeadQuality()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"div",7),t.TgZ(23,"div",8),t.TgZ(24,"div",9),t.TgZ(25,"label",10),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.TgZ(28,"div",11),t._UZ(29,"input",14),t.qZA(),t.qZA(),t.qZA(),t.TgZ(30,"div",8),t.TgZ(31,"div",9),t.TgZ(32,"label",10),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"div",11),t.TgZ(36,"div",15),t._UZ(37,"input",16),t._UZ(38,"mat-datepicker-toggle",17),t._UZ(39,"mat-datepicker",null,18),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(41,"div",7),t.TgZ(42,"div",8),t.TgZ(43,"div",9),t.TgZ(44,"label",10),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"div",11),t._UZ(48,"input",19),t.qZA(),t.qZA(),t.qZA(),t.TgZ(49,"div",8),t.TgZ(50,"div",9),t.TgZ(51,"label",10),t._uU(52),t.ALo(53,"translate"),t.qZA(),t.TgZ(54,"div",11),t.TgZ(55,"div",15),t._UZ(56,"input",20),t._UZ(57,"mat-datepicker-toggle",17),t._UZ(58,"mat-datepicker",null,21),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(60,"div",7),t.TgZ(61,"div",22),t.TgZ(62,"div",9),t.TgZ(63,"label",23),t._uU(64),t.ALo(65,"translate"),t.qZA(),t.TgZ(66,"div",24),t.TgZ(67,"div",25),t.TgZ(68,"label",26),t._uU(69,"SMS"),t.qZA(),t._UZ(70,"input",27),t.qZA(),t.TgZ(71,"div",25),t.TgZ(72,"label",26),t._uU(73,"Email"),t.qZA(),t._UZ(74,"input",28),t.qZA(),t.TgZ(75,"div",25),t.TgZ(76,"label",26),t._uU(77,"Phone"),t.qZA(),t._UZ(78,"input",29),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(79,"div",7),t.TgZ(80,"div",8),t.TgZ(81,"div",9),t.TgZ(82,"label",10),t._uU(83),t.ALo(84,"translate"),t.qZA(),t.TgZ(85,"div",11),t.TgZ(86,"ng-select",30),t.NdJ("change",function(){return t.CHM(e),t.oxw().calculateLeadQuality("typeCode")}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(87,"div",8),t.TgZ(88,"div",9),t.TgZ(89,"label",10),t._uU(90),t.ALo(91,"translate"),t.qZA(),t.TgZ(92,"div",11),t.TgZ(93,"div",15),t._UZ(94,"input",31),t._UZ(95,"mat-datepicker-toggle",17),t._UZ(96,"mat-datepicker",32,33),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(98,"div",7),t.TgZ(99,"div",8),t.TgZ(100,"div",9),t.TgZ(101,"label",10),t._uU(102),t.ALo(103,"translate"),t.qZA(),t.TgZ(104,"div",11),t._UZ(105,"ng-select",34),t.qZA(),t.qZA(),t.qZA(),t.TgZ(106,"div",8),t.TgZ(107,"div",9),t.TgZ(108,"label",10),t._uU(109),t.ALo(110,"translate"),t.qZA(),t.TgZ(111,"div",11),t.TgZ(112,"div",15),t._UZ(113,"input",35),t._UZ(114,"mat-datepicker-toggle",17),t._UZ(115,"mat-datepicker",null,36),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(117,"div",7),t.TgZ(118,"div",8),t.TgZ(119,"div",9),t.TgZ(120,"label",10),t._uU(121),t.ALo(122,"translate"),t.qZA(),t.TgZ(123,"div",11),t._UZ(124,"ng-select",37),t.qZA(),t.qZA(),t.qZA(),t.TgZ(125,"div",8),t.TgZ(126,"div",9),t.TgZ(127,"label",10),t._uU(128),t.ALo(129,"translate"),t.qZA(),t.TgZ(130,"div",11),t._UZ(131,"ng-select",38),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(132,"div",7),t.TgZ(133,"div",8),t.TgZ(134,"div",9),t.TgZ(135,"label",10),t._uU(136),t.ALo(137,"translate"),t.qZA(),t.TgZ(138,"div",11),t.TgZ(139,"ng-select",39),t.NdJ("change",function(){return t.CHM(e),t.oxw().calculateLeadQuality("state")}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(140,"div",8),t.TgZ(141,"div",9),t.TgZ(142,"label",10),t._uU(143),t.ALo(144,"translate"),t.qZA(),t.TgZ(145,"div",11),t.TgZ(146,"ng-select",40),t.NdJ("change",function(){return t.CHM(e),t.oxw().calculateLeadQuality("district")}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(147,"div",7),t.TgZ(148,"div",8),t.TgZ(149,"div",9),t.TgZ(150,"label",10),t._uU(151),t.ALo(152,"translate"),t.qZA(),t.TgZ(153,"div",11),t.TgZ(154,"ng-select",41),t.NdJ("change",function(){return t.CHM(e),t.oxw().calculateLeadQuality()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(155,"div",8),t.TgZ(156,"div",9),t.TgZ(157,"label",10),t._uU(158),t.ALo(159,"translate"),t.qZA(),t.TgZ(160,"div",11),t.TgZ(161,"div",15),t._UZ(162,"input",42),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(163,"div",7),t.TgZ(164,"div",8),t.TgZ(165,"div",9),t.TgZ(166,"label",10),t._uU(167),t.ALo(168,"translate"),t.qZA(),t.TgZ(169,"div",11),t.TgZ(170,"ng-select",43),t.NdJ("change",function(){return t.CHM(e),t.oxw().getLeadQuality()})("clear",function(){return t.CHM(e),t.oxw().clearLeadQuality()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(171,"div",8),t.TgZ(172,"div",9),t.TgZ(173,"label",10),t._uU(174),t.ALo(175,"translate"),t.qZA(),t.TgZ(176,"div",11),t._UZ(177,"input",44),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(178,"div",7),t.TgZ(179,"div",8),t.TgZ(180,"div",9),t.TgZ(181,"label",10),t._uU(182),t.ALo(183,"translate"),t.qZA(),t.TgZ(184,"div",11),t.TgZ(185,"ng-select",45),t.NdJ("change",function(){return t.CHM(e),t.oxw().calculateLeadQuality("product")})("clear",function(){return t.CHM(e),t.oxw().clear("product")}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(186,"div",8),t.TgZ(187,"div",9),t.TgZ(188,"label",10),t._uU(189),t.ALo(190,"translate"),t.qZA(),t.TgZ(191,"div",11),t._UZ(192,"input",46),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(193,"div",7),t.TgZ(194,"div",8),t.TgZ(195,"div",9),t.TgZ(196,"label",10),t._uU(197),t.ALo(198,"translate"),t.qZA(),t.TgZ(199,"div",47),t.TgZ(200,"input",48),t.NdJ("change",function(){return t.CHM(e),t.oxw().calculateLeadQuality()}),t.qZA(),t.TgZ(201,"span",49),t.NdJ("click",function(a){return t.CHM(e),t.oxw().clearDate("campaignName"),a.stopPropagation()}),t.TgZ(202,"span",50),t._uU(203,"\xd7"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(204,"div",51),t.TgZ(205,"span",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().getCampaignId()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(206,"div",8),t.TgZ(207,"div",9),t.TgZ(208,"label",10),t._uU(209),t.ALo(210,"translate"),t.qZA(),t.TgZ(211,"div",11),t._UZ(212,"ng-select",53),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(213,"div",7),t.TgZ(214,"div",8),t.TgZ(215,"div",9),t.TgZ(216,"label",10),t._uU(217),t.ALo(218,"translate"),t.qZA(),t.TgZ(219,"div",11),t._UZ(220,"input",54),t.TgZ(221,"span",49),t.NdJ("click",function(a){return t.CHM(e),t.oxw().clearDate("campaignNo"),a.stopPropagation()}),t.TgZ(222,"span",50),t._uU(223,"\xd7"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(224,"div",8),t.TgZ(225,"div",9),t.TgZ(226,"label",10),t._uU(227),t.ALo(228,"translate"),t.qZA(),t.TgZ(229,"div",11),t.YNc(230,V,1,4,"input",55),t.YNc(231,R,1,4,"input",56),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(232,"div",7),t.TgZ(233,"div",8),t.TgZ(234,"div",9),t.TgZ(235,"label",10),t._uU(236),t.ALo(237,"translate"),t.qZA(),t.TgZ(238,"div",11),t.TgZ(239,"ng-select",57),t.NdJ("change",function(){t.CHM(e);const a=t.oxw();return a.calculateScore(a.leadForm.value.sourceCode,null)})("clear",function(){return t.CHM(e),t.oxw().clear("source")}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(240,"div",8),t.TgZ(241,"div",9),t.TgZ(242,"label",10),t._uU(243),t.ALo(244,"translate"),t.qZA(),t.TgZ(245,"div",58),t._UZ(246,"input",59),t.TgZ(247,"span",49),t.NdJ("click",function(a){return t.CHM(e),t.oxw().clearDate("existingCustomerName"),a.stopPropagation()}),t.TgZ(248,"span",50),t._uU(249,"\xd7"),t.qZA(),t.qZA(),t.qZA(),t.YNc(250,k,3,0,"div",60),t.YNc(251,S,3,0,"div",60),t.qZA(),t.qZA(),t.qZA(),t.TgZ(252,"div",7),t.TgZ(253,"div",8),t.TgZ(254,"div",9),t.TgZ(255,"label",10),t._uU(256),t.ALo(257,"translate"),t.qZA(),t.TgZ(258,"div",61),t.NdJ("click",function(){return t.CHM(e),t.oxw().viewExisting("referral")}),t._UZ(259,"input",62),t.TgZ(260,"span",49),t.NdJ("click",function(a){return t.CHM(e),t.oxw().clearDate("referralCustomerName"),a.stopPropagation()}),t.TgZ(261,"span",50),t._uU(262,"\xd7"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(263,"div",8),t.TgZ(264,"div",9),t.TgZ(265,"label",10),t._uU(266),t.ALo(267,"translate"),t.qZA(),t.TgZ(268,"div",58),t._UZ(269,"input",63),t.YNc(270,Q,3,0,"span",64),t.qZA(),t.YNc(271,J,3,0,"div",60),t.YNc(272,Y,3,0,"div",60),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(273,"hr"),t.TgZ(274,"h3",65),t._uU(275),t.ALo(276,"translate"),t.qZA(),t.TgZ(277,"div",7),t.TgZ(278,"div",22),t.TgZ(279,"div",7),t.TgZ(280,"div",8),t.TgZ(281,"div",9),t.TgZ(282,"label",66),t._uU(283),t.ALo(284,"translate"),t.qZA(),t.TgZ(285,"div",47),t._UZ(286,"input",67),t.qZA(),t.qZA(),t.qZA(),t.TgZ(287,"div",8),t.TgZ(288,"div",9),t.TgZ(289,"label",66),t._uU(290),t.ALo(291,"translate"),t.qZA(),t.TgZ(292,"div",47),t._UZ(293,"input",68),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(294,"div",7),t.TgZ(295,"div",8),t.TgZ(296,"div",9),t.TgZ(297,"label",66),t._uU(298),t.ALo(299,"translate"),t.qZA(),t.TgZ(300,"div",47),t._UZ(301,"ng-select",69),t.qZA(),t.qZA(),t.qZA(),t.TgZ(302,"div",8),t.TgZ(303,"div",9),t.TgZ(304,"label",66),t._uU(305),t.ALo(306,"translate"),t.qZA(),t.TgZ(307,"div",47),t._UZ(308,"input",70),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(309,"div",7),t.TgZ(310,"div",8),t.TgZ(311,"div",9),t.TgZ(312,"label",66),t._uU(313),t.ALo(314,"translate"),t.qZA(),t.TgZ(315,"div",47),t._UZ(316,"input",71),t.qZA(),t.qZA(),t.qZA(),t.TgZ(317,"div",8),t.TgZ(318,"div",9),t.TgZ(319,"label",66),t._uU(320),t.ALo(321,"translate"),t.qZA(),t.TgZ(322,"div",47),t._UZ(323,"input",72),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(324,"div",7),t.TgZ(325,"div",8),t.TgZ(326,"div",9),t.TgZ(327,"label",66),t._uU(328),t.ALo(329,"translate"),t.qZA(),t.TgZ(330,"div",47),t._UZ(331,"input",73),t.qZA(),t.qZA(),t.qZA(),t.TgZ(332,"div",8),t.TgZ(333,"div",9),t.TgZ(334,"label",66),t._uU(335),t.ALo(336,"translate"),t.qZA(),t.TgZ(337,"div",47),t._UZ(338,"input",74),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(339,"div",7),t.TgZ(340,"div",8),t.TgZ(341,"div",9),t.TgZ(342,"label",66),t._uU(343),t.ALo(344,"translate"),t.qZA(),t.TgZ(345,"div",47),t._UZ(346,"input",75),t.qZA(),t.qZA(),t.qZA(),t.TgZ(347,"div",8),t.TgZ(348,"div",9),t.TgZ(349,"label",66),t._uU(350),t.ALo(351,"translate"),t.qZA(),t.TgZ(352,"div",47),t._UZ(353,"textarea",76),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(354,"hr"),t.qZA(),t.TgZ(355,"div",77),t.TgZ(356,"div",78),t.TgZ(357,"div",79),t.TgZ(358,"button",80),t.NdJ("click",function(){return t.CHM(e),t.oxw().updateLeadStatus("save")}),t.TgZ(359,"span",81),t._uU(360),t.ALo(361,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(362,"div",79),t.TgZ(363,"button",82),t.NdJ("click",function(){return t.CHM(e),t.oxw().updateLeadStatus("cancel")}),t.TgZ(364,"span",81),t._uU(365),t.ALo(366,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&s){const e=t.MAs(40),o=t.MAs(59),a=t.MAs(97),l=t.MAs(116),i=t.oxw();t.xp6(2),t.Q6J("formGroup",i.leadForm),t.xp6(2),t.Q6J("ngIf",!i.isPopup),t.xp6(7),t.Oqu(t.lcZ(12,192,"FORM.lead_id")),t.xp6(3),t.ekj("is-invalid",i.isControlInvalid("leadId"))("is-valid",i.isControlValid("leadId")),t.xp6(4),t.Oqu(t.lcZ(19,194,"FORM.phone_number")),t.xp6(3),t.ekj("is-invalid",i.isControlInvalid("phoneNo"))("is-valid",i.isControlValid("phoneNo")),t.xp6(5),t.Oqu(t.lcZ(27,196,"FORM.subject")),t.xp6(3),t.ekj("is-invalid",i.isControlInvalid("subject"))("is-valid",i.isControlValid("subject")),t.xp6(4),t.hij(" ",t.lcZ(34,198,"FORM.open_date"),""),t.xp6(4),t.Q6J("matDatepicker",e),t.xp6(1),t.Q6J("for",e),t.xp6(7),t.Oqu(t.lcZ(46,200,"FORM.name")),t.xp6(3),t.ekj("is-invalid",i.isControlInvalid("contactName"))("is-valid",i.isControlValid("contactName")),t.xp6(4),t.Oqu(t.lcZ(53,202,"FORM.act_date")),t.xp6(4),t.ekj("is-invalid",i.isControlInvalid("activationDate"))("is-valid",i.isControlValid("activationDate")),t.Q6J("matDatepicker",o),t.xp6(1),t.Q6J("for",o),t.xp6(7),t.Oqu(t.lcZ(65,204,"FORM.precontact")),t.xp6(19),t.Oqu(t.lcZ(84,206,"FORM.type")),t.xp6(3),t.ekj("is-invalid",i.isControlInvalid("typeCode"))("is-valid",i.isControlValid("typeCode")),t.Q6J("items",i.typeOption),t.xp6(4),t.hij(" ",t.lcZ(91,208,"FORM.close_date"),""),t.xp6(4),t.Q6J("matDatepicker",a),t.xp6(1),t.Q6J("for",a),t.xp6(7),t.Oqu(t.lcZ(103,210,"FORM.status")),t.xp6(3),t.ekj("is-invalid",i.isControlInvalid("statusCode"))("is-valid",i.isControlValid("statusCode")),t.Q6J("readonly",!0)("items",i.statusOption),t.xp6(4),t.Oqu(t.lcZ(110,212,"FORM.exp_date")),t.xp6(4),t.Q6J("matDatepicker",l),t.xp6(1),t.Q6J("for",l),t.xp6(7),t.Oqu(t.lcZ(122,214,"FORM.occupation")),t.xp6(3),t.ekj("is-invalid",i.isControlInvalid("occupationCode"))("is-valid",i.isControlValid("occupationCode")),t.Q6J("items",i.occupationOption),t.xp6(4),t.Oqu(t.lcZ(129,216,"FORM.company")),t.xp6(3),t.ekj("is-invalid",i.isControlInvalid("companyCode"))("is-valid",i.isControlValid("companyCode")),t.Q6J("items",i.companyOption),t.xp6(5),t.Oqu(t.lcZ(137,218,"FORM.state")),t.xp6(3),t.ekj("is-invalid",i.isControlInvalid("stateCode"))("is-valid",i.isControlValid("stateCode")),t.Q6J("items",i.stateOption),t.xp6(4),t.Oqu(t.lcZ(144,220,"FORM.district")),t.xp6(3),t.ekj("is-invalid",i.isControlInvalid("districtCode"))("is-valid",i.isControlValid("districtCode")),t.Q6J("items",i.distinctOption),t.xp6(5),t.Oqu(t.lcZ(152,222,"FORM.township")),t.xp6(3),t.ekj("is-invalid",i.isControlInvalid("townshipCode"))("is-valid",i.isControlValid("townshipCode")),t.Q6J("items",i.townshipOption),t.xp6(4),t.Oqu(t.lcZ(159,224,"FORM.validity_period")),t.xp6(4),t.ekj("is-invalid",i.isControlInvalid("validityPeriod"))("is-valid",i.isControlValid("validityPeriod")),t.xp6(5),t.Oqu(t.lcZ(168,226,"FORM.distribution_channel")),t.xp6(3),t.ekj("is-invalid",i.isControlInvalid("channelCode"))("is-valid",i.isControlValid("channelCode")),t.Q6J("items",i.channelOption),t.xp6(4),t.Oqu(t.lcZ(175,228,"FORM.assign_to")),t.xp6(3),t.ekj("is-invalid",i.isControlInvalid("assignTo"))("is-valid",i.isControlValid("assignTo")),t.xp6(5),t.Oqu(t.lcZ(183,230,"FORM.product")),t.xp6(3),t.ekj("is-invalid",i.isControlInvalid("productId"))("is-valid",i.isControlValid("productId")),t.Q6J("items",i.productOption2),t.xp6(4),t.Oqu(t.lcZ(190,232,"FORM.email")),t.xp6(3),t.ekj("is-invalid",i.isControlInvalid("email"))("is-valid",i.isControlValid("email")),t.xp6(5),t.Oqu(t.lcZ(198,234,"FORM.campaign_name")),t.xp6(12),t.Oqu(t.lcZ(210,236,"FORM.identity_type")),t.xp6(3),t.ekj("is-invalid",i.isControlInvalid("identityType"))("is-valid",i.isControlValid("identityType")),t.Q6J("items",i.identityTypeOption),t.xp6(5),t.Oqu(t.lcZ(218,238,"FORM.campaign_id")),t.xp6(3),t.ekj("is-invalid",i.isControlInvalid("campaignNo"))("is-valid",i.isControlValid("campaignNo")),t.xp6(7),t.Oqu(t.lcZ(228,240,"FORM.nrc_frc_passport")),t.xp6(3),t.Q6J("ngIf","NRC"==i.leadForm.get("identityType").value),t.xp6(1),t.Q6J("ngIf","NRC"!=i.leadForm.get("identityType").value),t.xp6(5),t.Oqu(t.lcZ(237,242,"FORM.source")),t.xp6(3),t.ekj("is-invalid",i.isControlInvalid("sourceCode"))("is-valid",i.isControlValid("sourceCode")),t.Q6J("items",i.sourceOption),t.xp6(4),t.Oqu(t.lcZ(244,244,"FORM.existing_customer")),t.xp6(7),t.Q6J("ngIf",!i.isAddProspect),t.xp6(1),t.Q6J("ngIf",!i.isAddProspect),t.xp6(5),t.Oqu(t.lcZ(257,246,"FORM.referral_customer")),t.xp6(3),t.ekj("is-invalid",i.isControlInvalid("referralCustomerName"))("is-valid",i.isControlValid("referralCustomerName")),t.xp6(7),t.Oqu(t.lcZ(267,248,"FORM.existing_prospect")),t.xp6(4),t.Q6J("ngIf",!i.isAddProspect),t.xp6(1),t.Q6J("ngIf",!i.isAddProspect),t.xp6(1),t.Q6J("ngIf",!i.isAddProspect),t.xp6(3),t.Oqu(t.lcZ(276,250,"FORM.more_detail")),t.xp6(8),t.Oqu(t.lcZ(284,252,"FORM.estimate_m_income")),t.xp6(3),t.ekj("is-invalid",i.isControlInvalid("estimatedMonthlyIncome"))("is-valid",i.isControlValid("estimatedMonthlyIncome")),t.xp6(4),t.Oqu(t.lcZ(291,254,"FORM.facebook_acc")),t.xp6(3),t.ekj("is-invalid",i.isControlInvalid("facebookAcc"))("is-valid",i.isControlValid("facebookAcc")),t.xp6(5),t.Oqu(t.lcZ(299,256,"FORM.marital_status")),t.xp6(3),t.ekj("is-invalid",i.isControlInvalid("maritalStatus"))("is-valid",i.isControlValid("maritalStatus")),t.Q6J("items",i.maritalOption),t.xp6(4),t.Oqu(t.lcZ(306,258,"FORM.no_childern")),t.xp6(3),t.ekj("is-invalid",i.isControlInvalid("noOfChildren"))("is-valid",i.isControlValid("noOfChildren")),t.xp6(5),t.Oqu(t.lcZ(314,260,"FORM.asset")),t.xp6(3),t.ekj("is-invalid",i.isControlInvalid("assets"))("is-valid",i.isControlValid("assets")),t.xp6(4),t.Oqu(t.lcZ(321,262,"FORM.score")),t.xp6(3),t.ekj("is-invalid",i.isControlInvalid("score"))("is-valid",i.isControlValid("score")),t.xp6(5),t.Oqu(t.lcZ(329,264,"FORM.existing_insurance_plan")),t.xp6(3),t.ekj("is-invalid",i.isControlInvalid("existingInsurancePlan"))("is-valid",i.isControlValid("existingInsurancePlan")),t.xp6(4),t.Oqu(t.lcZ(336,266,"FORM.existing_insurance_coverage")),t.xp6(3),t.ekj("is-invalid",i.isControlInvalid("existingInsuranceCoverage"))("is-valid",i.isControlValid("existingInsuranceCoverage")),t.xp6(5),t.Oqu(t.lcZ(344,268,"FORM.financial_plan")),t.xp6(3),t.ekj("is-invalid",i.isControlInvalid("financialPlan"))("is-valid",i.isControlValid("financialPlan")),t.xp6(4),t.Oqu(t.lcZ(351,270,"FORM.reject_reason")),t.xp6(10),t.Oqu(t.lcZ(361,272,"FORM.btn_save")),t.xp6(5),t.Oqu(t.lcZ(366,274,"FORM.btn_cancel"))}}let j=(()=>{class s{constructor(e,o,a,l,i,y,W,K,H,z,G){this.modal=e,this.location=o,this.masterDataService=a,this.LeadDetailService=l,this.cdf=i,this.modalService=y,this.router=W,this.alertService=K,this.productService=H,this.authService=z,this.ngZone=G,this.isPopup=!1,this.disabled=!0,this.product=[],this.channelOption=[],this.typeOption=[],this.stateOption=[],this.statusOption=[],this.distinctOption=[],this.townshipOption=[],this.assignToOption=[],this.productOption=[],this.productOption2=[],this.campaignNameOption=[],this.companyOption=[],this.sourceOption=[],this.existingOption=[],this.martialOption=[],this.occupationOption=[],this.isExisting=!1,this.isProspectCustomer=!1,this.isAddProspect=!1,this.statusCode=0,this.maritalOption=[{code:"SINGLE",value:"Single"},{code:"MARRIED",value:"Married"},{code:"WIDOWER",value:"Widower"},{code:"DIVORCED",value:"Divorced"}],this.identityTypeOption=T.Mf,this.reason="",this.status="",this.config={type:"user",name:"identityNumber"},this.sourceScore=0,this.qualityScore=0,this.score=0,this.isValidWin=!1,this.leadQuality=[],this.Quality={Q10:"campaignName",Q06:"channelCode",Q03:"phoneNo",Q07:"typeCode",Q04:"stateCode",Q13:"districtCode",Q05:"townshipCode",Q08:"productId"},this.leadType={"01":"GENERAL","02":"LIFE"},this.user=new g.T_,this.leadAccess=_.w,this.activityAccess=_.w,this.policyAccess=_.w,this.quoAccess=_.w,this.attachAccess=_.w,this.fnaAccess=_.w}ngOnInit(){this.loadForm()}ngAfterViewInit(){this.user=this.authService.currentUserValue,this.getMaster(),this.getProduct(),this.leadForm.controls.openedDate.setValue(new Date),this.leadForm.controls.statusCode.setValue("02"),this.leadForm.controls.assignTo.setValue(this.user.username)}loadForm(){this.leadForm=new n.cw({leadId:new n.NI({value:null,disabled:!0}),phoneNo:new n.NI(null),subject:new n.NI(null),openedDate:new n.NI(null,n.kI.required),companyCode:new n.NI(null,n.kI.required),PCsms:new n.NI(null),PCemail:new n.NI(null),PCphone:new n.NI(null),contactName:new n.NI(null,n.kI.required),activationDate:new n.NI(null,n.kI.required),channelCode:new n.NI(null),occupationCode:new n.NI(null),closedDate:new n.NI({value:null,disabled:!0}),typeCode:new n.NI(null),stateCode:new n.NI(null),expirationDate:new n.NI(null),statusCode:new n.NI({value:null,disabled:!0},n.kI.required),districtCode:new n.NI(null),validityPeriod:new n.NI({value:null,disabled:!0}),reason:new n.NI(null),townshipCode:new n.NI(null),assignTo:new n.NI({value:null,disabled:!0}),productId:new n.NI(null),email:new n.NI(null),campaignName:new n.NI(null),identityType:new n.NI(null),sourceCode:new n.NI(null,n.kI.required),campaignNo:new n.NI(null),identityNumber:new n.NI(null),existingCustomerName:new n.NI({value:null,disabled:!0}),existingCustomerId:new n.NI(null),referralCustomerName:new n.NI(null),referralCustomerId:new n.NI(null),estimatedMonthlyIncome:new n.NI(null),facebookAcc:new n.NI(null),maritalStatus:new n.NI(null),financialPlan:new n.NI(null),noOfChildren:new n.NI(null),existingInsuranceCoverage:new n.NI(null),existingInsurancePlan:new n.NI(null),score:new n.NI({value:null,disabled:!0}),assets:new n.NI(null),prospectCustomer:new n.NI({value:null,disabled:!0}),prospectCustomerId:new n.NI(null),lostReason:new n.NI(null)})}getMaster(){(0,f.D)([this.getChannel(),this.getType(),this.getOccupation(),this.getStatus(),this.getState(),this.getSource(),this.getCompany()]).toPromise().then(e=>{e&&(this.channelOption=e[0],this.typeOption=e[1],this.occupationOption=e[2],this.statusOption=e[3],this.stateOption=e[4],this.sourceOption=e[5],this.companyOption=e[6],this.cdf.detectChanges())})}onChangeState(){this.distinctOption=[],this.townshipOption=[],this.leadForm.controls.districtCode.setValue(""),this.leadForm.controls.townshipCode.setValue(""),this.getDistrict(this.leadForm.controls.stateCode.value),this.cdf.detectChanges()}onChangeDistrict(){this.leadForm.controls.townshipCode.setValue(""),""==this.leadForm.controls.stateCode.value?this.townshipOption=[]:this.getTownship(this.leadForm.controls.districtCode.value),this.cdf.detectChanges()}ngOnDestroy(){this.score=0,this.sourceScore=0}getCompany(){return this.masterDataService.getDataByType("COMPANY_TYPE").pipe((0,d.U)(e=>this.getFormatOpt(e)),(0,m.K)(e=>(0,u.of)([])))}getState(){return this.masterDataService.getDataByType("PT_STATE",!0).pipe((0,d.U)(e=>this.getFormatOpt(e)),(0,m.K)(e=>(0,u.of)([])))}getChannel(){return this.masterDataService.getDataByType("LEAD_DISTRIBUTION_CHANNEL").pipe((0,d.U)(e=>this.getFormatOpt(e)),(0,m.K)(e=>(0,u.of)([])))}getType(){return this.masterDataService.getDataByType("LEAD_TYPE").pipe((0,d.U)(e=>this.getFormatOpt(e)),(0,m.K)(e=>(0,u.of)([])))}getStatus(){return this.masterDataService.getDataByType("LEAD_STATUS").pipe((0,d.U)(e=>this.getFormatOpt(e)),(0,m.K)(e=>(0,u.of)([])))}getSource(){return this.masterDataService.getDataByType("LEAD_SOURCE").pipe((0,d.U)(e=>this.getFormatOpt(e)),(0,m.K)(e=>(0,u.of)([])))}getOccupation(){return this.masterDataService.getDataByType("OCCUPATION").pipe((0,d.U)(e=>this.getFormatOpt(e)),(0,m.K)(e=>(0,u.of)([])))}getProduct(){this.productService.getAll("all").toPromise().then(e=>{e&&(this.product=e,this.productOption=e.map(o=>({code:o.id,value:o.name,type:o.type})),this.cdf.detectChanges(),this.getProductOption())})}getLeadQuality(){let e=this.leadForm.getRawValue().channelCode;e&&this.LeadDetailService.getLeadQuality(e).toPromise().then(o=>{o&&(this.leadQuality=o,this.calculateLeadQuality(),this.getValidityPeriod())})}clearLeadQuality(){this.leadQuality=[],this.leadForm.controls.score.setValue(0)}getDistrict(e){this.masterDataService.getAddressDataByType("PT_DISTRICT",e).toPromise().then(o=>{o&&(this.distinctOption=o.map(a=>({code:a.codeId,value:a.codeValue})),this.cdf.detectChanges())})}getTownship(e){e&&this.masterDataService.getAddressDataByType("PT_TOWNSHIP",e).toPromise().then(o=>{o&&(this.townshipOption=o.map(a=>({code:a.codeId,value:a.codeValue})),this.cdf.detectChanges())})}getValidityPeriod(){let e=this.leadForm.getRawValue().sourceCode,o=this.leadForm.getRawValue().productId;e&&o&&this.LeadDetailService.getValidityPeriod(e,o).toPromise().then(a=>{this.leadForm.controls.validityPeriod.setValue(null!=a.period?a.period:0)})}actActionBtn(e){"edit"==e.cmd&&this.router.navigate(["/activity/activity-management-detail"],{queryParams:{pageStatus:"edit",pageId:e.data.activityNo}})}calculateScore(e,o){if(e){let a;if(o)a=o;else{let i=this.sourceOption.find(y=>y.code==e);a=i.code?i.code:null}let l=this.leadForm.getRawValue().channelCode;a&&l&&this.LeadDetailService.getLeadScore(a,l).toPromise().then(i=>{this.sourceScore=i,this.calculateLeadQuality(),this.getValidityPeriod()})}}clear(e){("source"==e||"product"==e)&&this.leadForm.controls.validityPeriod.setValue(0)}calculateLeadQuality(e){this.score=0,"typeCode"==e&&this.getProductOption(),"product"==e&&this.getValidityPeriod(),"state"==e&&this.onChangeState(),"district"==e&&this.onChangeDistrict(),this.leadQuality.forEach(o=>{let a=o.qualityValue.toLowerCase();o.qualityValue="type"==a||"township"==a||"channel"==a||"district"==a||"state"==a?a+"Code":"product"==a?a+"Id":"phone no."==a?"phoneNo":"campaign name"==a?"campaignName":o.qualityValue;let l=this.leadForm.getRawValue()[this.Quality[o.qualityCode]];this.score+=l?o.score:0}),0!=this.sourceScore&&(this.score+=this.sourceScore),this.leadForm.controls.score.setValue(this.score)}updateLeadStatus(e){return(0,C.mG)(this,void 0,void 0,function*(){"save"==e?this.createLead():this.ngZone.run(()=>{this.location.back()})})}viewCampaignList(){let e;e=this.modalService.open(x.I,{size:"xl",backdrop:!1}),e.componentInstance.isPopup=!0,e.result.then(()=>{},o=>{if(o&&"save"==o.type){let a=o.data;this.leadForm.controls.campaignName.setValue(a.cpmName),this.leadForm.controls.campaignNo.setValue(a.cpmNumber),this.calculateLeadQuality()}})}checkExisting(e){if(null==this.leadForm.controls.phoneNo.value&&null==this.leadForm.controls.email.value&&null==this.leadForm.controls.identityType.value)return this.alertService.activate("Did not find any existing customer profile related to Identity type, email and phone number.","No found existing customer profile"),!0;let o={phoneNo:this.leadForm.controls.phoneNo.value?this.leadForm.controls.phoneNo.value:"",email:this.leadForm.controls.email.value?this.leadForm.controls.email.value:"",identityType:this.leadForm.controls.identityType.value?this.leadForm.controls.identityType.value:"",identityNumber:this.leadForm.controls.identityNumber.value?this.leadForm.controls.identityNumber.value:""};"customer"==e?this.LeadDetailService.checkExistingCustomer(o).toPromise().then(a=>{a.customerId?(this.leadForm.controls.existingCustomerName.setValue((a.firstName?a.firstName:"")+" "+(a.middleName?a.middleName:"")+" "+(a.lastName?a.lastName:"")),this.leadForm.controls.existingCustomerId.setValue(a.customerId)):this.alertService.activate(a.title,"Warning Message")}):this.LeadDetailService.checkExistingProspect(o).toPromise().then(a=>{a.customerId?(this.leadForm.controls.prospectCustomer.setValue(a.firstName+" "+a.middleName+" "+a.lastName),this.leadForm.controls.prospectCustomerId.setValue(a.customerId)):this.alertService.activate(a.title,"Warning Message")})}viewExisting(e){if("referral"==e){let o;o=this.modalService.open(v.b,{size:"xl",backdrop:!1}),o.componentInstance.isPopup=!0,o.componentInstance.party=!0,o.result.then(()=>{},a=>{if(a&&"save"==a.type){let l=a.data;"referral"==e&&(this.leadForm.controls.referralCustomerName.setValue((l.firstName||"")+" "+(l.middleName||"")+" "+(l.lastName||"")),this.leadForm.controls.referralCustomerId.setValue(l.customerId))}})}else if(!this.isExisting&&!this.isAddProspect){let o;o=this.modalService.open(v.b,{size:"xl",backdrop:!1}),o.componentInstance.isPopup=!0,o.componentInstance.party="prospect"!=e,o.result.then(()=>{},a=>{if(a&&"save"==a.type){let l=a.data;"referral"==e?(this.leadForm.controls.referralCustomerName.setValue((l.firstName||"")+" "+(l.middleName||"")+" "+(l.lastName||"")),this.leadForm.controls.referralCustomerId.setValue(l.customerId)):"prospect"==e?(this.leadForm.controls.existingCustomerName.setValue(""),this.leadForm.controls.existingCustomerId.setValue(""),this.leadForm.controls.prospectCustomer.setValue((l.firstName||"")+" "+(l.middleName||"")+" "+(l.lastName||"")),this.leadForm.controls.prospectCustomerId.setValue(l.customerId),this.prospCustomer={customerId:l.customerId,customerName:l.firstName+" "+l.middleName+" "+l.lastName,customerDob:l.dateOfBirth}):(this.existingCustomer={customerId:l.customerId,customerName:l.firstName+" "+l.middleName+" "+l.lastName,customerDob:l.dateOfBirth},this.leadForm.controls.prospectCustomer.setValue(""),this.leadForm.controls.prospectCustomerId.setValue(""),this.leadForm.controls.existingCustomerName.setValue((l.firstName||"")+" "+(l.middleName||"")+" "+(l.lastName||"")),this.leadForm.controls.existingCustomerId.setValue(l.customerId))}})}}openNRCModal(){let e;e=this.modalService.open(A.V,{size:"xl",backdrop:!1}),e.componentInstance.config=this.config,e.componentInstance.group=this.leadForm}backLocation(){this.loadForm()}clearDate(e){if(this.isExisting)return!1;"existingCustomerName"==e&&(this.leadForm.controls[e].setValue(null),this.leadForm.controls.existingCustomerId.setValue(null)),"referralCustomerName"==e&&(this.leadForm.controls[e].setValue(null),this.leadForm.controls.referralCustomerId.setValue(null)),("campaignName"==e||"campaignNo"==e)&&(this.leadForm.controls.campaignName.setValue(null),this.leadForm.controls.campaignNo.setValue(null)),"prospectCustomer"==e&&(this.leadForm.controls.prospectCustomer.setValue(null),this.leadForm.controls.prospectCustomerId.setValue(null),this.isAddProspect=!1)}createLead(){if(this.leadForm.invalid)return(0,N.w)(this.leadForm),!0;if(null==this.leadForm.controls.existingCustomerId.value)return this.alertService.activate("Please check Existing Customer before you save.","Message"),!0;let e=this.leadForm.getRawValue();e.contact=[],e.PCsms&&e.contact.push("sms"),e.PCemail&&e.contact.push("email"),e.PCphone&&e.contact.push("phone"),e.contact=e.contact.join(",");let o="";this.leadForm.controls.productId.value&&(o=this.product.find(i=>i.id==this.leadForm.controls.productId.value).code);let a={activationDate:this.leadForm.controls.activationDate.value?this.convertDateFormatDDMMYYY(this.leadForm.controls.activationDate.value):"",activationDateStr:this.leadForm.controls.activationDate.value?this.convertDateFormatDDMMYYY(this.leadForm.controls.activationDate.value):"",assets:this.leadForm.controls.assets.value?this.leadForm.controls.assets.value:"",assignTo:this.user.id,campaignName:this.leadForm.controls.campaignName.value?this.leadForm.controls.campaignName.value:"",campaignNo:this.leadForm.controls.campaignNo.value?this.leadForm.controls.campaignNo.value:"",channelCode:this.leadForm.controls.channelCode.value?this.leadForm.controls.channelCode.value:"",closedDate:this.leadForm.controls.closedDate.value?this.convertDateFormatDDMMYYY(this.leadForm.controls.closedDate.value):"",closedDateStr:this.leadForm.controls.closedDate.value?this.convertDateFormatDDMMYYY(this.leadForm.controls.closedDate.value):"",companyCode:this.leadForm.controls.companyCode.value?this.leadForm.controls.companyCode.value:"",contact:e.contact,contactName:this.leadForm.controls.contactName.value?this.leadForm.controls.contactName.value:"",customerPlan:"",description:"",districtCode:this.leadForm.controls.districtCode.value?this.leadForm.controls.districtCode.value:"",dueDate:"",dueDateStr:"",email:this.leadForm.controls.email.value?this.leadForm.controls.email.value:"",existingInsuranceCoverage:this.leadForm.controls.existingInsuranceCoverage.value?this.leadForm.controls.existingInsuranceCoverage.value:"",existingInsurancePlan:this.leadForm.controls.existingInsurancePlan.value?this.leadForm.controls.existingInsurancePlan.value:"",expirationDate:this.leadForm.controls.expirationDate.value?this.convertDateFormatDDMMYYY(this.leadForm.controls.expirationDate.value):"",expirationDateStr:this.leadForm.controls.expirationDate.value?this.convertDateFormatDDMMYYY(this.leadForm.controls.expirationDate.value):"",facebookAcc:this.leadForm.controls.facebookAcc.value?this.leadForm.controls.facebookAcc.value:"",financialPlan:this.leadForm.controls.financialPlan.value?this.leadForm.controls.financialPlan.value:"",frc:"",identityNumber:this.leadForm.controls.identityNumber.value?this.leadForm.controls.identityNumber.value:"",identityType:this.leadForm.controls.identityType.value?this.leadForm.controls.identityType.value:"",leadId:"",lostReason:"",maritalStatus:this.leadForm.controls.maritalStatus.value?this.leadForm.controls.maritalStatus.value:"",estimatedMonthlyIncome:this.leadForm.controls.estimatedMonthlyIncome.value?this.leadForm.controls.estimatedMonthlyIncome.value:"",name:"",nrcRegionCode:"",nrcTownshipCode:"",nrcTypeCode:"",noOfChildren:""+(this.leadForm.controls.noOfChildren.value?this.leadForm.controls.noOfChildren.value:""),occupationCode:this.leadForm.controls.occupationCode.value?this.leadForm.controls.occupationCode.value:"",openedDate:this.leadForm.controls.openedDate.value?this.convertDateFormatDDMMYYY(this.leadForm.controls.openedDate.value):"",openedDateStr:this.leadForm.controls.openedDate.value?this.convertDateFormatDDMMYYY(this.leadForm.controls.openedDate.value):"",operationDate:"",operationDateStr:"",others:"",ownerId:0,passport:"",phoneNo:this.leadForm.controls.phoneNo.value?this.leadForm.controls.phoneNo.value:"",productCode:o,productId:this.leadForm.controls.productId.value?this.leadForm.controls.productId.value:"",productName:"",reason:"",referralCustomerId:this.leadForm.controls.referralCustomerId.value?this.leadForm.controls.referralCustomerId.value:0,remark:"",score:this.leadForm.controls.score.value?this.leadForm.controls.score.value:"",sourceCode:this.leadForm.controls.sourceCode.value?this.leadForm.controls.sourceCode.value:"",startDate:"",startDateStr:"",stateCode:this.leadForm.controls.stateCode.value?this.leadForm.controls.stateCode.value:"",statusCode:"02",subTypeCode:"",subject:this.leadForm.controls.subject.value?this.leadForm.controls.subject.value:"",townshipCode:this.leadForm.controls.townshipCode.value?this.leadForm.controls.townshipCode.value:"",typeCode:this.leadForm.controls.typeCode.value?this.leadForm.controls.typeCode.value:"",validityPeriod:this.leadForm.controls.validityPeriod.value?this.leadForm.controls.validityPeriod.value:0};this.leadForm.controls.existingCustomerId.value&&(a.existingCustomerId=this.leadForm.controls.existingCustomerId.value),this.leadForm.controls.prospectCustomerId.value&&(a.prospectCustomerId=this.leadForm.controls.prospectCustomerId.value),console.log("PostData: ",a),this.LeadDetailService.createLead(a).toPromise().then(l=>{l&&(this.alertService.activate("This record was created","Success Message"),this.location.back())})}getProductOption(){let o=(this.productOption||[]).filter(l=>l.type==this.leadType[this.leadForm.getRawValue().typeCode]);o.findIndex(l=>l.code==this.leadForm.controls.productId.value)<0&&this.leadForm.controls.productId.value&&o.length>0&&this.leadForm.controls.productId.setValue(""),this.productOption2=o||[]}getFormatOpt(e){return e.map(o=>({code:o.codeId,value:o.codeName||o.codeValue}))}getCampaignId(){let o,e=this.leadForm.controls.campaignName.value;e&&this.LeadDetailService.getCampaignIdByName(e).toPromise().then(a=>{o=a.length>0?a[0].cpmNumber:"",this.leadForm.controls.campaignNo.setValue(o)})}isControlValid(e){const o=this.leadForm.controls[e];return o.valid&&(o.dirty||o.touched)}isControlInvalid(e){const o=this.leadForm.controls[e];return o.invalid&&(o.dirty||o.touched)}controlHasError(e,o){const a=this.leadForm.controls[o];return a.hasError(e)&&(a.dirty||a.touched)}isControlTouched(e){const o=this.leadForm.controls[e];return o.dirty||o.touched}convertDateFormatMMDDYYY(e){var o=new Date(e),a=String(o.getDate()).padStart(2,"0");return String(o.getMonth()+1).padStart(2,"0")+"/"+a+"/"+o.getFullYear()}convertDateFormatDDMMYYY(e){var o=new Date(e);return String(o.getDate()).padStart(2,"0")+"/"+String(o.getMonth()+1).padStart(2,"0")+"/"+o.getFullYear()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(Z.Kz),t.Y36(p.Ye),t.Y36(O.D),t.Y36(q.W),t.Y36(t.sBO),t.Y36(Z.FF),t.Y36(M.F0),t.Y36(D.c),t.Y36(P.f),t.Y36(g.e8),t.Y36(t.R0b))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-lead-new"]],decls:1,vars:1,consts:[["class","row",4,"ngIf"],[1,"row"],[1,"col-12"],["action","#",1,"form",3,"formGroup","ngSubmit"],[1,"card","card-custom","gutter-b"],["class","card-header",4,"ngIf"],[1,"card-body","px-10","py-3"],[1,"row",2,"align-items","center"],[1,"col-sm-6"],[1,"form-group","row"],[1,"col-sm-4","col-form-label"],[1,"col-sm-8"],["type","text","name","leadId","autocomplete","off","formControlName","leadId",1,"form-control","form-control-sm"],["type","text","name","phoneNo","autocomplete","off","formControlName","phoneNo",1,"form-control","form-control-sm",3,"change"],["type","text","name","subject","autocomplete","off","formControlName","subject",1,"form-control","form-control-sm"],[1,"input-group"],["matInput","","formControlName","openedDate",1,"form-control-sm","date-input",2,"width","100%",3,"matDatepicker"],["matSuffix","",3,"for"],["openDate",""],["type","text","name","contactName","autocomplete","off","formControlName","contactName",1,"form-control","form-control-sm"],["matInput","","formControlName","activationDate",1,"form-control-sm","date-input",2,"width","100%",3,"matDatepicker"],["activationDate",""],[1,"col-sm-12"],[1,"col-sm-2","col-form-label"],[1,"col-sm-10","checkgroup"],[1,"check-input"],[1,"col-form-label"],["type","checkbox","formControlName","PCsms"],["type","checkbox","formControlName","PCemail"],["type","checkbox","formControlName","PCphone"],["bindLabel","value","bindValue","code","formControlName","typeCode",1,"ng-custom-select",3,"items","change"],["matInput","","formControlName","closedDate","readonly","",1,"form-control-sm","date-input",2,"width","100%",3,"matDatepicker"],["disabled","true"],["closeDate",""],["bindLabel","value","bindValue","code","formControlName","statusCode",1,"ng-custom-select",3,"readonly","items"],["matInput","","formControlName","expirationDate",1,"form-control-sm","date-input",2,"width","100%",3,"matDatepicker"],["expDate",""],["bindLabel","value","bindValue","code","formControlName","occupationCode",1,"ng-custom-select",3,"items"],["bindLabel","value","bindValue","code","formControlName","companyCode",1,"ng-custom-select",3,"items"],["bindLabel","value","bindValue","code","formControlName","stateCode",1,"ng-custom-select",3,"items","change"],["bindLabel","value","bindValue","code","formControlName","districtCode",1,"ng-custom-select",3,"items","change"],["bindLabel","value","bindValue","code","formControlName","townshipCode",1,"ng-custom-select",3,"items","change"],["type","text","readonly","","name","validityPeriod","autocomplete","off","formControlName","validityPeriod",1,"form-control","form-control-sm"],["bindLabel","value","bindValue","code","formControlName","channelCode",1,"ng-custom-select",3,"items","change","clear"],["type","text","readonly","","name","assignTo","autocomplete","off","formControlName","assignTo",1,"form-control","form-control-sm"],["bindLabel","value","bindValue","code","formControlName","productId",1,"ng-custom-select",3,"items","change","clear"],["type","text","name","email","autocomplete","off","formControlName","email",1,"form-control","form-control-sm"],[1,"col-sm-7"],["type","text","name","campaignName","autocomplete","off","formControlName","campaignName",1,"form-control","form-control-sm",3,"change"],["title","Clear all",1,"ng-clear-wrapper",3,"click"],["aria-hidden","true",1,"ng-clear"],[1,"col-sm-1"],[1,"flaticon2-magnifier-tool","search-tool",3,"click"],["bindLabel","value","bindValue","code","formControlName","identityType",1,"ng-custom-select",3,"items"],["type","text","name","campaignNo","autocomplete","off","formControlName","campaignNo",1,"form-control","form-control-sm"],["type","text","class","form-control form-control-sm ","name","identityNumber","autocomplete","off","formControlName","identityNumber","readonly","",3,"is-invalid","is-valid","click",4,"ngIf"],["type","text","class","form-control form-control-sm ","name","identityNumber","autocomplete","off","formControlName","identityNumber",3,"is-invalid","is-valid",4,"ngIf"],["bindLabel","value","bindValue","code","formControlName","sourceCode",1,"ng-custom-select",3,"items","change","clear"],[1,"col-sm-5"],["type","text","name","existingCustomerName","autocomplete","off","readonly","","formControlName","existingCustomerName",1,"form-control","form-control-sm"],["class","col-sm-1",4,"ngIf"],[1,"col-sm-8",3,"click"],["type","text","name","referralCustomerName","readonly","","autocomplete","off","readonly","","formControlName","referralCustomerName",1,"form-control","form-control-sm"],["type","text","readonly","","name","prospectCustomer","autocomplete","off","formControlName","prospectCustomer",1,"form-control","form-control-sm"],["class","ng-clear-wrapper","title","Clear all",3,"click",4,"ngIf"],[1,"card-label","left-border-image"],[1,"col-sm-5","col-form-label"],["type","text","name","estimatedMonthlyIncome","autocomplete","off","formControlName","estimatedMonthlyIncome",1,"form-control","form-control-sm"],["type","text","name","facebookAcc","autocomplete","off","formControlName","facebookAcc",1,"form-control","form-control-sm"],["bindLabel","value","bindValue","code","formControlName","maritalStatus",1,"ng-custom-select",3,"items"],["type","number","name","noOfChildren","autocomplete","off","formControlName","noOfChildren",1,"form-control","form-control-sm"],["type","text","name","assets","autocomplete","off","formControlName","assets",1,"form-control","form-control-sm"],["type","text","name","score","autocomplete","off","formControlName","score","readonly","",1,"form-control","form-control-sm"],["type","text","name","existingInsurancePlan","autocomplete","off","formControlName","existingInsurancePlan",1,"form-control","form-control-sm"],["type","text","name","existingInsuranceCoverage","autocomplete","off","formControlName","existingInsuranceCoverage",1,"form-control","form-control-sm"],["type","text","name","financialPlan","autocomplete","off","formControlName","financialPlan",1,"form-control","form-control-sm"],["type","text","readonly","","name","reason","autocomplete","off","formControlName","reason",1,"form-control","form-control-sm"],[1,"mt-2"],[1,"row",2,"align-items","center","justify-content","flex-end"],[1,"col-sm-2"],["type","button",1,"btn","btn-sm","btn-primary","ml-2",2,"width","100%",3,"click"],[1,""],["type","button",1,"btn","btn-sm","btn-secondary","ml-2",2,"width","100%",3,"click"],[1,"card-header"],[1,"card-title"],["type","text","name","identityNumber","autocomplete","off","formControlName","identityNumber","readonly","",1,"form-control","form-control-sm",3,"click"],["type","text","name","identityNumber","autocomplete","off","formControlName","identityNumber",1,"form-control","form-control-sm"],["title","Edit Form Page",1,"btn","btn-primary","btn-cus","btn-sm","mx-1",3,"click"],[1,"flaticon2-check-mark"],[1,"flaticon2-user"],["title","Edit Form Page","readonly","leadForm.value.existingCustomerName",1,"btn","btn-primary","btn-cus","btn-sm","mx-1",3,"click"]],template:function(e,o){1&e&&t.YNc(0,B,367,276,"div",0),2&e&&t.Q6J("ngIf",o.leadForm)},directives:[p.O5,n._Y,n.JL,n.sg,n.Fj,n.JJ,n.u,b.Nt,I.hl,I.nW,L.R9,I.Mq,n.Wl,E.w9,n.wV],pipes:[w.X],styles:[".input-group[_ngcontent-%COMP%]   .form-control-sm[_ngcontent-%COMP%]{background-color:#fff;background-clip:padding-box;border:1px solid #E4E6EF;padding:0px .75rem}.input-group[_ngcontent-%COMP%]   .mat-datepicker-toggle[_ngcontent-%COMP%]{position:absolute;right:5px;top:-2px}.readonly[_ngcontent-%COMP%]{background-color:#9c9999!important;color:#fff}.tab[_ngcontent-%COMP%]{overflow:hidden;border:1px solid #ccc;background-color:#f1f1f1}.tab[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:inherit;float:left;border:none;outline:none;cursor:pointer;padding:14px 16px;transition:.3s}.tab[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#ddd}.tab[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:#ccc}.icon[_ngcontent-%COMP%]{position:relative;border:none;margin:0;font-size:1.5rem;background-color:transparent}.add[_ngcontent-%COMP%]{top:-11px;position:relative;border:none;background:#f2f2f2;margin:0}.add[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;top:-52px;right:78px;width:110px}h2[_ngcontent-%COMP%]{font-size:13px;color:#005ca2;background:#F2F2F2;border:none;cursor:pointer;position:relative;margin-top:24px;padding:12px 24px 1px}h2[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;right:14px;top:5px}h2[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:6px;height:12px;float:left}h2[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;padding-left:18px}.btn-box[_ngcontent-%COMP%]{text-align:end}.btn-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;width:127%;height:100%;opacity:0}.checkgroup[_ngcontent-%COMP%], .check-input[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.ng-clear-wrapper[_ngcontent-%COMP%]   .ng-clear[_ngcontent-%COMP%]{cursor:pointer;position:absolute;right:2rem;top:.3rem;font-size:1.2rem;color:#999}.ng-clear-wrapper[_ngcontent-%COMP%]   .ng-clear[_ngcontent-%COMP%]:hover{color:#d0021b}"]}),s})()}}]);