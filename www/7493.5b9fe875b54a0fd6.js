"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7493],{6229:(T,g,e)=>{e.d(g,{k:()=>Z});var t=e(5e3),p=e(15439),_=e(39646),h=e(4128),y=e(63900),s=e(54004),P=e(95577),n=e(88757),E=e(54625),c=e(93900),D=e(86465),A=e(25492),R=e(78680),I=e(78927),O=e(14607),M=e(90089),L=e(69808);function b(d,v){if(1&d&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",8),t._uU(6),t.ALo(7,"number"),t.qZA(),t.TgZ(8,"td",8),t._uU(9),t.ALo(10,"number"),t.qZA(),t.TgZ(11,"td",8),t._uU(12),t.ALo(13,"number"),t.qZA(),t.TgZ(14,"td",8),t._uU(15),t.ALo(16,"number"),t.qZA(),t.qZA()),2&d){const a=v.$implicit;t.xp6(2),t.Oqu(a.endOfPolicyYear),t.xp6(2),t.Oqu(a.age),t.xp6(2),t.Oqu(t.lcZ(7,6,a.premiumPaid)||"-"),t.xp6(3),t.Oqu(t.lcZ(10,8,a.deathBenefit)),t.xp6(3),t.Oqu(t.lcZ(13,10,a.surrenderValue)||"-"),t.xp6(3),t.Oqu(t.lcZ(16,12,a.maturityBenefit)||"-")}}function S(d,v){if(1&d&&(t.TgZ(0,"tbody"),t.YNc(1,b,17,14,"tr",7),t.qZA()),2&d){const a=t.oxw();t.xp6(1),t.Q6J("ngForOf",a.showDatas)}}function U(d,v){if(1&d&&(t.ynx(0),t._UZ(1,"app-education-life-grip",9),t.BQk()),2&d){const a=t.oxw();t.xp6(1),t.Q6J("parentData",a.showDatas)}}let Z=(()=>{class d{constructor(a,r,l,i,m,o,u,C,F){this.globalFun=a,this.alertService=r,this.prodService=l,this.eduPreService=i,this.eduSurrService=m,this.eduPayment=o,this.cdf=u,this.auth=C,this.numberPipe=F,this.actionEvent=new t.vpe,this.premimuRate={"9opt":5,"11opt":7,"14opt":10},this.frequency={monthly:1,quarterly:4,semi_annually:6,annually:12},this.lists=[],this.premiumRate=[],this.surrendRate=[],this.showDatas=[]}ngOnInit(){this.parentData=this.getParnet(),this.parentData2=this.getParnet(!0),this.parentData||this.parentData2?this.getRateValue().pipe((0,y.w)(a=>{if(!a[0]||!a[1])throw a;return(0,_.of)({premium:a[0],surrend:a[1]})})).toPromise().then(a=>{a&&(this.premiumRate=a.premium,this.surrendRate=a.surrend,this.createListData())}).catch(a=>{console.log(a)}):this.alertService.activate("This page cann't to show because there is no education life product detail data. Please add education life product detail in rodcut configuration","Warning")}createListData(){this.getcalculateData(),this.showDatas=[];let a="001"==this.plan?1:2;this.lists.forEach((r,l)=>{let i={resourceId:this.resourcesId,endOfPolicyYear:r,age:this.currentAge+l,benefitPlan:this.plan,premiumPaid:this.premimuRateNum>=r?this.calculatePre(this.currentAge+l,r):0,deathBenefit:this.sumInsured*a,surrenderValue:this.calculateSur(r),maturityBenefit:.9*this.calculateSur(r)};this.showDatas.push(i),l+1==this.lists.length&&this.cdf.detectChanges()})}getcalculateData(){let r=this.globalFun.paPolicyValidationResult.value.validationValue;this.premimuRateNum=this.premimuRate[r+"opt"],this.policyTermCode=this.parentData.policy_term,this.sumInsured=this.parentData.sum_insured,this.plan=this.parentData.insured_plan;let l=this.parentData2.date_of_birth;return this.currentAge=Math.ceil(p().diff(l,"years",!0)),this.frequencyValue=this.frequency[this.parentData.payment_frequency],this.lists=Array.from({length:r},(m,o)=>o+1),!0}getParnet(a){if((0,n.cU)(this.product.config)){let r=JSON.parse(this.product.config),i={};return i=("quotation"!=this.prodService.type?r.application||[]:r.quotation||[]).find(a?m=>"life_insured_el"==m.tableName:m=>"el_detail"==m.tableName),i&&this.globalFun.tempFormData[i.tableName+i.id]||null}return null}calculatePre(a,r){let l=15.5,i=this.premiumRate.find(o=>o.age==a);i&&(l=i.rate);let m=l/1e3*this.sumInsured;if(1==r){console.log(this.frequencyValue);let o=this.globalFun.calculateDecimal(m*this.frequencyValue)+1500;this.premiumAmt=this.numberPipe.transform(o,"1.2-2")+" MMK / "+this.parentData.payment_frequency,this.globalFun.paPremiumResult.next(this.premiumAmt)}return this.globalFun.calculateDecimal(12*m)*r}calculateSur(a){let r=10,l=this.surrendRate.find(i=>i.year==a);return l?(r=l.rate,r/100*this.sumInsured):0}getRateValue(){return(0,h.D)([this.getPRate(),this.getSurRate()]).pipe((0,s.U)(a=>a))}getPRate(){return this.eduPreService.getMany(this.parentData.insured_plan,this.parentData.policy_term)}getSurRate(){return this.eduSurrService.getMany(this.parentData.policy_term)}nextPage(){this.showDatas.length>0&&this.eduPayment.deleteMany(this.resourcesId).pipe((0,P.z)(a=>{let r={request:this.showDatas,resourceDataDTO:{agentId:this.auth.currentUserValue.id||1,customerId:this.prodService.creatingCustomer.customerId||1,policyNumber:null,premium:(Number(this.premiumAmt.split(" ")[0].split(",").join(""))||0)+"",premiumView:this.premiumAmt,productId:this.product.id,productCode:this.product.code,quotationId:this.prodService.referenceID,type:this.prodService.type},resourceId:this.resourcesId};return this.eduPayment.saveMany(r)})).toPromise().then(a=>{a&&(this.globalFun.tempFormData[c.S_]=this.showDatas,this.actionEvent.emit({type:E.V.NEXT}))})}backPage(){this.actionEvent.emit({type:E.V.PREV})}}return d.\u0275fac=function(a){return new(a||d)(t.Y36(D.Q),t.Y36(A.c),t.Y36(R.f),t.Y36(I.H),t.Y36(I.D),t.Y36(O.D),t.Y36(t.sBO),t.Y36(M.e8),t.Y36(L.JJ))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-education-life"]],inputs:{product:"product",editData:"editData",resourcesId:"resourcesId"},outputs:{actionEvent:"actionEvent"},decls:27,vars:8,consts:[[1,"table","table-bordered"],[4,"ngIf"],[1,"mb-5"],[1,"row","mt-3"],[1,"col-sm-6","mx-auto"],[1,"btn","btn-block","btn-secondary",3,"click"],[1,"btn","btn-block","btn-primary",3,"click"],[4,"ngFor","ngForOf"],[2,"text-align","right"],[3,"parentData"]],template:function(a,r){1&a&&(t.TgZ(0,"table",0),t.TgZ(1,"thead"),t.TgZ(2,"tr"),t.TgZ(3,"th"),t._uU(4,"End of Policy Year"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Age"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Premium Paid"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Death/PTD Benefit"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Surrender Value"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Maturity Benefit"),t.qZA(),t.qZA(),t.qZA(),t.YNc(15,S,2,1,"tbody",1),t.qZA(),t._UZ(16,"hr",2),t.YNc(17,U,2,1,"ng-container",1),t.TgZ(18,"div",3),t.TgZ(19,"div",4),t.TgZ(20,"button",5),t.NdJ("click",function(){return r.backPage()}),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.qZA(),t.TgZ(23,"div",4),t.TgZ(24,"button",6),t.NdJ("click",function(){return r.nextPage()}),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(15),t.Q6J("ngIf",r.premiumRate.length>0&&r.surrendRate.length>0),t.xp6(2),t.Q6J("ngIf",r.showDatas.length>0),t.xp6(4),t.hij(" ",t.lcZ(22,4,"FORM.btn_previous")," "),t.xp6(4),t.hij(" ",t.lcZ(26,6,"FORM.btn_save_and_next")," "))},styles:[""]}),d})()},78927:(T,g,e)=>{e.d(g,{D:()=>P,H:()=>y});var t=e(92340),p=e(38313),f=e(5e3),_=e(40520);const h=`${t.N.apiUrl}/education-premium-rates`;let y=(()=>{class n extends p.i{constructor(c){super(c,h),this.httpClient=c}getMany(c,D){return this.httpClient.get(h+"?benefitPlan="+c+"&policyTerm="+D)}}return n.\u0275fac=function(c){return new(c||n)(f.LFG(_.eN))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const s=`${t.N.apiUrl}/education-surrender-values`;let P=(()=>{class n extends p.i{constructor(c){super(c,s),this.httpClient=c}getMany(c){return this.httpClient.get(s+"?policyTerm="+c)}}return n.\u0275fac=function(c){return new(c||n)(f.LFG(_.eN))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()},14607:(T,g,e)=>{e.d(g,{D:()=>y});var t=e(92340),p=e(38313),f=e(5e3),_=e(40520);const h=`${t.N.apiUrl}/education/life-benefit`;let y=(()=>{class s extends p.i{constructor(n){super(n,h),this.httpClient=n}deleteMany(n){return this.httpClient.delete(h+"/resource/"+n)}getMany(n){return this.httpClient.get(h+"/resource/"+n)}saveMany(n){return this.httpClient.post(h+"s",n)}}return s.\u0275fac=function(n){return new(n||s)(f.LFG(_.eN))},s.\u0275prov=f.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},54625:(T,g,e)=>{e.d(g,{V:()=>t});var t=(()=>{return(p=t||(t={})).NEXT="next",p.PREV="prev",t;var p})()},93900:(T,g,e)=>{e.d(g,{Ft:()=>A,Hu:()=>_,S_:()=>c,T$:()=>h,nm:()=>y,p:()=>p,rf:()=>O});var t=e(79611);const p=[{id:"addon_1634010770155",type:t.it.STATIC,pageTitle:"AddOn",showLabel:"AddOn",pageType:"form",tableName:"addon",pageIcon:"fa-briefcase"},{id:"coverage_1634010995936",type:t.it.STATIC,pageTitle:"Coverage",showLabel:"Coverage",pageType:"form",tableName:"coverage",pageIcon:"fa-clipboard-check"},{id:"static_1634018514043",type:t.it.STATIC,pageTitle:"Product Detail",showLabel:"Motor Product Detail",pageType:"form",tableName:"static",pageIcon:"fa-briefcase"},{id:"static_1635747288508",type:t.it.STATIC,pageTitle:"Product Detail",showLabel:"Motor Product Detail (Application)",pageType:"form",tableName:"static",pageIcon:"fa-briefcase"},{id:"static_1635218894755",type:t.it.STATIC,pageTitle:"Payment Schedules",showLabel:"Payment Schedules",pageType:"form",tableName:"static",pageIcon:"fa-briefcase"},{id:"static_1635309151504",type:t.it.STATIC,pageTitle:"Education Life Benefit",showLabel:"Education Life Benefit",pageType:"form",tableName:"static",pageIcon:"fa-briefcase"},{id:"static_1641364737069",type:t.it.STATIC,pageTitle:"Product Detail",showLabel:"Fire Product Detail",pageType:"form",tableName:"static",pageIcon:"fa-briefcase"},{id:"static_1643116155828",type:t.it.STATIC,pageTitle:"Risk Detail",showLabel:"Fire Risk Detail",pageType:"form",tableName:"static",pageIcon:"fa-briefcase"},{id:"static_1644896661652",type:t.it.STATIC,pageTitle:"Benefit Illustration",showLabel:"Endowment Benefit Illustration",pageType:"form",tableName:"static",pageIcon:"fa-briefcase"},{id:"static_1648784270432",type:t.it.STATIC,pageTitle:"Optional Coverages",showLabel:"Motor Addons",pageType:"form",tableName:"static",pageIcon:"fa-briefcase"},{id:"static_1648784270356",type:t.it.STATIC,pageTitle:"Travel Risk",showLabel:"Travel Risk",pageType:"form",tableName:"static",pageIcon:"fa-briefcase"}],_="static_1634018514043",h="static_1641364737069",y="static_1643116155828",c="static_1635309151504",A="static_1644896661652",O="static_1648784270356"},47493:(T,g,e)=>{e.d(g,{Q:()=>l});var t=e(69808),p=e(93075),f=e(63272),_=e(84095),h=e(50282),y=e(6229),s=e(5e3),P=e(54625),n=e(93900),E=e(25492),c=e(86465),D=e(42115);const A=["chart"];let R=(()=>{class i{constructor(o,u){this.alertService=o,this.globalFun=u,this.actionEvent=new s.vpe,this.showDatas=[],this.chartOptions={series:[{name:"Premium Amount",data:[],color:"#005f99"}],chart:{height:450,type:"line",toolbar:{show:!1}},title:{text:"Basic Benefit Illustration",offsetX:0,offsetY:10,floating:!1,style:{fontSize:"1.1rem",fontFamily:"Roboto"}},xaxis:{type:"category",categories:["0","1 year","2 years","3 years","4 years","5 years","6 years","7 years","8 years","9 years","10 years","11 years","12 years","13 years","14 years"],labels:{style:{fontSize:"1rem",fontFamily:"Roboto"}}},yaxis:{min:0,max:5e6,tickAmount:5,labels:{style:{fontSize:"1rem",fontFamily:"Roboto"}}},legend:{position:"top",horizontalAlign:"right",floating:!0,offsetY:-25,offsetX:-5},dataLabels:{enabled:!0,textAnchor:"middle",offsetX:-10,offsetY:-5,enabledOnSeries:[0]},markers:{size:[5,0,0]}}}ngOnInit(){if(this.parentData){let o=this.parentData.map(u=>u.premiumPaid&&u.premiumPaid>0?u.premiumPaid:null);o.unshift(null),this.parentData.length>0&&"002"==this.parentData[0].benefitPlan&&(this.chartOptions.title.text="Double Benefit Illustration",this.chartOptions.yaxis.max=1e7,this.chartOptions.series[1]={data:[],name:"Goal"},this.chartOptions.series[2]={data:[],name:"2X Goal"},this.chartOptions.series[1].data=[5e6,5e6,5e6,5e6,5e6,5e6,5e6,5e6,5e6,5e6,5e6,5e6,5e6,5e6,5e6],this.chartOptions.series[2].data=[1e7,1e7,1e7,1e7,1e7,1e7,1e7,1e7,1e7,1e7,1e7,1e7,1e7,1e7,1e7]),this.chartOptions.series[0].data=o}else this.alertService.activate("This page cann't to show because there is no education life product detail data. Please add education life product detail in rodcut configuration","Warning")}getParnet(){return this.globalFun.tempFormData[n.S_]}nextPage(){this.actionEvent.emit({type:P.V.NEXT})}backPage(){this.actionEvent.emit({type:P.V.PREV})}}return i.\u0275fac=function(o){return new(o||i)(s.Y36(E.c),s.Y36(c.Q))},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-education-life-grip"]],viewQuery:function(o,u){if(1&o&&s.Gf(A,5),2&o){let C;s.iGM(C=s.CRH())&&(u.chart=C.first)}},inputs:{product:"product",editData:"editData",resourcesId:"resourcesId",parentData:"parentData"},outputs:{actionEvent:"actionEvent"},decls:1,vars:8,consts:[[3,"series","chart","xaxis","yaxis","title","legend","dataLabels","markers"]],template:function(o,u){1&o&&s._UZ(0,"apx-chart",0),2&o&&s.Q6J("series",u.chartOptions.series)("chart",u.chartOptions.chart)("xaxis",u.chartOptions.xaxis)("yaxis",u.chartOptions.yaxis)("title",u.chartOptions.title)("legend",u.chartOptions.legend)("dataLabels",u.chartOptions.dataLabels)("markers",u.chartOptions.markers)},directives:[D.x],styles:[""]}),i})();var I=e(19775),O=e(65884),M=e(65981),L=e(21223),b=e(64537),S=e(98558),U=e(8202),Z=e(69544),d=e(41889),v=e(14538),a=e(7181),r=e(98807);let l=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[t.ez,p.u5,h.fA,p.UX,f.bz,_.Fk,f.M,b.A0,S.rP,D.X,Z.vi,O.FA,I.XK,M.c,L.lN,U.Ud,d.Q,v.Tx,a.j]]}),i})();s.B6R(y.k,[t.O5,t.sg,R],[t.JJ,r.X])}}]);