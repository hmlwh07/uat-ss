{"version":3,"file":"src_app_pages_quotations_quotations_module_ts.js","mappings":"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","sources":["./src/app/pages/quotations/list/quotations.component.ts","./src/app/pages/quotations/quotation-page.component.ts","./src/app/pages/quotations/quotations.module.ts"],"sourcesContent":["import { ChangeDetectorRef, Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { FormControl, FormGroup } from '@angular/forms';\r\nimport { MomentDateAdapter } from '@angular/material-moment-adapter';\r\nimport { MAT_DATE_FORMATS, MAT_DATE_LOCALE } from '@angular/material/core';\r\nimport { Router } from '@angular/router';\r\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport { DateAdapter } from 'angular-calendar';\r\nimport * as moment from 'moment';\r\nimport { forkJoin, of } from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\nimport { MY_FORMATS } from '../../../core/is-json';\r\nimport { environment } from 'src/environments/environment';\r\nimport { defaultAccessObj, MenuDataService } from '../../../core/menu-data.service';\r\nimport { MaterialTableViewComponent } from '../../../_metronic/shared/crud-table/components/material-table-view/material-table-view.component';\r\nimport { CustomerService } from '../../customer-detail/customer.service';\r\nimport { CustomerListComponent } from '../../customer-list/customer-list.component';\r\nimport { ProductsComponent } from '../../products/products.component';\r\nimport { ProductDataService } from '../../products/services/products-data.service';\r\nimport { CommonList2Component } from '../../share-components/common-list/common-list.component';\r\nimport { QuotationDTO } from '../quotation.dto';\r\nimport { QuotationService } from '../quotation.service';\r\nimport { QuoDisplayCol, QuotationCol } from './quotation.const';\r\n\r\n@Component({\r\n  selector: 'app-quotations',\r\n  templateUrl: './quotations.component.html',\r\n  styleUrls: ['./quotations.component.scss'],\r\n  providers: [\r\n    { provide: DateAdapter, useClass: MomentDateAdapter, deps: [MAT_DATE_LOCALE] },\r\n    { provide: MAT_DATE_FORMATS, useValue: MY_FORMATS },\r\n  ]\r\n})\r\nexport class QuotationsComponent implements OnInit, OnDestroy {\r\n  quoList: QuotationDTO[] = []\r\n  @ViewChild(MaterialTableViewComponent) matTable: MaterialTableViewComponent\r\n  @ViewChild(CommonList2Component) commonList: CommonList2Component;\r\n\r\n  quoAccess = defaultAccessObj\r\n  policyAccess = defaultAccessObj\r\n  quotationForm: FormGroup\r\n  isTeam: boolean = false\r\n  Default_DOWNLOAD_URL = `${environment.apiUrl}/attachment-downloader`;\r\n  constructor(private modalService: NgbModal, private prodctService: ProductDataService, private router: Router, private quoService: QuotationService, private cdRef: ChangeDetectorRef, private customerService: CustomerService, private menuService: MenuDataService) {\r\n    this.loadForm()\r\n  }\r\n\r\n\r\n  ELEMENT_COL = JSON.parse(JSON.stringify(QuotationCol))\r\n  displayedColumns = JSON.parse(JSON.stringify(QuoDisplayCol))\r\n  ngOnInit(): void {\r\n    this.checkPremission()\r\n    this.getQuoList()\r\n\r\n    // })\r\n  }\r\n  loadForm() {\r\n    let date = new Date();\r\n    let lastMonthDay = new Date(date.setMonth(date.getMonth() - 1))\r\n    let monthDay = new Date(date.setMonth(date.getMonth() + 1))\r\n    this.quotationForm = new FormGroup({\r\n      startDate: new FormControl(lastMonthDay),\r\n      endDate: new FormControl(monthDay),\r\n      isTeam: new FormControl(this.isTeam)\r\n    })\r\n  }\r\n  checkPremission() {\r\n    this.menuService.dataAccess.subscribe((res) => {\r\n      if (res) {\r\n        this.quoAccess = res['quotation']\r\n        this.policyAccess = res['application']\r\n        if (!this.quoAccess.edit) {\r\n          this.ELEMENT_COL[8].btn.edit = false\r\n        }\r\n        if (!this.policyAccess.create) {\r\n          this.ELEMENT_COL.splice(7, 1)\r\n          this.displayedColumns.splice(7, 1)\r\n        }\r\n      }\r\n    })\r\n  }\r\n  ngOnDestroy() {\r\n    // this.rerender()\r\n  }\r\n  cancel() {\r\n\r\n  }\r\n  changeView(type) {\r\n    if (type == 'team') {\r\n      this.isTeam = true\r\n    }\r\n    else {\r\n      this.isTeam = false\r\n\r\n    }\r\n    this.quotationForm.controls.isTeam.setValue(this.isTeam)\r\n    this.cdRef.detectChanges()\r\n    this.getQuoList()\r\n  }\r\n  createOrEdit() {\r\n    const modalRef = this.modalService.open(ProductsComponent, { size: 'xl', backdrop: false });\r\n    modalRef.componentInstance.type = 'modal'\r\n    modalRef.result.then(() => { }, (res) => {\r\n      if (res) {\r\n        if (res.type == 'save') {\r\n          this.chooseCustomer(res)\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  chooseCustomer(prod: any) {\r\n    const modalRef = this.modalService.open(CustomerListComponent, { size: 'xl', backdrop: false });\r\n    modalRef.componentInstance.isPopup = true\r\n    modalRef.result.then(() => { }, (res) => {\r\n      if (res) {\r\n        if (res.type == 'save') {\r\n          this.prodctService.createingProd = prod.data\r\n          this.prodctService.creatingCustomer = res.data\r\n          this.prodctService.viewType = 'quotation'\r\n          this.prodctService.editData = null\r\n          this.prodctService.referenceID = null\r\n          this.prodctService.type = 'quotation'\r\n          this.router.navigateByUrl(\"/product-form\")\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n  getQuoList() {\r\n    this.quoService.getQuoList(this.quotationForm.getRawValue()).toPromise().then((res: any) => {\r\n      if (res) {\r\n        this.quoList = res\r\n        for (var i = 0; i < this.quoList.length; i++) {\r\n          if (this.quoList[i].icon) {\r\n            this.quoList[i].productImage = this.Default_DOWNLOAD_URL + '/' + this.quoList[i].icon\r\n          }\r\n        }\r\n        this.cdRef.detectChanges()\r\n        if (this.commonList) {\r\n          this.commonList.detchChange()\r\n        }\r\n        //this.matTable.reChangeData()\r\n        // })\r\n      }\r\n    })\r\n  }\r\n\r\n  editLayout(item) {\r\n    forkJoin([this.prodctService.findOne(item.productId), this.customerService.findOne(item.customerId || 1).pipe(catchError(e => { return of(undefined) }))]).toPromise().then((res) => {\r\n      if (res) {\r\n        this.prodctService.createingProd = res[0]\r\n        this.prodctService.creatingCustomer = res[1]\r\n        this.prodctService.type = 'quotation'\r\n        this.prodctService.viewType = 'quotation'\r\n        this.prodctService.editData = item\r\n        this.prodctService.referenceID = null\r\n        this.prodctService.creatingLeadId = item.leadId\r\n        this.router.navigateByUrl(\"/product-form\")\r\n      }\r\n    })\r\n  }\r\n\r\n  FormatedDate(date) {\r\n    return moment(date, \"YYYYMMDD\").format('MM/DD/YYYY');\r\n  }\r\n\r\n  actionBtn(event: any) {\r\n\r\n    if (event.cmd == 'view') {\r\n      this.goViewDetail(event.data)\r\n    } else if (event.cmd == 'edit') {\r\n      this.editLayout(event.data)\r\n    } else if (event.cmd == 'create') {\r\n      this.createPolicy(event.data)\r\n    }\r\n  }\r\n\r\n  goViewDetail(item) {\r\n    this.prodctService.findOne(item.productId).toPromise().then((res) => {\r\n      if (res) {\r\n        this.prodctService.createingProd = res\r\n        this.prodctService.editData = item\r\n        this.prodctService.previewType = 'quotation'\r\n        this.router.navigateByUrl(\"/resourse-detail\")\r\n      }\r\n    })\r\n  }\r\n\r\n  createPolicy(item) {\r\n    forkJoin([this.prodctService.findOne(item.productId), this.customerService.findOne(item.customerId || 1).pipe(catchError(e => { return of(undefined) }))]).toPromise().then((res) => {\r\n      if (res) {\r\n        this.prodctService.createingProdRef = res[0]\r\n        this.prodctService.creatingCustomer = res[1]\r\n        this.prodctService.viewType = 'policy'\r\n        this.prodctService.type = 'policy'\r\n        this.prodctService.referenceID = item.id\r\n        this.prodctService.editData = null\r\n        this.prodctService.creatingLeadId = item.leadId\r\n        this.router.navigateByUrl(\"/product-form\")\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n}\r\n","import { Component, OnInit } from \"@angular/core\";\r\n\r\n@Component({\r\n  selector: 'app-quotation-page',\r\n  template: `<router-outlet></router-outlet>`,\r\n})\r\nexport class QuotationPageComponent implements OnInit {\r\n  \r\n  ngOnInit(){\r\n\r\n  }\r\n}","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { QuotationsComponent } from './list/quotations.component';\r\nimport { QuotationPageComponent } from './quotation-page.component';\r\nimport { InlineSVGModule } from 'ng-inline-svg';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { NgbModalModule } from '@ng-bootstrap/ng-bootstrap';\r\nimport { RouterModule } from '@angular/router';\r\nimport { ProductsModule } from '../products/products.module';\r\nimport { CRUDTableModule } from '../../_metronic/shared/crud-table';\r\nimport { CustomerListShareModule } from '../customer-list/customer-list.share.module';\r\nimport { LanguageModule } from 'src/app/modules/languages/languages.modules';\r\nimport { ShareComponentModule } from '../share-components/share-component.module';\r\n\r\n\r\n@NgModule({\r\n  declarations: [QuotationPageComponent,QuotationsComponent],\r\n  imports: [\r\n    CommonModule,\r\n    InlineSVGModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    NgbModalModule,\r\n    CRUDTableModule,\r\n    LanguageModule,\r\n    ShareComponentModule,\r\n    RouterModule.forChild([\r\n      {\r\n        path: 'quotation',\r\n        component: QuotationPageComponent,\r\n        children: [\r\n          {\r\n            path: 'list',\r\n            component: QuotationsComponent,\r\n          },\r\n        ]\r\n      }\r\n\r\n    ]),\r\n    ProductsModule,\r\n    CustomerListShareModule\r\n  ]\r\n})\r\nexport class QuotationsModule { }\r\n"],"names":[],"sourceRoot":"webpack:///"}