"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8403],{88403:(N,p,i)=>{i.r(p),i.d(p,{LeadListModule:()=>w});var m=i(86019),t=i(83668),s=i(49133),g=i(90949),d=i(18510);const f=[{title:"Lead ID",type:d.Y.FEILD,field:"leadId"},{title:"Lead Name",type:d.Y.FEILD,field:"contactName"},{title:"Product",type:d.Y.FEILD,field:"productName"},{title:"Existing Customer",type:d.Y.FEILD,field:"existingCustomerName"},{title:"Source",type:d.Y.FEILD,field:"sourceValue"},{title:"Open Date",type:d.Y.FEILD,field:"openedDate",isFromatDate:!0},{title:"Campaign Name",type:d.Y.FEILD,field:"campaignName"},{title:"Status",type:d.Y.FEILD,field:"statusCode",isLeadStatus:!0},{title:"Actions",type:d.Y.ACTION,field:"actions",btn:{edit:!0,view:!0}}],r=["leadId","contactName","productName","existingCustomerName","sourceValue","openedDate","campaignName","statusCode","actions"];var u=i(44290),c=i(92118),y=i(47975),D=i(37025),h=i(29018),S=i(57311),E=i(26697),O=i(35618),Z=i(85378),T=i(57730),v=i(78480),b=i(86031),C=i(57842);function U(a,l){if(1&a){const e=t.EpF();t.TgZ(0,"div",25),t.TgZ(1,"div",26),t.TgZ(2,"h3",27),t._uU(3,"Lead List"),t.qZA(),t.qZA(),t.TgZ(4,"div",28),t.TgZ(5,"button",29),t.NdJ("click",function(){return t.CHM(e),t.oxw().getList()}),t._UZ(6,"span",30),t.qZA(),t.TgZ(7,"button",29),t.NdJ("click",function(){return t.CHM(e),t.oxw().cancel()}),t.TgZ(8,"span",31),t._uU(9,"Cancel"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}}function F(a,l){if(1&a){const e=t.EpF();t.TgZ(0,"div",32),t.TgZ(1,"app-material-table-view",33),t.NdJ("emitter",function(n){return t.CHM(e),t.oxw().actionBtn(n)})("rowselect",function(n){return t.CHM(e),t.oxw().rowSelected(n)}),t.qZA(),t.qZA()}if(2&a){const e=t.oxw();t.xp6(1),t.Q6J("data",e.LeadList)("colum",e.ELEMENT_COL)("displayedColumns",e.displayedColumns)("selectable",e.isPopup)}}let P=(()=>{class a{constructor(e,o,n,L,J,Y){this.router=e,this.cdf=o,this.LeadListService=n,this.masterDataService=L,this.productService=J,this.modalService=Y,this.ELEMENT_COL=JSON.parse(JSON.stringify(f)),this.displayedColumns=JSON.parse(JSON.stringify(r)),this.LeadList=[],this.selectedUser=new t.vpe,this.isPopup=!1,this.show=!1,this.statusOption=[],this.sourceOption=[],this.productOption=[],this.loadForm()}ngOnInit(){this.show=!0,this.getList(),this.getStatus(),this.getSource(),this.getProduct()}loadForm(){this.LeadForm=new s.cw({campaignName:new s.NI(null),existingCustomerId:new s.NI(null),existingCustomerName:new s.NI({value:null,disabled:!0}),contactName:new s.NI(null),leadId:new s.NI(null),openDateStr:new s.NI(null),productId:new s.NI(null),sourceCode:new s.NI(null),statusCode:new s.NI(null)})}navigateToDetail(e,o,n){this.router.navigate(["/lead/lead-detail"],{queryParams:{pageStatus:e,pageId:o,pageSecondaryId:n,leadId:o}})}getStatus(){this.masterDataService.getDataByType("LEAD_STATUS").toPromise().then(e=>{console.log(e),e&&(this.statusOption=e.map(o=>({code:o.codeId,value:o.codeName})),console.log(this.statusOption),this.cdf.detectChanges())})}getSource(){this.masterDataService.getDataByType("LEAD_SOURCE").toPromise().then(e=>{console.log(e),e&&(this.sourceOption=e.map(o=>({code:o.codeId,value:o.codeName})),console.log(this.sourceOption),this.cdf.detectChanges())})}getProduct(){this.productService.getAll().toPromise().then(e=>{console.log(e),e&&(this.productOption=e.map(o=>({code:o.id,value:o.name})),console.log(this.productOption),this.cdf.detectChanges())})}getList(){this.LeadListService.getLeadList(this.LeadForm.getRawValue()).toPromise().then(e=>{e&&(console.log("RES",e),this.LeadList=e,this.cdf.detectChanges(),this.matTable.reChangeData())})}get selected(){let e;return this.matTable&&(e=this.matTable.selection.selected[0]),e||{id:0}}rowSelected(e){this.selectedUser.emit(e)}cancel(){this.LeadForm.reset(),this.getList()}actionBtn(e){"edit"==e.cmd&&this.navigateToDetail("edit",e.data.leadId,e.data.individualId),"view"==e.cmd&&this.navigateToDetail("view",e.data.leadId,e.data.individualId)}viewExistingCustomer(){let e;e=this.modalService.open(D.b,{size:"xl",backdrop:!1}),e.componentInstance.isPopup=!0,e.result.then(()=>{},o=>{if(o&&"save"==o.type){let n=o.data;console.log("onDidDismiss =====> ",n),this.LeadForm.controls.existingCustomerId.setValue(n.customerId),this.LeadForm.controls.existingCustomerName.setValue(n.name)}})}isControlValid(e){const o=this.LeadForm.controls[e];return o.valid&&(o.dirty||o.touched)}isControlInvalid(e){const o=this.LeadForm.controls[e];return o.invalid&&(o.dirty||o.touched)}controlHasError(e,o){const n=this.LeadForm.controls[o];return n.hasError(e)&&(n.dirty||n.touched)}isControlTouched(e){const o=this.LeadForm.controls[e];return o.dirty||o.touched}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(h.F0),t.Y36(t.sBO),t.Y36(S.Z),t.Y36(E.D),t.Y36(O.f),t.Y36(Z.FF))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-lead-list"]],viewQuery:function(e,o){if(1&e&&t.Gf(g.I,5),2&e){let n;t.iGM(n=t.CRH())&&(o.matTable=n.first)}},inputs:{isPopup:"isPopup"},outputs:{selectedUser:"selectedUser"},features:[t._Bn([{provide:u._A,useClass:c.t7,deps:[u.Ad]},{provide:u.sG,useValue:y.G}])],decls:63,vars:36,consts:[[1,"row"],[1,"col-12"],[1,"card","card-custom","gutter-b"],["class","card-header",4,"ngIf"],[1,"card-body","px-10","py-3"],["action","#",1,"form",3,"formGroup"],[1,"row",2,"align-items","center"],[1,"col-xl-4","col-sm-6"],[1,"form-group","row"],[1,"col-sm-4","col-form-label"],[1,"col-sm-8"],["type","text","name","leadId","autocomplete","off","formControlName","leadId",1,"form-control","form-control-sm"],["type","text","name","contactName","autocomplete","off","formControlName","contactName",1,"form-control","form-control-sm"],[1,"input-group"],["matInput","","formControlName","openDateStr","readonly","",1,"form-control-sm","date-input",3,"matDatepicker"],["matSuffix","",3,"for"],["disabled","false"],["picker",""],["bindLabel","value","bindValue","code","formControlName","productId",1,"ng-custom-select",3,"items"],["bindLabel","value","bindValue","code","formControlName","sourceCode",1,"ng-custom-select",3,"items"],["type","text","name","campaignName","autocomplete","off","formControlName","campaignName",1,"form-control","form-control-sm"],[1,"col-sm-8",3,"click"],["type","text","name","existingCustomerName","autocomplete","off","formControlName","existingCustomerName","readonly","",1,"form-control","form-control-sm"],["bindLabel","value","bindValue","code","formControlName","statusCode",1,"ng-custom-select",3,"items"],["class","card-body customer-card-body",4,"ngIf"],[1,"card-header"],[1,"card-title"],[1,"card-label","left-border-image"],[1,"card-toolbar"],["type","button",1,"btn","btn-primary","ml-2",2,"min-width","50px",3,"click"],[1,"flaticon2-magnifier-tool"],[1,""],[1,"card-body","customer-card-body"],[3,"data","colum","displayedColumns","selectable","emitter","rowselect"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.YNc(3,U,10,0,"div",3),t.TgZ(4,"div",4),t.TgZ(5,"form",5),t.TgZ(6,"div",6),t.TgZ(7,"div",7),t.TgZ(8,"div",8),t.TgZ(9,"label",9),t._uU(10,"Lead ID"),t.qZA(),t.TgZ(11,"div",10),t._UZ(12,"input",11),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"div",7),t.TgZ(14,"div",8),t.TgZ(15,"label",9),t._uU(16,"Lead Name"),t.qZA(),t.TgZ(17,"div",10),t._UZ(18,"input",12),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"div",7),t.TgZ(20,"div",8),t.TgZ(21,"label",9),t._uU(22,"Open Date"),t.qZA(),t.TgZ(23,"div",10),t.TgZ(24,"div",13),t._UZ(25,"input",14),t._UZ(26,"mat-datepicker-toggle",15),t._UZ(27,"mat-datepicker",16,17),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(29,"div",7),t.TgZ(30,"div",8),t.TgZ(31,"label",9),t._uU(32,"Product"),t.qZA(),t.TgZ(33,"div",10),t._UZ(34,"ng-select",18),t.qZA(),t.qZA(),t.qZA(),t.TgZ(35,"div",7),t.TgZ(36,"div",8),t.TgZ(37,"label",9),t._uU(38,"Source"),t.qZA(),t.TgZ(39,"div",10),t._UZ(40,"ng-select",19),t.qZA(),t.qZA(),t.qZA(),t.TgZ(41,"div",7),t.TgZ(42,"div",8),t.TgZ(43,"label",9),t._uU(44,"Campaign Name "),t.qZA(),t.TgZ(45,"div",10),t._UZ(46,"input",20),t.qZA(),t.qZA(),t.qZA(),t.TgZ(47,"div",7),t.TgZ(48,"div",8),t.TgZ(49,"label",9),t._uU(50,"Existing Customer"),t.qZA(),t.TgZ(51,"div",21),t.NdJ("click",function(){return o.viewExistingCustomer()}),t._UZ(52,"input",22),t.qZA(),t.qZA(),t.qZA(),t.TgZ(53,"div",7),t.TgZ(54,"div",8),t.TgZ(55,"label",9),t._uU(56,"Status"),t.qZA(),t.TgZ(57,"div",10),t._UZ(58,"ng-select",23),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(59,"div",0),t.TgZ(60,"div",1),t.TgZ(61,"div",2),t.YNc(62,F,2,4,"div",24),t.qZA(),t.qZA(),t.qZA()),2&e){const n=t.MAs(28);t.xp6(3),t.Q6J("ngIf",!o.isPopup),t.xp6(2),t.Q6J("formGroup",o.LeadForm),t.xp6(7),t.ekj("is-invalid",o.isControlInvalid("leadId"))("is-valid",o.isControlValid("leadId")),t.xp6(6),t.ekj("is-invalid",o.isControlInvalid("contactName"))("is-valid",o.isControlValid("contactName")),t.xp6(7),t.Q6J("matDatepicker",n),t.xp6(1),t.Q6J("for",n),t.xp6(8),t.ekj("is-invalid",o.isControlInvalid("productId"))("is-valid",o.isControlValid("productId")),t.Q6J("items",o.productOption),t.xp6(6),t.ekj("is-invalid",o.isControlInvalid("sourceCode"))("is-valid",o.isControlValid("sourceCode")),t.Q6J("items",o.sourceOption),t.xp6(6),t.ekj("is-invalid",o.isControlInvalid("campaignName"))("is-valid",o.isControlValid("campaignName")),t.xp6(6),t.ekj("is-invalid",o.isControlInvalid("existingCustomerName"))("is-valid",o.isControlValid("existingCustomerName")),t.xp6(6),t.ekj("is-invalid",o.isControlInvalid("statusCode"))("is-valid",o.isControlValid("statusCode")),t.Q6J("items",o.statusOption),t.xp6(4),t.Q6J("ngIf",o.show)}},directives:[m.O5,s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,T.Nt,v.hl,v.nW,b.R9,v.Mq,C.w9,g.I],styles:[".input-group[_ngcontent-%COMP%]   .form-control-sm[_ngcontent-%COMP%]{background-color:#fff;background-clip:padding-box;border:1px solid #E4E6EF;padding:0 .75rem;width:100%}.input-group[_ngcontent-%COMP%]   .mat-datepicker-toggle[_ngcontent-%COMP%]{position:absolute;right:5px;top:-2px}.remove-p[_ngcontent-%COMP%]{margin-bottom:0}.col-form-label[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}.form-group.row[_ngcontent-%COMP%]{align-items:center}"]}),a})();var A=i(87626),I=i(45598),x=i(55167),_=i(59472),M=i(90860);let q=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[m.ez,s.u5,s.UX,A.vi,I.fA,x.Fk,v.FA,T.c,Z.bz,_.Q,C.A0,M.m]]}),a})(),w=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[m.ez,s.u5,s.UX,A.vi,I.fA,Z.M,q,C.A0,h.Bz.forChild([{path:"",component:P}])]]}),a})()},35618:(N,p,i)=>{i.d(p,{f:()=>f});var m=i(18260),t=i(91691),s=i(83668),g=i(44522);const d=`${m.N.apiUrl}/product`;let f=(()=>{class r extends t.i{constructor(c){super(c,d),this.httpClient=c,this.referenceID=null,this.creatingLeadId=0,this.referenceStatus=null}getAll(){return this.httpClient.get(d+"-view")}}return r.\u0275fac=function(c){return new(c||r)(s.LFG(g.eN))},r.\u0275prov=s.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()}}]);