"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7076],{27738:(P,l,o)=>{o.d(l,{v:()=>m});var c=o(18260),u=o(91691),p=o(83668),v=o(44522);const y=`${c.N.apiUrl}/customer`;let m=(()=>{class n extends u.i{constructor(s){super(s,y),this.httpClient=s}}return n.\u0275fac=function(s){return new(s||n)(p.LFG(v.eN))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()},76175:(P,l,o)=>{o.d(l,{j:()=>u,k:()=>p});var c=o(18510);const u=[{title:"Application ID",type:c.Y.FEILD,field:"id"},{title:"Product Name",type:c.Y.FEILD,field:"productName"},{title:"Product Code",type:c.Y.FEILD,field:"productCode"},{title:"Quotation ID",type:c.Y.FEILD,field:"quotationId"},{title:"Agent Name",type:c.Y.FEILD,field:"agentFirstName"},{title:"Premium",type:c.Y.FEILD,field:"premium",amtFormat:!0},{title:"Status",type:c.Y.FEILD,field:"status",isStatus:!0},{title:"Date",type:c.Y.FEILD,field:"createdAt",isDate:!0},{title:"Actions",type:c.Y.ACTION,field:"actions",btn:{view:!0,edit:!0}}],p=["id","productName","productCode","agentFirstName","premium","status","createdAt","actions"]},47076:(P,l,o)=>{o.r(l),o.d(l,{PolicyModule:()=>Z});var c=o(86019),u=o(92070),p=o(28100),v=o(82997),y=o(72835),m=o(90949),n=o(37025),h=o(9939),s=o(76175),t=o(83668),C=o(85378),I=o(35618),f=o(29018),S=o(46045),E=o(27738);let T=(()=>{class r{constructor(e,i,a,g,O,F){this.modalService=e,this.prodctService=i,this.router=a,this.policyService=g,this.cdRef=O,this.customerService=F,this.quoList=[],this.ELEMENT_COL=s.j,this.displayedColumns=s.k}ngOnInit(){this.getPolicyList()}ngOnDestroy(){}createOrEdit(){const e=this.modalService.open(h.P,{size:"xl",backdrop:!1});e.componentInstance.type="modal",e.result.then(()=>{},i=>{i&&"save"==i.type&&this.chooseCustomer(i)})}chooseCustomer(e){const i=this.modalService.open(n.b,{size:"xl",backdrop:!1});i.componentInstance.isPopup=!0,i.result.then(()=>{},a=>{a&&"save"==a.type&&(this.prodctService.creatingCustomer=a.data,this.prodctService.createingProd=e.data,this.prodctService.editData=null,this.prodctService.referenceID=null,this.prodctService.viewType="policy",this.prodctService.type="policy",this.router.navigateByUrl("/product-form"))})}getPolicyList(){this.policyService.findAll().toPromise().then(e=>{e&&(this.quoList=e,this.cdRef.detectChanges(),this.matTable.reChangeData())})}editLayout(e){(0,p.D)([this.prodctService.findOne(e.productId),this.customerService.findOne(e.customerId||1).pipe((0,y.K)(i=>(0,v.of)(void 0)))]).toPromise().then(i=>{i[0]&&(this.prodctService.createingProd=i[0],this.prodctService.creatingCustomer=i[1],this.prodctService.type="policy",this.prodctService.viewType="policy",this.prodctService.editData=e,this.prodctService.referenceID=e.quotationId,this.prodctService.creatingLeadId=e.leadId,this.router.navigateByUrl("/product-form"))})}FormatedDate(e){return u(e,"YYYYMMDD").format("MM/DD/YYYY")}actionBtn(e){"view"==e.cmd?this.goViewDetail(e.data):"edit"==e.cmd&&this.editLayout(e.data)}goViewDetail(e){this.prodctService.findOne(e.productId).toPromise().then(i=>{i&&(this.prodctService.createingProd=i,this.prodctService.previewType="policy",this.prodctService.editData=e,this.router.navigateByUrl("/resourse-detail"))})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(C.FF),t.Y36(I.f),t.Y36(f.F0),t.Y36(S.d),t.Y36(t.sBO),t.Y36(E.v))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-policy"]],viewQuery:function(e,i){if(1&e&&t.Gf(m.I,5),2&e){let a;t.iGM(a=t.CRH())&&(i.matTable=a.first)}},decls:15,vars:3,consts:[[1,"row"],[1,"col-12","text-right","pb-5"],[1,"btn","btn-warning","mr-2","btn-round"],[1,"btn","btn-light-dark","btn-round"],[1,"col-12"],[1,"card","card-custom","gutter-b"],[1,"card-header"],[1,"card-title"],[1,"card-label","left-border-image"],[1,"card-toolbar"],[1,"card-body","customer-card-body"],[3,"data","colum","displayedColumns","emitter"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"button",2),t._uU(3,"My View"),t.qZA(),t.TgZ(4,"button",3),t._uU(5,"Team View"),t.qZA(),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"div",5),t.TgZ(8,"div",6),t.TgZ(9,"div",7),t.TgZ(10,"h3",8),t._uU(11,"Application List"),t.qZA(),t.qZA(),t._UZ(12,"div",9),t.qZA(),t.TgZ(13,"div",10),t.TgZ(14,"app-material-table-view",11),t.NdJ("emitter",function(g){return i.actionBtn(g)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(14),t.Q6J("data",i.quoList)("colum",i.ELEMENT_COL)("displayedColumns",i.displayedColumns))},directives:[m.I],styles:[""]}),r})();var L=o(87626),D=o(49133),A=o(96152),M=o(45598);let Y=(()=>{class r{ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-policy-page"]],decls:1,vars:0,template:function(e,i){1&e&&t._UZ(0,"router-outlet")},directives:[f.lC],encapsulation:2}),r})(),Z=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[c.ez,L.vi,D.u5,D.UX,C.bz,A.ProductsModule,M.fA,f.Bz.forChild([{path:"application",component:Y,children:[{path:"list",component:T}]}])]]}),r})()}}]);