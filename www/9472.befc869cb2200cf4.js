"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9472],{17268:(v,f,e)=>{e.d(f,{k:()=>U});var t=e(83668),p=e(92070),g=e(82997),m=e(28100),_=e(83067),s=e(54753),y=e(85724),n=e(47975),P=e(11766),u=e(6920),D=e(23449),T=e(60940),O=e(35618),I=e(27673),A=e(65937),R=e(67198),M=e(86019);function C(d,E){if(1&d&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",8),t._uU(6),t.ALo(7,"number"),t.qZA(),t.TgZ(8,"td",8),t._uU(9),t.ALo(10,"number"),t.qZA(),t.TgZ(11,"td",8),t._uU(12),t.ALo(13,"number"),t.qZA(),t.TgZ(14,"td",8),t._uU(15),t.ALo(16,"number"),t.qZA(),t.qZA()),2&d){const a=E.$implicit;t.xp6(2),t.Oqu(a.endOfPolicyYear),t.xp6(2),t.Oqu(a.age),t.xp6(2),t.Oqu(t.lcZ(7,6,a.premiumPaid)||"-"),t.xp6(3),t.Oqu(t.lcZ(10,8,a.deathBenefit)),t.xp6(3),t.Oqu(t.lcZ(13,10,a.surrenderValue)||"-"),t.xp6(3),t.Oqu(t.lcZ(16,12,a.maturityBenefit)||"-")}}function b(d,E){if(1&d&&(t.TgZ(0,"tbody"),t.YNc(1,C,17,14,"tr",7),t.qZA()),2&d){const a=t.oxw();t.xp6(1),t.Q6J("ngForOf",a.showDatas)}}function S(d,E){if(1&d&&(t.ynx(0),t._UZ(1,"app-education-life-grip",9),t.BQk()),2&d){const a=t.oxw();t.xp6(1),t.Q6J("parentData",a.showDatas)}}let U=(()=>{class d{constructor(a,r,i,c,o,l,L,Z,F){this.globalFun=a,this.alertService=r,this.prodService=i,this.eduPreService=c,this.eduSurrService=o,this.eduPayment=l,this.cdf=L,this.auth=Z,this.numberPipe=F,this.actionEvent=new t.vpe,this.premimuRate={"9opt":5,"11opt":7,"14opt":10},this.frequency={monthly:1,quarterly:4,semi_annually:6,annually:12},this.lists=[],this.premiumRate=[],this.surrendRate=[],this.showDatas=[]}ngOnInit(){this.parentData=this.getParnet(),this.parentData2=this.getParnet(!0),this.parentData||this.parentData2?this.getRateValue().pipe((0,_.w)(a=>{if(!a[0]||!a[1])throw a;return(0,g.of)({premium:a[0],surrend:a[1]})})).toPromise().then(a=>{a&&(this.premiumRate=a.premium,this.surrendRate=a.surrend,this.createListData())}).catch(a=>{console.log(a)}):this.alertService.activate("This page cann't to show because there is no education life product detail data. Please add education life product detail in rodcut configuration","Warning")}createListData(){this.getcalculateData(),this.showDatas=[];let a="001"==this.plan?1:2;this.lists.forEach((r,i)=>{let c={resourceId:this.resourcesId,endOfPolicyYear:r,age:this.currentAge+i,benefitPlan:this.plan,premiumPaid:this.premimuRateNum>=r?this.calculatePre(this.currentAge+i,r):0,deathBenefit:this.sumInsured*a,surrenderValue:this.calculateSur(r),maturityBenefit:.9*this.calculateSur(r)};this.showDatas.push(c),i+1==this.lists.length&&this.cdf.detectChanges()})}getcalculateData(){let r=this.globalFun.paPolicyValidationResult.value.validationValue;this.premimuRateNum=this.premimuRate[r+"opt"],this.policyTermCode=this.parentData.policy_term,this.sumInsured=this.parentData.sum_insured,this.plan=this.parentData.insured_plan;let i=this.parentData2.date_of_birth;return this.currentAge=Math.ceil(p().diff(i,"years",!0)),this.frequencyValue=this.frequency[this.parentData.payment_frequency],this.lists=Array.from({length:r},(o,l)=>l+1),!0}getParnet(a){if((0,n.cU)(this.product.config)){let r=JSON.parse(this.product.config),c={};return c=("quotation"!=this.prodService.type?r.application||[]:r.quotation||[]).find(a?o=>"life_insured_el"==o.tableName:o=>"el_detail"==o.tableName),c&&this.globalFun.tempFormData[c.tableName+c.id]||null}return null}calculatePre(a,r){let i=15.5,c=this.premiumRate.find(l=>l.age==a);c&&(i=c.rate);let o=i/1e3*this.sumInsured;if(1==r){console.log(this.frequencyValue);let l=this.globalFun.calculateDecimal(o*this.frequencyValue)+1500;this.premiumAmt=this.numberPipe.transform(l)+" MMK / "+this.parentData.payment_frequency,this.globalFun.paPremiumResult.next(this.premiumAmt)}return this.globalFun.calculateDecimal(12*o)*r}calculateSur(a){let r=10,i=this.surrendRate.find(c=>c.year==a);return i?(r=i.rate,r/100*this.sumInsured):0}getRateValue(){return(0,m.D)([this.getPRate(),this.getSurRate()]).pipe((0,s.U)(a=>a))}getPRate(){return this.eduPreService.getMany(this.parentData.insured_plan,this.parentData.policy_term)}getSurRate(){return this.eduSurrService.getMany(this.parentData.policy_term)}nextPage(){this.showDatas.length>0&&this.eduPayment.deleteMany(this.resourcesId).pipe((0,y.z)(a=>{let r={request:this.showDatas,resourceDataDTO:{agentId:this.auth.currentUserValue.id||1,customerId:this.prodService.creatingCustomer.customerId||1,policyNumber:null,premium:(Number(this.premiumAmt.split(" ")[0].split(",").join(""))||0)+"",premiumView:this.premiumAmt,productId:this.product.id,quotationId:this.prodService.referenceID,type:this.prodService.type},resourceId:this.resourcesId};return this.eduPayment.saveMany(r)})).toPromise().then(a=>{a&&(this.globalFun.tempFormData[u.S_]=this.showDatas,this.actionEvent.emit({type:P.V.NEXT}))})}backPage(){this.actionEvent.emit({type:P.V.PREV})}}return d.\u0275fac=function(a){return new(a||d)(t.Y36(D.Q),t.Y36(T.c),t.Y36(O.f),t.Y36(I.H),t.Y36(I.D),t.Y36(A.D),t.Y36(t.sBO),t.Y36(R.e8),t.Y36(M.JJ))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-education-life"]],inputs:{product:"product",editData:"editData",resourcesId:"resourcesId"},outputs:{actionEvent:"actionEvent"},decls:25,vars:2,consts:[[1,"table","table-bordered"],[4,"ngIf"],[1,"mb-5"],[1,"row","mt-3"],[1,"col-sm-6","mx-auto"],[1,"btn","btn-block","btn-secondary",3,"click"],[1,"btn","btn-block","btn-primary",3,"click"],[4,"ngFor","ngForOf"],[2,"text-align","right"],[3,"parentData"]],template:function(a,r){1&a&&(t.TgZ(0,"table",0),t.TgZ(1,"thead"),t.TgZ(2,"tr"),t.TgZ(3,"th"),t._uU(4,"End of Policy Year"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Age"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Premium Paid"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Death/PTD Benefit"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Surrender Value"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Maturity Benefit"),t.qZA(),t.qZA(),t.qZA(),t.YNc(15,b,2,1,"tbody",1),t.qZA(),t._UZ(16,"hr",2),t.YNc(17,S,2,1,"ng-container",1),t.TgZ(18,"div",3),t.TgZ(19,"div",4),t.TgZ(20,"button",5),t.NdJ("click",function(){return r.backPage()}),t._uU(21," Previous "),t.qZA(),t.qZA(),t.TgZ(22,"div",4),t.TgZ(23,"button",6),t.NdJ("click",function(){return r.nextPage()}),t._uU(24," Save & Next "),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(15),t.Q6J("ngIf",r.premiumRate.length>0&&r.surrendRate.length>0),t.xp6(2),t.Q6J("ngIf",r.showDatas.length>0))},styles:[""]}),d})()},27673:(v,f,e)=>{e.d(f,{H:()=>_,D:()=>y});var t=e(18260),p=e(91691),h=e(83668),g=e(44522);const m=`${t.N.apiUrl}/education-premium-rates`;let _=(()=>{class n extends p.i{constructor(u){super(u,m),this.httpClient=u}getMany(u,D){return this.httpClient.get(m+"?benefitPlan="+u+"&policyTerm="+D)}}return n.\u0275fac=function(u){return new(u||n)(h.LFG(g.eN))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const s=`${t.N.apiUrl}/education-surrender-values`;let y=(()=>{class n extends p.i{constructor(u){super(u,s),this.httpClient=u}getMany(u){return this.httpClient.get(s+"?policyTerm="+u)}}return n.\u0275fac=function(u){return new(u||n)(h.LFG(g.eN))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()},65937:(v,f,e)=>{e.d(f,{D:()=>_});var t=e(18260),p=e(91691),h=e(83668),g=e(44522);const m=`${t.N.apiUrl}/education/life-benefit`;let _=(()=>{class s extends p.i{constructor(n){super(n,m),this.httpClient=n}deleteMany(n){return this.httpClient.delete(m+"/resource/"+n)}getMany(n){return this.httpClient.get(m+"/resource/"+n)}saveMany(n){return this.httpClient.post(m+"s",n)}}return s.\u0275fac=function(n){return new(n||s)(h.LFG(g.eN))},s.\u0275prov=h.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},11766:(v,f,e)=>{e.d(f,{V:()=>t});var t=(()=>{return(p=t||(t={})).NEXT="next",p.PREV="prev",t;var p})()},6920:(v,f,e)=>{e.d(f,{p:()=>p,Hu:()=>g,T$:()=>m,nm:()=>_,S_:()=>u,Ft:()=>T,rf:()=>A});var t=e(1402);const p=[{id:"addon_1634010770155",type:t.it.STATIC,pageTitle:"AddOn",showLabel:"AddOn",pageType:"form",tableName:"addon",pageIcon:"fa-briefcase"},{id:"coverage_1634010995936",type:t.it.STATIC,pageTitle:"Coverage",showLabel:"Coverage",pageType:"form",tableName:"coverage",pageIcon:"fa-clipboard-check"},{id:"static_1634018514043",type:t.it.STATIC,pageTitle:"Product Detail",showLabel:"Motor Product Detail",pageType:"form",tableName:"static",pageIcon:"fa-briefcase"},{id:"static_1635747288508",type:t.it.STATIC,pageTitle:"Product Detail",showLabel:"Motor Product Detail (Application)",pageType:"form",tableName:"static",pageIcon:"fa-briefcase"},{id:"static_1635218894755",type:t.it.STATIC,pageTitle:"Payment Schedules",showLabel:"Payment Schedules",pageType:"form",tableName:"static",pageIcon:"fa-briefcase"},{id:"static_1635309151504",type:t.it.STATIC,pageTitle:"Education Life Benefit",showLabel:"Education Life Benefit",pageType:"form",tableName:"static",pageIcon:"fa-briefcase"},{id:"static_1641364737069",type:t.it.STATIC,pageTitle:"Product Detail",showLabel:"Fire Product Detail",pageType:"form",tableName:"static",pageIcon:"fa-briefcase"},{id:"static_1643116155828",type:t.it.STATIC,pageTitle:"Risk Detail",showLabel:"Fire Risk Detail",pageType:"form",tableName:"static",pageIcon:"fa-briefcase"},{id:"static_1644896661652",type:t.it.STATIC,pageTitle:"Benefit Illustration",showLabel:"Endowment Benefit Illustration",pageType:"form",tableName:"static",pageIcon:"fa-briefcase"},{id:"static_1648784270432",type:t.it.STATIC,pageTitle:"Optional Coverages",showLabel:"Motor Addons",pageType:"form",tableName:"static",pageIcon:"fa-briefcase"},{id:"static_1648784270356",type:t.it.STATIC,pageTitle:"Travel Risk",showLabel:"Travel Risk",pageType:"form",tableName:"static",pageIcon:"fa-briefcase"}],g="static_1634018514043",m="static_1641364737069",_="static_1643116155828",u="static_1635309151504",T="static_1644896661652",A="static_1648784270356"},59472:(v,f,e)=>{e.d(f,{Q:()=>r});var t=e(86019),p=e(49133),h=e(85993),g=e(55167),m=e(45598),_=e(17268),s=e(83668),y=e(11766),n=e(6920),P=e(60940),u=e(23449),D=e(75396);const T=["chart"];let O=(()=>{class i{constructor(o,l){this.alertService=o,this.globalFun=l,this.actionEvent=new s.vpe,this.showDatas=[],this.chartOptions={series:[{name:"Premium Amount",data:[],color:"#005f99"}],chart:{height:450,type:"line",toolbar:{show:!1}},title:{text:"Basic Benefit Illustration",offsetX:0,offsetY:10,floating:!1,style:{fontSize:"1.1rem",fontFamily:"Roboto"}},xaxis:{type:"category",categories:["0","1 year","2 years","3 years","4 years","5 years","6 years","7 years","8 years","9 years","10 years","11 years","12 years","13 years","14 years"],labels:{style:{fontSize:"1rem",fontFamily:"Roboto"}}},yaxis:{min:0,max:5e6,tickAmount:5,labels:{style:{fontSize:"1rem",fontFamily:"Roboto"}}},legend:{position:"top",horizontalAlign:"right",floating:!0,offsetY:-25,offsetX:-5},dataLabels:{enabled:!0,textAnchor:"middle",offsetX:-10,offsetY:-5,enabledOnSeries:[0]},markers:{size:[5,0,0]}}}ngOnInit(){if(this.parentData){let o=this.parentData.map(l=>l.premiumPaid&&l.premiumPaid>0?l.premiumPaid:null);o.unshift(null),this.parentData.length>0&&"002"==this.parentData[0].benefitPlan&&(this.chartOptions.title.text="Double Benefit Illustration",this.chartOptions.yaxis.max=1e7,this.chartOptions.series[1]={data:[],name:"Goal"},this.chartOptions.series[2]={data:[],name:"2X Goal"},this.chartOptions.series[1].data=[5e6,5e6,5e6,5e6,5e6,5e6,5e6,5e6,5e6,5e6,5e6,5e6,5e6,5e6,5e6],this.chartOptions.series[2].data=[1e7,1e7,1e7,1e7,1e7,1e7,1e7,1e7,1e7,1e7,1e7,1e7,1e7,1e7,1e7]),this.chartOptions.series[0].data=o}else this.alertService.activate("This page cann't to show because there is no education life product detail data. Please add education life product detail in rodcut configuration","Warning")}getParnet(){return this.globalFun.tempFormData[n.S_]}nextPage(){this.actionEvent.emit({type:y.V.NEXT})}backPage(){this.actionEvent.emit({type:y.V.PREV})}}return i.\u0275fac=function(o){return new(o||i)(s.Y36(P.c),s.Y36(u.Q))},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-education-life-grip"]],viewQuery:function(o,l){if(1&o&&s.Gf(T,5),2&o){let L;s.iGM(L=s.CRH())&&(l.chart=L.first)}},inputs:{product:"product",editData:"editData",resourcesId:"resourcesId",parentData:"parentData"},outputs:{actionEvent:"actionEvent"},decls:1,vars:8,consts:[[3,"series","chart","xaxis","yaxis","title","legend","dataLabels","markers"]],template:function(o,l){1&o&&s._UZ(0,"apx-chart",0),2&o&&s.Q6J("series",l.chartOptions.series)("chart",l.chartOptions.chart)("xaxis",l.chartOptions.xaxis)("yaxis",l.chartOptions.yaxis)("title",l.chartOptions.title)("legend",l.chartOptions.legend)("dataLabels",l.chartOptions.dataLabels)("markers",l.chartOptions.markers)},directives:[D.x],styles:[""]}),i})();var I=e(44290),A=e(78480),R=e(57730),M=e(86031),C=e(57842),b=e(13468),S=e(99765),U=e(87626),d=e(70933),E=e(68039),a=e(63699);let r=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[t.ez,p.u5,m.fA,p.UX,h.bz,g.Fk,h.M,C.A0,b.rP,D.X,U.vi,A.FA,I.XK,R.c,M.lN,S.Ud,d.Q,E.Tx,a.j]]}),i})();s.B6R(_.k,[t.O5,t.sg,O],[t.JJ])}}]);