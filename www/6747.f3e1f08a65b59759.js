"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6747],{27738:(b,g,o)=>{o.d(g,{v:()=>y});var t=o(18260),r=o(91691),p=o(83668),v=o(44522);const C=`${t.N.apiUrl}/customer`;let y=(()=>{class u extends r.i{constructor(_){super(_,C),this.httpClient=_}}return u.\u0275fac=function(_){return new(_||u)(p.LFG(v.eN))},u.\u0275prov=p.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},11918:(b,g,o)=>{o.d(g,{b:()=>O});var t=o(83668),r=o(49133),p=o(90949),v=o(62311),C=o(44290),y=o(92118),u=o(47975),Z=o(4205),_=o(99457),D=o(85993),A=o(86019),E=o(15470),I=o(85472),P=o(57842),L=o(15346);function e(d,h){if(1&d){const n=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){return t.CHM(n),t.oxw().navigateToDetail("create")}),t._UZ(1,"span",26),t.qZA()}}function M(d,h){if(1&d){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",30),t.TgZ(2,"button",31),t.NdJ("click",function(){return t.CHM(n),t.oxw(2).closeModal()}),t._uU(3,"Cancel"),t.qZA(),t.TgZ(4,"button",32),t.NdJ("click",function(){return t.CHM(n),t.oxw(2).nextProd()}),t._uU(5,"Next"),t.qZA(),t.qZA(),t.BQk()}if(2&d){const n=t.oxw(2);t.xp6(4),t.Q6J("disabled",!n.selected.customerId)}}function S(d,h){if(1&d){const n=t.EpF();t.TgZ(0,"div",27),t.TgZ(1,"app-material-table-view",28),t.NdJ("emitter",function(c){return t.CHM(n),t.oxw().actionBtn(c)})("rowselect",function(c){return t.CHM(n),t.oxw().rowSelected(c)}),t.qZA(),t.YNc(2,M,6,1,"ng-container",29),t.qZA()}if(2&d){const n=t.oxw();t.xp6(1),t.Q6J("data",n.customerList)("colum",n.ELEMENT_COL)("displayedColumns",n.displayedColumns)("selectable",n.isPopup),t.xp6(1),t.Q6J("ngIf",n.isPopup&&!n.isDynamic)}}let O=(()=>{class d{constructor(n,s,c,T){this.router=n,this.cdf=s,this.customerListService=c,this.modalService=T,this.ELEMENT_COL=JSON.parse(JSON.stringify(v.Ks)),this.displayedColumns=JSON.parse(JSON.stringify(v.Q1)),this.customerList=[],this.statusOption=v.qb,this.identityTypeOption=v.Mf,this.selectedUser=new t.vpe,this.isPopup=!1,this.party=!0,this.isDynamic=!1,this.show=!1,this.loadForm()}ngOnInit(){this.isPopup&&(this.ELEMENT_COL.splice(9,1),this.displayedColumns.splice(9,1)),this.show=!0}ngAfterViewInit(){this.getList()}loadForm(){this.customerForm=new r.cw({name:new r.NI(null),identityType:new r.NI(null),identityNumber:new r.NI(null),statusCode:new r.NI(null),partyCode:new r.NI(null),startDate:new r.NI(null),endDate:new r.NI(null)})}navigateToDetail(n,s,c){this.router.navigate(["/customer/customer-detail"],{queryParams:{pageStatus:n,pageId:s,pageSecondaryId:c}})}getList(){this.customerListService.getCustomerList(this.customerForm.value,this.party,!(!this.isPopup||this.isDynamic)).toPromise().then(s=>{s&&(this.customerList=s,this.cdf.detectChanges(),this.matTable&&this.matTable.reChangeData())})}get selected(){let n;return this.matTable&&(n=this.matTable.selection.selected[0]),n||{customerId:0}}rowSelected(n){this.selectedUser.emit(n)}cancel(){this.customerForm.reset(),this.getList()}actionBtn(n){"edit"==n.cmd&&this.navigateToDetail("edit",n.data.customerId,n.data.individualId)}isControlValid(n){const s=this.customerForm.controls[n];return s.valid&&(s.dirty||s.touched)}isControlInvalid(n){const s=this.customerForm.controls[n];return s.invalid&&(s.dirty||s.touched)}controlHasError(n,s){const c=this.customerForm.controls[s];return c.hasError(n)&&(c.dirty||c.touched)}isControlTouched(n){const s=this.customerForm.controls[n];return s.dirty||s.touched}nextProd(){this.selected.customerId&&this.modalService.dismissAll({data:this.selected,type:"save"})}closeModal(){this.modalService.dismissAll()}}return d.\u0275fac=function(n){return new(n||d)(t.Y36(Z.F0),t.Y36(t.sBO),t.Y36(_.c),t.Y36(D.FF))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-customer-list"]],viewQuery:function(n,s){if(1&n&&t.Gf(p.I,5),2&n){let c;t.iGM(c=t.CRH())&&(s.matTable=c.first)}},inputs:{isPopup:"isPopup",party:"party",isDynamic:"isDynamic"},outputs:{selectedUser:"selectedUser"},features:[t._Bn([{provide:C._A,useClass:y.t7,deps:[C.Ad]},{provide:C.sG,useValue:u.Gs}])],decls:61,vars:52,consts:[[1,"row"],[1,"col-12"],[1,"card","card-custom","gutter-b"],[1,"card-header"],[1,"card-title"],[1,"card-label","left-border-image"],[1,"card-toolbar"],["type","button","class","btn btn-primary btn-circle","style","margin-right: 1rem;\n                    ",3,"click",4,"ngIf"],[1,"flaticon2-magnifier-tool","search-tool",3,"click"],["type","button",1,"btn","btn-primary","ml-2",2,"min-width","50px",3,"click"],[1,""],[1,"card-body","px-10","py-3"],["action","#",1,"form",3,"formGroup"],[1,"row",2,"align-items","center"],["remove-host","",3,"formInput","colClass"],[1,"col-md-6"],[1,"form-group","row"],[1,"col-sm-4","col-form-label"],[1,"col-sm-8"],["type","text","name","name","autocomplete","off","formControlName","name",1,"form-control","form-control-sm"],["type","text","name","partyCode","autocomplete","off","formControlName","partyCode",1,"form-control","form-control-sm"],["bindLabel","value","bindValue","code","formControlName","identityType",1,"ng-custom-select","ng-custom-select-sm",3,"items"],["type","text","name","identityNumber","autocomplete","off","formControlName","identityNumber",1,"form-control","form-control-sm"],["bindLabel","value","bindValue","code","formControlName","statusCode",1,"ng-custom-select","ng-custom-select-sm",3,"items"],["class","card-body customer-card-body",4,"ngIf"],["type","button",1,"btn","btn-primary","btn-circle",2,"margin-right","1rem",3,"click"],[1,"flaticon2-plus"],[1,"card-body","customer-card-body"],[3,"data","colum","displayedColumns","selectable","emitter","rowselect"],[4,"ngIf"],[1,"card-footer"],["type","button",1,"btn","btn-light","btn-elevate","mr-2",3,"click"],["type","button",1,"btn","btn-primary","btn-elevate",3,"disabled","click"]],template:function(n,s){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t.TgZ(5,"h3",5),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.qZA(),t.TgZ(8,"div",6),t.YNc(9,e,2,0,"button",7),t.TgZ(10,"span",8),t.NdJ("click",function(){return s.getList()}),t.qZA(),t.TgZ(11,"button",9),t.NdJ("click",function(){return s.cancel()}),t.TgZ(12,"span",10),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",11),t.TgZ(16,"form",12),t.TgZ(17,"div",13),t._UZ(18,"app-start-end-date",14),t.qZA(),t.TgZ(19,"div",13),t.TgZ(20,"div",15),t.TgZ(21,"div",16),t.TgZ(22,"label",17),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"div",18),t._UZ(26,"input",19),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"div",15),t.TgZ(28,"div",16),t.TgZ(29,"label",17),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"div",18),t._UZ(33,"input",20),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"div",13),t.TgZ(35,"div",15),t.TgZ(36,"div",16),t.TgZ(37,"label",17),t._uU(38),t.ALo(39,"translate"),t.qZA(),t.TgZ(40,"div",18),t._UZ(41,"ng-select",21),t.qZA(),t.qZA(),t.qZA(),t.TgZ(42,"div",15),t.TgZ(43,"div",16),t.TgZ(44,"label",17),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"div",18),t._UZ(48,"input",22),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(49,"div",0),t.TgZ(50,"div",15),t.TgZ(51,"div",16),t.TgZ(52,"label",17),t._uU(53),t.ALo(54,"translate"),t.qZA(),t.TgZ(55,"div",18),t._UZ(56,"ng-select",23),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(57,"div",0),t.TgZ(58,"div",1),t.TgZ(59,"div",2),t.YNc(60,S,3,5,"div",24),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(2),t.ekj("remove-p",s.isPopup),t.xp6(4),t.Oqu(t.lcZ(7,38,"FORM.customer_list")),t.xp6(3),t.Q6J("ngIf",!s.isPopup),t.xp6(4),t.Oqu(t.lcZ(14,40,"FORM.btn_cancel")),t.xp6(3),t.Q6J("formGroup",s.customerForm),t.xp6(2),t.Q6J("formInput",s.customerForm)("colClass","col-md-6"),t.xp6(5),t.Oqu(t.lcZ(24,42,"FORM.name")),t.xp6(3),t.ekj("is-invalid",s.isControlInvalid("name"))("is-valid",s.isControlValid("name")),t.xp6(4),t.Oqu(t.lcZ(31,44,"FORM.party_code")),t.xp6(3),t.ekj("is-invalid",s.isControlInvalid("partyCode"))("is-valid",s.isControlValid("partyCode")),t.xp6(5),t.Oqu(t.lcZ(39,46,"FORM.id_type")),t.xp6(3),t.ekj("is-invalid",s.isControlInvalid("identityType"))("is-valid",s.isControlValid("identityType")),t.Q6J("items",s.identityTypeOption),t.xp6(4),t.Oqu(t.lcZ(46,48,"FORM.id_no")),t.xp6(3),t.ekj("is-invalid",s.isControlInvalid("identityNumber"))("is-valid",s.isControlValid("identityNumber")),t.xp6(5),t.Oqu(t.lcZ(54,50,"FORM.status")),t.xp6(3),t.ekj("is-invalid",s.isControlInvalid("statusCode"))("is-valid",s.isControlValid("statusCode")),t.Q6J("items",s.statusOption),t.xp6(3),t.ekj("remove-p",s.isPopup),t.xp6(1),t.Q6J("ngIf",s.show))},directives:[A.O5,r._Y,r.JL,r.sg,E.Q,I.Z,r.Fj,r.JJ,r.u,P.w9,p.I],pipes:[L.X],styles:[".remove-p[_ngcontent-%COMP%]{margin-bottom:0}.col-form-label[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}.form-group.row[_ngcontent-%COMP%]{align-items:center}.draggable[_ngcontent-%COMP%]{color:#fff;border-radius:50%;touch-action:none;-webkit-user-select:none;user-select:none;position:absolute;z-index:999}"]}),d})()},17318:(b,g,o)=>{o.d(g,{J:()=>r,L:()=>p});var t=o(18510);const r=[{title:"Quotation ID",type:t.Y.FEILD,field:"id"},{title:"Product Name",type:t.Y.FEILD,field:"productName"},{title:"Product Code",type:t.Y.FEILD,field:"productCode"},{title:"Agent Name",type:t.Y.FEILD,field:"agentFirstName"},{title:"Premium",type:t.Y.FEILD,field:"premium",amtFormat:!0},{title:"Status",type:t.Y.FEILD,field:"status",isStatus:!0},{title:"Date",type:t.Y.FEILD,field:"createdAt",isDate:!0},{title:"Application",type:t.Y.TEXT,field:"create application"},{title:"Actions",type:t.Y.ACTION,field:"actions",btn:{view:!0,edit:!0}}],p=["id","productName","productCode","agentFirstName","premium","status","createdAt","create application","actions"]},6747:(b,g,o)=>{o.r(g),o.d(g,{QuotationsModule:()=>B});var t=o(86019),r=o(49133),p=o(92118),v=o(44290),C=o(74464),y=o(92070),u=o(28100),Z=o(82997),_=o(72835),D=o(47975),A=o(37632),E=o(90949),I=o(11918),P=o(9939),L=o(17318),e=o(83668),M=o(85993),S=o(35618),O=o(4205),d=o(80842),h=o(27738),n=o(15470),s=o(85472),c=o(15346);const T=function(l){return{activated:l}};let q=(()=>{class l{constructor(i,a,m,N,w,Y,K){this.modalService=i,this.prodctService=a,this.router=m,this.quoService=N,this.cdRef=w,this.customerService=Y,this.menuService=K,this.quoList=[],this.quoAccess=A.w,this.policyAccess=A.w,this.isTeam=!1,this.ELEMENT_COL=JSON.parse(JSON.stringify(L.J)),this.displayedColumns=JSON.parse(JSON.stringify(L.L)),this.loadForm()}ngOnInit(){this.checkPremission(),this.getQuoList()}loadForm(){let i=new Date,a=new Date(i.setMonth(i.getMonth()-1)),m=new Date(i.setMonth(i.getMonth()+1));this.quotationForm=new r.cw({startDate:new r.NI(a),endDate:new r.NI(m),isTeam:new r.NI(this.isTeam)})}checkPremission(){this.menuService.dataAccess.subscribe(i=>{i&&(this.quoAccess=i.quotation,this.policyAccess=i.application,this.quoAccess.edit||(this.ELEMENT_COL[8].btn.edit=!1),this.policyAccess.create||(this.ELEMENT_COL.splice(7,1),this.displayedColumns.splice(7,1)))})}ngOnDestroy(){}cancel(){}changeView(i){this.isTeam="team"==i,this.quotationForm.controls.isTeam.setValue(this.isTeam),this.cdRef.detectChanges(),this.getQuoList()}createOrEdit(){const i=this.modalService.open(P.P,{size:"xl",backdrop:!1});i.componentInstance.type="modal",i.result.then(()=>{},a=>{a&&"save"==a.type&&this.chooseCustomer(a)})}chooseCustomer(i){const a=this.modalService.open(I.b,{size:"xl",backdrop:!1});a.componentInstance.isPopup=!0,a.result.then(()=>{},m=>{m&&"save"==m.type&&(this.prodctService.createingProd=i.data,this.prodctService.creatingCustomer=m.data,this.prodctService.viewType="quotation",this.prodctService.editData=null,this.prodctService.referenceID=null,this.prodctService.type="quotation",this.router.navigateByUrl("/product-form"))})}getQuoList(){this.quoService.getQuoList(this.quotationForm.getRawValue()).toPromise().then(i=>{i&&(this.quoList=i,this.cdRef.detectChanges(),this.matTable.reChangeData())})}editLayout(i){(0,u.D)([this.prodctService.findOne(i.productId),this.customerService.findOne(i.customerId||1).pipe((0,_.K)(a=>(0,Z.of)(void 0)))]).toPromise().then(a=>{a&&(this.prodctService.createingProd=a[0],this.prodctService.creatingCustomer=a[1],this.prodctService.type="quotation",this.prodctService.viewType="quotation",this.prodctService.editData=i,this.prodctService.referenceID=null,this.prodctService.creatingLeadId=i.leadId,this.router.navigateByUrl("/product-form"))})}FormatedDate(i){return y(i,"YYYYMMDD").format("MM/DD/YYYY")}actionBtn(i){"view"==i.cmd?this.goViewDetail(i.data):"edit"==i.cmd?this.editLayout(i.data):"create"==i.cmd&&this.createPolicy(i.data)}goViewDetail(i){this.prodctService.findOne(i.productId).toPromise().then(a=>{a&&(this.prodctService.createingProd=a,this.prodctService.editData=i,this.prodctService.previewType="quotation",this.router.navigateByUrl("/resourse-detail"))})}createPolicy(i){(0,u.D)([this.prodctService.findOne(i.productId),this.customerService.findOne(i.customerId||1).pipe((0,_.K)(a=>(0,Z.of)(void 0)))]).toPromise().then(a=>{a&&(this.prodctService.createingProdRef=a[0],this.prodctService.creatingCustomer=a[1],this.prodctService.viewType="policy",this.prodctService.type="policy",this.prodctService.referenceID=i.id,this.prodctService.editData=null,this.prodctService.creatingLeadId=i.leadId,this.router.navigateByUrl("/product-form"))})}}return l.\u0275fac=function(i){return new(i||l)(e.Y36(M.FF),e.Y36(S.f),e.Y36(O.F0),e.Y36(d.G),e.Y36(e.sBO),e.Y36(h.v),e.Y36(A.q))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-quotations"]],viewQuery:function(i,a){if(1&i&&e.Gf(E.I,5),2&i){let m;e.iGM(m=e.CRH())&&(a.matTable=m.first)}},features:[e._Bn([{provide:C._A,useClass:p.t7,deps:[v.Ad]},{provide:v.sG,useValue:D.Gs}])],decls:30,vars:24,consts:[[1,"row"],[1,"col-12","text-right","pb-5"],[1,"btn","btn-light-dark","new-btn-dark-gray","mr-2","btn-round",3,"ngClass","click"],[1,"btn","btn-light-dark","new-btn-dark-gray","btn-round",3,"ngClass","click"],[1,"col-12"],[1,"card","card-custom","gutter-b"],[1,"card-header"],[1,"card-title"],[1,"card-label","left-border-image"],[1,"card-toolbar"],[1,"flaticon2-magnifier-tool","search-tool",3,"click"],["type","button",1,"btn","btn-primary","ml-2",2,"min-width","50px",3,"click"],[1,""],[1,"card-body","px-10","py-3"],["action","#",1,"form",3,"formGroup"],[1,"row",2,"align-items","center"],["remove-host","",3,"formInput","colClass"],[1,"card-body","customer-card-body"],[3,"data","colum","displayedColumns","emitter"]],template:function(i,a){1&i&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"button",2),e.NdJ("click",function(){return a.changeView("myview")}),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){return a.changeView("team")}),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.qZA(),e.TgZ(8,"div",4),e.TgZ(9,"div",5),e.TgZ(10,"div",6),e.TgZ(11,"div",7),e.TgZ(12,"h3",8),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.qZA(),e.TgZ(15,"div",9),e.TgZ(16,"span",10),e.NdJ("click",function(){return a.getQuoList()}),e.qZA(),e.TgZ(17,"button",11),e.NdJ("click",function(){return a.cancel()}),e.TgZ(18,"span",12),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",13),e.TgZ(22,"form",14),e.TgZ(23,"div",15),e._UZ(24,"app-start-end-date",16),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"div",0),e.TgZ(26,"div",4),e.TgZ(27,"div",5),e.TgZ(28,"div",17),e.TgZ(29,"app-material-table-view",18),e.NdJ("emitter",function(N){return a.actionBtn(N)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.xp6(2),e.Q6J("ngClass",e.VKq(20,T,!a.isTeam)),e.xp6(1),e.Oqu(e.lcZ(4,12,"FORM.my_view")),e.xp6(2),e.Q6J("ngClass",e.VKq(22,T,a.isTeam)),e.xp6(1),e.Oqu(e.lcZ(7,14,"FORM.team_veiw")),e.xp6(7),e.Oqu(e.lcZ(14,16,"FORM.quotation_list")),e.xp6(6),e.Oqu(e.lcZ(20,18,"FORM.btn_cancel")),e.xp6(3),e.Q6J("formGroup",a.quotationForm),e.xp6(2),e.Q6J("formInput",a.quotationForm)("colClass","col-md-6"),e.xp6(5),e.Q6J("data",a.quoList)("colum",a.ELEMENT_COL)("displayedColumns",a.displayedColumns))},directives:[t.mk,r._Y,r.JL,r.sg,n.Q,s.Z,E.I],pipes:[c.X],styles:[".activated[_ngcontent-%COMP%]{background-color:#ff8100!important;color:#fff!important}"]}),l})(),F=(()=>{class l{ngOnInit(){}}return l.\u0275fac=function(i){return new(i||l)},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-quotation-page"]],decls:1,vars:0,template:function(i,a){1&i&&e._UZ(0,"router-outlet")},directives:[O.lC],encapsulation:2}),l})();var U=o(87626),Q=o(96152),R=o(45598),J=o(90860),x=o(63699);let B=(()=>{class l{}return l.\u0275fac=function(i){return new(i||l)},l.\u0275mod=e.oAB({type:l}),l.\u0275inj=e.cJS({imports:[[t.ez,U.vi,r.u5,r.UX,M.bz,R.fA,x.j,O.Bz.forChild([{path:"quotation",component:F,children:[{path:"list",component:q}]}]),Q.ProductsModule,J.m]]}),l})()}}]);