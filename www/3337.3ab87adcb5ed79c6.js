"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3337],{63337:(E,A,l)=>{l.r(A),l.d(A,{LeadDetailModule:()=>Di});var p=l(86019),c=l(49133),v=l(87626),f=l(45598),T=l(85378),h=l(29018),d=l(64762),m=l(44290),g=l(92118),b=l(62311),L=l(22030),C=l(91471),x=l(73155),V=l(63703),G=l(76175),j=l(17318),B=l(37025),tt=l(68424),M=l(9939),k=l(92070),et=l(47975),t=l(83668),it=l(90949),F=l(18260),Ot=l(91691),wt=l(44522);const pt=`${F.N.apiUrl}/lead`,Et=`${F.N.apiUrl}/campaigns`,kt=`${F.N.apiUrl}/leadSource`,Ft=`${F.N.apiUrl}/leadSource/score`,qt=`${F.N.apiUrl}/leadQuality`,Rt=`${F.N.apiUrl}/validity-period/filter`;let _t=(()=>{class n extends Ot.i{constructor(e){super(e,pt),this.httpClient=e}updateLeadStatus(e,i){return this.httpClient.put(pt+"/"+i+"/status",e)}getCampaignList(e){let i=Et+"?";return e.cpmNumber&&(i=i+"cpmNumber="+e.cpmNumber+"&"),e.cpmName&&(i=i+"cpmName="+e.cpmName+"&"),console.log(i),this.httpClient.get(i)}getLeadSource(){return this.httpClient.get(kt)}getLeadQuality(e){return this.httpClient.get(qt+"?distributionChannelCode="+e)}getLeadScore(e,i){return this.httpClient.get(Ft+"?sourceCode="+e+"&distributionChannelCode="+i)}getValidityPeriod(e,i){return this.httpClient.get(Rt+"?leadSource="+e+"&productId="+i)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(wt.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ut(n,r){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",20),t.TgZ(2,"button",21),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeModal()}),t._uU(3,"Cancel"),t.qZA(),t.TgZ(4,"button",22),t.NdJ("click",function(){return t.CHM(e),t.oxw().nextProd()}),t._uU(5,"Next"),t.qZA(),t.qZA(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(4),t.Q6J("disabled",!e.selected.cpmNumber)}}let Bt=(()=>{class n{constructor(e,i,a){this.LeadDetailService=e,this.cdf=i,this.modalService=a,this.campaignList=[],this.isPopup=!1,this.selectedCampaign=new t.vpe,this.ELEMENT_COL=JSON.parse(JSON.stringify(x.Y6)),this.displayedColumns=JSON.parse(JSON.stringify(x.NP))}ngOnInit(){this.loadForm(),this.getList()}getList(){this.LeadDetailService.getCampaignList(this.campaignForm.value).toPromise().then(e=>{e&&(this.campaignList=e,this.cdf.detectChanges(),this.matTable.reChangeData())})}cancel(){this.modalService.dismissAll()}loadForm(){this.campaignForm=new c.cw({cpmNumber:new c.NI(null),cpmName:new c.NI(null)})}rowSelected(e){this.selectedCampaign.emit(e)}closeModal(){this.modalService.dismissAll()}nextProd(){this.selected.cpmNumber&&this.modalService.dismissAll({data:this.selected,type:"save"})}get selected(){let e;return this.matTable&&(e=this.matTable.selection.selected[0]),e||{cpmNumber:0}}isControlValid(e){const i=this.campaignForm.controls[e];return i.valid&&(i.dirty||i.touched)}isControlInvalid(e){const i=this.campaignForm.controls[e];return i.invalid&&(i.dirty||i.touched)}controlHasError(e,i){const a=this.campaignForm.controls[i];return a.hasError(e)&&(a.dirty||a.touched)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_t),t.Y36(t.sBO),t.Y36(T.FF))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-campaign-list"]],viewQuery:function(e,i){if(1&e&&t.Gf(it.I,5),2&e){let a;t.iGM(a=t.CRH())&&(i.matTable=a.first)}},inputs:{isPopup:"isPopup"},outputs:{selectedCampaign:"selectedCampaign"},decls:32,vars:18,consts:[[1,"row"],[1,"col-12"],[1,"modal-content"],[1,"modal-header"],["id","example-modal-sizes-title-lg",1,"modal-title","h4","left-border-image"],[1,"card-toolbar"],[1,"flaticon2-magnifier-tool","search-tool",3,"click"],["type","button",1,"btn","btn-primary","ml-2",2,"min-width","50px",3,"click"],[1,""],[1,"overlay","overlay-block","cursor-default","modal-body"],["action","#",1,"form",3,"formGroup"],[1,"row",2,"align-items","center"],[1,"col-sm-6"],[1,"form-group","row"],[1,"col-sm-4","col-form-label"],[1,"col-sm-8"],["type","text","name","cpmNumber","autocomplete","off","formControlName","cpmNumber",1,"form-control","form-control-sm"],["type","text","name","cpmName","autocomplete","off","formControlName","cpmName",1,"form-control","form-control-sm"],[3,"data","colum","displayedColumns","selectable","rowselect"],[4,"ngIf"],[1,"card-footer"],["type","button",1,"btn","btn-light","btn-elevate","mr-2",3,"click"],["type","button",1,"btn","btn-primary","btn-elevate",3,"disabled","click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t._uU(5," Campaign List "),t.qZA(),t.TgZ(6,"div",5),t.TgZ(7,"span",6),t.NdJ("click",function(){return i.getList()}),t.qZA(),t.TgZ(8,"button",7),t.NdJ("click",function(){return i.cancel()}),t.TgZ(9,"span",8),t._uU(10,"Cancel"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"div",9),t.TgZ(12,"form",10),t.TgZ(13,"div",11),t.TgZ(14,"div",12),t.TgZ(15,"div",13),t.TgZ(16,"label",14),t._uU(17,"Campaign Number"),t.qZA(),t.TgZ(18,"div",15),t._UZ(19,"input",16),t.qZA(),t.qZA(),t.qZA(),t.TgZ(20,"div",12),t.TgZ(21,"div",13),t.TgZ(22,"label",14),t._uU(23,"Campaign Name"),t.qZA(),t.TgZ(24,"div",15),t._UZ(25,"input",17),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(26,"div",0),t.TgZ(27,"div",1),t.TgZ(28,"div",2),t.TgZ(29,"div",9),t.TgZ(30,"app-material-table-view",18),t.NdJ("rowselect",function(o){return i.rowSelected(o)}),t.qZA(),t.qZA(),t.YNc(31,Ut,6,1,"ng-container",19),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.ekj("remove-p",i.isPopup),t.xp6(10),t.Q6J("formGroup",i.campaignForm),t.xp6(7),t.ekj("is-invalid",i.isControlInvalid("cpmNumber"))("is-valid",i.isControlValid("cpmNumber")),t.xp6(6),t.ekj("is-invalid",i.isControlInvalid("cpmName"))("is-valid",i.isControlValid("cpmName")),t.xp6(3),t.ekj("remove-p",i.isPopup),t.xp6(2),t.Q6J("data",i.campaignList)("colum",i.ELEMENT_COL)("displayedColumns",i.displayedColumns)("selectable",i.isPopup),t.xp6(1),t.Q6J("ngIf",i.isPopup))},directives:[c._Y,c.JL,c.sg,c.Fj,c.JJ,c.u,it.I,p.O5],styles:[""]}),n})();var Jt=l(26106),ht=l(67198),gt=l(58695),W=l(28100),y=l(82997),I=l(72835),at=l(98849),nt=l(48921),D=l(54753),S=l(37632),Yt=l(26697),Qt=l(57311),ft=l(35618),Ht=l(27738),ot=l(49875),Vt=l(95849),Gt=l(28210),jt=l(60940),st=l(57730),J=l(78480),Wt=l(86031),z=l(57842);const zt=["fna"],Kt=["activity"],$t=["application"],Xt=["attachment"],te=["quotation"];function ee(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",81),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).toggleAccordion("Detail")}),t._UZ(1,"span",82),t.qZA()}}function ie(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",83),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).toggleAccordion("Detail")}),t._UZ(1,"span",84),t.qZA()}}function ae(n,r){if(1&n&&(t.TgZ(0,"div",76),t.TgZ(1,"div",77),t.TgZ(2,"h3",56),t._uU(3,"Lead Detail"),t.qZA(),t.qZA(),t.TgZ(4,"div",78),t.YNc(5,ee,2,0,"button",79),t.YNc(6,ie,2,0,"button",80),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(5),t.Q6J("ngIf",e.isDetail),t.xp6(1),t.Q6J("ngIf",!e.isDetail)}}function ne(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"input",85),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).openNRCModal()}),t.qZA()}if(2&n){const e=t.oxw(2);t.ekj("is-invalid",e.isControlInvalid("identityNumber"))("is-valid",e.isControlValid("identityNumber"))}}function oe(n,r){if(1&n&&t._UZ(0,"input",86),2&n){const e=t.oxw(2);t.ekj("is-invalid",e.isControlInvalid("identityNumber"))("is-valid",e.isControlValid("identityNumber"))}}function se(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",87),t.TgZ(1,"a",88),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).viewProspectCustomer()}),t._UZ(2,"span",89),t.qZA(),t.qZA()}}function re(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",87),t.TgZ(1,"button",90),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).updateLeadStatus("03")}),t.TgZ(2,"span",91),t._uU(3,"Approve"),t.qZA(),t.qZA(),t.qZA()}}function le(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",87),t.TgZ(1,"button",90),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).updateLeadStatus("04")}),t.TgZ(2,"span",91),t._uU(3,"Reject"),t.qZA(),t.qZA(),t.qZA()}}function ce(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",87),t.TgZ(1,"button",90),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).updateLeadStatus("05")}),t.TgZ(2,"span",91),t._uU(3,"Win"),t.qZA(),t.qZA(),t.qZA()}}function de(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",87),t.TgZ(1,"button",90),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).updateLeadStatus("06")}),t.TgZ(2,"span",91),t._uU(3,"Lost"),t.qZA(),t.qZA(),t.qZA()}}function me(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",87),t.TgZ(1,"button",90),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).updateLeadStatus("save")}),t.TgZ(2,"span",91),t._uU(3,"Save"),t.qZA(),t.qZA(),t.qZA()}}function ue(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",87),t.TgZ(1,"button",92),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).updateLeadStatus("cancel")}),t.TgZ(2,"span",91),t._uU(3,"Cancel"),t.qZA(),t.qZA(),t.qZA()}}function pe(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",100),t.NdJ("click",function(){return t.CHM(e),t.oxw(5).add("FNA")}),t._UZ(1,"span",89),t.qZA()}}function _e(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",81),t.NdJ("click",function(){return t.CHM(e),t.oxw(5).toggleAccordion("FNA")}),t._UZ(1,"span",82),t.qZA()}}function he(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",83),t.NdJ("click",function(){return t.CHM(e),t.oxw(5).toggleAccordion("FNA")}),t._UZ(1,"span",84),t.qZA()}}function ge(n,r){if(1&n&&(t.TgZ(0,"div",76),t.TgZ(1,"div",77),t.TgZ(2,"h3",56),t._uU(3,"FNA"),t.qZA(),t.qZA(),t.TgZ(4,"div",78),t.YNc(5,pe,2,0,"button",99),t.YNc(6,_e,2,0,"button",79),t.YNc(7,he,2,0,"button",80),t.qZA(),t.qZA()),2&n){const e=t.oxw(4);t.xp6(5),t.Q6J("ngIf",3==e.statusCode&&(e.isExisting||e.isProspectCustomer)&&e.fnaAccess.create),t.xp6(1),t.Q6J("ngIf",e.isFNA),t.xp6(1),t.Q6J("ngIf",!e.isFNA)}}function fe(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",4),t.YNc(1,ge,8,3,"div",5),t.TgZ(2,"div",6),t.TgZ(3,"section"),t.TgZ(4,"app-material-table-view",96,98),t.NdJ("emitter",function(a){return t.CHM(e),t.oxw(3).actionBtn(a,"FNA")}),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",!e.isPopup),t.xp6(1),t.Q6J("ngClass",e.isFNA?"active":"inactive"),t.xp6(2),t.Q6J("data",e.fnaList)("colum",e.FNAELEMENT_COL)("displayedColumns",e.FNAdisplayedColumns)("selectable",e.isPopup)}}function ve(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",100),t.NdJ("click",function(){return t.CHM(e),t.oxw(5).add("Activity")}),t._UZ(1,"span",89),t.qZA()}}function be(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",81),t.NdJ("click",function(){return t.CHM(e),t.oxw(5).toggleAccordion("Activity")}),t._UZ(1,"span",102),t.qZA()}}function Te(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",83),t.NdJ("click",function(){return t.CHM(e),t.oxw(5).toggleAccordion("Activity")}),t._UZ(1,"span",103),t.qZA()}}function Ce(n,r){if(1&n&&(t.TgZ(0,"div",76),t.TgZ(1,"div",77),t.TgZ(2,"h3",56),t._uU(3,"Activity"),t.qZA(),t.qZA(),t.TgZ(4,"div",78),t.YNc(5,ve,2,0,"button",99),t.YNc(6,be,2,0,"button",79),t.YNc(7,Te,2,0,"button",80),t.qZA(),t.qZA()),2&n){const e=t.oxw(4);t.xp6(5),t.Q6J("ngIf",3==e.statusCode&&(e.isExisting||e.isProspectCustomer)&&e.activityAccess.create),t.xp6(1),t.Q6J("ngIf",e.isActivity),t.xp6(1),t.Q6J("ngIf",!e.isActivity)}}function Ze(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",4),t.YNc(1,Ce,8,3,"div",5),t.TgZ(2,"div",6),t.TgZ(3,"section"),t.TgZ(4,"app-material-table-view",96,101),t.NdJ("emitter",function(a){return t.CHM(e),t.oxw(3).actActionBtn(a)}),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",!e.isPopup),t.xp6(1),t.Q6J("ngClass",e.isActivity?"active":"inactive"),t.xp6(2),t.Q6J("data",e.activityList)("colum",e.ACTIVITY_ELEMENT_COL)("displayedColumns",e.ACTIVITYdisplayedColumns)("selectable",e.isPopup)}}function Ae(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",100),t.NdJ("click",function(){return t.CHM(e),t.oxw(5).add("Quotation")}),t._UZ(1,"span",89),t.qZA()}}function ye(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",81),t.NdJ("click",function(){return t.CHM(e),t.oxw(5).toggleAccordion("Quotation")}),t._UZ(1,"span",102),t.qZA()}}function xe(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",83),t.NdJ("click",function(){return t.CHM(e),t.oxw(5).toggleAccordion("Quotation")}),t._UZ(1,"span",103),t.qZA()}}function Ie(n,r){if(1&n&&(t.TgZ(0,"div",76),t.TgZ(1,"div",77),t.TgZ(2,"h3",56),t._uU(3,"Quotation"),t.qZA(),t.qZA(),t.TgZ(4,"div",78),t.YNc(5,Ae,2,0,"button",99),t.YNc(6,ye,2,0,"button",79),t.YNc(7,xe,2,0,"button",80),t.qZA(),t.qZA()),2&n){const e=t.oxw(4);t.xp6(5),t.Q6J("ngIf",3==e.statusCode&&(e.isExisting||e.isProspectCustomer)&&e.quoAccess.create),t.xp6(1),t.Q6J("ngIf",e.isQuotation),t.xp6(1),t.Q6J("ngIf",!e.isQuotation)}}function Ne(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",4),t.YNc(1,Ie,8,3,"div",5),t.TgZ(2,"div",6),t.TgZ(3,"section"),t.TgZ(4,"app-material-table-view",96,104),t.NdJ("emitter",function(a){return t.CHM(e),t.oxw(3).actionBtn(a,"QUO")}),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",!e.isPopup),t.xp6(1),t.Q6J("ngClass",e.isQuotation?"active":"inactive"),t.xp6(2),t.Q6J("data",e.quatationList)("colum",e.QUOTATION_ELEMENT_COL)("displayedColumns",e.QuotationdisplayedColumns)("selectable",e.isPopup)}}function Me(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",100),t.NdJ("click",function(){return t.CHM(e),t.oxw(5).add("Application")}),t._UZ(1,"span",89),t.qZA()}}function Le(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",81),t.NdJ("click",function(){return t.CHM(e),t.oxw(5).toggleAccordion("Application")}),t._UZ(1,"span",102),t.qZA()}}function De(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",83),t.NdJ("click",function(){return t.CHM(e),t.oxw(5).toggleAccordion("Application")}),t._UZ(1,"span",103),t.qZA()}}function Se(n,r){if(1&n&&(t.TgZ(0,"div",76),t.TgZ(1,"div",77),t.TgZ(2,"h3",56),t._uU(3,"Application"),t.qZA(),t.qZA(),t.TgZ(4,"div",78),t.YNc(5,Me,2,0,"button",99),t.YNc(6,Le,2,0,"button",79),t.YNc(7,De,2,0,"button",80),t.qZA(),t.qZA()),2&n){const e=t.oxw(4);t.xp6(5),t.Q6J("ngIf",3==e.statusCode&&(e.isExisting||e.isProspectCustomer)&&e.policyAccess.create),t.xp6(1),t.Q6J("ngIf",e.isApplication),t.xp6(1),t.Q6J("ngIf",!e.isApplication)}}function Pe(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",4),t.YNc(1,Se,8,3,"div",5),t.TgZ(2,"div",94),t.TgZ(3,"section",95),t.TgZ(4,"app-material-table-view",96,105),t.NdJ("emitter",function(a){return t.CHM(e),t.oxw(3).actionBtn(a,"APP")}),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",!e.isPopup),t.xp6(2),t.Q6J("ngClass",e.isApplication?"active":"inactive"),t.xp6(1),t.Q6J("data",e.applicationList)("colum",e.APPLICATION_ELEMENT_COL)("displayedColumns",e.ApplicationdisplayedColumns)("selectable",e.isPopup)}}function Oe(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",100),t.NdJ("click",function(){return t.CHM(e),t.oxw(4).addAttachment()}),t._UZ(1,"span",89),t.qZA()}}function we(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",81),t.NdJ("click",function(){return t.CHM(e),t.oxw(4).toggleAccordion("Attachment")}),t._UZ(1,"span",102),t.qZA()}}function Ee(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",83),t.NdJ("click",function(){return t.CHM(e),t.oxw(4).toggleAccordion("Attachment")}),t._UZ(1,"span",103),t.qZA()}}function ke(n,r){if(1&n&&(t.TgZ(0,"div",76),t.TgZ(1,"div",77),t.TgZ(2,"h3",56),t._uU(3,"Attachment"),t.qZA(),t.qZA(),t.TgZ(4,"div",78),t.TgZ(5,"div"),t.YNc(6,Oe,2,0,"button",99),t.qZA(),t.YNc(7,we,2,0,"button",79),t.YNc(8,Ee,2,0,"button",80),t.qZA(),t.qZA()),2&n){const e=t.oxw(3);t.xp6(6),t.Q6J("ngIf",3==e.statusCode&&(e.isExisting||e.isProspectCustomer)),t.xp6(1),t.Q6J("ngIf",e.isAttachment),t.xp6(1),t.Q6J("ngIf",!e.isAttachment)}}function Fe(n,r){if(1&n){const e=t.EpF();t.ynx(0),t.YNc(1,fe,6,6,"div",93),t.YNc(2,Ze,6,6,"div",93),t.YNc(3,Ne,6,6,"div",93),t.YNc(4,Pe,6,6,"div",93),t.TgZ(5,"div",4),t.YNc(6,ke,9,3,"div",5),t.TgZ(7,"div",94),t.TgZ(8,"section",95),t.TgZ(9,"app-material-table-view",96,97),t.NdJ("emitter",function(a){return t.CHM(e),t.oxw(2).actionBtn(a,"ATT")}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.fnaAccess.view),t.xp6(1),t.Q6J("ngIf",e.activityAccess.view),t.xp6(1),t.Q6J("ngIf",e.quoAccess.view),t.xp6(1),t.Q6J("ngIf",e.policyAccess.view),t.xp6(2),t.Q6J("ngIf",!e.isPopup),t.xp6(2),t.Q6J("ngClass",e.isAttachment?"active":"inactive"),t.xp6(1),t.Q6J("data",e.attachmentList)("colum",e.ATTACHMENT_ELEMENT_COL)("displayedColumns",e.AttachmentdisplayedColumns)("selectable",e.isPopup)}}function qe(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",1),t.TgZ(1,"div",2),t.TgZ(2,"form",3),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().createLead()}),t.TgZ(3,"div",4),t.YNc(4,ae,7,2,"div",5),t.TgZ(5,"div",6),t.TgZ(6,"div"),t.TgZ(7,"div",7),t.TgZ(8,"div",8),t.TgZ(9,"div",9),t.TgZ(10,"label",10),t._uU(11,"Lead ID"),t.qZA(),t.TgZ(12,"div",11),t._UZ(13,"input",12),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"div",8),t.TgZ(15,"div",9),t.TgZ(16,"label",10),t._uU(17,"Phone Number"),t.qZA(),t.TgZ(18,"div",11),t.TgZ(19,"input",13),t.NdJ("change",function(){return t.CHM(e),t.oxw().calculateLeadQuality()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(20,"div",7),t.TgZ(21,"div",8),t.TgZ(22,"div",9),t.TgZ(23,"label",10),t._uU(24,"Subject"),t.qZA(),t.TgZ(25,"div",11),t._UZ(26,"input",14),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"div",8),t.TgZ(28,"div",9),t.TgZ(29,"label",10),t._uU(30,"Open Date"),t.qZA(),t.TgZ(31,"div",11),t.TgZ(32,"div",15),t._UZ(33,"input",16),t._UZ(34,"mat-datepicker-toggle",17),t._UZ(35,"mat-datepicker",18,19),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(37,"div",7),t.TgZ(38,"div",8),t.TgZ(39,"div",9),t.TgZ(40,"label",10),t._uU(41,"Name"),t.qZA(),t.TgZ(42,"div",11),t._UZ(43,"input",20),t.qZA(),t.qZA(),t.qZA(),t.TgZ(44,"div",8),t.TgZ(45,"div",9),t.TgZ(46,"label",10),t._uU(47,"Activation Date"),t.qZA(),t.TgZ(48,"div",11),t.TgZ(49,"div",15),t._UZ(50,"input",21),t._UZ(51,"mat-datepicker-toggle",17),t._UZ(52,"mat-datepicker",18,22),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(54,"div",7),t.TgZ(55,"div",23),t.TgZ(56,"div",9),t.TgZ(57,"label",24),t._uU(58,"Preferred Contact"),t.qZA(),t.TgZ(59,"div",25),t.TgZ(60,"div",26),t.TgZ(61,"label",27),t._uU(62,"SMS"),t.qZA(),t._UZ(63,"input",28),t.qZA(),t.TgZ(64,"div",26),t.TgZ(65,"label",27),t._uU(66,"Email"),t.qZA(),t._UZ(67,"input",29),t.qZA(),t.TgZ(68,"div",26),t.TgZ(69,"label",27),t._uU(70,"Phone"),t.qZA(),t._UZ(71,"input",30),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(72,"div",7),t.TgZ(73,"div",8),t.TgZ(74,"div",9),t.TgZ(75,"label",10),t._uU(76,"Type"),t.qZA(),t.TgZ(77,"div",11),t.TgZ(78,"ng-select",31),t.NdJ("change",function(){return t.CHM(e),t.oxw().calculateLeadQuality("typeCode")}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(79,"div",8),t.TgZ(80,"div",9),t.TgZ(81,"label",10),t._uU(82,"Closed Date"),t.qZA(),t.TgZ(83,"div",11),t.TgZ(84,"div",15),t._UZ(85,"input",32),t._UZ(86,"mat-datepicker-toggle",17),t._UZ(87,"mat-datepicker",18,33),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(89,"div",7),t.TgZ(90,"div",8),t.TgZ(91,"div",9),t.TgZ(92,"label",10),t._uU(93,"Status"),t.qZA(),t.TgZ(94,"div",11),t._UZ(95,"ng-select",34),t.qZA(),t.qZA(),t.qZA(),t.TgZ(96,"div",8),t.TgZ(97,"div",9),t.TgZ(98,"label",10),t._uU(99,"Expiration Date"),t.qZA(),t.TgZ(100,"div",11),t.TgZ(101,"div",15),t._UZ(102,"input",35),t._UZ(103,"mat-datepicker-toggle",17),t._UZ(104,"mat-datepicker",null,36),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(106,"div",7),t.TgZ(107,"div",8),t.TgZ(108,"div",9),t.TgZ(109,"label",10),t._uU(110,"Occupation"),t.qZA(),t.TgZ(111,"div",11),t._UZ(112,"ng-select",37),t.qZA(),t.qZA(),t.qZA(),t.TgZ(113,"div",8),t.TgZ(114,"div",9),t.TgZ(115,"label",10),t._uU(116,"Company"),t.qZA(),t.TgZ(117,"div",11),t._UZ(118,"ng-select",38),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(119,"div",7),t.TgZ(120,"div",8),t.TgZ(121,"div",9),t.TgZ(122,"label",10),t._uU(123,"State"),t.qZA(),t.TgZ(124,"div",11),t.TgZ(125,"ng-select",39),t.NdJ("change",function(){return t.CHM(e),t.oxw().calculateLeadQuality("state")}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(126,"div",8),t.TgZ(127,"div",9),t.TgZ(128,"label",10),t._uU(129,"District"),t.qZA(),t.TgZ(130,"div",11),t.TgZ(131,"ng-select",40),t.NdJ("change",function(){return t.CHM(e),t.oxw().calculateLeadQuality("district")}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(132,"div",7),t.TgZ(133,"div",8),t.TgZ(134,"div",9),t.TgZ(135,"label",10),t._uU(136,"Township"),t.qZA(),t.TgZ(137,"div",11),t.TgZ(138,"ng-select",41),t.NdJ("change",function(){return t.CHM(e),t.oxw().calculateLeadQuality()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(139,"div",8),t.TgZ(140,"div",9),t.TgZ(141,"label",10),t._uU(142,"Validity Period"),t.qZA(),t.TgZ(143,"div",11),t.TgZ(144,"div",15),t._UZ(145,"input",42),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(146,"div",7),t.TgZ(147,"div",8),t.TgZ(148,"div",9),t.TgZ(149,"label",10),t._uU(150,"Distribution Channel"),t.qZA(),t.TgZ(151,"div",11),t.TgZ(152,"ng-select",43),t.NdJ("change",function(){return t.CHM(e),t.oxw().calculateLeadQuality()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(153,"div",8),t.TgZ(154,"div",9),t.TgZ(155,"label",10),t._uU(156,"Assign To"),t.qZA(),t.TgZ(157,"div",11),t._UZ(158,"input",44),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(159,"div",7),t.TgZ(160,"div",8),t.TgZ(161,"div",9),t.TgZ(162,"label",10),t._uU(163,"Product"),t.qZA(),t.TgZ(164,"div",11),t.TgZ(165,"ng-select",45),t.NdJ("change",function(){return t.CHM(e),t.oxw().calculateLeadQuality("product")}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(166,"div",8),t.TgZ(167,"div",9),t.TgZ(168,"label",10),t._uU(169,"Email"),t.qZA(),t.TgZ(170,"div",11),t._UZ(171,"input",46),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(172,"div",7),t.TgZ(173,"div",8),t.TgZ(174,"div",9),t.TgZ(175,"label",10),t._uU(176,"Campaign Name"),t.qZA(),t.TgZ(177,"div",47),t.NdJ("click",function(){return t.CHM(e),t.oxw().viewCampaignList()}),t.TgZ(178,"input",48),t.NdJ("change",function(){return t.CHM(e),t.oxw().calculateLeadQuality()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(179,"div",8),t.TgZ(180,"div",9),t.TgZ(181,"label",10),t._uU(182,"Identity Type"),t.qZA(),t.TgZ(183,"div",11),t._UZ(184,"ng-select",49),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(185,"div",7),t.TgZ(186,"div",8),t.TgZ(187,"div",9),t.TgZ(188,"label",10),t._uU(189,"Campaign ID"),t.qZA(),t.TgZ(190,"div",11),t._UZ(191,"input",50),t.qZA(),t.qZA(),t.qZA(),t.TgZ(192,"div",8),t.TgZ(193,"div",9),t.TgZ(194,"label",10),t._uU(195,"NRC/FRC/Passport"),t.qZA(),t.TgZ(196,"div",11),t.YNc(197,ne,1,4,"input",51),t.YNc(198,oe,1,4,"input",52),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(199,"div",7),t.TgZ(200,"div",8),t.TgZ(201,"div",9),t.TgZ(202,"label",10),t._uU(203,"Source"),t.qZA(),t.TgZ(204,"div",11),t.TgZ(205,"ng-select",53),t.NdJ("change",function(){t.CHM(e);const a=t.oxw();return a.calculateScore(a.leadForm.value.sourceCode,null)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(206,"div",8),t.TgZ(207,"div",9),t.TgZ(208,"label",10),t._uU(209,"Existing Customer"),t.qZA(),t.TgZ(210,"div",11),t._UZ(211,"input",54),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(212,"div",7),t.TgZ(213,"div",8),t.TgZ(214,"div",9),t.TgZ(215,"label",10),t._uU(216,"Referral Customer"),t.qZA(),t.TgZ(217,"div",47),t.NdJ("click",function(){return t.CHM(e),t.oxw().viewExistingCustomer("ref")}),t._UZ(218,"input",55),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(219,"hr"),t.TgZ(220,"h3",56),t._uU(221,"More Detail"),t.qZA(),t.TgZ(222,"div",7),t.TgZ(223,"div",23),t.TgZ(224,"div",7),t.TgZ(225,"div",8),t.TgZ(226,"div",9),t.TgZ(227,"label",57),t._uU(228,"Estimated Money Income"),t.qZA(),t.TgZ(229,"div",58),t._UZ(230,"input",59),t.qZA(),t.qZA(),t.qZA(),t.TgZ(231,"div",8),t.TgZ(232,"div",9),t.TgZ(233,"label",57),t._uU(234,"Facebook Acc"),t.qZA(),t.TgZ(235,"div",58),t._UZ(236,"input",60),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(237,"div",7),t.TgZ(238,"div",8),t.TgZ(239,"div",9),t.TgZ(240,"label",57),t._uU(241,"Marital Status"),t.qZA(),t.TgZ(242,"div",58),t._UZ(243,"ng-select",61),t.qZA(),t.qZA(),t.qZA(),t.TgZ(244,"div",8),t.TgZ(245,"div",9),t.TgZ(246,"label",57),t._uU(247,"Customer Financial Plan/Goal(in Next 6-12 months)"),t.qZA(),t.TgZ(248,"div",58),t._UZ(249,"input",62),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(250,"div",7),t.TgZ(251,"div",8),t.TgZ(252,"div",9),t.TgZ(253,"label",57),t._uU(254,"No. of Children"),t.qZA(),t.TgZ(255,"div",58),t._UZ(256,"input",63),t.qZA(),t.qZA(),t.qZA(),t.TgZ(257,"div",8),t.TgZ(258,"div",9),t.TgZ(259,"label",57),t._uU(260,"Existing Insurance Coverage"),t.qZA(),t.TgZ(261,"div",58),t._UZ(262,"input",64),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(263,"div",7),t.TgZ(264,"div",8),t.TgZ(265,"div",9),t.TgZ(266,"label",57),t._uU(267,"Existing Insurance Plan"),t.qZA(),t.TgZ(268,"div",58),t._UZ(269,"input",65),t.qZA(),t.qZA(),t.qZA(),t.TgZ(270,"div",8),t.TgZ(271,"div",9),t.TgZ(272,"label",57),t._uU(273,"Score"),t.qZA(),t.TgZ(274,"div",58),t._UZ(275,"input",66),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(276,"div",7),t.TgZ(277,"div",8),t.TgZ(278,"div",9),t.TgZ(279,"label",57),t._uU(280,"Asset (If Any)"),t.qZA(),t.TgZ(281,"div",58),t._UZ(282,"input",67),t.qZA(),t.qZA(),t.qZA(),t.TgZ(283,"div",8),t.TgZ(284,"div",9),t.TgZ(285,"label",57),t._uU(286,"Prospect Profile"),t.qZA(),t.TgZ(287,"div",68),t.NdJ("click",function(){return t.CHM(e),t.oxw().viewExistingCustomer("prosp")}),t._UZ(288,"input",69),t.qZA(),t.YNc(289,se,3,0,"div",70),t.qZA(),t.qZA(),t.qZA(),t.TgZ(290,"div",7),t.TgZ(291,"div",8),t.TgZ(292,"div",9),t.TgZ(293,"label",57),t._uU(294,"Lost Reason"),t.qZA(),t.TgZ(295,"div",58),t._UZ(296,"textarea",71),t.qZA(),t.qZA(),t.qZA(),t.TgZ(297,"div",8),t.TgZ(298,"div",9),t.TgZ(299,"label",57),t._uU(300,"Reject Reason"),t.qZA(),t.TgZ(301,"div",58),t._UZ(302,"textarea",72),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(303,"hr"),t.qZA(),t.TgZ(304,"div",73),t.TgZ(305,"div",74),t.YNc(306,re,4,0,"div",70),t.YNc(307,le,4,0,"div",70),t.YNc(308,ce,4,0,"div",70),t.YNc(309,de,4,0,"div",70),t.YNc(310,me,4,0,"div",70),t.YNc(311,ue,4,0,"div",70),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(312,Fe,11,10,"ng-container",75),t.qZA(),t.qZA()}if(2&n){const e=t.MAs(36),i=t.MAs(53),a=t.MAs(88),o=t.MAs(105),s=t.oxw();t.xp6(2),t.Q6J("formGroup",s.leadForm),t.xp6(2),t.Q6J("ngIf",!s.isPopup),t.xp6(1),t.Q6J("ngClass",s.isDetail?"active":"inactive"),t.xp6(8),t.ekj("is-invalid",s.isControlInvalid("leadId"))("is-valid",s.isControlValid("leadId")),t.xp6(6),t.ekj("is-invalid",s.isControlInvalid("phoneNo"))("is-valid",s.isControlValid("phoneNo")),t.xp6(7),t.ekj("is-invalid",s.isControlInvalid("subject"))("is-valid",s.isControlValid("subject")),t.xp6(7),t.Q6J("matDatepicker",e),t.xp6(1),t.Q6J("for",e),t.xp6(9),t.ekj("is-invalid",s.isControlInvalid("contactName"))("is-valid",s.isControlValid("contactName")),t.xp6(7),t.Q6J("matDatepicker",i),t.xp6(1),t.Q6J("for",i),t.xp6(27),t.ekj("is-invalid",s.isControlInvalid("typeCode"))("is-valid",s.isControlValid("typeCode")),t.Q6J("items",s.typeOption),t.xp6(7),t.Q6J("matDatepicker",a),t.xp6(1),t.Q6J("for",a),t.xp6(9),t.ekj("is-invalid",s.isControlInvalid("statusCode"))("is-valid",s.isControlValid("statusCode")),t.Q6J("readonly",!0)("items",s.statusOption),t.xp6(7),t.Q6J("matDatepicker",o),t.xp6(1),t.Q6J("for",o),t.xp6(9),t.ekj("is-invalid",s.isControlInvalid("occupationCode"))("is-valid",s.isControlValid("occupationCode")),t.Q6J("items",s.occupationOption),t.xp6(6),t.ekj("is-invalid",s.isControlInvalid("companyCode"))("is-valid",s.isControlValid("companyCode")),t.Q6J("items",s.companyOption),t.xp6(7),t.ekj("is-invalid",s.isControlInvalid("stateCode"))("is-valid",s.isControlValid("stateCode")),t.Q6J("items",s.stateOption),t.xp6(6),t.ekj("is-invalid",s.isControlInvalid("districtCode"))("is-valid",s.isControlValid("districtCode")),t.Q6J("items",s.distinctOption),t.xp6(7),t.ekj("is-invalid",s.isControlInvalid("townshipCode"))("is-valid",s.isControlValid("townshipCode")),t.Q6J("items",s.townshipOption),t.xp6(7),t.ekj("is-invalid",s.isControlInvalid("validityPeriod"))("is-valid",s.isControlValid("validityPeriod")),t.xp6(7),t.ekj("is-invalid",s.isControlInvalid("channelCode"))("is-valid",s.isControlValid("channelCode")),t.Q6J("items",s.channelOption),t.xp6(6),t.ekj("is-invalid",s.isControlInvalid("assignToName"))("is-valid",s.isControlValid("assignToName")),t.xp6(7),t.ekj("is-invalid",s.isControlInvalid("productId"))("is-valid",s.isControlValid("productId")),t.Q6J("items",s.productOption2),t.xp6(6),t.ekj("is-invalid",s.isControlInvalid("email"))("is-valid",s.isControlValid("email")),t.xp6(13),t.ekj("is-invalid",s.isControlInvalid("identityType"))("is-valid",s.isControlValid("identityType")),t.Q6J("items",s.identityTypeOption),t.xp6(7),t.ekj("is-invalid",s.isControlInvalid("campaignNo"))("is-valid",s.isControlValid("campaignNo")),t.xp6(6),t.Q6J("ngIf","NRC"==s.leadForm.get("identityType").value),t.xp6(1),t.Q6J("ngIf","NRC"!=s.leadForm.get("identityType").value),t.xp6(7),t.ekj("is-invalid",s.isControlInvalid("sourceCode"))("is-valid",s.isControlValid("sourceCode")),t.Q6J("items",s.sourceOption),t.xp6(13),t.ekj("is-invalid",s.isControlInvalid("referralCustomerName"))("is-valid",s.isControlValid("referralCustomerName")),t.xp6(12),t.ekj("is-invalid",s.isControlInvalid("monthlyIncome"))("is-valid",s.isControlValid("monthlyIncome")),t.xp6(6),t.ekj("is-invalid",s.isControlInvalid("facebookAcc"))("is-valid",s.isControlValid("facebookAcc")),t.xp6(7),t.ekj("is-invalid",s.isControlInvalid("maritalStatus"))("is-valid",s.isControlValid("maritalStatus")),t.Q6J("items",s.maritialOption),t.xp6(6),t.ekj("is-invalid",s.isControlInvalid("financialPlan"))("is-valid",s.isControlValid("financialPlan")),t.xp6(7),t.ekj("is-invalid",s.isControlInvalid("numberOfChildren"))("is-valid",s.isControlValid("numberOfChildren")),t.xp6(6),t.ekj("is-invalid",s.isControlInvalid("existingInsuranceCoverage"))("is-valid",s.isControlValid("existingInsuranceCoverage")),t.xp6(7),t.ekj("is-invalid",s.isControlInvalid("existingInsurancePlan"))("is-valid",s.isControlValid("existingInsurancePlan")),t.xp6(6),t.ekj("is-invalid",s.isControlInvalid("score"))("is-valid",s.isControlValid("score")),t.xp6(7),t.ekj("is-invalid",s.isControlInvalid("asset"))("is-valid",s.isControlValid("asset")),t.xp6(7),t.Q6J("ngIf",!s.isAddProspect),t.xp6(17),t.Q6J("ngIf","02"==s.leadForm.getRawValue().statusCode),t.xp6(1),t.Q6J("ngIf","02"==s.leadForm.getRawValue().statusCode),t.xp6(1),t.Q6J("ngIf","03"==s.leadForm.getRawValue().statusCode&&s.applicationList.length>0),t.xp6(1),t.Q6J("ngIf","03"==s.leadForm.getRawValue().statusCode),t.xp6(1),t.Q6J("ngIf","03"==s.leadForm.getRawValue().statusCode),t.xp6(1),t.Q6J("ngIf","03"==s.leadForm.getRawValue().statusCode),t.xp6(1),t.Q6J("ngIf",!s.isPopup&&s.statusCode>2)}}let Re=(()=>{class n{constructor(e,i,a,o,s,u,_,U,X,Si,Pi,Oi,wi,Ei,ki,Fi,qi,Ri,Ui,Bi,Ji){this.fb=e,this.location=i,this.masterDataService=a,this.route=o,this.LeadDetailService=s,this.cdf=u,this.LeadListService=_,this.modalService=U,this.router=X,this.prodctService=Si,this.customerService=Pi,this.productService=Oi,this.AttachmentUploadService=wi,this.LeadAttachmentService=Ei,this.AttachmentDownloadService=ki,this.fnaListService=Fi,this.authService=qi,this.fnaService=Ri,this.alertService=Ui,this.ngZone=Bi,this.menuService=Ji,this.FNAELEMENT_COL=JSON.parse(JSON.stringify(x.ei)),this.FNAdisplayedColumns=JSON.parse(JSON.stringify(x.MN)),this.ACTIVITY_ELEMENT_COL=JSON.parse(JSON.stringify(V.n)),this.ACTIVITYdisplayedColumns=JSON.parse(JSON.stringify(V.t)),this.QUOTATION_ELEMENT_COL=JSON.parse(JSON.stringify(j.J)),this.QuotationdisplayedColumns=JSON.parse(JSON.stringify(j.L)),this.APPLICATION_ELEMENT_COL=JSON.parse(JSON.stringify(G.j)),this.ApplicationdisplayedColumns=JSON.parse(JSON.stringify(G.k)),this.ATTACHMENT_ELEMENT_COL=JSON.parse(JSON.stringify(x.uK)),this.AttachmentdisplayedColumns=JSON.parse(JSON.stringify(x.A6)),this.fnaList=[],this.activityList=[],this.quatationList=[],this.applicationList=[],this.attachmentList=[],this.isPopup=!1,this.disabled=!0,this.description="",this.channelOption=[],this.typeOption=[],this.stateOption=[],this.statusOption=[],this.distinctOption=[],this.townshipOption=[],this.assignToOption=[],this.productOption=[],this.productOption2=[],this.campaignNameOption=[],this.companyOption=[],this.sourceOption=[],this.existingOption=[],this.martialOption=[],this.occupationOption=[],this.isExisting=!1,this.isProspectCustomer=!1,this.isAddProspect=!1,this.disabledForm=!1,this.statusCode=0,this.maritialOption=[{code:"SINGLE",value:"Single"},{code:"MARRIED",value:"Married"},{code:"WIDOWER",value:"Widower"},{code:"DIVORCED",value:"Divorced"}],this.identityTypeOption=b.Mf,this.reason="",this.status="",this.config={type:"user",name:"identityNumber"},this.sourceScore=0,this.qualityScore=0,this.isFNA=!1,this.isApplication=!1,this.isAttachment=!1,this.isQuotation=!1,this.isActivity=!1,this.isMenuOpen=!1,this.isMore=!1,this.isDetail=!0,this.isValidWin=!1,this.leadQuality=[],this.Quality={Q10:"campaignNo",Q06:"channelCode",Q03:"phoneNo",Q07:"typeCode",Q12:"stateCode",Q13:"districtCode",Q05:"townshipCode",Q08:"productId"},this.leadType={"01":"GENERAL","02":"LIFE"},this.user=new ht.T_,this.leadAccess=S.w,this.activityAccess=S.w,this.policyAccess=S.w,this.quoAccess=S.w,this.attachAccess=S.w,this.fnaAccess=S.w}ngOnInit(){this.checkPremission(),this.loadForm(),this.route.queryParams.subscribe(e=>{e?(this.pageStatus=e.pageStatus,"create"!=this.pageStatus?(console.log("<==========>",e),this.oldId=e.leadId,this.oldSecondaryId=e.pageSecondaryId,this.getOld()):this.loadForm()):this.location.back()})}checkPremission(){this.menuService.dataAccess.subscribe(e=>{e&&(this.leadAccess=e.leads,this.activityAccess=e.activity,this.policyAccess=e.application,this.quoAccess=e.quotation,this.fnaAccess=e.fna,this.fnaAccess.delete||(this.FNAELEMENT_COL[3].btn.delete=!1),this.quoAccess.edit||(this.QUOTATION_ELEMENT_COL[8].btn.edit=!1),this.policyAccess.edit||(this.APPLICATION_ELEMENT_COL[8].btn.edit=!1),this.leadAccess.view||this.location.back(),this.cdf.detectChanges())})}ngAfterViewInit(){this.user=this.authService.currentUserValue,this.getMaster(),this.getProduct()}getMaster(){(0,W.D)([this.getChannel(),this.getType(),this.getOccupation(),this.getStatus(),this.getState(),this.getSource(),this.getCompany()]).toPromise().then(e=>{e&&(this.channelOption=e[0],this.typeOption=e[1],this.occupationOption=e[2],this.statusOption=e[3],this.stateOption=e[4],this.sourceOption=e[5],this.companyOption=e[6],this.cdf.detectChanges())})}onInitAddress(e){this.getDistrict(e.stateCode),this.getTownship(e.districtCode),this.cdf.detectChanges()}onChangeState(){this.distinctOption=[],this.townshipOption=[],this.leadForm.controls.districtCode.setValue(""),this.leadForm.controls.townshipCode.setValue(""),this.getDistrict(this.leadForm.controls.stateCode.value),this.cdf.detectChanges()}onChangeDistrict(){this.leadForm.controls.townshipCode.setValue(""),""==this.leadForm.controls.stateCode.value?this.townshipOption=[]:this.getTownship(this.leadForm.controls.districtCode.value),this.cdf.detectChanges()}getCompany(){return this.masterDataService.getDataByType("COMPANY_TYPE").pipe((0,D.U)(e=>this.getFormatOpt(e)),(0,I.K)(e=>(0,y.of)([])))}getState(){return this.masterDataService.getDataByType("STATE",!0).pipe((0,D.U)(e=>this.getFormatOpt(e)),(0,I.K)(e=>(0,y.of)([])))}getChannel(){return this.masterDataService.getDataByType("LEAD_DISTRIBUTION_CHANNEL").pipe((0,D.U)(e=>this.getFormatOpt(e)),(0,I.K)(e=>(0,y.of)([])))}getType(){return this.masterDataService.getDataByType("LEAD_TYPE").pipe((0,D.U)(e=>this.getFormatOpt(e)),(0,I.K)(e=>(0,y.of)([])))}getStatus(){return this.masterDataService.getDataByType("LEAD_STATUS").pipe((0,D.U)(e=>this.getFormatOpt(e)),(0,I.K)(e=>(0,y.of)([])))}getSource(){return this.masterDataService.getDataByType("LEAD_SOURCE").pipe((0,D.U)(e=>this.getFormatOpt(e)),(0,I.K)(e=>(0,y.of)([])))}getOccupation(){return this.masterDataService.getDataByType("OCCUPATION").pipe((0,D.U)(e=>this.getFormatOpt(e)),(0,I.K)(e=>(0,y.of)([])))}getProduct(){this.productService.getAll().toPromise().then(e=>{e&&(this.productOption=e.map(i=>({code:i.id,value:i.name,type:i.type})),this.cdf.detectChanges(),this.getProductOption())})}getLeadQuality(){let e=this.leadForm.getRawValue().channelCode;e&&this.LeadDetailService.getLeadQuality(e).toPromise().then(i=>{i&&(this.leadQuality=i,this.calculateLeadQuality(),this.getValidityPeriod())})}getDistrict(e){this.masterDataService.getAddressDataByType("DISTRICT",e).toPromise().then(i=>{i&&(this.distinctOption=i.map(a=>({code:a.codeId,value:a.codeValue})),this.cdf.detectChanges())})}getTownship(e){e&&this.masterDataService.getAddressDataByType("TOWNSHIP",e).toPromise().then(i=>{i&&(this.townshipOption=i.map(a=>({code:a.codeId,value:a.codeValue})),this.cdf.detectChanges())})}getValidityPeriod(){let e=this.leadForm.getRawValue().sourceCode,i=this.leadForm.getRawValue().productId;e&&i&&this.LeadDetailService.getValidityPeriod(e,i).toPromise().then(a=>{this.leadForm.controls.validityPeriod.setValue(null!=a.period?a.period:0)})}actActionBtn(e){"edit"==e.cmd&&this.router.navigate(["/activity/activity-management-detail"],{queryParams:{pageStatus:"edit",pageId:e.data.activityNo}})}calculateScore(e,i){let a;a=i||this.sourceOption.find(u=>u.code==e).code;let o=this.leadForm.getRawValue().channelCode;a&&o&&this.LeadDetailService.getLeadScore(a,o).toPromise().then(s=>{this.sourceScore=s,this.calculateLeadQuality(),this.getValidityPeriod()})}calculateLeadQuality(e){"typeCode"==e&&this.getProductOption(),"product"==e&&this.getValidityPeriod(),"state"==e&&this.onChangeState(),"district"==e&&this.onChangeDistrict();let i=this.sourceScore;this.leadQuality.forEach(a=>{i+=this.leadForm.getRawValue()[this.Quality[a.qualityCode]]?a.score:0}),this.leadForm.controls.score.setValue(i)}getOld(){this.LeadDetailService.findOne(this.oldId).toPromise().then(e=>{console.log("lead detail =====> ",e),e&&(this.oldData=e,this.customer=0!=e.existingCustomerId?{customerId:e.existingCustomerId,customerName:e.existingCustomerName,customerDob:e.existingCustomerDateOfBirth}:{customerId:e.prospectCustomerId,customerName:e.prospectCustomerName,customerDob:e.prospectCustomerDateOfBirth},this.statusCode=parseInt(this.oldData.statusCode),this.oldData&&(this.isProspectCustomer=0!=this.oldData.prospectCustomerId),this.loadForm(e),this.fnaList=null!=this.oldData.fnas?this.oldData.fnas:[],this.activityList=null!=this.oldData.activities?this.oldData.activities:[],this.quatationList=null!=this.oldData.resourceQuotations?this.oldData.resourceQuotations:[],this.applicationList=null!=this.oldData.resourcePolicies?this.oldData.resourcePolicies:[],this.attachmentList=null!=this.oldData.attachments?this.oldData.attachments:[],(this.activityList.length>0||this.quatationList.length>0||this.applicationList.length>0||this.attachmentList.length>0||this.fnaList.length>0)&&(this.isAddProspect=!0,this.cdf.detectChanges()),this.onInitAddress(this.oldData),this.getProductOption(),e.fnas.length&&(this.fnaList=e.fnas),this.applicationList.length>0&&(this.isValidWin=!0),this.cdf.detectChanges(),this.statusCode>2&&(this.activitymatTable.reChangeData(),this.fnamatTable.reChangeData(),this.attachmentmatTable.reChangeData(),this.quotationmatTable.reChangeData(),this.applicationmatTable.reChangeData()))})}updateLeadStatus(e){return(0,d.mG)(this,void 0,void 0,function*(){if("save"==e)this.createLead();else if("cancel"==e)this.ngZone.run(()=>{this.location.back()});else if("04"==e||"06"==e){let i;i=this.modalService.open(C.F,{size:"md",backdrop:!1}),i.componentInstance.type="reason",i.componentInstance.status=e,i.result.then(()=>{},a=>{a&&this.updateStatus(e,a)})}else this.updateStatus(e);this.prospCustomer&&(this.customer.customerId=this.prospCustomer.customerId,this.customer.customerName=this.prospCustomer.customerName,this.customer.customerDob=this.prospCustomer.customerDob),this.existingCustomer&&(this.customer.customerId=this.existingCustomer.customerId,this.customer.customerName=this.existingCustomer.customerName,this.customer.customerDob=this.existingCustomer.customerDob)})}updateStatus(e,i){let o=Object.assign(Object.assign({},{leadId:this.oldId,statusCode:e,reason:i||""}),{leadId:this.oldId});this.LeadDetailService.updateLeadStatus(o,this.oldId).toPromise().then(s=>{s&&this.getOld()})}viewCampaignList(){if(!this.disabledForm){let e;e=this.modalService.open(Bt,{size:"xl",backdrop:!1}),e.componentInstance.isPopup=!0,e.result.then(()=>{},i=>{if(i&&"save"==i.type){let a=i.data;this.leadForm.controls.campaignName.setValue(a.cpmName),this.leadForm.controls.campaignNo.setValue(a.cpmNumber),this.calculateLeadQuality()}})}}viewExistingCustomer(e){if("ref"!=e||this.disabledForm){if(!this.isExisting&&!this.disabledForm){let i;i=this.modalService.open(B.b,{size:"xl",backdrop:!1}),i.componentInstance.isPopup=!0,i.componentInstance.party="prosp"!=e,i.result.then(()=>{},a=>{if(a&&"save"==a.type){let o=a.data;"ref"==e?(this.leadForm.controls.referralCustomerName.setValue((o.firstName||"")+" "+(o.middleName||"")+" "+(o.lastName||"")),this.leadForm.controls.referralCustomerId.setValue(o.customerId)):"prosp"==e?(this.leadForm.controls.existingCustomerName.setValue(""),this.leadForm.controls.existingCustomerId.setValue(""),this.leadForm.controls.prospectCustomer.setValue((o.firstName||"")+" "+(o.middleName||"")+" "+(o.lastName||"")),this.leadForm.controls.prospectCustomerId.setValue(o.customerId),this.prospCustomer={customerId:o.customerId,customerName:o.firstName+" "+o.middleName+" "+o.lastName,customerDob:o.dateOfBirth}):(this.existingCustomer={customerId:o.customerId,customerName:o.firstName+" "+o.middleName+" "+o.lastName,customerDob:o.dateOfBirth},this.leadForm.controls.prospectCustomer.setValue(""),this.leadForm.controls.prospectCustomerId.setValue(""),this.leadForm.controls.existingCustomerName.setValue((o.firstName||"")+" "+(o.middleName||"")+" "+(o.lastName||"")),this.leadForm.controls.existingCustomerId.setValue(o.customerId))}})}}else{let i;i=this.modalService.open(B.b,{size:"xl",backdrop:!1}),i.componentInstance.isPopup=!0,i.componentInstance.party=!0,i.result.then(()=>{},a=>{if(a&&"save"==a.type){let o=a.data;"ref"==e&&(this.leadForm.controls.referralCustomerName.setValue((o.firstName||"")+" "+(o.middleName||"")+" "+(o.lastName||"")),this.leadForm.controls.referralCustomerId.setValue(o.customerId))}})}}viewProspectCustomer(){if(!this.disabledForm){let e;e=this.modalService.open(tt.h,{size:"xl",backdrop:!1}),e.componentInstance.isPopup=!0,e.componentInstance.pageStatus="create",e.componentInstance.isLead=!0;let i={identityType:this.leadForm.getRawValue().identityType,identityNumber:this.leadForm.getRawValue().identityNumber,phone:this.leadForm.getRawValue().phoneNo,email:this.leadForm.getRawValue().email,occupationCode:this.leadForm.getRawValue().occupationCode,townshipCode:this.leadForm.getRawValue().townshipCode,districtCode:this.leadForm.getRawValue().districtCode,stateCode:this.leadForm.getRawValue().stateCode};e.componentInstance.oldData=i,e.componentInstance.onInitAddress(i),e.result.then(()=>{},a=>{if(a&&"save"==a.type){let o=a.data;this.leadForm.controls.existingCustomerName.setValue(""),this.leadForm.controls.existingCustomerId.setValue(""),this.leadForm.controls.prospectCustomer.setValue(o.name),this.leadForm.controls.prospectCustomerId.setValue(o.customerId),this.isProspectCustomer=!0}})}}openNRCModal(){let e;e=this.modalService.open(L.V,{size:"xl",backdrop:!1}),e.componentInstance.config=this.config,e.componentInstance.group=this.leadForm}loadForm(e){this.disabledForm=!!e&&"03"!=e.statusCode,this.isExisting=!!e&&0!=e.existingCustomerId,this.leadForm=null,this.cdf.detectChanges(),this.leadForm=new c.cw({leadId:new c.NI({value:e?e.leadId:"",disabled:!0}),phoneNo:new c.NI({value:e?e.phoneNo:"",disabled:this.disabledForm}),openedDate:new c.NI({value:e?k(e.openedDate):"",disabled:!0}),subject:new c.NI({value:e?e.subject:"",disabled:this.disabledForm}),companyCode:new c.NI({value:e?e.companyCode:"",disabled:!0}),sms:new c.NI({value:!!e&&(e.contact+"").includes("sms"),disabled:this.disabledForm}),pemail:new c.NI({value:!!e&&(e.contact+"").includes("email"),disabled:this.disabledForm}),phone:new c.NI({value:!!e&&(e.contact+"").includes("phone"),disabled:this.disabledForm}),contactName:new c.NI({value:e?e.contactName:"",disabled:this.disabledForm}),activationDate:new c.NI({value:e?k(e.activationDate):"",disabled:!0}),channelCode:new c.NI({value:e?e.channelCode:"",disabled:!0}),occupationCode:new c.NI({value:e?e.occupationCode:"",disabled:this.disabledForm}),closedDate:new c.NI({value:e?k(e.closedDate):"",disabled:this.disabledForm}),typeCode:new c.NI({value:e?e.typeCode:"",disabled:!0}),stateCode:new c.NI({value:e?e.stateCode:"",disabled:this.disabledForm}),expirationDate:new c.NI({value:e?k(e.expirationDate):"",disabled:this.disabledForm}),statusCode:new c.NI({value:e?e.statusCode:"",disabled:!0}),districtCode:new c.NI({value:e?e.districtCode:"",disabled:this.disabledForm}),validityPeriod:new c.NI({value:e?e.validityPeriod:"",disabled:!0}),reason:new c.NI({value:e?e.reason:"",disabled:!0}),townshipCode:new c.NI({value:e?e.townshipCode:"",disabled:this.disabledForm}),assignTo:new c.NI({value:e?e.ownerId:"",disabled:this.disabledForm}),assignToName:new c.NI({value:e?e.ownerName:"",disabled:this.disabledForm}),productId:new c.NI({value:e?e.productId:"",disabled:!0}),email:new c.NI({value:e?e.email:"",disabled:this.disabledForm}),campaignName:new c.NI({value:e?e.campaignName:"",disabled:this.disabledForm}),identityType:new c.NI({value:e?e.identityType:"",disabled:!0}),sourceCode:new c.NI({value:e?e.sourceCode:"",disabled:this.disabledForm}),campaignNo:new c.NI({value:e?e.campaignNo:"",disabled:this.disabledForm}),identityNumber:new c.NI({value:e?e.nrcValue:"",disabled:!0}),existingCustomerName:new c.NI({value:e?e.existingCustomerName.trim():"",disabled:!0}),existingCustomerId:new c.NI({value:e?e.existingCustomerId:"",disabled:!0}),referralCustomerName:new c.NI({value:e?e.referralCustomerName.trim():"",disabled:this.disabledForm}),referralCustomerId:new c.NI({value:e?e.referralCustomerId:"",disabled:this.disabledForm}),monthlyIncome:new c.NI({value:e?e.monthlyIncome:"",disabled:this.disabledForm}),facebookAcc:new c.NI({value:e?e.facebookAcc:"",disabled:this.disabledForm}),maritalStatus:new c.NI({value:e?e.maritalStatus:"",disabled:this.disabledForm}),financialPlan:new c.NI({value:e?e.financialPlan:"",disabled:this.disabledForm}),numberOfChildren:new c.NI({value:e?e.numberOfChildren:"",disabled:this.disabledForm}),existingInsuranceCoverage:new c.NI({value:e?e.existingInsuranceCoverage:"",disabled:this.disabledForm}),existingInsurancePlan:new c.NI({value:e?e.existingInsurancePlan:"",disabled:this.disabledForm}),score:new c.NI({value:e?e.score:"",disabled:this.disabledForm}),asset:new c.NI({value:e?e.asset:"",disabled:this.disabledForm}),prospectCustomer:new c.NI({value:e?e.prospectCustomerName.trim():"",disabled:this.disabledForm}),prospectCustomerId:new c.NI({value:e?e.prospectCustomerId:"",disabled:this.disabledForm}),lostReason:new c.NI({value:e?e.lostReason:"",disabled:!0})}),this.cdf.detectChanges(),this.oldData&&(this.getLeadQuality(),this.calculateScore(null,this.oldData.sourceCode))}backLocation(){this.loadForm(this.oldData)}createLead(){let e=this.leadForm.getRawValue();e.contact=[],e.sms&&e.contact.push("sms"),e.pemail&&e.contact.push("email"),e.phone&&e.contact.push("phone"),e.contact=e.contact.join(","),"create"==this.pageStatus?this.create(e):this.edit(e)}create(e){let i=Object.assign(Object.assign({},e),{leadId:this.oldId});this.LeadDetailService.updateNoID(i).toPromise().then(a=>{a&&this.alertService.activate("This record was created","Success Message")})}edit(e){let i=Object.assign(Object.assign({},e),{leadId:this.oldId,ownerId:e.assignTo});this.LeadDetailService.updateNoID(i).toPromise().then(a=>{a&&(this.getOld(),this.alertService.activate("This record was updated","Success Message"))})}toggleAccordion(e){"FNA"==e&&(this.isFNA=!this.isFNA,this.isFNA&&(x.k5.LEAD_ID=this.oldId)),"Application"==e&&(this.isApplication=!this.isApplication),"Quotation"==e&&(this.isQuotation=!this.isQuotation),"Attachment"==e&&(this.isAttachment=!this.isAttachment,this.isAttachment&&this.getLeadAttachment()),"Activity"==e&&(this.isActivity=!this.isActivity),"More"==e&&(this.isMore=!this.isMore),"Detail"==e&&(this.isDetail=!this.isDetail)}add(e){if("Application"==e){const i=this.modalService.open(M.P,{size:"xl",backdrop:!1});i.componentInstance.type="modal",i.result.then(()=>{},a=>{a&&"save"==a.type&&this.customerService.findOne(this.oldData.existingCustomerId?this.oldData.existingCustomerId:this.oldData.prospectCustomerId).toPromise().then(s=>{this.prodctService.creatingCustomer=s,this.prodctService.createingProd=a.data,this.prodctService.creatingLeadId=this.oldId,this.prodctService.editData=null,this.prodctService.referenceID=null,this.prodctService.viewType="policy",this.prodctService.type="policy",this.router.navigateByUrl("/product-form")})})}if("Quotation"==e){const i=this.modalService.open(M.P,{size:"xl",backdrop:!1});i.componentInstance.type="modal",i.result.then(()=>{},a=>{a&&"save"==a.type&&this.customerService.findOne(this.oldData.existingCustomerId?this.oldData.existingCustomerId:this.oldData.prospectCustomerId).toPromise().then(s=>{this.prodctService.creatingCustomer=s,this.prodctService.createingProd=a.data,this.prodctService.creatingLeadId=this.oldId,this.prodctService.editData=null,this.prodctService.referenceID=null,this.prodctService.viewType="quotation",this.prodctService.type="quotation",this.router.navigateByUrl("/product-form")})})}if("Activity"==e){let i=this.oldData.existingCustomerId?this.oldData.existingCustomerId:this.oldData.prospectCustomerId,a=this.oldData.existingCustomerName.trim()?this.oldData.existingCustomerName.trim():this.oldData.prospectCustomerName.trim(),o=this.oldData.ownerId?this.oldData.ownerId:0,s=this.oldData.ownerName?this.oldData.ownerName.trim():"";this.router.navigate(["/activity/activity-management-detail"],{queryParams:{customerId:i,name:a,leadId:this.oldId,assignTo:o,assignToName:s,isLead:!0,pageStatus:"create"}})}"FNA"==e&&this.displayFNAType()}actionBtn(e,i){this.fnaService.fnaUpdateProducts=[],"FNA"==i?"edit"==e.cmd?this.createOrEdit(e.data):this.deleteFNA(e.data.id):"QUO"==i?"edit"==e.cmd?this.editQuo(e.data):"view"==e.cmd?this.goQuoViewDetail(e.data):"create"==e.cmd&&this.createPolicy(e.data):"APP"==i?"edit"==e.cmd?this.editApp(e.data):"view"==e.cmd&&this.goAppViewDetail(e.data):"ATT"==i&&("download"==e.cmd&&this.AttachmentDownloadService.getDownload(e.data.id,e.data.fileName),"delete"==e.cmd&&this.alertService.activate("Are you sure you want to delete?","Warning Message").then(a=>{a&&this.LeadAttachmentService.delete(e.data.id).toPromise().then(o=>{this.getLeadAttachment(),this.alertService.activate("This record was deleted","Success Message").then(s=>{})})}))}createPolicy(e){(0,W.D)([this.prodctService.findOne(e.productId),this.customerService.findOne(e.customerId||1).pipe((0,I.K)(i=>(0,y.of)(void 0)))]).toPromise().then(i=>{i&&(this.prodctService.createingProdRef=i[0],this.prodctService.creatingCustomer=i[1],this.prodctService.viewType="policy",this.prodctService.type="policy",this.prodctService.referenceID=e.id,this.prodctService.editData=null,this.prodctService.creatingLeadId=e.leadId,this.prodctService.referenceStatus=e.status,this.router.navigateByUrl("/product-form"))})}goAppViewDetail(e){this.prodctService.findOne(e.productId).toPromise().then(i=>{i&&(this.prodctService.createingProd=i,this.prodctService.previewType="policy",this.prodctService.editData=e,this.router.navigateByUrl("/resourse-detail"))})}goQuoViewDetail(e){this.prodctService.findOne(e.productId).toPromise().then(i=>{i&&(this.prodctService.createingProd=i,this.prodctService.editData=e,this.prodctService.previewType="quotation",this.router.navigateByUrl("/resourse-detail"))})}editQuo(e){(0,W.D)([this.prodctService.findOne(e.productId),this.customerService.findOne(e.customerId||1).pipe((0,I.K)(i=>(0,y.of)(void 0)))]).toPromise().then(i=>{i&&(this.prodctService.createingProd=i[0],this.prodctService.creatingCustomer=i[1],this.prodctService.type="quotation",this.prodctService.viewType="quotation",this.prodctService.editData=e,this.prodctService.referenceID=null,this.prodctService.creatingLeadId=e.leadId,this.router.navigateByUrl("/product-form"))})}editApp(e){(0,W.D)([this.prodctService.findOne(e.productId),this.customerService.findOne(e.customerId||1).pipe((0,I.K)(i=>(0,y.of)(void 0)))]).toPromise().then(i=>{i[0]&&(this.prodctService.createingProd=i[0],this.prodctService.creatingCustomer=i[1],this.prodctService.type="policy",this.prodctService.viewType="policy",this.prodctService.editData=e,this.prodctService.referenceID=e.quotationId,this.prodctService.creatingLeadId=e.leadId,this.router.navigateByUrl("/product-form"))})}addAttachment(){return(0,d.mG)(this,void 0,void 0,function*(){let e;e=this.modalService.open(C.F,{size:"lg",backdrop:!1}),e.componentInstance.type="description",e.componentInstance.oldId=this.oldId,e.result.then(()=>{},i=>{i&&i&&(this.description=i.description,this.AttachmentUploadService.save(i.data).toPromise().then(a=>{a&&this.LeadAttachmentService.save({attachmentId:a,description:this.description,refDocNo:this.oldId,refDocType:"LEAD"}).toPromise().then(s=>{s&&this.getLeadAttachment()})}).catch(a=>{}))})})}getLeadAttachment(){return(0,d.mG)(this,void 0,void 0,function*(){this.LeadAttachmentService.getAttachmentListRef(this.oldId,"LEAD").toPromise().then(e=>{e&&(this.attachmentList=e,this.cdf.detectChanges(),this.attachmentmatTable.reChangeData(),this.getOld())})})}getProductOption(){let i=(this.productOption||[]).filter(o=>o.type==this.leadType[this.leadForm.getRawValue().typeCode]);i.findIndex(o=>o.code==this.leadForm.controls.productId.value)<0&&this.leadForm.controls.productId.value&&i.length>0&&this.leadForm.controls.productId.setValue(""),this.productOption2=i||[]}isControlValid(e){const i=this.leadForm.controls[e];return i.valid&&(i.dirty||i.touched)}isControlInvalid(e){const i=this.leadForm.controls[e];return i.invalid&&(i.dirty||i.touched)}controlHasError(e,i){const a=this.leadForm.controls[i];return a.hasError(e)&&(a.dirty||a.touched)}isControlTouched(e){const i=this.leadForm.controls[e];return i.dirty||i.touched}displayFNAType(){if(this.fnaService.fnaUpdateProducts=[],this.fnaService.fnaIncome=new at.V,this.fnaService.fnaRetirementSaving=new nt.E,this.fnaService.fnaHealths=new Array,this.fnaService.fnaEducations=new Array,this.fnaService.fnaAssect=new Array,this.fnaService.fnaProduct=new Array,this.fnaService.percentage="",this.fnaService.totalPercentageText="",this.fnaService.bgColor="",this.fnaService.fnaUpdateProducts=new Array,this.fnaService.fnaTextColor=null,null!=this.oldId&&""!=this.oldId&&null!=this.oldId&&null!=this.customer.customerId&&""!=this.customer.customerId){const e=this.modalService.open(Jt.P,{size:"xl",backdrop:!1});e.componentInstance.type="modal",e.componentInstance.leadId=this.oldId,e.componentInstance.customer=this.customer,e.componentInstance.conductedBy=this.oldData.createdBy,e.result.then(()=>{},i=>{i&&(i.customerDob=this.customer.customerDob,"BRAM"==i.fnaType&&(console.log("BRAM ==========> ",i),this.router.navigate(["/fna/fna-bram"],{queryParams:{passValue:JSON.stringify({res:i})}})),"LPP"==i.fnaType&&this.router.navigate(["/fna/fna-detail"],{queryParams:{passValue:JSON.stringify(i)}}))})}}createOrEdit(e){return(0,d.mG)(this,void 0,void 0,function*(){let i;this.fnaService.fnaUpdateProducts=[],this.fnaService.fnaIncome=new at.V,this.fnaService.fnaRetirementSaving=new nt.E,this.fnaService.fnaHealths=new Array,this.fnaService.fnaEducations=new Array,this.fnaService.fnaAssect=new Array,this.fnaService.fnaProduct=new Array,this.fnaService.percentage="",this.fnaService.totalPercentageText="",this.fnaService.bgColor="",this.fnaService.fnaUpdateProducts=new Array,this.fnaService.fnaTextColor=null,e&&(i={conductedBy:this.oldData.conductedBy,conductedByName:this.oldData.conductedByName,createdAt:this.convertDateFormatDDMMYYY(e.createdAt),createdBy:e.createdBy,createdByName:e.createdByName,customerId:this.customer.customerId,customerName:this.customer.customerName,customerDob:this.customer.customerDob,updatedAt:e.updatedAt,fnaId:e.id,type:e.type,pageStatus:"edit"},console.log("passValue",i),null!=this.oldId&&""!=this.oldId&&null!=this.oldId&&null!=this.customer.customerId&&""!=this.customer.customerId&&("LPP"==e.fnaType?this.router.navigate(["/fna/fna-detail"],{queryParams:{passValue:JSON.stringify(i)}}):(i.grandDiscount=e.grandDiscount,i.highDiscount=e.highDiscount,gt.xT.GRAND_DISCOUNT=0,gt.xT.HIGH_DISCOUNT=0,this.router.navigate(["/fna/fna-bram"],{queryParams:{passValue:JSON.stringify(i)}}))))})}getAllFNA(){return(0,d.mG)(this,void 0,void 0,function*(){yield this.fnaListService.getAll().toPromise().then(e=>{if(this.fnaList=[],e){this.fnaList=e;for(var i=0;i<this.fnaList.length;i++)this.fnaList[i].createdAt=this.convertDateFormatMMDDYYY(this.fnaList[i].createdAt),this.fnaList[i].conductedBy=this.user.username;this.cdf.detectChanges(),this.fnamatTable.reChangeData()}})})}deleteFNA(e){return(0,d.mG)(this,void 0,void 0,function*(){this.alertService.activate("Are you sure you want to delete?","Warning Message").then(i=>(0,d.mG)(this,void 0,void 0,function*(){i&&(yield this.fnaListService.delete(e).toPromise().then(a=>(0,d.mG)(this,void 0,void 0,function*(){this.fnaList=this.fnaList.filter(o=>o.id!==e),this.alertService.activate("This record was deleted","Success Message").then(o=>{console.log("deleteFNA",o)}),this.cdf.detectChanges(),this.fnamatTable.reChangeData()})))})),this.fnaService.fnaUpdateProducts=[],this.fnaService.fnaIncome=new at.V,this.fnaService.fnaRetirementSaving=new nt.E,this.fnaService.fnaHealths=new Array,this.fnaService.fnaEducations=new Array,this.fnaService.fnaAssect=new Array,this.fnaService.fnaProduct=new Array,this.fnaService.percentage="",this.fnaService.totalPercentageText="",this.fnaService.bgColor="",this.fnaService.fnaUpdateProducts=new Array,this.fnaService.fnaTextColor=null})}convertDateFormatMMDDYYY(e){var i=new Date(e),a=String(i.getDate()).padStart(2,"0");return String(i.getMonth()+1).padStart(2,"0")+"/"+a+"/"+i.getFullYear()}convertDateFormatDDMMYYY(e){var i=new Date(e);return String(i.getDate()).padStart(2,"0")+"/"+String(i.getMonth()+1).padStart(2,"0")+"/"+i.getFullYear()}getFormatOpt(e){return e.map(i=>({code:i.codeId,value:i.codeName||i.codeValue}))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c.qu),t.Y36(p.Ye),t.Y36(Yt.D),t.Y36(h.gz),t.Y36(_t),t.Y36(t.sBO),t.Y36(Qt.Z),t.Y36(T.FF),t.Y36(h.F0),t.Y36(ft.f),t.Y36(Ht.v),t.Y36(ft.f),t.Y36(ot.p3),t.Y36(ot.ou),t.Y36(ot.Ys),t.Y36(Vt.i),t.Y36(ht.e8),t.Y36(Gt.T),t.Y36(jt.c),t.Y36(t.R0b),t.Y36(S.q))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-lead-detail"]],viewQuery:function(e,i){if(1&e&&(t.Gf(zt,5),t.Gf(Kt,5),t.Gf($t,5),t.Gf(Xt,5),t.Gf(te,5)),2&e){let a;t.iGM(a=t.CRH())&&(i.fnamatTable=a.first),t.iGM(a=t.CRH())&&(i.activitymatTable=a.first),t.iGM(a=t.CRH())&&(i.applicationmatTable=a.first),t.iGM(a=t.CRH())&&(i.attachmentmatTable=a.first),t.iGM(a=t.CRH())&&(i.quotationmatTable=a.first)}},features:[t._Bn([{provide:m._A,useClass:g.t7,deps:[m.Ad]},{provide:m.sG,useValue:et.Gs}])],decls:1,vars:1,consts:[["class","row",4,"ngIf"],[1,"row"],[1,"col-12"],["action","#",1,"form",3,"formGroup","ngSubmit"],[1,"card","card-custom","gutter-b"],["class","card-header",4,"ngIf"],[1,"card-body","px-10","py-3",3,"ngClass"],[1,"row",2,"align-items","center"],[1,"col-sm-6"],[1,"form-group","row"],[1,"col-sm-4","col-form-label"],[1,"col-sm-8"],["type","text","name","leadId","autocomplete","off","formControlName","leadId",1,"form-control","form-control-sm"],["type","text","name","phoneNo","autocomplete","off","formControlName","phoneNo",1,"form-control","form-control-sm",3,"change"],["type","text","name","subject","autocomplete","off","formControlName","subject",1,"form-control","form-control-sm"],[1,"input-group"],["matInput","","formControlName","openedDate","readonly","",1,"form-control-sm","date-input",2,"width","100%",3,"matDatepicker"],["matSuffix","",3,"for"],["disabled","true"],["openDate",""],["type","text","name","contactName","autocomplete","off","formControlName","contactName",1,"form-control","form-control-sm"],["matInput","","formControlName","activationDate","readonly","",1,"form-control-sm","date-input",2,"width","100%",3,"matDatepicker"],["activitionDate",""],[1,"col-sm-12"],[1,"col-sm-2","col-form-label"],[1,"col-sm-10","checkgroup"],[1,"check-input"],[1,"col-form-label"],["type","checkbox","formControlName","sms"],["type","checkbox","formControlName","pemail"],["type","checkbox","formControlName","phone"],["bindLabel","value","bindValue","code","formControlName","typeCode",1,"ng-custom-select",3,"items","change"],["matInput","","formControlName","closedDate","readonly","",1,"form-control-sm","date-input",2,"width","100%",3,"matDatepicker"],["closeDate",""],["bindLabel","value","bindValue","code","formControlName","statusCode",1,"ng-custom-select",3,"readonly","items"],["matInput","","formControlName","expirationDate",1,"form-control-sm","date-input",2,"width","100%",3,"matDatepicker"],["expDate",""],["bindLabel","value","bindValue","code","formControlName","occupationCode",1,"ng-custom-select",3,"items"],["bindLabel","value","bindValue","code","formControlName","companyCode",1,"ng-custom-select",3,"items"],["bindLabel","value","bindValue","code","formControlName","stateCode",1,"ng-custom-select",3,"items","change"],["bindLabel","value","bindValue","code","formControlName","districtCode",1,"ng-custom-select",3,"items","change"],["bindLabel","value","bindValue","code","formControlName","townshipCode",1,"ng-custom-select",3,"items","change"],["type","text","readonly","","name","validityPeriod","autocomplete","off","formControlName","validityPeriod",1,"form-control","form-control-sm"],["bindLabel","value","bindValue","code","formControlName","channelCode",1,"ng-custom-select",3,"items","change"],["type","text","readonly","","name","assignToName","autocomplete","off","formControlName","assignToName",1,"form-control","form-control-sm"],["bindLabel","value","bindValue","code","formControlName","productId",1,"ng-custom-select",3,"items","change"],["type","text","name","email","autocomplete","off","formControlName","email",1,"form-control","form-control-sm"],[1,"col-sm-8",3,"click"],["type","text","name","campaignName","readonly","","autocomplete","off","formControlName","campaignName",1,"form-control","form-control-sm",3,"change"],["bindLabel","value","bindValue","code","formControlName","identityType",1,"ng-custom-select",3,"items"],["type","text","name","campaignNo","autocomplete","off","formControlName","campaignNo",1,"form-control","form-control-sm"],["type","text","class","form-control form-control-sm ","name","identityNumber","autocomplete","off","formControlName","identityNumber","readonly","",3,"is-invalid","is-valid","click",4,"ngIf"],["type","text","class","form-control form-control-sm ","name","identityNumber","autocomplete","off","formControlName","identityNumber",3,"is-invalid","is-valid",4,"ngIf"],["bindLabel","value","bindValue","code","formControlName","sourceCode",1,"ng-custom-select",3,"items","change"],["type","text","name","existingCustomerName","autocomplete","off","readonly","","formControlName","existingCustomerName",1,"form-control","form-control-sm"],["type","text","name","referralCustomerName","readonly","","autocomplete","off","readonly","","formControlName","referralCustomerName",1,"form-control","form-control-sm"],[1,"card-label","left-border-image"],[1,"col-sm-5","col-form-label"],[1,"col-sm-7"],["type","text","name","monthlyIncome","autocomplete","off","formControlName","monthlyIncome",1,"form-control","form-control-sm"],["type","text","name","facebookAcc","autocomplete","off","formControlName","facebookAcc",1,"form-control","form-control-sm"],["bindLabel","value","bindValue","code","formControlName","maritalStatus",1,"ng-custom-select",3,"items"],["type","text","name","financialPlan","autocomplete","off","formControlName","financialPlan",1,"form-control","form-control-sm"],["type","number","name","numberOfChildren","autocomplete","off","formControlName","numberOfChildren",1,"form-control","form-control-sm"],["type","text","name","existingInsuranceCoverage","autocomplete","off","formControlName","existingInsuranceCoverage",1,"form-control","form-control-sm"],["type","text","name","existingInsurancePlan","autocomplete","off","formControlName","existingInsurancePlan",1,"form-control","form-control-sm"],["type","text","name","score","autocomplete","off","formControlName","score","readonly","",1,"form-control","form-control-sm"],["type","text","name","asset","autocomplete","off","formControlName","asset",1,"form-control","form-control-sm"],[1,"col-sm-5",3,"click"],["type","text","readonly","","name","prospectCustomer","autocomplete","off","formControlName","prospectCustomer",1,"form-control","form-control-sm"],["class","col-sm-2",4,"ngIf"],["type","text","readonly","","name","lostReason","autocomplete","off","formControlName","lostReason",1,"form-control","form-control-sm"],["type","text","readonly","","name","reason","autocomplete","off","formControlName","reason",1,"form-control","form-control-sm"],[1,"mt-2"],[1,"row",2,"align-items","center","justify-content","flex-end"],[4,"ngIf"],[1,"card-header"],[1,"card-title"],[1,"card-toolbar"],["type","button","class","icon",3,"click",4,"ngIf"],["type","button","class","icon ml-2",3,"click",4,"ngIf"],["type","button",1,"icon",3,"click"],[1,"flaticon2-back"],["type","button",1,"icon","ml-2",3,"click"],[1,"flaticon2-down"],["type","text","name","identityNumber","autocomplete","off","formControlName","identityNumber","readonly","",1,"form-control","form-control-sm",3,"click"],["type","text","name","identityNumber","autocomplete","off","formControlName","identityNumber",1,"form-control","form-control-sm"],[1,"col-sm-2"],["title","Edit Form Page",1,"btn","btn-primary","btn-cus","btn-sm","mx-1",3,"click"],[1,"flaticon2-plus"],["type","button",1,"btn","btn-sm","btn-primary","ml-2",2,"width","100%",3,"click"],[1,""],["type","button",1,"btn","btn-sm","btn-secondary","ml-2",2,"width","100%",3,"click"],["class","card card-custom gutter-b",4,"ngIf"],[1,"card-body","px-10","py-3"],[3,"ngClass"],[3,"data","colum","displayedColumns","selectable","emitter"],["attachment",""],["fna",""],["type","button","class","btn btn-primary btn-circle",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary","btn-circle",3,"click"],["activity",""],[1,"flaticon2-back","icon"],[1,"flaticon2-down","icon"],["quotation",""],["application",""]],template:function(e,i){1&e&&t.YNc(0,qe,313,150,"div",0),2&e&&t.Q6J("ngIf",i.leadForm)},directives:[p.O5,c._Y,c.JL,c.sg,p.mk,c.Fj,c.JJ,c.u,st.Nt,J.hl,J.nW,Wt.R9,J.Mq,c.Wl,z.w9,c.wV,it.I],styles:[".input-group[_ngcontent-%COMP%]   .form-control-sm[_ngcontent-%COMP%]{background-color:#fff;background-clip:padding-box;border:1px solid #E4E6EF;padding:0 .75rem}.input-group[_ngcontent-%COMP%]   .mat-datepicker-toggle[_ngcontent-%COMP%]{position:absolute;right:5px;top:-2px}.readonly[_ngcontent-%COMP%]{background-color:#9c9999!important;color:#fff}.tab[_ngcontent-%COMP%]{overflow:hidden;border:1px solid #ccc;background-color:#f1f1f1}.tab[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:inherit;float:left;border:none;outline:none;cursor:pointer;padding:14px 16px;transition:.3s}.tab[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#ddd}.tab[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:#ccc}.active[_ngcontent-%COMP%]{display:block}.inactive[_ngcontent-%COMP%]{display:none}.icon[_ngcontent-%COMP%]{position:relative;border:none;margin:0;font-size:1.5rem;background-color:transparent}.add[_ngcontent-%COMP%]{top:-11px;position:relative;border:none;background:#f2f2f2;margin:0}.add[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;top:-52px;right:78px;width:110px}h2[_ngcontent-%COMP%]{font-size:13px;color:#005ca2;background:#F2F2F2;border:none;cursor:pointer;position:relative;margin-top:24px;padding:12px 24px 1px}h2[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;right:14px;top:5px}h2[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:6px;height:12px;float:left}h2[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;padding-left:18px}.btn-box[_ngcontent-%COMP%]{text-align:end}.btn-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;width:127%;height:100%;opacity:0}.checkgroup[_ngcontent-%COMP%], .check-input[_ngcontent-%COMP%]{display:flex;grid-gap:10px;gap:10px;align-items:center}"]}),n})();var vt=l(55167),Y=l(47497),rt=l(13242),q=l(5711);l(39555),l(50273),l(97908),l(3719),l(55077),l(89417),l(69814),l(43970),l(25488),l(86263),l(80348),l(50928),l(51628),l(58290),l(97226);let yi=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[p.ez,m.BQ,q.eL,m.si,rt.Q8,Y.rt],m.BQ]}),n})();var xi=l(70933),Ii=l(90860),Ni=l(6761),Mi=l(23457);let Li=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[p.ez,c.u5,c.UX,v.vi,f.fA,z.A0,z.A0,J.FA,Ii.m,Ni.s,Mi.d,vt.Fk,st.c]]}),n})(),Di=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[p.ez,c.u5,xi.Q,c.UX,v.vi,f.fA,T.M,vt.Fk,z.A0,J.FA,yi,Li,st.c,h.Bz.forChild([{path:"",component:Re}])]]}),n})()},6761:(E,A,l)=>{l.d(A,{s:()=>tt});var p=l(86019),c=l(49133),v=l(87626),f=l(85378),T=l(70933),h=l(55167),d=l(45598),m=l(50053),g=l(94538),b=l(74778),L=l(85275),C=l(57842),x=l(44797),V=l(45479),G=l(87577),j=l(76250),B=l(83668);let tt=(()=>{class M{}return M.\u0275fac=function(et){return new(et||M)},M.\u0275mod=B.oAB({type:M}),M.\u0275inj=B.cJS({providers:[m.N,g.b,b.j,b.Z,j.B],imports:[[p.ez,v.vi,c.u5,c.UX,f.bz,T.Q,h.Fk,d.fA,f.ZS,L.i,C.A0,x._t,G.JX,V.U8]]}),M})()},94538:(E,A,l)=>{l.d(A,{b:()=>h});var p=l(18260),c=l(91691),v=l(83668),f=l(44522);const T=`${p.N.apiUrl}/addon`;let h=(()=>{class d extends c.i{constructor(g){super(g,T),this.httpClient=g}}return d.\u0275fac=function(g){return new(g||d)(v.LFG(f.eN))},d.\u0275prov=v.Yz7({token:d,factory:d.\u0275fac}),d})()},50053:(E,A,l)=>{l.d(A,{N:()=>h});var p=l(18260),c=l(91691),v=l(83668),f=l(44522);const T=`${p.N.apiUrl}/coverage`;let h=(()=>{class d extends c.i{constructor(g){super(g,T),this.httpClient=g}}return d.\u0275fac=function(g){return new(g||d)(v.LFG(f.eN))},d.\u0275prov=v.Yz7({token:d,factory:d.\u0275fac}),d})()},74778:(E,A,l)=>{l.d(A,{j:()=>d,Z:()=>g});var p=l(82997),c=l(18260),v=l(91691),f=l(83668),T=l(44522);const h=`${c.N.apiUrl}/ui-product`;let d=(()=>{class b extends v.i{constructor(C){super(C,h),this.httpClient=C}}return b.\u0275fac=function(C){return new(C||b)(f.LFG(T.eN))},b.\u0275prov=f.Yz7({token:b,factory:b.\u0275fac}),b})();const m=`${c.N.apiUrl}/delete-productUi-byproductIdandType`;let g=(()=>{class b extends v.i{constructor(C){super(C,m),this.httpClient=C}deleteMany(C){try{return this.httpClient.delete(this.baseUri+"?"+C)}catch(x){return(0,p.of)(null)}}}return b.\u0275fac=function(C){return new(C||b)(f.LFG(T.eN))},b.\u0275prov=f.Yz7({token:b,factory:b.\u0275fac}),b})()},76250:(E,A,l)=>{l.d(A,{B:()=>h});var p=l(18260),c=l(91691),v=l(83668),f=l(44522);const T=`${p.N.apiUrl}/validity-period`;let h=(()=>{class d extends c.i{constructor(g){super(g,T),this.httpClient=g}}return d.\u0275fac=function(g){return new(g||d)(v.LFG(f.eN))},d.\u0275prov=v.Yz7({token:d,factory:d.\u0275fac}),d})()},85275:(E,A,l)=>{l.d(A,{i:()=>T});var p=l(86019),c=l(49133),v=l(87626),f=l(83668);let T=(()=>{class h{}return h.\u0275fac=function(m){return new(m||h)},h.\u0275mod=f.oAB({type:h}),h.\u0275inj=f.cJS({imports:[[p.ez,c.u5,v.vi]]}),h})()}}]);