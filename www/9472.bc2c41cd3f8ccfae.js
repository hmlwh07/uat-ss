"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9472],{17268:(v,h,e)=>{e.d(h,{k:()=>S});var t=e(83668),u=e(92070),f=e(82997),d=e(28100),g=e(83067),o=e(54753),_=e(85724),s=e(47975),y=e(11766),c=e(6920),E=e(23449),T=e(60940),O=e(35618),I=e(27673),A=e(65937),R=e(67198),M=e(86019);function L(l,P){if(1&l&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",8),t._uU(6),t.ALo(7,"number"),t.qZA(),t.TgZ(8,"td",8),t._uU(9),t.ALo(10,"number"),t.qZA(),t.TgZ(11,"td",8),t._uU(12),t.ALo(13,"number"),t.qZA(),t.TgZ(14,"td",8),t._uU(15),t.ALo(16,"number"),t.qZA(),t.qZA()),2&l){const a=P.$implicit;t.xp6(2),t.Oqu(a.endOfPolicyYear),t.xp6(2),t.Oqu(a.age),t.xp6(2),t.Oqu(t.lcZ(7,6,a.premiumPaid)||"-"),t.xp6(3),t.Oqu(t.lcZ(10,8,a.deathBenefit)),t.xp6(3),t.Oqu(t.lcZ(13,10,a.surrenderValue)||"-"),t.xp6(3),t.Oqu(t.lcZ(16,12,a.maturityBenefit)||"-")}}function b(l,P){if(1&l&&(t.TgZ(0,"tbody"),t.YNc(1,L,17,14,"tr",7),t.qZA()),2&l){const a=t.oxw();t.xp6(1),t.Q6J("ngForOf",a.showDatas)}}function C(l,P){if(1&l&&(t.ynx(0),t._UZ(1,"app-education-life-grip",9),t.BQk()),2&l){const a=t.oxw();t.xp6(1),t.Q6J("parentData",a.showDatas)}}let S=(()=>{class l{constructor(a,n,r,i,m,D,U,Z,F){this.globalFun=a,this.alertService=n,this.prodService=r,this.eduPreService=i,this.eduSurrService=m,this.eduPayment=D,this.cdf=U,this.auth=Z,this.numberPipe=F,this.actionEvent=new t.vpe,this.premimuRate={"9opt":5,"11opt":7,"14opt":10},this.frequency={monthly:1,quarterly:4,semi_annually:6,annually:12},this.lists=[],this.premiumRate=[],this.surrendRate=[],this.showDatas=[]}ngOnInit(){this.parentData=this.getParnet(),this.parentData2=this.getParnet(!0),this.parentData||this.parentData2?this.getRateValue().pipe((0,g.w)(a=>{if(!a[0]||!a[1])throw a;return(0,f.of)({premium:a[0],surrend:a[1]})})).toPromise().then(a=>{a&&(this.premiumRate=a.premium,this.surrendRate=a.surrend,this.createListData())}).catch(a=>{console.log(a)}):this.alertService.activate("This page cann't to show because there is no education life product detail data. Please add education life product detail in rodcut configuration","Warning")}createListData(){this.getcalculateData(),this.showDatas=[];let a="001"==this.plan?1:2;this.lists.forEach((n,r)=>{let i={resourceId:this.resourcesId,endOfPolicyYear:n,age:this.currentAge+r,benefitPlan:this.plan,premiumPaid:this.premimuRateNum>=n?this.calculatePre(this.currentAge+r,n):0,deathBenefit:this.sumInsured*a,surrenderValue:this.calculateSur(n),maturityBenefit:.9*this.calculateSur(n)};this.showDatas.push(i),r+1==this.lists.length&&this.cdf.detectChanges()})}getcalculateData(){let n=this.globalFun.paPolicyValidationResult.value.validationValue;this.premimuRateNum=this.premimuRate[n+"opt"],this.policyTermCode=this.parentData.policy_term,this.sumInsured=this.parentData.sum_insured,this.plan=this.parentData.insured_plan;let r=this.parentData2.date_of_birth;return this.currentAge=Math.ceil(u().diff(r,"years",!0)),this.frequencyValue=this.frequency[this.parentData.payment_frequency],this.lists=Array.from({length:n},(m,D)=>D+1),!0}getParnet(a){if((0,s.cU)(this.product.config)){let n=JSON.parse(this.product.config),i={};return i=("quotation"!=this.prodService.type?n.application||[]:n.quotation||[]).find(a?m=>"life_insured_el"==m.tableName:m=>"el_detail"==m.tableName),i&&this.globalFun.tempFormData[i.tableName+i.id]||null}return null}calculatePre(a,n){let r=15.5,i=this.premiumRate.find(D=>D.age==a);i&&(r=i.rate);let m=r/1e3*this.sumInsured;if(1==n){console.log(this.frequencyValue);let D=this.globalFun.calculateDecimal(m*this.frequencyValue)+1500;this.premiumAmt=this.numberPipe.transform(D)+" MMK / "+this.parentData.payment_frequency,this.globalFun.paPremiumResult.next(this.premiumAmt)}return this.globalFun.calculateDecimal(12*m)*n}calculateSur(a){let n=10,r=this.surrendRate.find(i=>i.year==a);return r?(n=r.rate,n/100*this.sumInsured):0}getRateValue(){return(0,d.D)([this.getPRate(),this.getSurRate()]).pipe((0,o.U)(a=>a))}getPRate(){return this.eduPreService.getMany(this.parentData.insured_plan,this.parentData.policy_term)}getSurRate(){return this.eduSurrService.getMany(this.parentData.policy_term)}nextPage(){this.showDatas.length>0&&this.eduPayment.deleteMany(this.resourcesId).pipe((0,_.z)(a=>{let n={request:this.showDatas,resourceDataDTO:{agentId:this.auth.currentUserValue.id||1,customerId:this.prodService.creatingCustomer.customerId||1,policyNumber:null,premium:(Number(this.premiumAmt.split(" ")[0].split(",").join(""))||0)+"",premiumView:this.premiumAmt,productId:this.product.id,quotationId:this.prodService.referenceID,type:this.prodService.type},resourceId:this.resourcesId};return this.eduPayment.saveMany(n)})).toPromise().then(a=>{a&&(this.globalFun.tempFormData[c.S_]=this.showDatas,this.actionEvent.emit({type:y.V.NEXT}))})}backPage(){this.actionEvent.emit({type:y.V.PREV})}}return l.\u0275fac=function(a){return new(a||l)(t.Y36(E.Q),t.Y36(T.c),t.Y36(O.f),t.Y36(I.H),t.Y36(I.D),t.Y36(A.D),t.Y36(t.sBO),t.Y36(R.e8),t.Y36(M.JJ))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-education-life"]],inputs:{product:"product",editData:"editData",resourcesId:"resourcesId"},outputs:{actionEvent:"actionEvent"},decls:25,vars:2,consts:[[1,"table","table-bordered"],[4,"ngIf"],[1,"mb-5"],[1,"row","mt-3"],[1,"col-sm-6","mx-auto"],[1,"btn","btn-block","btn-secondary",3,"click"],[1,"btn","btn-block","btn-primary",3,"click"],[4,"ngFor","ngForOf"],[2,"text-align","right"],[3,"parentData"]],template:function(a,n){1&a&&(t.TgZ(0,"table",0),t.TgZ(1,"thead"),t.TgZ(2,"tr"),t.TgZ(3,"th"),t._uU(4,"End of Policy Year"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Age"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Premium Paid"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Death/PTD Benefit"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Surrender Value"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Maturity Benefit"),t.qZA(),t.qZA(),t.qZA(),t.YNc(15,b,2,1,"tbody",1),t.qZA(),t._UZ(16,"hr",2),t.YNc(17,C,2,1,"ng-container",1),t.TgZ(18,"div",3),t.TgZ(19,"div",4),t.TgZ(20,"button",5),t.NdJ("click",function(){return n.backPage()}),t._uU(21," Previous "),t.qZA(),t.qZA(),t.TgZ(22,"div",4),t.TgZ(23,"button",6),t.NdJ("click",function(){return n.nextPage()}),t._uU(24," Save & Next "),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(15),t.Q6J("ngIf",n.premiumRate.length>0&&n.surrendRate.length>0),t.xp6(2),t.Q6J("ngIf",n.showDatas.length>0))},styles:[""]}),l})()},27673:(v,h,e)=>{e.d(h,{H:()=>g,D:()=>_});var t=e(18260),u=e(91691),p=e(83668),f=e(44522);const d=`${t.N.apiUrl}/education-premium-rates`;let g=(()=>{class s extends u.i{constructor(c){super(c,d),this.httpClient=c}getMany(c,E){return this.httpClient.get(d+"?benefitPlan="+c+"&policyTerm="+E)}}return s.\u0275fac=function(c){return new(c||s)(p.LFG(f.eN))},s.\u0275prov=p.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const o=`${t.N.apiUrl}/education-surrender-values`;let _=(()=>{class s extends u.i{constructor(c){super(c,o),this.httpClient=c}getMany(c){return this.httpClient.get(o+"?policyTerm="+c)}}return s.\u0275fac=function(c){return new(c||s)(p.LFG(f.eN))},s.\u0275prov=p.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},65937:(v,h,e)=>{e.d(h,{D:()=>g});var t=e(18260),u=e(91691),p=e(83668),f=e(44522);const d=`${t.N.apiUrl}/education/life-benefit`;let g=(()=>{class o extends u.i{constructor(s){super(s,d),this.httpClient=s}deleteMany(s){return this.httpClient.delete(d+"/resource/"+s)}getMany(s){return this.httpClient.get(d+"/resource/"+s)}saveMany(s){return this.httpClient.post(d+"s",s)}}return o.\u0275fac=function(s){return new(s||o)(p.LFG(f.eN))},o.\u0275prov=p.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},11766:(v,h,e)=>{e.d(h,{V:()=>t});var t=(()=>{return(u=t||(t={})).NEXT="next",u.PREV="prev",t;var u})()},6920:(v,h,e)=>{e.d(h,{p:()=>u,Hu:()=>f,T$:()=>d,nm:()=>g,S_:()=>c,Ft:()=>T,rf:()=>A});var t=e(1402);const u=[{id:"addon_1634010770155",type:t.it.STATIC,pageTitle:"AddOn",showLabel:"AddOn",pageType:"form",tableName:"addon",pageIcon:"fa-briefcase"},{id:"coverage_1634010995936",type:t.it.STATIC,pageTitle:"Coverage",showLabel:"Coverage",pageType:"form",tableName:"coverage",pageIcon:"fa-clipboard-check"},{id:"static_1634018514043",type:t.it.STATIC,pageTitle:"Product Detail",showLabel:"Motor Product Detail",pageType:"form",tableName:"static",pageIcon:"fa-briefcase"},{id:"static_1635747288508",type:t.it.STATIC,pageTitle:"Product Detail",showLabel:"Motor Product Detail (Application)",pageType:"form",tableName:"static",pageIcon:"fa-briefcase"},{id:"static_1635218894755",type:t.it.STATIC,pageTitle:"Payment Schedules",showLabel:"Payment Schedules",pageType:"form",tableName:"static",pageIcon:"fa-briefcase"},{id:"static_1635309151504",type:t.it.STATIC,pageTitle:"Education Life Benefit",showLabel:"Education Life Benefit",pageType:"form",tableName:"static",pageIcon:"fa-briefcase"},{id:"static_1641364737069",type:t.it.STATIC,pageTitle:"Product Detail",showLabel:"Fire Product Detail",pageType:"form",tableName:"static",pageIcon:"fa-briefcase"},{id:"static_1643116155828",type:t.it.STATIC,pageTitle:"Risk Detail",showLabel:"Fire Risk Detail",pageType:"form",tableName:"static",pageIcon:"fa-briefcase"},{id:"static_1644896661652",type:t.it.STATIC,pageTitle:"Benefit Illustration",showLabel:"Endowment Benefit Illustration",pageType:"form",tableName:"static",pageIcon:"fa-briefcase"},{id:"static_1648784270432",type:t.it.STATIC,pageTitle:"Optional Coverages",showLabel:"Motor Addons",pageType:"form",tableName:"static",pageIcon:"fa-briefcase"},{id:"static_1648784270356",type:t.it.STATIC,pageTitle:"Tavel Risk",showLabel:"Tavel Risk",pageType:"form",tableName:"static",pageIcon:"fa-briefcase"}],f="static_1634018514043",d="static_1641364737069",g="static_1643116155828",c="static_1635309151504",T="static_1644896661652",A="static_1648784270356"},59472:(v,h,e)=>{e.d(h,{Q:()=>P});var t=e(86019),u=e(49133),p=e(85993),f=e(55167),d=e(45598),g=e(17268),o=e(83668),_=e(11766),s=e(6920),y=e(60940),c=e(23449),E=e(75396);const T=["chart"];let O=(()=>{class a{constructor(r,i){this.alertService=r,this.globalFun=i,this.actionEvent=new o.vpe,this.showDatas=[],this.chartOptions={series:[{name:"Premium Amount",data:[],color:"#005f99"}],chart:{height:450,type:"line",toolbar:{show:!1}},title:{text:"Basic Benefit Illustration",offsetX:0,offsetY:10,floating:!1,style:{fontSize:"1.1rem",fontFamily:"Roboto"}},xaxis:{type:"category",categories:["0","1 year","2 years","3 years","4 years","5 years","6 years","7 years","8 years","9 years","10 years","11 years","12 years","13 years","14 years"],labels:{style:{fontSize:"1rem",fontFamily:"Roboto"}}},yaxis:{min:0,max:5e6,tickAmount:5,labels:{style:{fontSize:"1rem",fontFamily:"Roboto"}}},legend:{position:"top",horizontalAlign:"right",floating:!0,offsetY:-25,offsetX:-5},dataLabels:{enabled:!0,textAnchor:"middle",offsetX:-10,offsetY:-5,enabledOnSeries:[0]},markers:{size:[5,0,0]}}}ngOnInit(){if(this.parentData){let r=this.parentData.map(i=>i.premiumPaid&&i.premiumPaid>0?i.premiumPaid:null);r.unshift(null),this.parentData.length>0&&"002"==this.parentData[0].benefitPlan&&(this.chartOptions.title.text="Double Benefit Illustration",this.chartOptions.yaxis.max=1e7,this.chartOptions.series[1]={data:[],name:"Goal"},this.chartOptions.series[2]={data:[],name:"2X Goal"},this.chartOptions.series[1].data=[5e6,5e6,5e6,5e6,5e6,5e6,5e6,5e6,5e6,5e6,5e6,5e6,5e6,5e6,5e6],this.chartOptions.series[2].data=[1e7,1e7,1e7,1e7,1e7,1e7,1e7,1e7,1e7,1e7,1e7,1e7,1e7,1e7,1e7]),this.chartOptions.series[0].data=r}else this.alertService.activate("This page cann't to show because there is no education life product detail data. Please add education life product detail in rodcut configuration","Warning")}getParnet(){return this.globalFun.tempFormData[s.S_]}nextPage(){this.actionEvent.emit({type:_.V.NEXT})}backPage(){this.actionEvent.emit({type:_.V.PREV})}}return a.\u0275fac=function(r){return new(r||a)(o.Y36(y.c),o.Y36(c.Q))},a.\u0275cmp=o.Xpm({type:a,selectors:[["app-education-life-grip"]],viewQuery:function(r,i){if(1&r&&o.Gf(T,5),2&r){let m;o.iGM(m=o.CRH())&&(i.chart=m.first)}},inputs:{product:"product",editData:"editData",resourcesId:"resourcesId",parentData:"parentData"},outputs:{actionEvent:"actionEvent"},decls:1,vars:8,consts:[[3,"series","chart","xaxis","yaxis","title","legend","dataLabels","markers"]],template:function(r,i){1&r&&o._UZ(0,"apx-chart",0),2&r&&o.Q6J("series",i.chartOptions.series)("chart",i.chartOptions.chart)("xaxis",i.chartOptions.xaxis)("yaxis",i.chartOptions.yaxis)("title",i.chartOptions.title)("legend",i.chartOptions.legend)("dataLabels",i.chartOptions.dataLabels)("markers",i.chartOptions.markers)},directives:[E.x],styles:[""]}),a})();var I=e(44290),A=e(78480),R=e(57730),M=e(86031),L=e(57842),b=e(13468),C=e(99765),S=e(87626),l=e(70933);let P=(()=>{class a{}return a.\u0275fac=function(r){return new(r||a)},a.\u0275mod=o.oAB({type:a}),a.\u0275inj=o.cJS({imports:[[t.ez,u.u5,d.fA,u.UX,p.bz,f.Fk,p.M,L.A0,b.rP,E.X,S.vi,A.FA,I.XK,R.c,M.lN,C.Ud,l.Q]]}),a})();o.B6R(g.k,[t.O5,t.sg,O],[t.JJ])}}]);