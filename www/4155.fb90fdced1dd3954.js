"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4155],{53489:(O,Z,a)=>{a.d(Z,{w:()=>v});var e=a(49133);function v(r){Object.keys(r.controls).forEach(f=>{const _=r.get(f);_ instanceof e.NI?_.markAsTouched({onlySelf:!0}):_ instanceof e.cw&&this.validateAllFields(_)})}},84155:(O,Z,a)=>{a.r(Z),a.d(Z,{ActivityManagementDetailModule:()=>st});var e=a(86019),v=a(4205),r=a(49133),f=a(54753),_=a(90949),m=a(18510);const T={quotation:{ELEMENT_COL:[{title:"Quotation ID",type:m.Y.FEILD,field:"id"},{title:"Product Name",type:m.Y.FEILD,field:"productName"},{title:"Product Code",type:m.Y.FEILD,field:"productCode"},{title:"Agent Name",type:m.Y.FEILD,field:"agentFirstName"},{title:"Premium",type:m.Y.FEILD,field:"premium",amtFormat:!0},{title:"Status",type:m.Y.FEILD,field:"status",isTitle:!0}],displayedColumns:["id","productName","productCode","agentFirstName","premium","status"]},policy:{ELEMENT_COL:[{title:"Quotation ID",type:m.Y.FEILD,field:"id"},{title:"Product Name",type:m.Y.FEILD,field:"productName"},{title:"Product Code",type:m.Y.FEILD,field:"productCode"},{title:"Agent Name",type:m.Y.FEILD,field:"agentFirstName"},{title:"Premium",type:m.Y.FEILD,field:"premium",amtFormat:!0},{title:"Status",type:m.Y.FEILD,field:"status",isTitle:!0}],displayedColumns:["id","productName","productCode","agentFirstName","premium","status"]},customer:{ELEMENT_COL:[{title:"ID",type:m.Y.FEILD,field:"id"},{title:"Title",type:m.Y.FEILD,field:"title"},{title:"First Name",type:m.Y.FEILD,field:"firstName"},{title:"Last Name",type:m.Y.FEILD,field:"lastName"},{title:"Identity Type",type:m.Y.FEILD,field:"identityType"},{title:"Identity Number",type:m.Y.FEILD,field:"identityNumber"},{title:"Gender",type:m.Y.FEILD,field:"gender"}],displayedColumns:["id","title","firstName","lastName","identityType","identityNumber","gender"]},agent:{ELEMENT_COL:[{title:"Emp No",type:m.Y.FEILD,field:"empNo"},{title:"Email",type:m.Y.FEILD,field:"email"},{title:"First Name",type:m.Y.FEILD,field:"firstName"},{title:"Last Name",type:m.Y.FEILD,field:"lastName"},{title:"Mobile No",type:m.Y.FEILD,field:"mobileNo"}],displayedColumns:["empNo","email","firstName","lastName","mobileNo"]}};var t=a(83668),h=a(85993),C=a(80842),E=a(46045),I=a(18260),N=a(91691),b=a(44522);const D=`${I.N.apiUrl}/customer`;let F=(()=>{class n extends N.i{constructor(i){super(i,D),this.httpClient=i}}return n.\u0275fac=function(i){return new(i||n)(t.LFG(b.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const x=`${I.N.apiUrl}/employee`;let q=(()=>{class n extends N.i{constructor(i){super(i,x),this.httpClient=i}}return n.\u0275fac=function(i){return new(i||n)(t.LFG(b.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var g=a(60940);function y(n,p){if(1&n&&(t.TgZ(0,"option",12),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&n){const i=p.$implicit;t.s9C("value",i),t.xp6(1),t.Oqu(t.lcZ(2,2,i))}}function s(n,p){if(1&n){const i=t.EpF();t.TgZ(0,"div",9),t.TgZ(1,"select",10),t.NdJ("ngModelChange",function(c){return t.CHM(i),t.oxw().type=c})("change",function(){return t.CHM(i),t.oxw().getDatalist()}),t.YNc(2,y,3,4,"option",11),t.qZA(),t.qZA()}if(2&n){const i=t.oxw();t.xp6(1),t.Q6J("ngModel",i.type),t.xp6(1),t.Q6J("ngForOf",i.types)}}let l=(()=>{class n{constructor(i,o,c,d,P,S,Y){this.modal=i,this.quotService=o,this.policyService=c,this.customerService=d,this.employeeService=P,this.cdf=S,this.alertService=Y,this.tableData=T,this.types=["quotation","policy"],this.type="customer",this.dataList=[]}ngOnInit(){this.selected&&"quotation"==this.type&&(this.type=(this.selected+"").includes("QUO")?"quotation":"policy"),this.getDatalist()}selectedProd(i,o){this.selecteditem==i&&(this.selecteditem=null),this.selecteditem=i,this.selectedName="customer"==this.type?this.dataList[o].name:this.dataList[o].firstName||""}getDatalist(){if("customer"==this.type)this.getCustomerList();else{let i;i="quotation"==this.type?this.quotService:"policy"==this.type?this.policyService:this.employeeService,i.findAll().toPromise().then(o=>{o&&(this.dataList=o,this.cdf.detectChanges(),this.matTable.reChangeData())})}}getCustomerList(){this.customerService.findAll().pipe((0,f.U)(i=>i.map(o=>o.individualCustomer))).toPromise().then(i=>{i&&(this.dataList=i),this.cdf.detectChanges(),this.matTable.reChangeData()})}get selected(){let i;return this.matTable&&(i=this.matTable.selection.selected[0]),i||{id:0}}save(){this.selectedName="customer"==this.type?this.selected.name:this.selected.firstName||"",this.selectedName="agent"==this.type?(this.selected.firstName||"")+" "+(this.selected.middleName||"")+" "+(this.selected.lastName||""):"",this.modal.dismiss({data:this.selected.id||this.selected.empId,type:"save",dataName:this.selectedName})}actionBtn(i){}deleteEditModal(){this.alertService.activate("Are you sure want to delete?","Warning Message").then(i=>{i&&this.modal.dismiss({type:"delete"})})}}return n.\u0275fac=function(i){return new(i||n)(t.Y36(h.Kz),t.Y36(C.G),t.Y36(E.d),t.Y36(F),t.Y36(q),t.Y36(t.sBO),t.Y36(g.c))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-related-to"]],viewQuery:function(i,o){if(1&i&&t.Gf(_.I,5),2&i){let c;t.iGM(c=t.CRH())&&(o.matTable=c.first)}},decls:13,vars:9,consts:[[1,"modal-content"],[1,"modal-header"],["id","example-modal-sizes-title-lg",1,"modal-title","h4","left-border-image"],[1,"overlay","overlay-block","cursor-default","modal-body"],["class","form-group",4,"ngIf"],[3,"selectable","data","colum","displayedColumns","emitter"],[1,"modal-footer"],["type","button",1,"btn","btn-light","btn-elevate","mr-2",3,"click"],["type","submit",1,"btn","btn-primary","btn-elevate",3,"disabled","click"],[1,"form-group"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._uU(3),t.ALo(4,"titlecase"),t.qZA(),t.qZA(),t.TgZ(5,"div",3),t.YNc(6,s,3,2,"div",4),t.TgZ(7,"app-material-table-view",5),t.NdJ("emitter",function(d){return o.actionBtn(d)}),t.qZA(),t.qZA(),t.TgZ(8,"div",6),t.TgZ(9,"button",7),t.NdJ("click",function(){return o.modal.dismiss()}),t._uU(10,"Cancel"),t.qZA(),t.TgZ(11,"button",8),t.NdJ("click",function(){return o.save()}),t._uU(12,"Save"),t.qZA(),t.qZA(),t.qZA()),2&i&&(t.xp6(3),t.hij(" Select ( ",t.lcZ(4,7,o.type)," ) in list "),t.xp6(3),t.Q6J("ngIf","quotation"==o.type||"policy"==o.type),t.xp6(1),t.Q6J("selectable",!0)("data",o.dataList)("colum",o.tableData[o.type].ELEMENT_COL)("displayedColumns",o.tableData[o.type].displayedColumns),t.xp6(4),t.Q6J("disabled",!o.selected.id&&!o.selected.empId))},directives:[e.O5,_.I,r.EJ,r.JJ,r.On,e.sg,r.YN,r.Kr],pipes:[e.rS],encapsulation:2}),n})();var u=a(92070),A=a(53489),J=a(11918),U=a(44290),w=a(92118),k=a(47975),j=a(95976),Q=a(37632),R=a(57730),L=a(78480),B=a(86031),V=a(15346);function K(n,p){if(1&n&&(t.ynx(0),t._uU(1),t.ALo(2,"date"),t.BQk()),2&n){const i=t.oxw(3);t.xp6(1),t.hij(" ",t.xi3(2,1,i.actForm.controls.planDateStr.value,"dd-MM-YYYY")," ")}}function W(n,p){if(1&n&&(t.TgZ(0,"div",3),t.TgZ(1,"div",4),t.TgZ(2,"div",5),t.TgZ(3,"div",6),t.TgZ(4,"div",7),t.TgZ(5,"div",1),t.TgZ(6,"div",8),t._uU(7),t.ALo(8,"translate"),t._UZ(9,"br"),t._uU(10),t.qZA(),t.TgZ(11,"div",8),t._uU(12),t.ALo(13,"translate"),t._UZ(14,"br"),t._uU(15),t.qZA(),t.TgZ(16,"div",8),t._uU(17),t.ALo(18,"translate"),t._UZ(19,"br"),t._uU(20),t.qZA(),t.TgZ(21,"div",8),t._uU(22),t.ALo(23,"translate"),t._UZ(24,"br"),t.YNc(25,K,3,4,"ng-container",9),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n){const i=t.oxw(2);t.xp6(7),t.hij(" ",t.lcZ(8,8,"FORM.related_to")," "),t.xp6(3),t.hij(" ",i.actForm.controls.relatedTo.value," "),t.xp6(2),t.hij(" ",t.lcZ(13,10,"FORM.owner")," "),t.xp6(3),t.hij(" ",i.actForm.controls.assignName.value," "),t.xp6(2),t.hij(" ",t.lcZ(18,12,"FORM.status")," "),t.xp6(3),t.hij(" ",i.activityStatus[i.actForm.controls.status.value]," "),t.xp6(2),t.hij(" ",t.lcZ(23,14,"FORM.date")," "),t.xp6(3),t.Q6J("ngIf",i.actForm.controls.planDateStr.value)}}function H(n,p){if(1&n&&(t.TgZ(0,"div",1),t.YNc(1,W,26,16,"div",2),t.qZA()),2&n){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",i.actForm)}}function z(n,p){if(1&n&&(t.TgZ(0,"div",19),t.TgZ(1,"div",13),t.TgZ(2,"label",14),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"input",43),t.qZA(),t.qZA()),2&n){const i=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,5,"FORM.act_no")),t.xp6(2),t.ekj("is-invalid",i.isControlInvalid("activityNo"))("is-valid",i.isControlValid("activityNo"))}}function G(n,p){if(1&n&&(t.TgZ(0,"option",44),t._uU(1),t.qZA()),2&n){const i=p.$implicit;t.s9C("value",i),t.xp6(1),t.Oqu(i)}}function X(n,p){1&n&&(t.TgZ(0,"button",45),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"FORM.btn_save")))}function $(n,p){if(1&n){const i=t.EpF();t.TgZ(0,"div",1),t.TgZ(1,"div",3),t.TgZ(2,"div",4),t.TgZ(3,"div",5),t.TgZ(4,"form",10),t.NdJ("ngSubmit",function(){return t.CHM(i),t.oxw().doActivity()}),t.TgZ(5,"div",1),t.YNc(6,z,6,7,"div",11),t.TgZ(7,"div",12),t.TgZ(8,"div",13),t.TgZ(9,"label",14),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"select",15),t.TgZ(13,"option",16),t._uU(14,"Select Activity Type"),t.qZA(),t.YNc(15,G,2,2,"option",17),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"div",12),t.TgZ(17,"div",13),t.TgZ(18,"label",14),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"input",18),t.qZA(),t.qZA(),t.TgZ(22,"div",19),t.TgZ(23,"div",13),t.TgZ(24,"label",14),t._uU(25),t.ALo(26,"translate"),t.qZA(),t._UZ(27,"textarea",20),t.qZA(),t.qZA(),t.TgZ(28,"div",21),t.TgZ(29,"div",13),t.TgZ(30,"label",14),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.TgZ(33,"div",22),t._UZ(34,"input",23),t._UZ(35,"mat-datepicker-toggle",24),t._UZ(36,"mat-datepicker",25,26),t.qZA(),t.qZA(),t.qZA(),t.TgZ(38,"div",21),t.TgZ(39,"div",13),t.TgZ(40,"label",14),t._uU(41),t.ALo(42,"translate"),t.qZA(),t.TgZ(43,"div",22),t._UZ(44,"input",27),t._UZ(45,"mat-datepicker-toggle",24),t._UZ(46,"mat-datepicker",25,28),t.qZA(),t.qZA(),t.qZA(),t.TgZ(48,"div",21),t.TgZ(49,"div",13),t.TgZ(50,"label",14),t._uU(51),t.ALo(52,"translate"),t.qZA(),t.TgZ(53,"div",22),t._UZ(54,"input",29),t._UZ(55,"mat-datepicker-toggle",24),t._UZ(56,"mat-datepicker",25,30),t.qZA(),t.qZA(),t.qZA(),t.TgZ(58,"div",21),t.TgZ(59,"div",31),t.NdJ("click",function(){return t.CHM(i),t.oxw().openModal("quotation")}),t.TgZ(60,"label",14),t._uU(61),t.ALo(62,"translate"),t.qZA(),t._UZ(63,"input",32),t.TgZ(64,"span",33),t.NdJ("click",function(c){return t.CHM(i),t.oxw().clearDate("relatedTo"),c.stopPropagation()}),t.TgZ(65,"span",34),t._uU(66,"\xd7"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(67,"div",21),t.TgZ(68,"div",31),t.NdJ("click",function(){return t.CHM(i),t.oxw().viewCustomer()}),t.TgZ(69,"label",14),t._uU(70),t.ALo(71,"translate"),t.qZA(),t._UZ(72,"input",35),t.qZA(),t.qZA(),t.TgZ(73,"div",21),t.TgZ(74,"div",31),t.NdJ("click",function(){return t.CHM(i),t.oxw().viewAgent("agent")}),t.TgZ(75,"label",14),t._uU(76),t.ALo(77,"translate"),t.qZA(),t._UZ(78,"input",36),t.qZA(),t.qZA(),t.TgZ(79,"div",19),t.TgZ(80,"div",13),t.TgZ(81,"label",14),t._uU(82),t.ALo(83,"translate"),t.qZA(),t.TgZ(84,"select",37),t.TgZ(85,"option",38),t._uU(86,"Open"),t.qZA(),t.TgZ(87,"option",39),t._uU(88,"Complete"),t.qZA(),t.TgZ(89,"option",40),t._uU(90,"Cancel"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(91,"button",41),t.NdJ("click",function(){return t.CHM(i),t.oxw().backLocation()}),t._uU(92),t.ALo(93,"translate"),t.qZA(),t.YNc(94,X,3,3,"button",42),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const i=t.MAs(37),o=t.MAs(47),c=t.MAs(57),d=t.oxw();t.xp6(4),t.Q6J("formGroup",d.actForm),t.xp6(2),t.Q6J("ngIf","edit"==d.pageStatus),t.xp6(4),t.Oqu(t.lcZ(11,45,"FORM.act_type")),t.xp6(2),t.ekj("is-invalid",d.isControlInvalid("activityType"))("is-valid",d.isControlValid("activityType")),t.xp6(3),t.Q6J("ngForOf",d.activityType),t.xp6(4),t.Oqu(t.lcZ(20,47,"FORM.act_title")),t.xp6(2),t.ekj("is-invalid",d.isControlInvalid("activityTitle"))("is-valid",d.isControlValid("activityTitle")),t.xp6(4),t.Oqu(t.lcZ(26,49,"FORM.act_desc")),t.xp6(2),t.ekj("is-invalid",d.isControlInvalid("activityDescription"))("is-valid",d.isControlValid("activityDescription")),t.xp6(4),t.hij("",t.lcZ(32,51,"FORM.plan_date")," "),t.xp6(3),t.Q6J("matDatepicker",i),t.xp6(1),t.Q6J("for",i),t.xp6(6),t.Oqu(t.lcZ(42,53,"FORM.act_date")),t.xp6(3),t.Q6J("matDatepicker",o),t.xp6(1),t.Q6J("for",o),t.xp6(6),t.Oqu(t.lcZ(52,55,"FORM.due_date")),t.xp6(3),t.Q6J("matDatepicker",c),t.xp6(1),t.Q6J("for",c),t.xp6(6),t.Oqu(t.lcZ(62,57,"FORM.related_to")),t.xp6(9),t.Oqu(t.lcZ(71,59,"FORM.customer_name")),t.xp6(2),t.ekj("is-invalid",d.isControlInvalid("customerId"))("is-valid",d.isControlValid("customerId")),t.xp6(4),t.Oqu(t.lcZ(77,61,"FORM.assign_to")),t.xp6(2),t.ekj("is-invalid",d.isControlInvalid("assignTo"))("is-valid",d.isControlValid("assignTo")),t.xp6(4),t.Oqu(t.lcZ(83,63,"FORM.status")),t.xp6(2),t.ekj("is-invalid",d.isControlInvalid("status"))("is-valid",d.isControlValid("status")),t.xp6(8),t.Oqu(t.lcZ(93,65,"FORM.btn_cancel")),t.xp6(2),t.Q6J("ngIf",d.dataAccess.edit)}}let tt=(()=>{class n{constructor(i,o,c,d,P,S,Y,lt){this.route=i,this.modalService=o,this.activityManageService=c,this.location=d,this.cdf=P,this.alertService=S,this.menuService=Y,this.ngZone=lt,this.isLead=!1,this.activityStatus={"01":"Open","02":"Complete","03":"Cancel"},this.activityType=["Face to Face","Online","Phone Call"],this.dataAccess={view:!0,create:!0,edit:!0,delete:!0}}ngOnInit(){this.checkPremission(),this.route.queryParams.subscribe(i=>{this.pageStatus=i.pageStatus,"create"!=this.pageStatus?(this.oldId=i.pageId,this.getOld()):(this.loadForm(),this.actForm.controls.assignTo.setValue(i.assignTo),this.actForm.controls.assignName.setValue(i.assignToName),this.actForm.controls.customerId.setValue(i.customerId),this.actForm.controls.customerName.setValue(i.name),i.leadId&&(this.leadId=i.leadId,this.isLead=i.isLead))})}checkPremission(){this.menuService.dataAccess.subscribe(i=>{i&&(this.dataAccess=i.activity,this.dataAccess.view||this.location.back())})}ngAfterViewInit(){}clearDate(i){this.actForm.controls[i].setValue(null)}getOld(){this.activityManageService.findOne(this.oldId).toPromise().then(i=>{i&&(this.oldData=i,this.leadId=i.leadId,this.isLead=!!i.leadId,this.loadForm(i),this.cdf.detectChanges())})}loadForm(i){this.actForm=new r.cw({activityNo:new r.NI({value:i?i.activityNo:null,disabled:!0}),activityType:new r.NI(i?i.activityType:"",r.kI.required),activityTitle:new r.NI(i?i.activityTitle:null,r.kI.required),activityDescription:new r.NI(i?i.activityDescription:null,r.kI.required),planDateStr:new r.NI(i&&i.planDate?u(i.planDate):null),actualDateStr:new r.NI(i&&i.actualDate?u(i.actualDate):null),dueDateStr:new r.NI(i&&i.dueDate?u(i.dueDate):null),relatedTo:new r.NI({value:i?i.relatedTo:null,disabled:!0}),customerId:new r.NI(i?i.customerId:null,r.kI.required),customerName:new r.NI({value:i?i.customerName:null,disabled:!0}),assignTo:new r.NI(i?i.assignTo:null,r.kI.required),assignName:new r.NI({value:i?i.assignName:null,disabled:!0}),status:new r.NI({value:i?i.status:"01",disabled:!i})}),this.relatedType=i?i.relatedType:"",this.cdf.detectChanges()}openModal(i){let o;"quotation"==i&&(o=this.actForm.controls.relatedTo);const c=this.modalService.open(l,{size:"xl",backdrop:!1});c.componentInstance.type=i,c.componentInstance.selecteditem=o.value,c.result.then(()=>{},d=>{d&&"save"==d.type&&(this.relatedType=(d.data+"").includes("QUO")?"quotation":"policy",o.setValue(d.data))})}viewAgent(i){if(!this.isLead){let o;"agent"==i&&(o=this.actForm.controls.assignTo);const c=this.modalService.open(l,{size:"xl",backdrop:!1});c.componentInstance.type=i,c.componentInstance.selecteditem=o.value,c.result.then(()=>{},d=>{d&&"save"==d.type&&"agent"==i&&(this.actForm.controls.assignTo.setValue(d.data),this.actForm.controls.assignName.setValue(d.dataName))})}}viewCustomer(){if(!this.isLead){let i;i=this.modalService.open(J.b,{size:"xl",backdrop:!1}),i.componentInstance.isPopup=!0,i.result.then(()=>{},o=>{if(o&&"save"==o.type){let c=o.data,d=(c.firstName||"")+" "+(c.middleName||"")+" "+(c.lastName||"");this.actForm.controls.customerId.setValue(c.customerId),this.actForm.controls.customerName.setValue(d)}})}}isControlValid(i){const o=this.actForm.controls[i];return o.valid&&(o.dirty||o.touched)}isControlInvalid(i){const o=this.actForm.controls[i];return o.invalid&&(o.dirty||o.touched)}controlHasError(i,o){const c=this.actForm.controls[o];return c.hasError(i)&&(c.dirty||c.touched)}isControlTouched(i){const o=this.actForm.controls[i];return o.dirty||o.touched}doActivity(){if(this.actForm.invalid)return(0,A.w)(this.actForm),!0;{let i=this.actForm.getRawValue();i.dueDate=i.dueDateStr,i.actualDate=i.actualDateStr,i.planDate=i.planDateStr,i.dueDateStr=u(i.dueDate).format("YYYY-MM-DD"),i.actualDateStr=u(i.actualDate).format("YYYY-MM-DD"),i.planDateStr=u(i.planDate).format("YYYY-MM-DD"),"create"==this.pageStatus?this.create(i):this.edit(i)}}create(i){let o=Object.assign(Object.assign({},i),{relatedType:this.relatedType||null,status:"01"});this.isLead&&(o=Object.assign(Object.assign({},i),{relatedType:this.relatedType||null,status:"01",leadId:this.leadId})),this.activityManageService.save(o).toPromise().then(c=>{c&&(this.alertService.activate("This record was created","Success Message"),this.location.back())})}edit(i){let o=Object.assign(Object.assign({},i),{activityNo:this.oldId,relatedType:this.relatedType||null});this.isLead&&(o=Object.assign(Object.assign({},i),{relatedType:this.relatedType||null,leadId:this.leadId})),this.activityManageService.updateNoID(o).toPromise().then(c=>{c&&(this.alertService.activate("This record was updated","Success Message"),this.location.back())})}backLocation(){this.isLead?this.ngZone.run(()=>{this.location.back()}):this.loadForm(this.oldData)}}return n.\u0275fac=function(i){return new(i||n)(t.Y36(v.gz),t.Y36(h.FF),t.Y36(j.e),t.Y36(e.Ye),t.Y36(t.sBO),t.Y36(g.c),t.Y36(Q.q),t.Y36(t.R0b))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-activity-management-detail"]],features:[t._Bn([{provide:U._A,useClass:w.t7,deps:[U.Ad]},{provide:U.sG,useValue:k.Gs}])],decls:2,vars:2,consts:[["class","row",4,"ngIf"],[1,"row"],["class","col-12",4,"ngIf"],[1,"col-12"],[1,"card","card-custom","gutter-b"],[1,"card-body"],[1,"table-responsive","angular-bootstrap-table"],[1,"container"],[1,"col-sm"],[4,"ngIf"],["action","#",1,"form",3,"formGroup","ngSubmit"],["class","col-sm-12",4,"ngIf"],[1,"col-sm-6"],[1,"form-group"],[1,"form-label"],["name","actType","autocomplete","off","formControlName","activityType",1,"form-control","form-control-sm"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","text","name","actTitle","autocomplete","off","formControlName","activityTitle",1,"form-control","form-control-sm"],[1,"col-sm-12"],["name","","rows","4","name","actDesc","autocomplete","off","formControlName","activityDescription",1,"form-control","form-control-sm",2,"resize","false"],[1,"col-sm-4"],[1,"input-group"],["matInput","","formControlName","planDateStr","readonly","",1,"form-control-sm","date-input",2,"width","100%",3,"matDatepicker"],["matSuffix","",3,"for"],["disabled","false"],["planDateStr",""],["matInput","","formControlName","actualDateStr","readonly","",1,"form-control-sm","date-input",2,"width","100%",3,"matDatepicker"],["actualDateStr",""],["matInput","","formControlName","dueDateStr","readonly","",1,"form-control-sm","date-input",2,"width","100%",3,"matDatepicker"],["dueDateStr",""],[1,"form-group",3,"click"],["type","text","name","relatedTo","autocomplete","off","formControlName","relatedTo",1,"form-control","form-control-sm"],["title","Clear all",1,"ng-clear-wrapper",3,"click"],["aria-hidden","true",1,"ng-clear"],["type","text","name","customerName","autocomplete","off","formControlName","customerName",1,"form-control","form-control-sm"],["type","text","name","assignName","autocomplete","off","formControlName","assignName",1,"form-control","form-control-sm"],["name","status","autocomplete","off","formControlName","status",1,"form-control","form-control-sm"],["value","01"],["value","02"],["value","03"],["type","button",1,"btn","btn-default","btn-elevate",3,"click"],["type","submit","class","btn btn-primary btn-elevate mx-2",4,"ngIf"],["type","text","name","activityNo","autocomplete","off","formControlName","activityNo",1,"form-control","form-control-sm"],[3,"value"],["type","submit",1,"btn","btn-primary","btn-elevate","mx-2"]],template:function(i,o){1&i&&(t.YNc(0,H,2,1,"div",0),t.YNc(1,$,95,67,"div",0)),2&i&&(t.Q6J("ngIf","edit"==o.pageStatus),t.xp6(1),t.Q6J("ngIf",o.actForm))},directives:[e.O5,r._Y,r.JL,r.sg,r.EJ,r.JJ,r.u,r.YN,r.Kr,e.sg,r.Fj,R.Nt,L.hl,L.nW,B.R9,L.Mq],pipes:[V.X,e.uU],styles:[".input-group[_ngcontent-%COMP%]   .form-control-sm[_ngcontent-%COMP%]{background-color:#fff;background-clip:padding-box;border:1px solid #E4E6EF;padding:0 .75rem}.input-group[_ngcontent-%COMP%]   .mat-datepicker-toggle[_ngcontent-%COMP%]{position:absolute;right:5px}.ng-clear-wrapper[_ngcontent-%COMP%]   .ng-clear[_ngcontent-%COMP%]{cursor:pointer;position:absolute;right:2rem;top:2.3rem;font-size:1.2rem;color:#999}.ng-clear-wrapper[_ngcontent-%COMP%]   .ng-clear[_ngcontent-%COMP%]:hover{color:#d0021b}"]}),n})();var et=a(45598),it=a(45479),ot=a(90860),at=a(57842),nt=a(63699);let st=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[e.ez,r.u5,r.UX,it.U8,et.fA,h.M,L.FA,R.c,at.A0,h.bz,ot.m,nt.j,v.Bz.forChild([{path:"",component:tt}])]]}),n})()},11918:(O,Z,a)=>{a.d(Z,{b:()=>q});var e=a(83668),v=a(49133),r=a(90949),f=a(62311),_=a(44290),m=a(92118),T=a(47975),M=a(4205),t=a(99457),h=a(85993),C=a(86019),E=a(15470),I=a(85472),N=a(57842),b=a(15346);function D(g,y){if(1&g){const s=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){return e.CHM(s),e.oxw().navigateToDetail("create")}),e._UZ(1,"span",26),e.qZA()}}function F(g,y){if(1&g){const s=e.EpF();e.ynx(0),e.TgZ(1,"div",30),e.TgZ(2,"button",31),e.NdJ("click",function(){return e.CHM(s),e.oxw(2).closeModal()}),e._uU(3,"Cancel"),e.qZA(),e.TgZ(4,"button",32),e.NdJ("click",function(){return e.CHM(s),e.oxw(2).nextProd()}),e._uU(5,"Next"),e.qZA(),e.qZA(),e.BQk()}if(2&g){const s=e.oxw(2);e.xp6(4),e.Q6J("disabled",!s.selected.customerId)}}function x(g,y){if(1&g){const s=e.EpF();e.TgZ(0,"div",27),e.TgZ(1,"app-material-table-view",28),e.NdJ("emitter",function(u){return e.CHM(s),e.oxw().actionBtn(u)})("rowselect",function(u){return e.CHM(s),e.oxw().rowSelected(u)}),e.qZA(),e.YNc(2,F,6,1,"ng-container",29),e.qZA()}if(2&g){const s=e.oxw();e.xp6(1),e.Q6J("data",s.customerList)("colum",s.ELEMENT_COL)("displayedColumns",s.displayedColumns)("selectable",s.isPopup),e.xp6(1),e.Q6J("ngIf",s.isPopup&&!s.isDynamic)}}let q=(()=>{class g{constructor(s,l,u,A){this.router=s,this.cdf=l,this.customerListService=u,this.modalService=A,this.ELEMENT_COL=JSON.parse(JSON.stringify(f.Ks)),this.displayedColumns=JSON.parse(JSON.stringify(f.Q1)),this.customerList=[],this.statusOption=f.qb,this.identityTypeOption=f.Mf,this.selectedUser=new e.vpe,this.isPopup=!1,this.party=!0,this.isDynamic=!1,this.show=!1,this.loadForm()}ngOnInit(){this.isPopup&&(this.ELEMENT_COL.splice(9,1),this.displayedColumns.splice(9,1)),this.show=!0}ngAfterViewInit(){this.getList()}loadForm(){this.customerForm=new v.cw({name:new v.NI(null),identityType:new v.NI(null),identityNumber:new v.NI(null),statusCode:new v.NI(null),partyCode:new v.NI(null),startDate:new v.NI(null),endDate:new v.NI(null)})}navigateToDetail(s,l,u){this.router.navigate(["/customer/customer-detail"],{queryParams:{pageStatus:s,pageId:l,pageSecondaryId:u}})}getList(){this.customerListService.getCustomerList(this.customerForm.value,this.party,!(!this.isPopup||this.isDynamic)).toPromise().then(l=>{l&&(this.customerList=l,this.cdf.detectChanges(),this.matTable&&this.matTable.reChangeData())})}get selected(){let s;return this.matTable&&(s=this.matTable.selection.selected[0]),s||{customerId:0}}rowSelected(s){this.selectedUser.emit(s)}cancel(){this.customerForm.reset(),this.getList()}actionBtn(s){"edit"==s.cmd&&this.navigateToDetail("edit",s.data.customerId,s.data.individualId)}isControlValid(s){const l=this.customerForm.controls[s];return l.valid&&(l.dirty||l.touched)}isControlInvalid(s){const l=this.customerForm.controls[s];return l.invalid&&(l.dirty||l.touched)}controlHasError(s,l){const u=this.customerForm.controls[l];return u.hasError(s)&&(u.dirty||u.touched)}isControlTouched(s){const l=this.customerForm.controls[s];return l.dirty||l.touched}nextProd(){this.selected.customerId&&this.modalService.dismissAll({data:this.selected,type:"save"})}closeModal(){this.modalService.dismissAll()}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(M.F0),e.Y36(e.sBO),e.Y36(t.c),e.Y36(h.FF))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-customer-list"]],viewQuery:function(s,l){if(1&s&&e.Gf(r.I,5),2&s){let u;e.iGM(u=e.CRH())&&(l.matTable=u.first)}},inputs:{isPopup:"isPopup",party:"party",isDynamic:"isDynamic"},outputs:{selectedUser:"selectedUser"},features:[e._Bn([{provide:_._A,useClass:m.t7,deps:[_.Ad]},{provide:_.sG,useValue:T.Gs}])],decls:61,vars:52,consts:[[1,"row"],[1,"col-12"],[1,"card","card-custom","gutter-b"],[1,"card-header"],[1,"card-title"],[1,"card-label","left-border-image"],[1,"card-toolbar"],["type","button","class","btn btn-primary btn-circle","style","margin-right: 1rem;\n                    ",3,"click",4,"ngIf"],[1,"flaticon2-magnifier-tool","search-tool",3,"click"],["type","button",1,"btn","btn-primary","ml-2",2,"min-width","50px",3,"click"],[1,""],[1,"card-body","px-10","py-3"],["action","#",1,"form",3,"formGroup"],[1,"row",2,"align-items","center"],["remove-host","",3,"formInput","colClass"],[1,"col-md-6"],[1,"form-group","row"],[1,"col-sm-4","col-form-label"],[1,"col-sm-8"],["type","text","name","name","autocomplete","off","formControlName","name",1,"form-control","form-control-sm"],["type","text","name","partyCode","autocomplete","off","formControlName","partyCode",1,"form-control","form-control-sm"],["bindLabel","value","bindValue","code","formControlName","identityType",1,"ng-custom-select","ng-custom-select-sm",3,"items"],["type","text","name","identityNumber","autocomplete","off","formControlName","identityNumber",1,"form-control","form-control-sm"],["bindLabel","value","bindValue","code","formControlName","statusCode",1,"ng-custom-select","ng-custom-select-sm",3,"items"],["class","card-body customer-card-body",4,"ngIf"],["type","button",1,"btn","btn-primary","btn-circle",2,"margin-right","1rem",3,"click"],[1,"flaticon2-plus"],[1,"card-body","customer-card-body"],[3,"data","colum","displayedColumns","selectable","emitter","rowselect"],[4,"ngIf"],[1,"card-footer"],["type","button",1,"btn","btn-light","btn-elevate","mr-2",3,"click"],["type","button",1,"btn","btn-primary","btn-elevate",3,"disabled","click"]],template:function(s,l){1&s&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"h3",5),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.qZA(),e.TgZ(8,"div",6),e.YNc(9,D,2,0,"button",7),e.TgZ(10,"span",8),e.NdJ("click",function(){return l.getList()}),e.qZA(),e.TgZ(11,"button",9),e.NdJ("click",function(){return l.cancel()}),e.TgZ(12,"span",10),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"div",11),e.TgZ(16,"form",12),e.TgZ(17,"div",13),e._UZ(18,"app-start-end-date",14),e.qZA(),e.TgZ(19,"div",13),e.TgZ(20,"div",15),e.TgZ(21,"div",16),e.TgZ(22,"label",17),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"div",18),e._UZ(26,"input",19),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"div",15),e.TgZ(28,"div",16),e.TgZ(29,"label",17),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"div",18),e._UZ(33,"input",20),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(34,"div",13),e.TgZ(35,"div",15),e.TgZ(36,"div",16),e.TgZ(37,"label",17),e._uU(38),e.ALo(39,"translate"),e.qZA(),e.TgZ(40,"div",18),e._UZ(41,"ng-select",21),e.qZA(),e.qZA(),e.qZA(),e.TgZ(42,"div",15),e.TgZ(43,"div",16),e.TgZ(44,"label",17),e._uU(45),e.ALo(46,"translate"),e.qZA(),e.TgZ(47,"div",18),e._UZ(48,"input",22),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(49,"div",0),e.TgZ(50,"div",15),e.TgZ(51,"div",16),e.TgZ(52,"label",17),e._uU(53),e.ALo(54,"translate"),e.qZA(),e.TgZ(55,"div",18),e._UZ(56,"ng-select",23),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(57,"div",0),e.TgZ(58,"div",1),e.TgZ(59,"div",2),e.YNc(60,x,3,5,"div",24),e.qZA(),e.qZA(),e.qZA()),2&s&&(e.xp6(2),e.ekj("remove-p",l.isPopup),e.xp6(4),e.Oqu(e.lcZ(7,38,"FORM.customer_list")),e.xp6(3),e.Q6J("ngIf",!l.isPopup),e.xp6(4),e.Oqu(e.lcZ(14,40,"FORM.btn_cancel")),e.xp6(3),e.Q6J("formGroup",l.customerForm),e.xp6(2),e.Q6J("formInput",l.customerForm)("colClass","col-md-6"),e.xp6(5),e.Oqu(e.lcZ(24,42,"FORM.name")),e.xp6(3),e.ekj("is-invalid",l.isControlInvalid("name"))("is-valid",l.isControlValid("name")),e.xp6(4),e.Oqu(e.lcZ(31,44,"FORM.party_code")),e.xp6(3),e.ekj("is-invalid",l.isControlInvalid("partyCode"))("is-valid",l.isControlValid("partyCode")),e.xp6(5),e.Oqu(e.lcZ(39,46,"FORM.id_type")),e.xp6(3),e.ekj("is-invalid",l.isControlInvalid("identityType"))("is-valid",l.isControlValid("identityType")),e.Q6J("items",l.identityTypeOption),e.xp6(4),e.Oqu(e.lcZ(46,48,"FORM.id_no")),e.xp6(3),e.ekj("is-invalid",l.isControlInvalid("identityNumber"))("is-valid",l.isControlValid("identityNumber")),e.xp6(5),e.Oqu(e.lcZ(54,50,"FORM.status")),e.xp6(3),e.ekj("is-invalid",l.isControlInvalid("statusCode"))("is-valid",l.isControlValid("statusCode")),e.Q6J("items",l.statusOption),e.xp6(3),e.ekj("remove-p",l.isPopup),e.xp6(1),e.Q6J("ngIf",l.show))},directives:[C.O5,v._Y,v.JL,v.sg,E.Q,I.Z,v.Fj,v.JJ,v.u,N.w9,r.I],pipes:[b.X],styles:[".remove-p[_ngcontent-%COMP%]{margin-bottom:0}.col-form-label[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}.form-group.row[_ngcontent-%COMP%]{align-items:center}.draggable[_ngcontent-%COMP%]{color:#fff;border-radius:50%;touch-action:none;-webkit-user-select:none;user-select:none;position:absolute;z-index:999}"]}),g})()},90860:(O,Z,a)=>{a.d(Z,{m:()=>M});var e=a(86019),v=a(49133),r=a(87626),f=a(45598),_=a(57842),m=a(63699),T=a(83668);let M=(()=>{class t{}return t.\u0275fac=function(C){return new(C||t)},t.\u0275mod=T.oAB({type:t}),t.\u0275inj=T.cJS({imports:[[e.ez,v.u5,v.UX,r.vi,f.fA,_.A0,m.j]]}),t})()}}]);