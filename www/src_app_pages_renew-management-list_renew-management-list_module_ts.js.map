{"version":3,"file":"src_app_pages_renew-management-list_renew-management-list_module_ts.js","mappings":"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","sources":["./src/app/pages/renew-management-list/renew-manage.const.ts","./src/app/pages/renew-management-list/renew-management-list.component.ts","./src/app/pages/renew-management-list/renew-management-list.module.ts","./src/app/pages/renew-management-list/renew-management-list.component.html"],"sourcesContent":["import { COLTYPE, TableCol } from '../../_metronic/shared/crud-table/components/material-table-view/table-dto'\nexport const RenewCol: TableCol[] = [\n  {\n    title: \"Policy Number\",\n    type: COLTYPE.FEILD,\n    field: \"policyNumber\",\n    // amtFormat?: boolean,\n    // isTitle?: boolean\n    // isDate?: boolen\n  },\n \n  {\n    title: \"Product Code\",\n    type: COLTYPE.FEILD,\n    field: \"productCode\",\n    // amtFormat?: boolean,\n    // isTitle?: boolean\n    // isDate?: boolen\n  },\n  // {\n  //   title: \"Related Type\",\n  //   type: COLTYPE.FEILD,\n  //   field: \"relatedType\",\n  //   // amtFormat?: boolean,\n  //   isTitle: true\n  //   // isDate?: boolen\n  // },\n\n  {\n    title: \"Agent Name\",\n    type: COLTYPE.FEILD,\n    field: \"agentName\",\n    // amtFormat?: boolean,\n    // isTitle?: boolean\n    // isDate?: boolen\n  },\n  {\n    title: \"Premium\",\n    type: COLTYPE.FEILD,\n    field: \"premium\",\n    // isTitle?: boolean\n    amtFormat: true\n    // isDate?: boolen\n  },\n  {\n    title: \"Currency\",\n    type: COLTYPE.FEILD,\n    field: \"currency\",\n  },\n  {\n    title: \"Status\",\n    type: COLTYPE.FEILD,\n    field: \"status\",\n    isRenewStatus: true,\n    // amtFormat?: boolean,\n    // isTitle?: boolean\n  },\n  {\n    title: \"Actions\",\n    type: COLTYPE.ACTION,\n    field: \"actions\",\n    btn: {\n      // edit: true,\n      confirm: true,\n      view: true,\n      download: true\n    }\n    // amtFormat?: boolean,\n    // isTitle?: boolean\n    // isDate?: boolen\n  },\n]\n\nexport const ActivityDisplayCol: string[] = [\n  \"policyNumber\",\n  // \"renewalPolicyNumber\",\n  \"productCode\",\n  \"agentName\",\n  \"premium\",\n  \"currency\",\n  \"status\",\n  \"actions\",\n]","import { ChangeDetectorRef, Component, OnInit, ViewChild } from '@angular/core';\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { AlertService } from '../../modules/loading-toast/alert-model/alert.service';\nimport { MaterialTableViewComponent } from '../../_metronic/shared/crud-table/components/material-table-view/material-table-view.component';\nimport { ActivityStatus } from '../../_metronic/shared/crud-table/components/material-table-view/table-dto';\nimport { RenewCol, ActivityDisplayCol } from './renew-manage.const';\nimport { RenewManageService } from './renew-manage.service';\n\n@Component({\n  selector: 'app-renew-management-list',\n  templateUrl: './renew-management-list.component.html',\n  styleUrls: ['./renew-management-list.component.scss']\n})\nexport class RenewManagementListComponent implements OnInit {\n  @ViewChild(MaterialTableViewComponent) matTable: MaterialTableViewComponent\n  ELEMENT_COL = RenewCol\n  displayedColumns = ActivityDisplayCol\n  renewList = [];\n  actForm: FormGroup;\n  activityStatus = ActivityStatus\n\n  constructor(private fb: FormBuilder, private router: Router, private cdf: ChangeDetectorRef, private renewService: RenewManageService, private alertService: AlertService) {\n    this.loadForm();\n  }\n\n  ngOnInit(): void {\n\n  }\n  ngAfterViewInit() {\n    this.getList()\n  }\n  cancel() {\n\n  }\n\n  loadForm() {\n    this.actForm = new FormGroup({\n      \"type\": new FormControl(\"\"),\n      \"title\": new FormControl(null),\n      \"status\": new FormControl(\"\"),\n      startDate: new FormControl(null),\n      endDate: new FormControl(null)\n    })\n  }\n\n\n  getList() {\n    this.renewService.getRenewList(this.actForm.value).toPromise().then((res: any) => {\n      if (res) {\n\n        this.renewList = res\n        this.cdf.detectChanges()\n        this.matTable.reChangeData()\n      }\n    })\n  }\n\n  actionBtn(event) {\n    if (event.cmd == 'edit') {\n      this.navigateToDetail(event.data)\n    }\n    else if (event.cmd == 'view') {\n      this.navigateToDetail(event.data)\n    }\n    else if (event.cmd == \"confirm\") {\n      this.confirmRenew(event.data)\n    }\n  }\n\n  // helpers for View\n  isControlValid(controlName: string): boolean {\n    const control = this.actForm.controls[controlName];\n    return control.valid && (control.dirty || control.touched);\n  }\n\n  isControlInvalid(controlName: string): boolean {\n    const control = this.actForm.controls[controlName];\n    return control.invalid && (control.dirty || control.touched);\n  }\n\n  controlHasError(validation, controlName): boolean {\n    const control = this.actForm.controls[controlName];\n    return control.hasError(validation) && (control.dirty || control.touched);\n  }\n\n  isControlTouched(controlName): boolean {\n    const control = this.actForm.controls[controlName];\n    return control.dirty || control.touched;\n  }\n\n  navigateToDetail(data) {\n    this.router.navigate([\"sale/renew-policy/detail\"], { queryParams: { data: JSON.stringify(data) } })\n  }\n\n  confirmRenew(data) {\n    if (data.status != \"confirm\") {\n      this.renewService.confirmRenew(data.policyNumber).toPromise().then((res) => {\n        if (res) {\n          console.log(res);\n          \n          this.alertService.activate('This record was updated', 'Success Message');\n          this.navigateToDetail(res)\n        }\n      })\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport { RenewManagementListComponent } from './renew-management-list.component';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { InlineSVGModule } from 'ng-inline-svg';\nimport { CRUDTableModule } from '../../_metronic/shared/crud-table';\nimport { NgSelectModule } from '@ng-select/ng-select';\nimport { LanguageModule } from 'src/app/modules/languages/languages.modules';\n\n\n\n@NgModule({\n  declarations: [RenewManagementListComponent],\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    InlineSVGModule,\n    CRUDTableModule,\n    NgSelectModule,\n    LanguageModule,\n    RouterModule.forChild([\n      {\n        path: '',\n        component: RenewManagementListComponent,\n      },\n    ]),\n\n  ]\n})\nexport class RenewManagementListModule { }\n","export default \"<!-- <div class=\\\"row\\\">\\n  <div class=\\\"col-12\\\">\\n    <div class=\\\"card card-custom gutter-b\\\">\\n      <div class=\\\"card-header\\\">\\n        <div class=\\\"card-title\\\">\\n          <h3 class=\\\"card-label left-border-image\\\">{{\\\"FORM.act_list\\\" | translate}}</h3>\\n        </div>\\n        <div class=\\\"card-toolbar\\\">\\n          <span class=\\\"flaticon2-magnifier-tool search-tool\\\" (click)=\\\"getList()\\\"></span>\\n          <button type=\\\"button\\\" class=\\\"btn btn-primary ml-2\\\" style=\\\"min-width: 50px;\\\" (click)=\\\"cancel()\\\">\\n            <span class=\\\"\\\">Cancel</span>\\n          </button>\\n        </div>\\n      </div>\\n      <div class=\\\"card-body px-10 py-3\\\">\\n        <form action=\\\"#\\\" class=\\\"form\\\" [formGroup]=\\\"actForm\\\">\\n          <div class=\\\"row\\\" style=\\\"align-items: center;\\\">\\n            <app-start-end-date [formInput]=\\\"actForm\\\" remove-host [colClass]=\\\"'col-md-4'\\\"></app-start-end-date>\\n            <div class=\\\"col-md-4\\\">\\n              <div class=\\\"form-group row\\\">\\n                <label class=\\\"col-sm-4 col-form-label\\\">{{\\\"FORM.status\\\" | translate}}</label>\\n                <div class=\\\"col-sm-8\\\">\\n\\n                  <ng-select class=\\\"ng-custom-select ng-custom-select-sm\\\"\\n                    [class.is-invalid]=\\\"isControlInvalid('status')\\\" [class.is-valid]=\\\"isControlValid('status')\\\"\\n                    [items]=\\\"statusOption\\\" bindLabel=\\\"value\\\" bindValue=\\\"code\\\" formControlName=\\\"status\\\">\\n                  </ng-select>\\n\\n                </div>\\n              </div>\\n            </div>\\n          </div>\\n\\n          <div class=\\\"row\\\" style=\\\"align-items: center;\\\">\\n            <div class=\\\"col-md-4\\\">\\n              <div class=\\\"form-group row\\\">\\n                <label class=\\\"col-sm-4 col-form-label \\\">{{\\\"FORM.act_type\\\" | translate}}</label>\\n                <ng-select class=\\\"ng-custom-select ng-custom-select-sm\\\" [class.is-invalid]=\\\"isControlInvalid('type')\\\"\\n                  [class.is-valid]=\\\"isControlValid('type')\\\" [items]=\\\"activityTypeOption\\\" bindLabel=\\\"value\\\"\\n                  bindValue=\\\"code\\\" formControlName=\\\"type\\\">\\n                </ng-select>\\n              </div>\\n            </div>\\n          </div>\\n          <div class=\\\"col-md-4\\\">\\n            <div class=\\\"form-group row\\\">\\n              <label class=\\\"col-sm-4 col-form-label\\\">{{\\\"FORM.act_title\\\" | translate}}</label>\\n              <div class=\\\"col-sm-8\\\">\\n                <input type=\\\"text\\\" class=\\\"form-control form-control-sm \\\" name=\\\"title\\\" autocomplete=\\\"off\\\"\\n                  [class.is-invalid]=\\\"isControlInvalid('title')\\\" [class.is-valid]=\\\"isControlValid('title')\\\"\\n                  formControlName=\\\"title\\\" />\\n              </div>\\n            </div>\\n          </div>\\n\\n\\n        </form>\\n      </div>\\n    </div>\\n  </div>\\n</div> -->\\n\\n\\n<div class=\\\"row\\\">\\n  <div class=\\\"col-12\\\">\\n    <div class=\\\"card card-custom gutter-b\\\">\\n\\n      <div class=\\\"card-body customer-card-body\\\">\\n        <app-material-table-view [data]=\\\"renewList\\\" [colum]=\\\"ELEMENT_COL\\\" [displayedColumns]=\\\"displayedColumns\\\"\\n          (emitter)=\\\"actionBtn($event)\\\">\\n        </app-material-table-view>\\n\\n      </div>\\n    </div>\\n  </div>\\n</div>\";"],"names":[],"sourceRoot":"webpack:///"}