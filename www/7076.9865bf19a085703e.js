"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7076],{27738:(P,d,i)=>{i.d(d,{v:()=>m});var r=i(18260),u=i(91691),l=i(83668),v=i(44522);const y=`${r.N.apiUrl}/customer`;let m=(()=>{class a extends u.i{constructor(p){super(p,y),this.httpClient=p}}return a.\u0275fac=function(p){return new(p||a)(l.LFG(v.eN))},a.\u0275prov=l.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},76175:(P,d,i)=>{i.d(d,{j:()=>u,k:()=>l});var r=i(18510);const u=[{title:"Application ID",type:r.Y.FEILD,field:"id"},{title:"Product Name",type:r.Y.FEILD,field:"productName"},{title:"Product Code",type:r.Y.FEILD,field:"productCode"},{title:"Quotation ID",type:r.Y.FEILD,field:"quotationId"},{title:"Agent Name",type:r.Y.FEILD,field:"agentFirstName"},{title:"Premium",type:r.Y.FEILD,field:"premium",amtFormat:!0},{title:"Status",type:r.Y.FEILD,field:"status",isStatus:!0},{title:"Api Status",type:r.Y.FEILD,field:"apiStatus",isStatus:!0},{title:"Date",type:r.Y.FEILD,field:"createdAt",isDate:!0},{title:"Actions",type:r.Y.ACTION,field:"actions",btn:{view:!0,edit:!0}}],l=["id","productName","productCode","agentFirstName","premium","status","apiStatus","createdAt","actions"]},47076:(P,d,i)=>{i.r(d),i.d(d,{PolicyModule:()=>Z});var r=i(86019),u=i(92070),l=i(28100),v=i(82997),y=i(72835),m=i(37632),a=i(90949),h=i(37025),p=i(9939),C=i(76175),t=i(83668),S=i(85993),E=i(35618),f=i(4205),I=i(46045),A=i(27738);let L=(()=>{class c{constructor(e,o,s,g,F,U,N){this.modalService=e,this.prodctService=o,this.router=s,this.policyService=g,this.cdRef=F,this.customerService=U,this.menuService=N,this.quoList=[],this.policyAccess=m.w,this.ELEMENT_COL=JSON.parse(JSON.stringify(C.j)),this.displayedColumns=C.k}ngOnInit(){this.checkPremission(),this.getPolicyList()}ngOnDestroy(){}checkPremission(){this.menuService.dataAccess.subscribe(e=>{e&&(this.policyAccess=e.application,this.policyAccess.edit||(this.ELEMENT_COL[8].btn.edit=!1))})}createOrEdit(){const e=this.modalService.open(p.P,{size:"xl",backdrop:!1});e.componentInstance.type="modal",e.result.then(()=>{},o=>{o&&"save"==o.type&&this.chooseCustomer(o)})}chooseCustomer(e){const o=this.modalService.open(h.b,{size:"xl",backdrop:!1});o.componentInstance.isPopup=!0,o.result.then(()=>{},s=>{s&&"save"==s.type&&(this.prodctService.creatingCustomer=s.data,this.prodctService.createingProd=e.data,this.prodctService.editData=null,this.prodctService.referenceID=null,this.prodctService.viewType="policy",this.prodctService.type="policy",this.router.navigateByUrl("/product-form"))})}getPolicyList(){this.policyService.findAll().toPromise().then(e=>{e&&(console.log(e),this.quoList=e,this.cdRef.detectChanges(),this.matTable.reChangeData())})}editLayout(e){(0,l.D)([this.prodctService.findOne(e.productId),this.customerService.findOne(e.customerId||1).pipe((0,y.K)(o=>(0,v.of)(void 0)))]).toPromise().then(o=>{o[0]&&(this.prodctService.createingProd=o[0],this.prodctService.creatingCustomer=o[1],this.prodctService.type="policy",this.prodctService.viewType="policy",this.prodctService.editData=e,this.prodctService.referenceID=e.quotationId,this.prodctService.creatingLeadId=e.leadId,this.router.navigateByUrl("/product-form"))})}FormatedDate(e){return u(e,"YYYYMMDD").format("MM/DD/YYYY")}actionBtn(e){"view"==e.cmd?this.goViewDetail(e.data):"edit"==e.cmd&&this.editLayout(e.data)}goViewDetail(e){this.prodctService.findOne(e.productId).toPromise().then(o=>{o&&(this.prodctService.createingProd=o,this.prodctService.previewType="policy",this.prodctService.editData=e,this.router.navigateByUrl("/resourse-detail"))})}}return c.\u0275fac=function(e){return new(e||c)(t.Y36(S.FF),t.Y36(E.f),t.Y36(f.F0),t.Y36(I.d),t.Y36(t.sBO),t.Y36(A.v),t.Y36(m.q))},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-policy"]],viewQuery:function(e,o){if(1&e&&t.Gf(a.I,5),2&e){let s;t.iGM(s=t.CRH())&&(o.matTable=s.first)}},decls:15,vars:3,consts:[[1,"row"],[1,"col-12","text-right","pb-5"],[1,"btn","btn-warning","mr-2","btn-round"],[1,"btn","btn-light-dark","btn-round"],[1,"col-12"],[1,"card","card-custom","gutter-b"],[1,"card-header"],[1,"card-title"],[1,"card-label","left-border-image"],[1,"card-toolbar"],[1,"card-body","customer-card-body"],[3,"data","colum","displayedColumns","emitter"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"button",2),t._uU(3,"My View"),t.qZA(),t.TgZ(4,"button",3),t._uU(5,"Team View"),t.qZA(),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"div",5),t.TgZ(8,"div",6),t.TgZ(9,"div",7),t.TgZ(10,"h3",8),t._uU(11,"Application List"),t.qZA(),t.qZA(),t._UZ(12,"div",9),t.qZA(),t.TgZ(13,"div",10),t.TgZ(14,"app-material-table-view",11),t.NdJ("emitter",function(g){return o.actionBtn(g)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(14),t.Q6J("data",o.quoList)("colum",o.ELEMENT_COL)("displayedColumns",o.displayedColumns))},directives:[a.I],styles:[""]}),c})();var T=i(87626),D=i(49133),Y=i(96152),M=i(45598);let O=(()=>{class c{ngOnInit(){}}return c.\u0275fac=function(e){return new(e||c)},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-policy-page"]],decls:1,vars:0,template:function(e,o){1&e&&t._UZ(0,"router-outlet")},directives:[f.lC],encapsulation:2}),c})(),Z=(()=>{class c{}return c.\u0275fac=function(e){return new(e||c)},c.\u0275mod=t.oAB({type:c}),c.\u0275inj=t.cJS({imports:[[r.ez,T.vi,D.u5,D.UX,S.bz,Y.ProductsModule,M.fA,f.Bz.forChild([{path:"application",component:O,children:[{path:"list",component:L}]}])]]}),c})()}}]);