"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7076],{27738:(E,v,n)=>{n.d(v,{v:()=>y});var t=n(18260),a=n(91691),_=n(83668),g=n(44522);const h=`${t.N.apiUrl}/customer`;let y=(()=>{class u extends a.i{constructor(f){super(f,h),this.httpClient=f}}return u.\u0275fac=function(f){return new(f||u)(_.LFG(g.eN))},u.\u0275prov=_.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},11918:(E,v,n)=>{n.d(v,{b:()=>U});var t=n(83668),a=n(49133),_=n(90949),g=n(62311),h=n(85378),y=n(21177),u=n(44290),Z=n(92118),f=n(47975),L=n(29018),A=n(99457),e=n(86019),P=n(15470),D=n(85472),T=n(57842);function I(d,p){if(1&d){const o=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){return t.CHM(o),t.oxw().navigateToDetail("create")}),t._UZ(1,"span",26),t.qZA()}}function M(d,p){if(1&d){const o=t.EpF();t.TgZ(0,"div",27),t.TgZ(1,"app-material-table-view",28),t.NdJ("emitter",function(c){return t.CHM(o),t.oxw(2).actionBtn(c)})("rowselect",function(c){return t.CHM(o),t.oxw(2).rowSelected(c)}),t.qZA(),t.qZA()}if(2&d){const o=t.oxw(2);t.xp6(1),t.Q6J("data",o.customerList)("colum",o.ELEMENT_COL)("displayedColumns",o.displayedColumns)("selectable",o.isPopup)}}function O(d,p){if(1&d){const o=t.EpF();t.ynx(0),t.TgZ(1,"div",31),t.TgZ(2,"button",32),t.NdJ("click",function(){return t.CHM(o),t.oxw(2).closeModal()}),t._uU(3,"Cancel"),t.qZA(),t.TgZ(4,"button",33),t.NdJ("click",function(){return t.CHM(o),t.oxw(2).nextProd()}),t._uU(5,"Next"),t.qZA(),t.qZA(),t.BQk()}if(2&d){const o=t.oxw(2);t.xp6(4),t.Q6J("disabled",!o.selected.customerId)}}function N(d,p){if(1&d){const o=t.EpF();t.ynx(0),t.TgZ(1,"div",31),t.TgZ(2,"button",32),t.NdJ("click",function(){return t.CHM(o),t.oxw(2).closeModal()}),t._uU(3,"Cancel"),t.qZA(),t.TgZ(4,"button",33),t.NdJ("click",function(){return t.CHM(o),t.oxw(2).nextProd()}),t._uU(5,"Next"),t.qZA(),t.qZA(),t.BQk()}if(2&d){const o=t.oxw(2);t.xp6(4),t.Q6J("disabled",!o.selected.customerId)}}function b(d,p){if(1&d){const o=t.EpF();t.TgZ(0,"div",27),t.TgZ(1,"app-material-table-view",28),t.NdJ("emitter",function(c){return t.CHM(o),t.oxw().actionBtn(c)})("rowselect",function(c){return t.CHM(o),t.oxw().rowSelected(c)}),t.qZA(),t.TgZ(2,"div",0),t.TgZ(3,"div",1),t.TgZ(4,"div",29),t.YNc(5,M,2,4,"div",24),t.YNc(6,O,6,1,"ng-container",30),t.qZA(),t.YNc(7,N,6,1,"ng-container",30),t.qZA(),t.qZA(),t.qZA()}if(2&d){const o=t.oxw();t.xp6(1),t.Q6J("data",o.customerList)("colum",o.ELEMENT_COL)("displayedColumns",o.displayedColumns)("selectable",o.isPopup),t.xp6(3),t.ekj("remove-p",o.isPopup),t.xp6(1),t.Q6J("ngIf",o.show),t.xp6(1),t.Q6J("ngIf",o.isPopup&&!o.isDynamic),t.xp6(1),t.Q6J("ngIf",o.isPopup&&!o.isDynamic)}}let U=(()=>{class d{constructor(o,i,c,l){this.router=o,this.cdf=i,this.customerListService=c,this.modalService=l,this.ELEMENT_COL=JSON.parse(JSON.stringify(g.Ks)),this.displayedColumns=JSON.parse(JSON.stringify(g.Q1)),this.customerList=[],this.statusOption=g.qb,this.identityTypeOption=g.Mf,this.selectedUser=new t.vpe,this.isPopup=!1,this.party=!0,this.isDynamic=!1,this.show=!1,this.loadForm()}ngOnInit(){this.isPopup&&(this.ELEMENT_COL.splice(9,1),this.displayedColumns.splice(9,1)),this.show=!0}ngAfterViewInit(){this.getList()}loadForm(){this.customerForm=new a.cw({name:new a.NI(null),identityType:new a.NI(null),identityNumber:new a.NI(null),statusCode:new a.NI(null),partyCode:new a.NI(null),startDate:new a.NI(null),endDate:new a.NI(null)})}navigateToDetail(o,i,c){this.router.navigate(["/customer/customer-detail"],{queryParams:{pageStatus:o,pageId:i,pageSecondaryId:c}})}getList(){this.customerListService.getCustomerList(this.customerForm.value,this.party,!(!this.isPopup||this.isDynamic)).toPromise().then(i=>{i&&(this.customerList=i,console.log("customerList",this.customerList),this.cdf.detectChanges(),this.matTable&&this.matTable.reChangeData())})}get selected(){let o;return this.matTable&&(o=this.matTable.selection.selected[0]),o||{customerId:0}}rowSelected(o){this.selectedUser.emit(o)}cancel(){this.customerForm.reset(),this.getList()}actionBtn(o){"edit"==o.cmd&&this.navigateToDetail("edit",o.data.customerId,o.data.individualId)}isControlValid(o){const i=this.customerForm.controls[o];return i.valid&&(i.dirty||i.touched)}isControlInvalid(o){const i=this.customerForm.controls[o];return i.invalid&&(i.dirty||i.touched)}controlHasError(o,i){const c=this.customerForm.controls[i];return c.hasError(o)&&(c.dirty||c.touched)}isControlTouched(o){const i=this.customerForm.controls[o];return i.dirty||i.touched}nextProd(){this.selected.customerId&&this.modalService.dismissAll({data:this.selected,type:"save"})}closeModal(){this.modalService.dismissAll()}}return d.\u0275fac=function(o){return new(o||d)(t.Y36(L.F0),t.Y36(t.sBO),t.Y36(A.c),t.Y36(h.FF))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-customer-list"]],viewQuery:function(o,i){if(1&o&&t.Gf(_.I,5),2&o){let c;t.iGM(c=t.CRH())&&(i.matTable=c.first)}},inputs:{isPopup:"isPopup",party:"party",isDynamic:"isDynamic"},outputs:{selectedUser:"selectedUser"},features:[t._Bn([{provide:h.DO,useClass:y.Wv},{provide:h.NG,useClass:y.ke},{provide:u._A,useClass:Z.t7,deps:[u.Ad]},{provide:u.sG,useValue:f.Gs}])],decls:54,vars:31,consts:[[1,"row"],[1,"col-12"],[1,"card","card-custom","gutter-b"],[1,"card-header"],[1,"card-title"],[1,"card-label","left-border-image"],[1,"card-toolbar"],["type","button","class","btn btn-primary btn-circle","style","margin-right: 1rem;\n                    ",3,"click",4,"ngIf"],[1,"flaticon2-magnifier-tool","search-tool",3,"click"],["type","button",1,"btn","btn-primary","ml-2",2,"min-width","50px",3,"click"],[1,""],[1,"card-body","px-10","py-3"],["action","#",1,"form",3,"formGroup"],[1,"row",2,"align-items","center"],["remove-host","",3,"formInput","colClass"],[1,"col-md-6"],[1,"form-group","row"],[1,"col-sm-4","col-form-label"],[1,"col-sm-8"],["type","text","name","name","autocomplete","off","formControlName","name",1,"form-control","form-control-sm"],["type","text","name","partyCode","autocomplete","off","formControlName","partyCode",1,"form-control","form-control-sm"],["bindLabel","value","bindValue","code","formControlName","identityType",1,"ng-custom-select","ng-custom-select-sm",3,"items"],["type","text","name","identityNumber","autocomplete","off","formControlName","identityNumber",1,"form-control","form-control-sm"],["bindLabel","value","bindValue","code","formControlName","statusCode",1,"ng-custom-select","ng-custom-select-sm",3,"items"],["class","card-body customer-card-body",4,"ngIf"],["type","button",1,"btn","btn-primary","btn-circle",2,"margin-right","1rem",3,"click"],[1,"flaticon2-plus"],[1,"card-body","customer-card-body"],[3,"data","colum","displayedColumns","selectable","emitter","rowselect"],[1,"card","card-custom","gutter-b","data"],[4,"ngIf"],[1,"card-footer"],["type","button",1,"btn","btn-light","btn-elevate","mr-2",3,"click"],["type","button",1,"btn","btn-primary","btn-elevate",3,"disabled","click"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t.TgZ(5,"h3",5),t._uU(6,"Customer List"),t.qZA(),t.qZA(),t.TgZ(7,"div",6),t.YNc(8,I,2,0,"button",7),t.TgZ(9,"span",8),t.NdJ("click",function(){return i.getList()}),t.qZA(),t.TgZ(10,"button",9),t.NdJ("click",function(){return i.cancel()}),t.TgZ(11,"span",10),t._uU(12,"Cancel"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"div",11),t.TgZ(14,"form",12),t.TgZ(15,"div",13),t._UZ(16,"app-start-end-date",14),t.qZA(),t.TgZ(17,"div",13),t.TgZ(18,"div",15),t.TgZ(19,"div",16),t.TgZ(20,"label",17),t._uU(21,"Name"),t.qZA(),t.TgZ(22,"div",18),t._UZ(23,"input",19),t.qZA(),t.qZA(),t.qZA(),t.TgZ(24,"div",15),t.TgZ(25,"div",16),t.TgZ(26,"label",17),t._uU(27,"Party Code"),t.qZA(),t.TgZ(28,"div",18),t._UZ(29,"input",20),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(30,"div",13),t.TgZ(31,"div",15),t.TgZ(32,"div",16),t.TgZ(33,"label",17),t._uU(34,"ID Type"),t.qZA(),t.TgZ(35,"div",18),t._UZ(36,"ng-select",21),t.qZA(),t.qZA(),t.qZA(),t.TgZ(37,"div",15),t.TgZ(38,"div",16),t.TgZ(39,"label",17),t._uU(40,"ID No."),t.qZA(),t.TgZ(41,"div",18),t._UZ(42,"input",22),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(43,"div",0),t.TgZ(44,"div",15),t.TgZ(45,"div",16),t.TgZ(46,"label",17),t._uU(47,"Status"),t.qZA(),t.TgZ(48,"div",18),t._UZ(49,"ng-select",23),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(50,"div",0),t.TgZ(51,"div",1),t.TgZ(52,"div",2),t.YNc(53,b,8,9,"div",24),t.qZA(),t.qZA(),t.qZA()),2&o&&(t.xp6(2),t.ekj("remove-p",i.isPopup),t.xp6(6),t.Q6J("ngIf",!i.isPopup),t.xp6(6),t.Q6J("formGroup",i.customerForm),t.xp6(2),t.Q6J("formInput",i.customerForm)("colClass","col-md-6"),t.xp6(7),t.ekj("is-invalid",i.isControlInvalid("name"))("is-valid",i.isControlValid("name")),t.xp6(6),t.ekj("is-invalid",i.isControlInvalid("partyCode"))("is-valid",i.isControlValid("partyCode")),t.xp6(7),t.ekj("is-invalid",i.isControlInvalid("identityType"))("is-valid",i.isControlValid("identityType")),t.Q6J("items",i.identityTypeOption),t.xp6(6),t.ekj("is-invalid",i.isControlInvalid("identityNumber"))("is-valid",i.isControlValid("identityNumber")),t.xp6(7),t.ekj("is-invalid",i.isControlInvalid("statusCode"))("is-valid",i.isControlValid("statusCode")),t.Q6J("items",i.statusOption),t.xp6(3),t.ekj("remove-p",i.isPopup),t.xp6(1),t.Q6J("ngIf",i.show))},directives:[e.O5,a._Y,a.JL,a.sg,P.Q,D.Z,a.Fj,a.JJ,a.u,T.w9,_.I],styles:[".remove-p[_ngcontent-%COMP%]{margin-bottom:0}.col-form-label[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}.form-group.row[_ngcontent-%COMP%]{align-items:center}.draggable[_ngcontent-%COMP%]{color:#fff;border-radius:50%;touch-action:none;-webkit-user-select:none;user-select:none;position:absolute;z-index:999}"]}),d})()},76175:(E,v,n)=>{n.d(v,{j:()=>a,k:()=>_});var t=n(18510);const a=[{title:"Application ID",type:t.Y.FEILD,field:"id"},{title:"Product Name",type:t.Y.FEILD,field:"productName"},{title:"Product Code",type:t.Y.FEILD,field:"productCode"},{title:"Quotation ID",type:t.Y.FEILD,field:"quotationId"},{title:"Agent Name",type:t.Y.FEILD,field:"agentFirstName"},{title:"Premium",type:t.Y.FEILD,field:"premium",amtFormat:!0},{title:"Status",type:t.Y.FEILD,field:"status",isStatus:!0},{title:"Date",type:t.Y.FEILD,field:"createdAt",isDate:!0},{title:"Actions",type:t.Y.ACTION,field:"actions",btn:{view:!0,edit:!0}}],_=["id","productName","productCode","agentFirstName","premium","status","createdAt","actions"]},47076:(E,v,n)=>{n.r(v),n.d(v,{PolicyModule:()=>c});var t=n(86019),a=n(49133),_=n(92070),g=n(28100),h=n(82997),y=n(72835),u=n(37632),Z=n(90949),f=n(11918),L=n(9939),A=n(76175),e=n(83668),P=n(85378),D=n(35618),T=n(29018),I=n(46045),M=n(27738),O=n(15470),N=n(85472);const b=function(l){return{activated:l}};let U=(()=>{class l{constructor(s,r,m,x,w,S,F){this.modalService=s,this.prodctService=r,this.router=m,this.policyService=x,this.cdRef=w,this.customerService=S,this.menuService=F,this.quoList=[],this.isTeam=!1,this.policyAccess=u.w,this.ELEMENT_COL=JSON.parse(JSON.stringify(A.j)),this.displayedColumns=A.k,this.loadForm()}ngOnInit(){this.checkPremission(),this.getPolicyList()}loadForm(){let s=new Date,r=new Date(s.setMonth(s.getMonth()-1)),m=new Date(s.setMonth(s.getMonth()+1));this.policyForm=new a.cw({startDate:new a.NI(r),endDate:new a.NI(m),isTeam:new a.NI(this.isTeam)})}ngOnDestroy(){}cancel(){}changeView(s){this.isTeam="team"==s,this.policyForm.controls.isTeam.setValue(this.isTeam),this.cdRef.detectChanges(),this.getPolicyList()}checkPremission(){this.menuService.dataAccess.subscribe(s=>{s&&(this.policyAccess=s.application,this.policyAccess.edit||(this.ELEMENT_COL[8].btn.edit=!1))})}createOrEdit(){const s=this.modalService.open(L.P,{size:"xl",backdrop:!1});s.componentInstance.type="modal",s.result.then(()=>{},r=>{r&&"save"==r.type&&this.chooseCustomer(r)})}chooseCustomer(s){const r=this.modalService.open(f.b,{size:"xl",backdrop:!1});r.componentInstance.isPopup=!0,r.result.then(()=>{},m=>{m&&"save"==m.type&&(this.prodctService.creatingCustomer=m.data,this.prodctService.createingProd=s.data,this.prodctService.editData=null,this.prodctService.referenceID=null,this.prodctService.viewType="policy",this.prodctService.type="policy",this.router.navigateByUrl("/product-form"))})}getPolicyList(){this.policyService.getPolicyList(this.policyForm.getRawValue()).toPromise().then(s=>{s&&(this.quoList=s,this.cdRef.detectChanges(),this.matTable.reChangeData())})}editLayout(s){(0,g.D)([this.prodctService.findOne(s.productId),this.customerService.findOne(s.customerId||1).pipe((0,y.K)(r=>(0,h.of)(void 0)))]).toPromise().then(r=>{r[0]&&(this.prodctService.createingProd=r[0],this.prodctService.creatingCustomer=r[1],this.prodctService.type="policy",this.prodctService.viewType="policy",this.prodctService.editData=s,this.prodctService.referenceID=s.quotationId,this.prodctService.creatingLeadId=s.leadId,this.router.navigateByUrl("/product-form"))})}FormatedDate(s){return _(s,"YYYYMMDD").format("MM/DD/YYYY")}actionBtn(s){"view"==s.cmd?this.goViewDetail(s.data):"edit"==s.cmd&&this.editLayout(s.data)}goViewDetail(s){this.prodctService.findOne(s.productId).toPromise().then(r=>{r&&(this.prodctService.createingProd=r,this.prodctService.previewType="policy",this.prodctService.editData=s,this.router.navigateByUrl("/resourse-detail"))})}}return l.\u0275fac=function(s){return new(s||l)(e.Y36(P.FF),e.Y36(D.f),e.Y36(T.F0),e.Y36(I.d),e.Y36(e.sBO),e.Y36(M.v),e.Y36(u.q))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-policy"]],viewQuery:function(s,r){if(1&s&&e.Gf(Z.I,5),2&s){let m;e.iGM(m=e.CRH())&&(r.matTable=m.first)}},decls:26,vars:12,consts:[[1,"row"],[1,"col-12","text-right","pb-5"],[1,"btn","btn-light-dark","new-btn-dark-gray","mr-2","btn-round",3,"ngClass","click"],[1,"btn","btn-light-dark","new-btn-dark-gray","btn-round",3,"ngClass","click"],[1,"col-12"],[1,"card","card-custom","gutter-b"],[1,"card-header"],[1,"card-title"],[1,"card-label","left-border-image"],[1,"card-toolbar"],[1,"flaticon2-magnifier-tool","search-tool",3,"click"],["type","button",1,"btn","btn-primary","ml-2",2,"min-width","50px",3,"click"],[1,""],[1,"card-body","px-10","py-3"],["action","#",1,"form",3,"formGroup"],[1,"row",2,"align-items","center"],["remove-host","",3,"formInput","colClass"],[1,"card-body","customer-card-body"],[3,"data","colum","displayedColumns","emitter"]],template:function(s,r){1&s&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"button",2),e.NdJ("click",function(){return r.changeView("myview")}),e._uU(3,"My View"),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return r.changeView("team")}),e._uU(5,"Team View"),e.qZA(),e.qZA(),e.TgZ(6,"div",4),e.TgZ(7,"div",5),e.TgZ(8,"div",6),e.TgZ(9,"div",7),e.TgZ(10,"h3",8),e._uU(11,"ApplicationList"),e.qZA(),e.qZA(),e.TgZ(12,"div",9),e.TgZ(13,"span",10),e.NdJ("click",function(){return r.getPolicyList()}),e.qZA(),e.TgZ(14,"button",11),e.NdJ("click",function(){return r.cancel()}),e.TgZ(15,"span",12),e._uU(16,"Cancel"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",13),e.TgZ(18,"form",14),e.TgZ(19,"div",15),e._UZ(20,"app-start-end-date",16),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",0),e.TgZ(22,"div",4),e.TgZ(23,"div",5),e.TgZ(24,"div",17),e.TgZ(25,"app-material-table-view",18),e.NdJ("emitter",function(x){return r.actionBtn(x)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&s&&(e.xp6(2),e.Q6J("ngClass",e.VKq(8,b,!r.isTeam)),e.xp6(2),e.Q6J("ngClass",e.VKq(10,b,r.isTeam)),e.xp6(14),e.Q6J("formGroup",r.policyForm),e.xp6(2),e.Q6J("formInput",r.policyForm)("colClass","col-md-6"),e.xp6(5),e.Q6J("data",r.quoList)("colum",r.ELEMENT_COL)("displayedColumns",r.displayedColumns))},directives:[t.mk,a._Y,a.JL,a.sg,O.Q,N.Z,Z.I],styles:[".activated[_ngcontent-%COMP%]{background-color:#ff8100!important;color:#fff!important}"]}),l})();var d=n(87626),p=n(96152),o=n(45598);let i=(()=>{class l{ngOnInit(){}}return l.\u0275fac=function(s){return new(s||l)},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-policy-page"]],decls:1,vars:0,template:function(s,r){1&s&&e._UZ(0,"router-outlet")},directives:[T.lC],encapsulation:2}),l})(),c=(()=>{class l{}return l.\u0275fac=function(s){return new(s||l)},l.\u0275mod=e.oAB({type:l}),l.\u0275inj=e.cJS({imports:[[t.ez,d.vi,a.u5,a.UX,P.bz,p.ProductsModule,o.fA,T.Bz.forChild([{path:"application",component:i,children:[{path:"list",component:U}]}])]]}),l})()}}]);