{"version":3,"file":"src_app_pages_policy_policy_module_ts.js","mappings":"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","sources":["./src/app/pages/customer-detail/customer.service.ts","./src/app/pages/policy/list/policy.component.ts","./src/app/pages/policy/list/policy.const.ts","./src/app/pages/policy/policy-page.component.ts","./src/app/pages/policy/policy.module.ts","./src/app/pages/policy/list/policy.component.html"],"sourcesContent":["import { HttpClient } from \"@angular/common/http\";\r\nimport { Injectable } from \"@angular/core\";\r\nimport { environment } from \"../../../environments/environment\";\r\nimport { BizOperationService } from \"../../core/biz.operation.service\";\r\nimport { Customer } from \"./custmer.dto\";\r\n\r\nconst API_CUSTOMER_URL = `${environment.apiUrl}/customer`;\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CustomerService extends BizOperationService<Customer, number>{\r\n  constructor(protected httpClient: HttpClient) {\r\n    super(httpClient, API_CUSTOMER_URL);\r\n  }\r\n}","import { ChangeDetectorRef, Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport * as moment from 'moment';\r\nimport { forkJoin, of } from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\nimport { MaterialTableViewComponent } from '../../../_metronic/shared/crud-table/components/material-table-view/material-table-view.component';\r\nimport { CustomerService } from '../../customer-detail/customer.service';\r\nimport { CustomerListComponent } from '../../customer-list/customer-list.component';\r\nimport { ProductsComponent } from '../../products/products.component';\r\nimport { ProductDataService } from '../../products/services/products-data.service';\r\nimport { PolicyDTO } from '../policy.dto';\r\nimport { PolicyService } from '../policy.service';\r\nimport { PolicyDisplayCol, PolicyCol } from './policy.const';\r\n\r\n@Component({\r\n  selector: 'app-policy',\r\n  templateUrl: './policy.component.html',\r\n  styleUrls: ['./policy.component.scss'],\r\n})\r\nexport class PolicyComponent implements OnInit, OnDestroy {\r\n  quoList: PolicyDTO[] = []\r\n  @ViewChild(MaterialTableViewComponent) matTable: MaterialTableViewComponent\r\n  constructor(private modalService: NgbModal, private prodctService: ProductDataService, private router: Router, private policyService: PolicyService, private cdRef: ChangeDetectorRef, private customerService: CustomerService) {\r\n  }\r\n\r\n\r\n  ELEMENT_COL = PolicyCol\r\n  displayedColumns = PolicyDisplayCol\r\n  ngOnInit(): void {\r\n\r\n    this.getPolicyList()\r\n\r\n    // })\r\n  }\r\n  ngOnDestroy() {\r\n    // this.rerender()\r\n  }\r\n\r\n  createOrEdit() {\r\n    const modalRef = this.modalService.open(ProductsComponent, { size: 'xl', backdrop: false });\r\n    modalRef.componentInstance.type = 'modal'\r\n    modalRef.result.then(() => { }, (res) => {\r\n      if (res) {\r\n        if (res.type == 'save') {\r\n          this.chooseCustomer(res)\r\n        }\r\n      }\r\n    })\r\n  }\r\n  chooseCustomer(prod: any) {\r\n    const modalRef = this.modalService.open(CustomerListComponent, { size: 'xl', backdrop: false });\r\n    modalRef.componentInstance.isPopup = true\r\n    modalRef.result.then(() => { }, (res) => {\r\n      if (res) {\r\n        if (res.type == 'save') {\r\n          this.prodctService.creatingCustomer = res.data\r\n          this.prodctService.createingProd = prod.data\r\n          this.prodctService.editData = null\r\n          this.prodctService.referenceID = null\r\n          this.prodctService.viewType = 'policy'\r\n          this.prodctService.type = 'policy'\r\n          this.router.navigateByUrl(\"/product-form\")\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n  getPolicyList() {\r\n    this.policyService.findAll().toPromise().then((res) => {\r\n      if (res) {\r\n        this.quoList = res\r\n        this.cdRef.detectChanges()\r\n        this.matTable.reChangeData()\r\n        // })\r\n      }\r\n    })\r\n  }\r\n\r\n  editLayout(item) {\r\n    forkJoin([this.prodctService.findOne(item.productId), this.customerService.findOne(item.customerId || 1).pipe(catchError(e => { return of(undefined)}))]).toPromise().then((res) => {\r\n      if (res[0]) {\r\n        this.prodctService.createingProd = res[0]\r\n        this.prodctService.creatingCustomer = res[1]\r\n        this.prodctService.type = 'policy'\r\n        this.prodctService.viewType = 'policy'\r\n        this.prodctService.editData = item\r\n        this.prodctService.referenceID = item.quotationId\r\n        this.prodctService.creatingLeadId = item.leadId\r\n        this.router.navigateByUrl(\"/product-form\")\r\n      }\r\n    })\r\n  }\r\n\r\n  FormatedDate(date) {\r\n    return moment(date, \"YYYYMMDD\").format('MM/DD/YYYY');\r\n  }\r\n\r\n  actionBtn(event: any) {\r\n\r\n    if (event.cmd == 'view') {\r\n      this.goViewDetail(event.data)\r\n    } else if (event.cmd == 'edit') {\r\n      this.editLayout(event.data)\r\n    }\r\n  }\r\n\r\n  goViewDetail(item) {\r\n    this.prodctService.findOne(item.productId).toPromise().then((res) => {\r\n      if (res) {\r\n        this.prodctService.createingProd = res\r\n        this.prodctService.previewType = 'policy'\r\n        this.prodctService.editData = item\r\n        this.router.navigateByUrl(\"/resourse-detail\")\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n}\r\n","import { COLTYPE, TableCol } from '../../../_metronic/shared/crud-table/components/material-table-view/table-dto'\r\nexport const PolicyCol: TableCol[] = [\r\n  {\r\n    title: \"Application ID\",\r\n    type: COLTYPE.FEILD,\r\n    field: \"id\",\r\n  },\r\n  {\r\n    title: \"Product Name\",\r\n    type: COLTYPE.FEILD,\r\n    field: \"productName\",\r\n  },\r\n  {\r\n    title: \"Product Code\",\r\n    type: COLTYPE.FEILD,\r\n    field: \"productCode\",\r\n  },\r\n  {\r\n    title: \"Quotation ID\",\r\n    type: COLTYPE.FEILD,\r\n    field: \"quotationId\",\r\n  },\r\n  {\r\n    title: \"Agent Name\",\r\n    type: COLTYPE.FEILD,\r\n    field: \"agentFirstName\",\r\n  },\r\n  {\r\n    title: \"Premium\",\r\n    type: COLTYPE.FEILD,\r\n    field: \"premium\",\r\n    amtFormat: true,\r\n  },\r\n  {\r\n    title: \"Status\",\r\n    type: COLTYPE.FEILD,\r\n    field: \"status\",\r\n    isStatus: true\r\n  },\r\n  {\r\n    title: \"Date\",\r\n    type: COLTYPE.FEILD,\r\n    field: \"createdAt\",\r\n    isDate: true\r\n  },\r\n  {\r\n    title: \"Actions\",\r\n    type: COLTYPE.ACTION,\r\n    field: \"actions\",\r\n    btn:{\r\n      view: true,\r\n      edit: true\r\n    }\r\n  },\r\n]\r\n\r\nexport const PolicyDisplayCol: string[] = [\r\n  \"id\",\r\n  \"productName\",\r\n  \"productCode\",\r\n  \"agentFirstName\",\r\n  \"premium\",\r\n  \"status\",\r\n  \"createdAt\",\r\n  \"actions\",\r\n]","import { Component, OnInit } from \"@angular/core\";\r\n\r\n@Component({\r\n  selector: 'app-policy-page',\r\n  template: `<router-outlet></router-outlet>`,\r\n})\r\nexport class PolicyPageComponent implements OnInit {\r\n  \r\n  ngOnInit(){\r\n\r\n  }\r\n}","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { PolicyComponent } from './list/policy.component';\r\nimport { InlineSVGModule } from 'ng-inline-svg';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { NgbModalModule } from '@ng-bootstrap/ng-bootstrap';\r\nimport { RouterModule } from '@angular/router';\r\nimport { ProductsModule } from '../products/products.module';\r\nimport { CRUDTableModule } from '../../_metronic/shared/crud-table';\r\nimport { PolicyPageComponent } from './policy-page.component';\r\n\r\n\r\n@NgModule({\r\n  declarations: [PolicyPageComponent,PolicyComponent],\r\n  imports: [\r\n    CommonModule,\r\n    InlineSVGModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    NgbModalModule,\r\n    ProductsModule,\r\n    CRUDTableModule,\r\n    RouterModule.forChild([\r\n      {\r\n        path: 'application',\r\n        component: PolicyPageComponent,\r\n        children: [\r\n          {\r\n            path: 'list',\r\n            component: PolicyComponent,\r\n          },\r\n        ]\r\n      }\r\n\r\n    ]),\r\n  ]\r\n})\r\nexport class PolicyModule { }\r\n","export default \"<div class=\\\"row\\\">\\r\\n    <div class=\\\"col-12 text-right pb-5\\\">\\r\\n        <button class=\\\"btn btn-warning mr-2 btn-round\\\">My View</button>\\r\\n        <button class=\\\"btn btn-light-dark btn-round\\\">Team View</button>\\r\\n    </div>\\r\\n    <div class=\\\"col-12\\\">\\r\\n        <div class=\\\"card card-custom gutter-b\\\">\\r\\n            <div class=\\\"card-header\\\">\\r\\n                <div class=\\\"card-title\\\">\\r\\n                    <h3 class=\\\"card-label left-border-image\\\">Application List</h3>\\r\\n                </div>\\r\\n                <div class=\\\"card-toolbar\\\">\\r\\n                    <!-- <button type=\\\"button\\\" class=\\\"btn btn-primary btn-circle\\\" (click)=\\\"createOrEdit()\\\">\\r\\n            <span class=\\\"flaticon2-plus\\\"></span>\\r\\n          </button> -->\\r\\n                    <!-- <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" (click)=\\\"createOrEdit()\\\">Create New Policy</button> -->\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"card-body customer-card-body\\\">\\r\\n                <!-- begin:Table -->\\r\\n                <app-material-table-view [data]=\\\"quoList\\\" [colum]=\\\"ELEMENT_COL\\\" [displayedColumns]=\\\"displayedColumns\\\" (emitter)=\\\"actionBtn($event)\\\">\\r\\n                </app-material-table-view>\\r\\n                <!-- end: Table -->\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\";"],"names":[],"sourceRoot":"webpack:///"}