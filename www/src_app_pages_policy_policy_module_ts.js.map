{"version":3,"file":"src_app_pages_policy_policy_module_ts.js","mappings":"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","sources":["./src/app/pages/policy/list/policy.component.ts","./src/app/pages/policy/policy-page.component.ts","./src/app/pages/policy/policy.module.ts"],"sourcesContent":["import { ChangeDetectorRef, Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport { MomentDateAdapter } from '@angular/material-moment-adapter';\nimport { MAT_DATE_FORMATS, MAT_DATE_LOCALE } from '@angular/material/core';\nimport { Router } from '@angular/router';\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport { DateAdapter } from 'angular-calendar';\nimport * as moment from 'moment';\nimport { forkJoin, of } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport { MY_FORMATS } from '../../../core/is-json';\nimport { environment } from 'src/environments/environment';\nimport { defaultAccessObj, MenuDataService } from '../../../core/menu-data.service';\nimport { MaterialTableViewComponent } from '../../../_metronic/shared/crud-table/components/material-table-view/material-table-view.component';\nimport { CustomerService } from '../../customer-detail/customer.service';\nimport { CustomerListComponent } from '../../customer-list/customer-list.component';\nimport { ProductsComponent } from '../../products/products.component';\nimport { ProductDataService } from '../../products/services/products-data.service';\nimport { CommonList2Component } from '../../share-components/common-list/common-list.component';\nimport { PolicyDTO } from '../policy.dto';\nimport { PolicyService } from '../policy.service';\nimport { PolicyDisplayCol, PolicyCol, ApplicationStatus } from './policy.const';\n\n@Component({\n  selector: 'app-policy',\n  templateUrl: './policy.component.html',\n  styleUrls: ['./policy.component.scss'],\n  providers: [\n    { provide: DateAdapter, useClass: MomentDateAdapter, deps: [MAT_DATE_LOCALE] },\n    { provide: MAT_DATE_FORMATS, useValue: MY_FORMATS },\n  ]\n})\nexport class PolicyComponent implements OnInit, OnDestroy {\n  quoList: PolicyDTO[] = []\n  policyForm: FormGroup\n  isTeam: boolean = false\n  @ViewChild(MaterialTableViewComponent) matTable: MaterialTableViewComponent\n  @ViewChild(CommonList2Component) commonList: CommonList2Component;\n  policyAccess = defaultAccessObj;\n  product: any = []\n  productOption: any = []\n  applicationStatusOption: any = ApplicationStatus\n  Default_DOWNLOAD_URL = `${environment.apiUrl}/attachment-downloader`;\n  currentPage: number = 0\n  totalPages: number = 0\n  totalElements: number = 0\n  postedData: any\n  selectedPageBtn: number = 1\n  constructor(private modalService: NgbModal, private prodctService: ProductDataService, private router: Router, private policyService: PolicyService, private cdRef: ChangeDetectorRef, private customerService: CustomerService, private menuService: MenuDataService, private cdf: ChangeDetectorRef) {\n    this.loadForm()\n  }\n\n\n  ELEMENT_COL = JSON.parse(JSON.stringify(PolicyCol))\n  displayedColumns = PolicyDisplayCol\n  ngOnInit(): void {\n    this.checkPremission()\n    this.getPolicyList()\n    this.getProduct()\n    // })\n  }\n  loadForm() {\n    let date = new Date();\n    let lastMonthDay = new Date(date.setMonth(date.getMonth() - 1))\n    let monthDay = new Date(date.setMonth(date.getMonth() + 1))\n    this.policyForm = new FormGroup({\n      startDate: new FormControl(lastMonthDay),\n      endDate: new FormControl(monthDay),\n      isTeam: new FormControl(null),\n      productId: new FormControl(null),\n      policyholderName: new FormControl(null),\n      applicationId: new FormControl(null),\n      quotationId: new FormControl(null),\n      applicationStatus: new FormControl(null),\n      //productName: new FormControl(this.productName)\n    })\n  }\n  ngOnDestroy() {\n    // this.rerender()\n  }\n  cancel() {\n\n  }\n  changeView(type) {\n    if (type == 'team') {\n      this.isTeam = true\n    }\n    else {\n      this.isTeam = false\n\n    }\n    this.policyForm.controls.isTeam.setValue(this.isTeam)\n    this.cdRef.detectChanges()\n    this.getPolicyList()\n  }\n  checkPremission() {\n    this.menuService.dataAccess.subscribe((res) => {\n      if (res) {\n        this.policyAccess = res['application']\n        if (!this.policyAccess.edit) {\n          this.ELEMENT_COL[8].btn.edit = false\n        }\n      }\n    })\n  }\n\n  createOrEdit() {\n    const modalRef = this.modalService.open(ProductsComponent, { size: 'xl', backdrop: false });\n    modalRef.componentInstance.type = 'modal'\n    modalRef.result.then(() => { }, (res) => {\n      if (res) {\n        if (res.type == 'save') {\n          this.chooseCustomer(res)\n        }\n      }\n    })\n  }\n  chooseCustomer(prod: any) {\n    const modalRef = this.modalService.open(CustomerListComponent, { size: 'xl', backdrop: false });\n    modalRef.componentInstance.isPopup = true\n    modalRef.result.then(() => { }, (res) => {\n      if (res) {\n        if (res.type == 'save') {\n          this.prodctService.creatingCustomer = res.data\n          this.prodctService.createingProd = prod.data\n          this.prodctService.editData = null\n          this.prodctService.referenceID = null\n          this.prodctService.viewType = 'policy'\n          this.prodctService.type = 'policy'\n          this.router.navigateByUrl(\"/product-form\")\n        }\n      }\n    })\n  }\n  reponseFromPager(event) {\n    // console.log(\"POLICYEVENT\", event);\n    this.currentPage = event\n    this.getDatabyPage(this.currentPage)\n  }\n\n  getPolicyList(offset: number = 1) {\n    let postData = { ...this.policyForm.getRawValue(), limit: 5, offset: offset }\n    this.postedData = postData\n    this.policyService.getPolicyList(this.postedData).toPromise().then((res: any) => {\n      if (res) {\n        // console.log(res);\n\n        this.quoList = res.content\n        this.totalElements = res.totalElements\n        this.totalPages = res.totalPages\n        this.selectedPageBtn = this.currentPage\n        for (var i = 0; i < this.quoList.length; i++) {\n          if (this.quoList[i].icon) {\n            this.quoList[i].productImage = this.Default_DOWNLOAD_URL + '/' + this.quoList[i].icon\n          }\n        }\n        this.cdRef.detectChanges()\n        this.commonList.detchChangePagination()\n       \n        //this.matTable.reChangeData()\n        // })\n      }\n    })\n  }\n\n  async getDatabyPage(page) {\n    this.currentPage = page\n    let postData = { ...this.policyForm.getRawValue(), limit: 5, offset: page }\n    this.totalPages = 0\n    this.postedData = postData\n    await this.policyService.getPolicyList(this.postedData).toPromise().then((res: any) => {\n      if (res) {\n        // console.log(res);\n        this.quoList = res.content\n        this.totalElements = res.totalElements\n        this.totalPages = res.totalPages\n        this.selectedPageBtn = this.currentPage\n        this.cdf.detectChanges();\n        this.commonList.detechStartEnd();\n      }\n    })\n  }\n\n  editLayout(item) {\n    forkJoin([this.prodctService.findOne(item.productId), this.customerService.findOne(item.customerId || 1).pipe(catchError(e => { return of(undefined) }))]).toPromise().then((res) => {\n      if (res[0]) {\n        this.prodctService.createingProd = res[0]\n        this.prodctService.creatingCustomer = res[1]\n        this.prodctService.type = 'policy'\n        this.prodctService.viewType = 'policy'\n        this.prodctService.editData = item\n        this.prodctService.referenceID = item.quotationId\n        this.prodctService.creatingLeadId = item.leadId\n        this.router.navigateByUrl(\"/product-form\")\n      }\n    })\n  }\n  getProduct() {\n    this.prodctService\n      .getAll('yes')\n      .toPromise()\n      .then((res: any) => {\n        if (res) {\n          this.product = res;\n          this.productOption = res.map((x) => {\n            return { code: x.id, value: x.name, type: x.type };\n          });\n          this.cdf.detectChanges();\n          // this.getProductOption()\n        }\n      });\n  }\n\n  clear(key) {\n    if (key == 'productId') {\n      this.policyForm.controls[key].setValue(null)\n    }\n  }\n\n  FormatedDate(date) {\n    return moment(date, \"YYYYMMDD\").format('MM/DD/YYYY');\n  }\n\n  actionBtn(event: any) {\n\n    if (event.cmd == 'view') {\n      this.goViewDetail(event.data)\n    } else if (event.cmd == 'edit') {\n      this.editLayout(event.data)\n    }\n  }\n\n  goViewDetail(item) {\n    this.prodctService.findOne(item.productId).toPromise().then((res) => {\n      if (res) {\n        this.prodctService.createingProd = res\n        this.prodctService.previewType = 'policy'\n        this.prodctService.editData = item\n        this.router.navigateByUrl(\"/resourse-detail\")\n      }\n    })\n  }\n\n\n}\n","import { Component, OnInit } from \"@angular/core\";\n\n@Component({\n  selector: 'app-policy-page',\n  template: `<router-outlet></router-outlet>`,\n})\nexport class PolicyPageComponent implements OnInit {\n  \n  ngOnInit(){\n\n  }\n}","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { PolicyComponent } from './list/policy.component';\nimport { InlineSVGModule } from 'ng-inline-svg';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { NgbModalModule } from '@ng-bootstrap/ng-bootstrap';\nimport { RouterModule } from '@angular/router';\nimport { ProductsModule } from '../products/products.module';\nimport { CRUDTableModule } from '../../_metronic/shared/crud-table';\nimport { PolicyPageComponent } from './policy-page.component';\nimport { LanguageModule } from 'src/app/modules/languages/languages.modules';\nimport { ShareComponentModule } from '../share-components/share-component.module';\nimport { NgSelectModule } from '@ng-select/ng-select';\n\n\n@NgModule({\n  declarations: [PolicyPageComponent,PolicyComponent],\n  imports: [\n    CommonModule,\n    InlineSVGModule,\n    FormsModule,\n    ReactiveFormsModule,\n    NgbModalModule,\n    ProductsModule,\n    LanguageModule,\n    CRUDTableModule,\n    NgSelectModule,\n    ShareComponentModule,\n    RouterModule.forChild([\n      {\n        path: 'application',\n        component: PolicyPageComponent,\n        children: [\n          {\n            path: 'list',\n            component: PolicyComponent,\n          },\n        ]\n      }\n\n    ]),\n  ]\n})\nexport class PolicyModule { }\n"],"names":[],"sourceRoot":"webpack:///"}