"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8614],{88614:(L,A,u)=>{u.r(A),u.d(A,{ProductFormModule:()=>vn});var m=u(86019),y=u(29018),h=u(64762),C=u(82997),f=u(50858),O=u(14246),t=u(83668),l=u(49133),g=u(85378);let j=(()=>{class o{constructor(e,i){this.fb=e,this.modal=i,this.oldData={},this.stage=!1}ngOnInit(){}ngOnDestroy(){}save(){if(!this.dynForm.handleSubmit())return!1}saveTemp(e){this.modal.dismiss({data:e,type:"save"})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(l.qu),t.Y36(g.Kz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-form-view-modal"]],viewQuery:function(e,i){if(1&e&&t.Gf(O.r,5),2&e){let n;t.iGM(n=t.CRH())&&(i.dynForm=n.first)}},decls:12,vars:4,consts:[[1,"modal-content"],[1,"modal-header"],["id","example-modal-sizes-title-lg",1,"modal-title","h4","left-border-image"],[1,"overlay","overlay-block","cursor-default","modal-body"],[3,"config","tempData","editStage","submit"],["dynForm",""],[1,"modal-footer"],["type","button",1,"btn","btn-light","btn-elevate","mr-2",3,"click"],["type","submit",1,"btn","btn-primary","btn-elevate",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"div",3),t.TgZ(5,"dynamic-form",4,5),t.NdJ("submit",function(a){return i.saveTemp(a)}),t.qZA(),t.qZA(),t.TgZ(7,"div",6),t.TgZ(8,"button",7),t.NdJ("click",function(){return i.modal.dismiss()}),t._uU(9,"Cancel"),t.qZA(),t.TgZ(10,"button",8),t.NdJ("click",function(){return i.save()}),t._uU(11,"Save"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.hij(" ",i.pageName," "),t.xp6(2),t.Q6J("config",i.controls)("tempData",i.oldData)("editStage",i.stage))},directives:[O.r],styles:[".active[_ngcontent-%COMP%]{background-color:#3699ff!important;color:#fff}"]}),o})();var w=u(1402),S=u(47975),Dt=u(87952),Z=u(11766),P=u(6920),G=u(43329),x=u(23449),F=u(35618),dt=u(552),ut=u(60807),K=u(57842);function wt(o,s){1&o&&(t.TgZ(0,"th"),t._uU(1," Option "),t.qZA())}function It(o,s){1&o&&(t.TgZ(0,"th"),t._uU(1," Sum Insured "),t.qZA())}function Mt(o,s){1&o&&(t.TgZ(0,"th"),t._uU(1," Unit "),t.qZA())}function qt(o,s){1&o&&(t.TgZ(0,"th"),t._uU(1," Premium "),t.qZA())}function St(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"td"),t.TgZ(2,"input",10),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw(2).$implicit;return t.oxw(2).addOnsData[a.id].checked=n})("change",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw(2).changeOption(n)}),t.qZA(),t.qZA(),t.BQk()}if(2&o){const e=t.oxw(2).$implicit,i=t.oxw(2);t.xp6(2),t.Q6J("ngModel",i.addOnsData[e.id].checked)}}function Ft(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"ng-select",12),t.NdJ("change",function(){t.CHM(e);const n=t.oxw(4).$implicit;return t.oxw(2).rechangeOption(n)})("ngModelChange",function(n){t.CHM(e);const a=t.oxw(4).$implicit;return t.oxw(2).addOnsData[a.id].option=n}),t.qZA(),t.BQk()}if(2&o){const e=t.oxw(4).$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("items",i.fireOptionData[e.code])("ngModel",i.addOnsData[e.id].option)("clearable",!1)}}function kt(o,s){if(1&o&&(t.TgZ(0,"td",2),t.YNc(1,Ft,2,3,"ng-container",3),t.qZA()),2&o){const e=t.oxw(3).$implicit;t.xp6(1),t.Q6J("ngIf","FRAD010"==e.code||"FRAD008"==e.code)}}function zt(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"input",13),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw(4).$implicit;return t.oxw(2).addOnsData[a.id].sum=n}),t.qZA(),t.BQk()}if(2&o){const e=t.oxw(4).$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("disabled",!i.addOnsData[e.id].checked)("ngModel",i.addOnsData[e.id].sum)}}function Nt(o,s){if(1&o&&(t.ynx(0),t._uU(1),t.ALo(2,"number"),t.BQk()),2&o){const e=t.oxw(4).$implicit,i=t.oxw(2);t.xp6(1),t.hij(" ",i.addOnsData[e.id].sum>0?t.lcZ(2,1,i.addOnsData[e.id].sum):i.addOnsData[e.id].sum," ")}}function Ut(o,s){if(1&o&&(t.TgZ(0,"td"),t.YNc(1,zt,2,2,"ng-container",3),t.YNc(2,Nt,3,3,"ng-container",3),t.qZA()),2&o){const e=t.oxw(3).$implicit;t.xp6(1),t.Q6J("ngIf",!e.sumInsuredStr),t.xp6(1),t.Q6J("ngIf",e.sumInsuredStr)}}function Bt(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"input",13),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw(4).$implicit;return t.oxw(2).addOnsData[a.id].unit=n}),t.qZA(),t.BQk()}if(2&o){const e=t.oxw(4).$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("disabled",!i.addOnsData[e.id].checked)("ngModel",i.addOnsData[e.id].unit)}}function Jt(o,s){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const e=t.oxw(4).$implicit,i=t.oxw(2);t.xp6(1),t.hij(" ",i.addOnsData[e.id].unit," ")}}function Rt(o,s){if(1&o&&(t.TgZ(0,"td"),t.YNc(1,Bt,2,2,"ng-container",3),t.YNc(2,Jt,2,1,"ng-container",3),t.qZA()),2&o){const e=t.oxw(3).$implicit;t.xp6(1),t.Q6J("ngIf",!e.unitStr),t.xp6(1),t.Q6J("ngIf",e.unitStr)}}function Qt(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"input",13),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw(4).$implicit;return t.oxw(2).addOnsData[a.id].premium=n}),t.qZA(),t.BQk()}if(2&o){const e=t.oxw(4).$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("disabled",!i.addOnsData[e.id].checked)("ngModel",i.addOnsData[e.id].premium)}}function Et(o,s){if(1&o&&(t.ynx(0),t._uU(1),t.ALo(2,"number"),t.BQk()),2&o){const e=t.oxw(4).$implicit,i=t.oxw(2);t.xp6(1),t.hij(" ",i.addOnsData[e.id].premium>0?t.lcZ(2,1,i.addOnsData[e.id].premium):i.addOnsData[e.id].premium," ")}}function Yt(o,s){if(1&o&&(t.TgZ(0,"td"),t.YNc(1,Qt,2,2,"ng-container",3),t.YNc(2,Et,3,3,"ng-container",3),t.qZA()),2&o){const e=t.oxw(3).$implicit;t.xp6(1),t.Q6J("ngIf",!e.premiumStr),t.xp6(1),t.Q6J("ngIf",e.premiumStr)}}function Vt(o,s){if(1&o&&(t.ynx(0),t.YNc(1,kt,2,1,"td",11),t.YNc(2,Ut,3,2,"td",3),t.YNc(3,Rt,3,2,"td",3),t.YNc(4,Yt,3,2,"td",3),t.BQk()),2&o){const e=t.oxw(2).$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("ngIf","CLFR01"==i.product.code),t.xp6(1),t.Q6J("ngIf",e.sumInsured),t.xp6(1),t.Q6J("ngIf",e.unit),t.xp6(1),t.Q6J("ngIf",e.premium)}}function Lt(o,s){if(1&o&&(t.TgZ(0,"tr"),t.YNc(1,St,3,1,"ng-container",3),t.TgZ(2,"td",2),t._uU(3),t.qZA(),t.YNc(4,Vt,5,4,"ng-container",3),t.qZA()),2&o){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",i.addOnsData[e.id]),t.xp6(2),t.Oqu(e.description),t.xp6(1),t.Q6J("ngIf",i.addOnsData[e.id])}}function jt(o,s){if(1&o&&(t.ynx(0),t.YNc(1,Lt,5,3,"tr",3),t.BQk()),2&o){const e=s.$implicit;t.xp6(1),t.Q6J("ngIf",e.show)}}function Gt(o,s){if(1&o&&(t.TgZ(0,"tbody",1),t.YNc(1,jt,2,1,"ng-container",9),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.product.addOns)}}let $t=(()=>{class o{constructor(e,i,n,a,r,c,d){this.addOnQuoService=e,this.globalFun=i,this.cdRef=n,this.prodService=a,this.numberPipe=r,this.pageDataService=c,this.loadingService=d,this.actionEvent=new t.vpe,this.addOns={isSum:!1,isUnit:!1,isPremium:!1},this.addOnsData={},this.unsubscribe=[],this.premiumAmt="",this.parentData={},this.isLoading=!0,this.fireAddonRate={FRAD009:.1,FRAD004:.1,"FRAD010-T-001":.25,"FRAD010-T-002":.5,"FRAD010-T-003":.75,"FRAD010-T-004":1,"FRAD008-T-001":.2,"FRAD008-T-002":.2,"FRAD008-T-003":.2,"FRAD008-T-004":.2,"FRAD008-T-005":.25,FRAD011:.1,FRAD002:.1,FRAD006:.1,FRAD003:.1,FRAD001:.06,FRAD007:.08,FRAD005:.1},this.fireOptionData={FRAD008:[{code:"T-001",value:"Building"},{code:"T-002",value:"Furniture"},{code:"T-003",value:"Machine"},{code:"T-004",value:"Goods/Stocks"},{code:"T-005",value:"Water Damage for Goods/Stocks"}],FRAD010:[{code:"T-001",value:"First Class Building"},{code:"T-002",value:"Second Class Building"},{code:"T-003",value:"Third Class Building"},{code:"T-004",value:"Fourth Class Building"}]}}ngOnInit(){return(0,h.mG)(this,void 0,void 0,function*(){if(this.refID=this.prodService.referenceID,"PLMO02"==this.product.code&&(this.parentData=this.getParnet()),this.product.addOns&&this.product.addOns.length>0){yield this.loadingService.activate(),this.addOns={isSum:this.product.addOns[0].sumInsured,isUnit:this.product.addOns[0].unit,isPremium:this.product.addOns[0].premium};let i={quotationNo:this.resourcesId,addOnIds:this.product.addOns.map(a=>a.id)},n=yield this.addOnQuoService.getAllById(i).toPromise();0==n.length&&(i.quotationNo=this.refID,n=yield this.addOnQuoService.getAllById(i).toPromise());for(const a of this.product.addOns){a.show=!0,a.validationFun&&(a.show=!this.globalFun[a.validationFun]||this.globalFun[a.validationFun](this.parentData)),"CLFR01"==this.product.code&&(a.sumInsuredStr="0",a.unitStr="0",a.premiumStr="0");let r=n.find(c=>c.addonId==a.id);this.addOnsData[a.id]={checked:!(!r||!a.show),sum:r&&r.sumInsured||0,unit:r&&r.unit||0,premium:r&&r.premium||0,option:r&&r.option||"T-001"},a.sumInsured&&this.getGlobalFun(a.sumInsuredStr,"addOnsData",a.id,"sum",a),a.unit&&this.getGlobalFun(a.unitStr,"addOnsData",a.id,"unit",a),a.premium&&("cross_addon"==a.code&&this.addOnsData[a.id].checked||this.getGlobalFun(a.premiumStr,"addOnsData",a.id,"premium",a))}this.isLoading=!1,yield this.loadingService.deactivate(),this.cdRef.detectChanges()}else this.isLoading=!1})}getGlobalFun(e,i,n,a,r){if("PLMO02"==this.product.code&&"premium"==a)if(this.globalFun[e]){let c="uid_md_007"==r.code?this.getParnet("motor_driver"):this.parentData,d=this.globalFun[e](c).subscribe(p=>{this[i][n][a]=p,this.cdRef.detectChanges()});this.unsubscribe.push(d)}else e&&(this[i][n][a]=e);else if("CLFR01"==this.product.code&&"premium"==a)this[i][n][a]=this.rateByValue(r);else if(this.globalFun[e+"Result"]){let c=this.globalFun[e+"Result"].subscribe(d=>{this[i][n][a]=d,this.cdRef.detectChanges()});this.unsubscribe.push(c)}else e&&(this[i][n][a]=e)}nextPage(){return(0,h.mG)(this,void 0,void 0,function*(){const e=this.addOnQuoService,i=this.addOnsData;yield e.deleteAll(this.resourcesId).toPromise();for(let n of this.product.addOns)if(i[n.id].checked){let a=i[n.id].sum?i[n.id].sum+"":"",r=i[n.id].unit?i[n.id].unit+"":"",c=i[n.id].premium?i[n.id].premium+"":"",d=i[n.id].option?i[n.id].option+"":"";try{let p={addonId:n.id,quotationNo:this.resourcesId,option:d,sumInsured:a.replace(",","").replace("MMK","").replace("USD",""),unit:r.replace(",","").replace("MMK","").replace("USD",""),premium:c.replace(",","").replace("MMK","").replace("USD","")};yield e.save(p).toPromise()}catch(p){}}"PLMO02"==this.product.code&&(yield this.savePremimun().toPromise()),"CLFR01"==this.product.code&&(yield this.savePremimunFire().toPromise()),console.log("end"),this.actionEvent.emit({type:Z.V.NEXT})})}backPage(){this.actionEvent.emit({type:Z.V.PREV})}onCheckAddon(){}changeOption(e){if("cross_addon"!=e.code&&"PLMO02"==this.product.code){let i=this.product.addOns.find(n=>"cross_addon"==n.code);if(this.addOnsData[i.id].checked){let n=this.calcuCross();this.addOnsData[i.id].premium=.15*n}}else if(this.addOnsData[e.id].checked&&"cross_addon"==e.code){let i=this.calcuCross();this.addOnsData[e.id].premium=.15*i}else!this.addOnsData[e.id].checked&&"cross_addon"==e.code&&(this.addOnsData[e.id].premium=0)}rechangeOption(e){this.addOnsData[e.id].premium=this.rateByValue(e)}calcuCross(){let e=0;for(let r of this.product.addOns)this.addOnsData[r.id].checked&&"cross_addon"!=r.code&&(e+=this.globalFun.calculateDecimal(this.addOnsData[r.id].premium||0));let i=this.globalFun.tempFormData.coverage_1634010995936?this.globalFun.tempFormData.coverage_1634010995936:[];for(let r of i)e+=this.globalFun.calculateDecimal(r.premium||0);let a=0;if(this.parentData){let r=this.parentData.excess;"T-002"==r&&"mmk"==(this.parentData?this.parentData.currency:"mmk")?a=5e4:"T-005"==r&&(a=25)}return e+a}caluMotorPremimun(){let e=0;for(let d of this.product.addOns)this.addOnsData[d.id].checked&&(e+=this.globalFun.calculateDecimal(this.addOnsData[d.id].premium||0));let i=this.globalFun.tempFormData.coverage_1634010995936?this.globalFun.tempFormData.coverage_1634010995936:[];for(let d of i)e+=this.globalFun.calculateDecimal(d.premium||0);let n=this.parentData?this.parentData.currency:"mmk",a=0;if(this.parentData){let d=this.parentData.excess,p=this.parentData.excess_discount;"T-002"==d&&"mmk"==n?a=-5e4:"T-005"==d?a=-25:"T-003"==d&&"mmk"==n&&("T-001"==p?a=5e4:"T-002"==p?a=7e4:"T-003"==p&&(a=1e5))}let c=e-a+("mmk"==n?100:1);return this.premiumAmt=this.numberPipe.transform(c)+" "+n.toUpperCase(),this.globalFun.paPremiumResult.next(this.premiumAmt),c}caluFirePremimun(){let e=this.globalFun.tempFormData[P.nm],n="T-001"==this.globalFun.tempFormData[P.T$].policyType?1:.75,a=0;for(let p of e)a+=this.globalFun.calculateDecimal(p.premium);const r=this.addOnsData;let c=0;for(let p of this.product.addOns)r[p.id].checked&&(c+=this.globalFun.calculateDecimal(r[p.id].premium));let d=(a+c)*n;return this.premiumAmt=this.numberPipe.transform(d)+" MMK",this.globalFun.paPremiumResult.next(this.premiumAmt),d}savePremimun(){this.caluMotorPremimun();let i={premium:(Number(this.premiumAmt.split(" ")[0].split(",").join(""))||0)+"",premiumView:this.premiumAmt,resourceId:this.resourcesId,type:this.prodService.viewType};return this.pageDataService.updatePremimun(i)}savePremimunFire(){this.caluFirePremimun();let i={premium:(Number(this.premiumAmt.split(" ")[0].split(",").join(""))||0)+"",premiumView:this.premiumAmt,resourceId:this.resourcesId,type:this.prodService.viewType};return this.pageDataService.updatePremimun(i)}getParnet(e="m_detail"){if((0,S.cU)(this.product.config)){let i=JSON.parse(this.product.config),a=("quotation"!=this.prodService.type?i.application||[]:i.quotation||[]).find(r=>r.tableName==e);return a&&this.globalFun.tempFormData[a.tableName+a.id]||null}return null}rateByValue(e){let i=0;i="FRAD010"==e.code||"FRAD008"==e.code?this.fireAddonRate[e.code+"-"+this.addOnsData[e.id].option]||0:this.fireAddonRate[e.code]||0;let n=this.globalFun.tempFormData[P.nm];console.log(n);let a=0;if(n&&n.forEach(r=>{a+=parseFloat(r.riskSi)}),i>0&&a>0){let r=a*(i/100);return"FRAD010"==e.code&&(r-=.1*r),r}return 0}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(G.D),t.Y36(x.Q),t.Y36(t.sBO),t.Y36(F.f),t.Y36(m.JJ),t.Y36(dt.Q),t.Y36(ut.b))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-addon-page"]],inputs:{product:"product",editData:"editData",resourcesId:"resourcesId",premiumAmt:"premiumAmt"},outputs:{actionEvent:"actionEvent"},decls:19,vars:5,consts:[[1,"table","table-bordered"],[1,"tbody-align"],[2,"text-align","left"],[4,"ngIf"],["class","tbody-align",4,"ngIf"],[1,"row"],[1,"col-sm-6","mx-auto"],[1,"btn","btn-block","btn-secondary",3,"click"],[1,"btn","btn-block","btn-primary",3,"click"],[4,"ngFor","ngForOf"],["type","checkbox",3,"ngModel","ngModelChange","change"],["style","text-align: left;",4,"ngIf"],["bindLabel","value","bindValue","code",1,"ng-custom-select",3,"items","ngModel","clearable","change","ngModelChange"],["type","text",1,"form-control","form-control-sm",3,"disabled","ngModel","ngModelChange"]],template:function(e,i){1&e&&(t.TgZ(0,"table",0),t.TgZ(1,"thead",1),t.TgZ(2,"tr"),t._UZ(3,"th"),t.TgZ(4,"th",2),t._uU(5," Base Coverage "),t.qZA(),t.YNc(6,wt,2,0,"th",3),t.YNc(7,It,2,0,"th",3),t.YNc(8,Mt,2,0,"th",3),t.YNc(9,qt,2,0,"th",3),t.qZA(),t.qZA(),t.YNc(10,Gt,2,1,"tbody",4),t.qZA(),t._UZ(11,"hr"),t.TgZ(12,"div",5),t.TgZ(13,"div",6),t.TgZ(14,"button",7),t.NdJ("click",function(){return i.backPage()}),t._uU(15," Previous "),t.qZA(),t.qZA(),t.TgZ(16,"div",6),t.TgZ(17,"button",8),t.NdJ("click",function(){return i.nextPage()}),t._uU(18," Save & Next "),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(6),t.Q6J("ngIf","CLFR01"==i.product.code),t.xp6(1),t.Q6J("ngIf",i.addOns.isSum),t.xp6(1),t.Q6J("ngIf",i.addOns.isUnit),t.xp6(1),t.Q6J("ngIf",i.addOns.isPremium),t.xp6(1),t.Q6J("ngIf",!i.isLoading))},directives:[m.O5,m.sg,l.Wl,l.JJ,l.On,K.w9,l.Fj],pipes:[m.JJ],styles:[""]}),o})();var $=u(45570);function Ht(o,s){1&o&&(t.TgZ(0,"th"),t._uU(1," Sum Insured "),t.qZA())}function Wt(o,s){1&o&&(t.TgZ(0,"th"),t._uU(1," Unit "),t.qZA())}function Xt(o,s){1&o&&(t.TgZ(0,"th"),t._uU(1," Premium "),t.qZA())}function Kt(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"input",8),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw(4).$implicit;return t.oxw().coverageData[a.id].sum=n}),t.qZA(),t.BQk()}if(2&o){const e=t.oxw(4).$implicit,i=t.oxw();t.xp6(1),t.Q6J("ngModel",i.coverageData[e.id].sum)}}function te(o,s){if(1&o&&(t.ynx(0),t._uU(1),t.ALo(2,"number"),t.BQk()),2&o){const e=t.oxw(4).$implicit,i=t.oxw();t.xp6(1),t.hij(" ",i.coverageData[e.id].sum>0?t.lcZ(2,1,i.coverageData[e.id].sum):i.coverageData[e.id].sum," ")}}function ee(o,s){if(1&o&&(t.TgZ(0,"td"),t.YNc(1,Kt,2,1,"ng-container",2),t.YNc(2,te,3,3,"ng-container",2),t.qZA()),2&o){const e=t.oxw(3).$implicit;t.xp6(1),t.Q6J("ngIf",!e.sumInsuredStr),t.xp6(1),t.Q6J("ngIf",e.sumInsuredStr)}}function ie(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"input",8),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw(4).$implicit;return t.oxw().coverageData[a.id].unit=n}),t.qZA(),t.BQk()}if(2&o){const e=t.oxw(4).$implicit,i=t.oxw();t.xp6(1),t.Q6J("ngModel",i.coverageData[e.id].unit)}}function ne(o,s){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const e=t.oxw(4).$implicit,i=t.oxw();t.xp6(1),t.hij(" ",i.coverageData[e.id].unit," ")}}function oe(o,s){if(1&o&&(t.TgZ(0,"td"),t.YNc(1,ie,2,1,"ng-container",2),t.YNc(2,ne,2,1,"ng-container",2),t.qZA()),2&o){const e=t.oxw(3).$implicit;t.xp6(1),t.Q6J("ngIf",!e.unitStr),t.xp6(1),t.Q6J("ngIf",e.unitStr)}}function ae(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"input",8),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw(4).$implicit;return t.oxw().coverageData[a.id].premium=n}),t.qZA(),t.BQk()}if(2&o){const e=t.oxw(4).$implicit,i=t.oxw();t.xp6(1),t.Q6J("ngModel",i.coverageData[e.id].premium)}}function re(o,s){if(1&o&&(t.ynx(0),t._uU(1),t.ALo(2,"number"),t.BQk()),2&o){const e=t.oxw(4).$implicit,i=t.oxw();t.xp6(1),t.hij(" ",i.coverageData[e.id].premium>0?t.lcZ(2,1,i.coverageData[e.id].premium):i.coverageData[e.id].premium," ")}}function se(o,s){if(1&o&&(t.TgZ(0,"td"),t.YNc(1,ae,2,1,"ng-container",2),t.YNc(2,re,3,3,"ng-container",2),t.qZA()),2&o){const e=t.oxw(3).$implicit;t.xp6(1),t.Q6J("ngIf",!e.premiumStr),t.xp6(1),t.Q6J("ngIf",e.premiumStr)}}function ce(o,s){if(1&o&&(t.ynx(0),t.YNc(1,ee,3,2,"td",2),t.YNc(2,oe,3,2,"td",2),t.YNc(3,se,3,2,"td",2),t.BQk()),2&o){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf",e.sumInsured),t.xp6(1),t.Q6J("ngIf",e.unit),t.xp6(1),t.Q6J("ngIf",e.premium)}}function le(o,s){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.YNc(3,ce,4,3,"ng-container",2),t.qZA()),2&o){const e=t.oxw().$implicit,i=t.oxw();t.xp6(2),t.Oqu(e.description),t.xp6(1),t.Q6J("ngIf",i.coverageData[e.id])}}function de(o,s){if(1&o&&(t.ynx(0),t.YNc(1,le,4,2,"tr",2),t.BQk()),2&o){const e=s.$implicit;t.xp6(1),t.Q6J("ngIf",e.show)}}let ue=(()=>{class o{constructor(e,i,n,a,r){this.coverageQuoService=e,this.globalFun=i,this.cdRef=n,this.prodService=a,this.loadingService=r,this.actionEvent=new t.vpe,this.coverage={isSum:!1,isUnit:!1,isPremium:!1},this.coverageData={},this.unsubscribe=[],this.parentData={},this.isLoading=!0}ngOnInit(){return(0,h.mG)(this,void 0,void 0,function*(){if(this.refID=this.prodService.referenceID,"PLMO02"==this.product.code&&(this.parentData=this.getParnet()),this.product.coverages&&this.product.coverages.length>0){yield this.loadingService.activate(),this.coverage={isSum:this.product.coverages[0].sumInsured,isUnit:this.product.coverages[0].unit,isPremium:this.product.coverages[0].premium};let e={quotationNo:this.editData.id,coverageIds:this.product.coverages.map(n=>n.id)},i=yield this.coverageQuoService.getAllById(e).toPromise();0==i.length&&(e.quotationNo=this.refID,i=yield this.coverageQuoService.getAllById(e).toPromise());for(const n of this.product.coverages){n.show=!0,n.validationFun&&(n.show=!this.globalFun[n.validationFun]||this.globalFun[n.validationFun](this.parentData));let a=i.find(r=>r.coverageId==n.id);this.coverageData[n.id]={sum:a&&a.sumInsured||0,unit:a&&a.unit||0,premium:a&&a.premium||0},n.sumInsured&&this.getGlobalFun(n.sumInsuredStr,"coverageData",n.id,"sum"),n.unit&&this.getGlobalFun(n.unitStr,"coverageData",n.id,"unit"),n.premium&&this.getGlobalFun(n.premiumStr,"coverageData",n.id,"premium")}this.isLoading=!1,yield this.loadingService.deactivate(),this.cdRef.detectChanges()}else this.isLoading=!1})}getGlobalFun(e,i,n,a){if("PLMO02"==this.product.code&&"premium"==a)if(this.globalFun[e]){let r=this.globalFun[e](this.parentData).subscribe(c=>{this[i][n][a]=c,this.cdRef.detectChanges()});this.unsubscribe.push(r)}else e&&(this[i][n][a]=e);else if(this.globalFun[e+"Result"]){let r=this.globalFun[e+"Result"].subscribe(c=>{this[i][n][a]=c,this.cdRef.detectChanges()});this.unsubscribe.push(r)}else e&&(this[i][n][a]=e)}nextPage(){return(0,h.mG)(this,void 0,void 0,function*(){const i=this.coverageData;this.globalFun.tempFormData.coverage_1634010995936=[];for(let n of this.product.coverages)try{let a={coverageId:n.id,quotationNo:this.resourcesId,sumInsured:((i[n.id].sum||"")+"").replace(",","").replace("MMK","").replace("USD",""),unit:((i[n.id].unit||"")+"").replace(",","").replace("MMK","").replace("USD",""),premium:((i[n.id].premium||"")+"").replace(",","").replace("MMK","").replace("USD","")};this.globalFun.tempFormData.coverage_1634010995936.push(a),yield this.coverageQuoService.save(a).toPromise().catch(c=>c)}catch(a){}this.actionEvent.emit({type:Z.V.NEXT})})}backPage(){this.actionEvent.emit({type:Z.V.PREV})}getParnet(){if((0,S.cU)(this.product.config)){let e=JSON.parse(this.product.config),n=("quotation"!=this.prodService.type?e.application||[]:e.quotation||[]).find(a=>"m_detail"==a.tableName);return n&&this.globalFun.tempFormData[n.tableName+n.id]||null}return null}}return o.\u0275fac=function(e){return new(e||o)(t.Y36($.a),t.Y36(x.Q),t.Y36(t.sBO),t.Y36(F.f),t.Y36(ut.b))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-coverage-page"]],inputs:{product:"product",editData:"editData",resourcesId:"resourcesId"},outputs:{actionEvent:"actionEvent"},decls:18,vars:4,consts:[[1,"table","table-bordered"],[1,"tbody-align"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col-sm-6","mx-auto"],[1,"btn","btn-block","btn-secondary",3,"click"],[1,"btn","btn-block","btn-primary",3,"click"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(e,i){1&e&&(t.TgZ(0,"table",0),t.TgZ(1,"thead",1),t.TgZ(2,"tr"),t.TgZ(3,"th"),t._uU(4," Basic Coverage "),t.qZA(),t.YNc(5,Ht,2,0,"th",2),t.YNc(6,Wt,2,0,"th",2),t.YNc(7,Xt,2,0,"th",2),t.qZA(),t.qZA(),t.TgZ(8,"tbody",1),t.YNc(9,de,2,1,"ng-container",3),t.qZA(),t.qZA(),t._UZ(10,"hr"),t.TgZ(11,"div",4),t.TgZ(12,"div",5),t.TgZ(13,"button",6),t.NdJ("click",function(){return i.backPage()}),t._uU(14," Previous "),t.qZA(),t.qZA(),t.TgZ(15,"div",5),t.TgZ(16,"button",7),t.NdJ("click",function(){return i.nextPage()}),t._uU(17," Save & Next "),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(5),t.Q6J("ngIf",i.coverage.isSum),t.xp6(1),t.Q6J("ngIf",i.coverage.isUnit),t.xp6(1),t.Q6J("ngIf",i.coverage.isPremium),t.xp6(2),t.Q6J("ngForOf",i.product.coverages))},directives:[m.O5,m.sg,l.Fj,l.JJ,l.On],pipes:[m.JJ],styles:[""]}),o})();var ge=u(17268),I=u(60940),pe=u(75396);const me=["chart"];let gt=(()=>{class o{constructor(e,i){this.alertService=e,this.globalFun=i,this.actionEvent=new t.vpe,this.showDatas=[],this.chartOptions={series:[{name:"Premium Amount",data:[],color:"#005f99"}],chart:{height:450,type:"line",toolbar:{show:!1}},title:{text:"Basic Benefit Illustration",offsetX:0,offsetY:10,floating:!1,style:{fontSize:"1.1rem",fontFamily:"Roboto"}},xaxis:{type:"category",categories:["0","1 year","2 years","3 years","4 years","5 years","6 years","7 years","8 years","9 years","10 years","11 years","12 years","13 years","14 years"],labels:{style:{fontSize:"1rem",fontFamily:"Roboto"}}},yaxis:{min:0,max:1e6,tickAmount:5,labels:{style:{fontSize:"1rem",fontFamily:"Roboto"}}},legend:{position:"top",horizontalAlign:"right",floating:!0,offsetY:-25,offsetX:-5},dataLabels:{enabled:!0,textAnchor:"middle",offsetX:-10,offsetY:-5,enabledOnSeries:[0]},markers:{size:[5,0,0]}}}ngOnInit(){if(this.parentData){let e=this.parentData.map(i=>i.premiumPaid&&i.premiumPaid>0?i.premiumPaid:null);e.unshift(null),this.parentData.length>0&&(this.chartOptions.yaxis.max=parseInt(this.parentData[0].benefit)),this.chartOptions.series[0].data=e}else this.alertService.activate("This page cann't to show because there is no education life product detail data. Please add education life product detail in rodcut configuration","Warning")}getParnet(){return this.globalFun.tempFormData[P.Ft]}nextPage(){this.actionEvent.emit({type:Z.V.NEXT})}backPage(){this.actionEvent.emit({type:Z.V.PREV})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(I.c),t.Y36(x.Q))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-endo-grip"]],viewQuery:function(e,i){if(1&e&&t.Gf(me,5),2&e){let n;t.iGM(n=t.CRH())&&(i.chart=n.first)}},inputs:{product:"product",editData:"editData",resourcesId:"resourcesId",parentData:"parentData"},outputs:{actionEvent:"actionEvent"},decls:1,vars:8,consts:[[3,"series","chart","xaxis","yaxis","title","legend","dataLabels","markers"]],template:function(e,i){1&e&&t._UZ(0,"apx-chart",0),2&e&&t.Q6J("series",i.chartOptions.series)("chart",i.chartOptions.chart)("xaxis",i.chartOptions.xaxis)("yaxis",i.chartOptions.yaxis)("title",i.chartOptions.title)("legend",i.chartOptions.legend)("dataLabels",i.chartOptions.dataLabels)("markers",i.chartOptions.markers)},directives:[pe.x],styles:[""]}),o})();var b=u(92070),H=u(28100),E=u(83067),R=u(54753),W=u(85724),M=u(18260),k=u(91691),z=u(44522);const pt=`${M.N.apiUrl}/endowment/rate`;let _e=(()=>{class o extends k.i{constructor(e){super(e,pt),this.httpClient=e}getMany(e){return this.httpClient.get(pt+"s?policyTerm="+e)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(z.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const mt=`${M.N.apiUrl}/endowment/surrender/rate`;let he=(()=>{class o extends k.i{constructor(e){super(e,mt),this.httpClient=e}getMany(e){return this.httpClient.get(mt+"?policyTerm="+e)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(z.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var fe=u(61438),N=u(67198);function ve(o,s){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",8),t._uU(6),t.ALo(7,"number"),t.qZA(),t.TgZ(8,"td",8),t._uU(9),t.ALo(10,"number"),t.qZA(),t.TgZ(11,"td",8),t._uU(12),t.ALo(13,"number"),t.qZA(),t.TgZ(14,"td",8),t._uU(15),t.ALo(16,"number"),t.qZA(),t.qZA()),2&o){const e=s.$implicit;t.xp6(2),t.Oqu(e.endOfPolicyYear),t.xp6(2),t.Oqu(e.age),t.xp6(2),t.Oqu(t.lcZ(7,6,e.premiumPaid)||"-"),t.xp6(3),t.Oqu(t.lcZ(10,8,e.benefit)),t.xp6(3),t.Oqu(t.lcZ(13,10,e.surrenderValue)||"-"),t.xp6(3),t.Oqu(t.lcZ(16,12,e.policyLoan)||"-")}}function Ze(o,s){if(1&o&&(t.TgZ(0,"tbody"),t.YNc(1,ve,17,14,"tr",7),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.showDatas)}}function Ce(o,s){if(1&o&&(t.ynx(0),t._UZ(1,"app-endo-grip",9),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("parentData",e.showDatas)}}let be=(()=>{class o{constructor(e,i,n,a,r,c,d,p,_){this.globalFun=e,this.alertService=i,this.prodService=n,this.eduPreService=a,this.eduSurrService=r,this.eduPayment=c,this.cdf=d,this.auth=p,this.numberPipe=_,this.actionEvent=new t.vpe,this.premimuRate={"5opt":5,"7opt":7,"10opt":10},this.frequency={monthly:12,quarterly:4,semi_annually:6,annually:1},this.lists=[],this.premiumRate=[],this.surrendRate=[],this.showDatas=[]}ngOnInit(){this.parentData=this.getParnet(),this.parentData2=this.getParnet(!0),this.parentData?this.getRateValue().pipe((0,E.w)(e=>{if(!e[0]||!e[1])throw e;return(0,C.of)({premium:e[0],surrend:e[1]})})).toPromise().then(e=>{console.log(e),e&&(this.premiumRate=e.premium,this.surrendRate=e.surrend,this.createListData())}).catch(e=>{console.log(e)}):this.alertService.activate("This page cann't to show because there is no endowment product detail data. Please add endowment product detail in prodcut configuration","Warning")}createListData(){this.getcalculateData(),this.showDatas=[],this.lists.forEach((e,i)=>{let n={resourceId:this.resourcesId,endOfPolicyYear:e,age:this.currentAge+i,premiumPaid:this.premimuRateNum>=e?this.calculatePre(this.currentAge,e):0,benefit:this.sumInsured,surrenderValue:this.calculateSur(e),policyLoan:.9*this.calculateSur(e)};this.showDatas.push(n),i+1==this.lists.length&&this.cdf.detectChanges()})}getcalculateData(){let e=this.globalFun.paPolicyValidationResult.value,i=e.validationValue;console.log(i,e),this.premimuRateNum=this.premimuRate[i+"opt"],this.policyTermCode=this.parentData.policy_term,this.sumInsured=this.parentData.sum_insured;let n=this.parentData2.date_of_birth;return this.currentAge=Math.ceil(b().diff(n,"years",!0)),this.frequencyValue=this.frequency[this.parentData.payment_frequency],this.lists=Array.from({length:i},(r,c)=>c+1),!0}getParnet(e){if((0,S.cU)(this.product.config)){let i=JSON.parse(this.product.config),a={};return a=("quotation"!=this.prodService.type?i.application||[]:i.quotation||[]).find(e?r=>"life_insured_endow"==r.tableName:r=>"endo_detail"==r.tableName),a&&this.globalFun.tempFormData[a.tableName+a.id]||null}return null}calculatePre(e,i){let n=0,a=this.premiumRate.find(c=>c.formAge<=e&&c.toAge>=e);a&&(n=a.rate);let r=n/1e3*this.sumInsured;if(1==i){let c=this.globalFun.calculateDecimal(r/this.frequencyValue);c=this.globalFun.calculateDecimal(c+3e-4*r),this.premiumAmt=this.numberPipe.transform(c)+" MMK / "+this.parentData.payment_frequency,this.globalFun.paPremiumResult.next(this.premiumAmt)}return this.globalFun.calculateDecimal(r)*i}calculateSur(e){let i=10,n=this.surrendRate.find(a=>a.premiumPaidYear==e);return n?(i=n.rate,i/1e3*this.sumInsured):0}getRateValue(){return(0,H.D)([this.getPRate(),this.getSurRate()]).pipe((0,R.U)(e=>e))}getPRate(){return this.eduPreService.getMany(this.parentData.policy_term)}getSurRate(){return this.eduSurrService.getMany(this.parentData.policy_term)}nextPage(){this.showDatas.length>0&&this.eduPayment.deleteMany(this.resourcesId).pipe((0,W.z)(e=>{let i={request:this.showDatas,resourceDataDTO:{agentId:this.auth.currentUserValue.id||1,customerId:this.prodService.creatingCustomer.customerId||1,leadId:this.prodService.creatingLeadId||1,policyNumber:null,premium:(Number(this.premiumAmt.split(" ")[0].split(",").join(""))||0)+"",premiumView:this.premiumAmt,productId:this.product.id,quotationId:this.prodService.referenceID,type:this.prodService.type},resourceId:this.resourcesId};return this.eduPayment.saveMany(i)})).toPromise().then(e=>{e&&(this.globalFun.tempFormData[P.Ft]=this.showDatas,this.actionEvent.emit({type:Z.V.NEXT}))})}backPage(){this.actionEvent.emit({type:Z.V.PREV})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(x.Q),t.Y36(I.c),t.Y36(F.f),t.Y36(_e),t.Y36(he),t.Y36(fe.F),t.Y36(t.sBO),t.Y36(N.e8),t.Y36(m.JJ))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-endo"]],inputs:{product:"product",editData:"editData",resourcesId:"resourcesId"},outputs:{actionEvent:"actionEvent"},decls:25,vars:2,consts:[[1,"table","table-bordered"],[4,"ngIf"],[1,"mb-5"],[1,"row","mt-3"],[1,"col-sm-6","mx-auto"],[1,"btn","btn-block","btn-secondary",3,"click"],[1,"btn","btn-block","btn-primary",3,"click"],[4,"ngFor","ngForOf"],[2,"text-align","right"],[3,"parentData"]],template:function(e,i){1&e&&(t.TgZ(0,"table",0),t.TgZ(1,"thead"),t.TgZ(2,"tr"),t.TgZ(3,"th"),t._uU(4,"End of Policy Year"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Age"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Premium Paid"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Death/PTD Benefit"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Surrender Value"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Policy Loan"),t.qZA(),t.qZA(),t.qZA(),t.YNc(15,Ze,2,1,"tbody",1),t.qZA(),t._UZ(16,"hr",2),t.YNc(17,Ce,2,1,"ng-container",1),t.TgZ(18,"div",3),t.TgZ(19,"div",4),t.TgZ(20,"button",5),t.NdJ("click",function(){return i.backPage()}),t._uU(21," Previous "),t.qZA(),t.qZA(),t.TgZ(22,"div",4),t.TgZ(23,"button",6),t.NdJ("click",function(){return i.nextPage()}),t._uU(24," Save & Next "),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(15),t.Q6J("ngIf",i.premiumRate.length>0&&i.surrendRate.length>0),t.xp6(2),t.Q6J("ngIf",i.showDatas.length>0))},directives:[m.O5,m.sg,gt],pipes:[m.JJ],styles:[""]}),o})();var tt=u(53489),et=u(26697),it=u(66977);const _t=`${M.N.apiUrl}/fire/premium-rate`;let ht=(()=>{class o extends k.i{constructor(e){super(e,_t),this.httpClient=e}getPremiumRate(e,i,n){return this.httpClient.get(_t+"?classOfBuilding="+e+"&occupationOfBuilding="+i+"&typeOfBuilding="+n)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(z.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const ft=`${M.N.apiUrl}/fire-policy/pae`;let Te=(()=>{class o extends k.i{constructor(e){super(e,ft),this.httpClient=e}getMany(e){return this.httpClient.post(ft,e)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(z.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const vt=`${M.N.apiUrl}/fire-policy/surrounding-building`,Pe=`${M.N.apiUrl}/fire-policy/risk/`;let nt=(()=>{class o extends k.i{constructor(e){super(e,vt),this.httpClient=e}getByRiskId(e){return this.httpClient.get(Pe+e+"/surrounding-building")}getMaxRate(e){return this.httpClient.get(vt+"/max-rate?riskId="+e)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(z.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var Q=u(55167),Zt=u(99765),Oe=u(90949),Y=u(18510);const Ae=[{title:"Building Description",type:Y.Y.FEILD,field:"description",isDate:!0},{title:"Type of building",type:Y.Y.FEILD,field:"typeOfBuilding"},{title:"Occupation",type:Y.Y.FEILD,field:"occupation"},{title:"Class",type:Y.Y.FEILD,field:"class"},{title:"Premiun Rate",type:Y.Y.FEILD,field:"premiumRate"},{title:"Actions",type:Y.Y.ACTION,field:"actions",btn:{edit:!0,view:!0}}],ye=["description","typeOfBuilding","occupation","class","premiumRate"];let xe=(()=>{class o{constructor(e,i,n,a,r,c){this.modal=e,this.masterDataService=i,this.cdf=n,this.SurroundingBuildingService=a,this.auth=r,this.PremiumRateService=c,this.typeOfBuildingOption=[],this.occupationOfBuildingOption=[],this.occupationOfBuildingOptions=[],this.buildingClassOption=[],this.premiumRateOption=[],this.type="create",this.riskId="1"}ngOnInit(){this.loadForm(),this.getBuildingClass(),this.getBuildingType(),this.getBuildingOccupation(),"create"==this.type?this.loadForm():this.loadForm(this.oldData)}getBuildingClass(){this.masterDataService.getDataByType("BUILDING_CLASS").toPromise().then(e=>{console.log(e),e&&(this.buildingClassOption=e.map(i=>({code:i.codeId,value:i.codeName})),console.log(this.buildingClassOption),this.cdf.detectChanges())})}getBuildingType(){this.masterDataService.getDataByType("BUILDING_TYPE").toPromise().then(e=>{console.log(e),e&&(this.typeOfBuildingOption=e.map(i=>({code:i.codeId,value:i.codeName})),console.log(this.typeOfBuildingOption),this.cdf.detectChanges())})}getBuildingOccupation(){this.masterDataService.getDataByType("BUILDING_OCCUPATION").toPromise().then(e=>{e&&(this.occupationOfBuildingOptions=e.map(i=>({code:i.codeId,value:i.codeName,parent:i.parentId})),this.cdf.detectChanges())})}getPremiumRate(){this.PremiumRateService.getPremiumRate(this.surroundingdetailform.value.buildingClass,this.surroundingdetailform.value.occupationOfBuilding,this.surroundingdetailform.value.typeOfBuilding).toPromise().then(a=>{a&&this.surroundingdetailform.controls.premiumRate.setValue(a.premiumRate)})}loadForm(e){this.surroundingdetailform=new l.cw({buildingClass:new l.NI(e?e.buildingClass:""),buildingDescription:new l.NI(e?e.buildingDescription:""),distanceToBuilding:new l.NI(e?e.distanceToBuilding:""),firePolicyRiskId:new l.NI(this.riskId),id:new l.NI(e?e.id:""),occupationOfBuilding:new l.NI(e?e.occupationOfBuilding:""),premiumRate:new l.NI(e?e.premiumRate:""),typeOfBuilding:new l.NI(e?e.typeOfBuilding:"")})}createSurrounding(){let e=this.surroundingdetailform.getRawValue(),i=Object.assign(Object.assign({},e),{createdBy:this.auth.currentUserValue.id});"create"!=this.type?this.SurroundingBuildingService.updateNoID(i).toPromise().then(n=>{if(n){let a=Object.assign({},i),r=this.surroundingdetailform.value.buildingClass,c=this.surroundingdetailform.value.occupationOfBuilding,d=this.surroundingdetailform.value.typeOfBuilding,p=this.buildingClassOption.find(v=>v.code==r).value,_=this.occupationOfBuildingOption.find(v=>v.code==c).value,T=this.typeOfBuildingOption.find(v=>v.code==d).value;this.modal.dismiss({data:Object.assign(Object.assign({},a),{buildingClassValue:p,occupationOfBuildingValue:_,typeOfBuildingValue:T}),type:"save"})}}):this.SurroundingBuildingService.save(i).toPromise().then(n=>{if(n){i.id=n;let a=Object.assign({},i),r=this.surroundingdetailform.value.buildingClass,c=this.surroundingdetailform.value.occupationOfBuilding,d=this.surroundingdetailform.value.typeOfBuilding,p=this.buildingClassOption.find(v=>v.code==r).value,_=this.occupationOfBuildingOption.find(v=>v.code==c).value,T=this.typeOfBuildingOption.find(v=>v.code==d).value;this.modal.dismiss({data:Object.assign(Object.assign({},a),{buildingClassValue:p,occupationOfBuildingValue:_,typeOfBuildingValue:T}),type:"save"})}})}changeClass(){"T-001"==this.surroundingdetailform.value.buildingClass&&(this.surroundingdetailform.controls.distanceToBuilding.setValidators([l.kI.max(25)]),this.surroundingdetailform.controls.distanceToBuilding.updateValueAndValidity()),"T-001"!=this.surroundingdetailform.value.buildingClass&&(this.surroundingdetailform.controls.distanceToBuilding.setValidators([l.kI.max(50)]),this.surroundingdetailform.controls.distanceToBuilding.updateValueAndValidity()),this.surroundingdetailform.value.buildingClass&&this.surroundingdetailform.value.occupationOfBuilding&&this.surroundingdetailform.value.typeOfBuilding&&this.getPremiumRate()}changeType(e){let i=this.surroundingdetailform.value.buildingClass,n=this.surroundingdetailform.value.occupationOfBuilding,a=this.surroundingdetailform.value.typeOfBuilding;"child"==e&&(this.occupationOfBuildingOption=this.occupationOfBuildingOptions.filter(c=>c.parent==a),this.occupationOfBuildingOption.findIndex(c=>c.code==n)<0&&this.surroundingdetailform.controls.occupationOfBuilding.setValue(null)),i&&n&&a&&this.getPremiumRate()}changeOccuption(){this.surroundingdetailform.value.buildingClass&&this.surroundingdetailform.value.occupationOfBuilding&&this.surroundingdetailform.value.typeOfBuilding&&this.getPremiumRate()}dismissModal(){this.modal.dismiss()}isControlValid(e){const i=this.surroundingdetailform.controls[e];return i.valid&&(i.dirty||i.touched)}isControlInvalid(e){const i=this.surroundingdetailform.controls[e];return i.invalid&&(i.dirty||i.touched)}controlHasError(e,i){const n=this.surroundingdetailform.controls[i];return n.hasError(e)&&(n.dirty||n.touched)}isControlTouched(e){const i=this.surroundingdetailform.controls[e];return i.dirty||i.touched}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g.Kz),t.Y36(et.D),t.Y36(t.sBO),t.Y36(nt),t.Y36(N.e8),t.Y36(ht))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-surrounding-detail"]],decls:50,vars:28,consts:[[1,"modal-content"],[1,"modal-header"],["id","example-modal-sizes-title-lg",1,"modal-title","h4","left-border-image"],["action","#",1,"form",3,"formGroup","ngSubmit"],[1,"overlay","overlay-block","cursor-default","modal-body"],[1,"row",2,"align-items","center"],[1,"col-sm-6"],[1,"form-group","row"],[1,"col-sm-4","col-form-label"],[1,"col-sm-8"],["type","text","name","buildingDescription","autocomplete","off","formControlName","buildingDescription",1,"form-control","form-control-sm"],["bindLabel","value","bindValue","code","formControlName","typeOfBuilding",1,"ng-custom-select",3,"items","change"],["bindLabel","value","bindValue","code","formControlName","occupationOfBuilding",1,"ng-custom-select",3,"items","change"],["bindLabel","value","bindValue","code","formControlName","buildingClass",1,"ng-custom-select",3,"items","change"],["type","number","name","distanceToBuilding","autocomplete","off","formControlName","distanceToBuilding",1,"form-control","form-control-sm"],["type","number","name","premiumRate","autocomplete","off","formControlName","premiumRate",1,"form-control","form-control-sm"],[1,"modal-footer"],["type","button",1,"btn","btn-light","btn-sm","btn-elevate","mr-2",3,"click"],["type","submit",1,"btn","btn-primary","btn-sm","btn-elevate"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._uU(3," Surrounding Detail "),t.qZA(),t.qZA(),t.TgZ(4,"form",3),t.NdJ("ngSubmit",function(){return i.createSurrounding()}),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.TgZ(7,"div",6),t.TgZ(8,"div",7),t.TgZ(9,"label",8),t._uU(10,"Building Description"),t.qZA(),t.TgZ(11,"div",9),t._UZ(12,"input",10),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"div",6),t.TgZ(14,"div",7),t.TgZ(15,"label",8),t._uU(16,"Type of Building"),t.qZA(),t.TgZ(17,"div",9),t.TgZ(18,"ng-select",11),t.NdJ("change",function(){return i.changeType("child")}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"div",5),t.TgZ(20,"div",6),t.TgZ(21,"div",7),t.TgZ(22,"label",8),t._uU(23,"Occupation of Building"),t.qZA(),t.TgZ(24,"div",9),t.TgZ(25,"ng-select",12),t.NdJ("change",function(){return i.changeOccuption()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(26,"div",6),t.TgZ(27,"div",7),t.TgZ(28,"label",8),t._uU(29,"Building Class"),t.qZA(),t.TgZ(30,"div",9),t.TgZ(31,"ng-select",13),t.NdJ("change",function(){return i.changeClass()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(32,"div",5),t.TgZ(33,"div",6),t.TgZ(34,"div",7),t.TgZ(35,"label",8),t._uU(36,"Distance to Building (feet)"),t.qZA(),t.TgZ(37,"div",9),t._UZ(38,"input",14),t.qZA(),t.qZA(),t.qZA(),t.TgZ(39,"div",6),t.TgZ(40,"div",7),t.TgZ(41,"label",8),t._uU(42,"Rate"),t.qZA(),t.TgZ(43,"div",9),t._UZ(44,"input",15),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(45,"div",16),t.TgZ(46,"button",17),t.NdJ("click",function(){return i.dismissModal()}),t._uU(47,"Cancel"),t.qZA(),t.TgZ(48,"button",18),t._uU(49,"Save"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.Q6J("formGroup",i.surroundingdetailform),t.xp6(8),t.ekj("is-invalid",i.isControlInvalid("buildingDescription"))("is-valid",i.isControlValid("buildingDescription")),t.xp6(6),t.ekj("is-invalid",i.isControlInvalid("typeOfBuilding"))("is-valid",i.isControlValid("typeOfBuilding")),t.Q6J("items",i.typeOfBuildingOption),t.xp6(7),t.ekj("is-invalid",i.isControlInvalid("occupationOfBuilding"))("is-valid",i.isControlValid("occupationOfBuilding")),t.Q6J("items",i.occupationOfBuildingOption),t.xp6(6),t.ekj("is-invalid",i.isControlInvalid("buildingClass"))("is-valid",i.isControlValid("buildingClass")),t.Q6J("items",i.buildingClassOption),t.xp6(7),t.ekj("is-invalid",i.isControlInvalid("distanceToBuilding"))("is-valid",i.isControlValid("distanceToBuilding")),t.xp6(6),t.ekj("is-invalid",i.isControlInvalid("premiumRate"))("is-valid",i.isControlValid("premiumRate")))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,K.w9,l.wV],styles:[""]}),o})();function De(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"th"),t._uU(2),t.qZA(),t.TgZ(3,"th"),t._uU(4),t.qZA(),t.TgZ(5,"th"),t._uU(6),t.qZA(),t.TgZ(7,"th"),t._uU(8),t.qZA(),t.TgZ(9,"th"),t._uU(10),t.qZA(),t.TgZ(11,"th"),t.TgZ(12,"a",9),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).onActionView(a,"edit")}),t._UZ(13,"span",10),t.qZA(),t.TgZ(14,"a",11),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).onActionView(a,"delete")}),t._UZ(15,"span",12),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=s.$implicit;t.xp6(2),t.hij(" ",e.buildingDescription," "),t.xp6(2),t.hij(" ",e.typeOfBuildingValue," "),t.xp6(2),t.hij(" ",e.occupationOfBuildingValue," "),t.xp6(2),t.hij(" ",e.buildingClassValue," "),t.xp6(2),t.hij(" ",e.premiumRate," ")}}function we(o,s){if(1&o&&(t.TgZ(0,"tbody"),t.YNc(1,De,16,5,"tr",8),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.surrounding)}}let Ie=(()=>{class o{constructor(e,i,n,a){this.surroundingBuildingService=e,this.modalService=i,this.cdf=n,this.alertService=a,this.riskId=1,this.ELEMENT_COL=JSON.parse(JSON.stringify(Ae)),this.displayedColumns=JSON.parse(JSON.stringify(ye)),this.isPopup=!1,this.surrounding=[]}ngOnInit(){this.getList()}getList(){this.surroundingBuildingService.getByRiskId(this.riskId).toPromise().then(e=>{e&&(this.surrounding=e,this.cdf.detectChanges())})}add(e,i){let n;n=this.modalService.open(xe,{size:"xl",backdrop:!1}),n.componentInstance.type=e,n.componentInstance.riskId=this.riskId,n.componentInstance.oldData=i,n.result.then(()=>{},a=>{a&&(console.log("RESSSS",a),"save"==a.type&&(this.surrounding.push(a.data),this.cdf.detectChanges()))})}onActionView(e,i){console.log("data",e,"type",i),"delete"==i?this.alertService.activate("Are you sure want to delete?","Warning Message").then(n=>{n&&(this.surroundingBuildingService.delete(e.id).toPromise().then(a=>{if(a){let r=this.surrounding.findIndex(c=>c.id==e.id);r>=0&&(this.surrounding.splice(r,1),this.cdf.detectChanges())}}),this.alertService.activate("This record was deleted","Success Message").then(a=>{}))}):this.add(i,e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(nt),t.Y36(g.FF),t.Y36(t.sBO),t.Y36(I.c))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-surrounding-building"]],viewQuery:function(e,i){if(1&e&&t.Gf(Oe.I,5),2&e){let n;t.iGM(n=t.CRH())&&(i.matTable=n.first)}},inputs:{riskId:"riskId"},decls:25,vars:1,consts:[[1,"row",2,"align-items","center","margin","10px 0px"],[1,"col-sm-8"],[1,"col-sm-6","left-border-image"],[1,"col-sm-4"],["type","button",1,"btn","btn-primary","btn-sm","mx-2","ft-right",3,"click"],[1,"table-responsive","angular-bootstrap-table"],[1,"table","table-head-custom","table-vertical-center"],[4,"ngIf"],[4,"ngFor","ngForOf"],["title","Edit Form Page",1,"btn","btn-primary","btn-cus","btn-sm","mx-1",3,"click"],[1,"flaticon-edit"],["title","Delete Form Page",1,"btn","btn-danger","btn-cus","btn-sm","mx-1",3,"click"],[1,"flaticon-delete"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"div",0),t.TgZ(2,"div",1),t.TgZ(3,"label",2),t._uU(4,"Surrounding Building "),t.qZA(),t.qZA(),t.TgZ(5,"div",3),t.TgZ(6,"button",4),t.NdJ("click",function(){return i.add("create")}),t._uU(7,"Add New Data"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"div",5),t.TgZ(9,"table",6),t.TgZ(10,"thead"),t.TgZ(11,"tr"),t.TgZ(12,"th"),t._uU(13,"Building Description"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Type of Building"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Occupation"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Class"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Premium Rate"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Action"),t.qZA(),t.qZA(),t.qZA(),t.YNc(24,we,2,1,"tbody",7),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(24),t.Q6J("ngIf",i.surrounding.length>0))},directives:[m.O5,m.sg],styles:[".ft-right[_ngcontent-%COMP%]{float:right}.tx-right[_ngcontent-%COMP%]{text-align:right}"]}),o})();function Me(o,s){if(1&o&&(t.TgZ(0,"div",6),t.TgZ(1,"div",7),t.TgZ(2,"label",8),t._uU(3,"Item Name"),t.qZA(),t.TgZ(4,"div",9),t._UZ(5,"input",16),t.qZA(),t.qZA(),t.qZA()),2&o){const e=t.oxw();t.xp6(5),t.ekj("is-invalid",e.isControlInvalid("itemName"))("is-valid",e.isControlValid("itemName"))}}const X=function(){return{prefix:"",thousands:",",precision:0,allowNegative:!1,align:"left"}};function qe(o,s){if(1&o&&(t.TgZ(0,"div",6),t.TgZ(1,"div",7),t.TgZ(2,"label",8),t._uU(3,"Stock Value"),t.qZA(),t.TgZ(4,"div",9),t._UZ(5,"input",17),t.qZA(),t.qZA(),t.qZA()),2&o){const e=t.oxw();t.xp6(5),t.ekj("is-invalid",e.isControlInvalid("stockValue"))("is-valid",e.isControlValid("stockValue")),t.Q6J("options",t.DdM(5,X))}}function Se(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",6),t.TgZ(1,"div",7),t.TgZ(2,"label",8),t._uU(3,"Quantiy"),t.qZA(),t.TgZ(4,"div",9),t.TgZ(5,"input",18),t.NdJ("ngModelChange",function(){return t.CHM(e),t.oxw().calculateTotalValue()}),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(5),t.ekj("is-invalid",e.isControlInvalid("quantity"))("is-valid",e.isControlValid("quantity"))}}function Fe(o,s){if(1&o&&(t.TgZ(0,"div",6),t.TgZ(1,"div",7),t.TgZ(2,"label",8),t._uU(3,"Total Value"),t.qZA(),t.TgZ(4,"div",9),t._UZ(5,"input",19),t.qZA(),t.qZA(),t.qZA()),2&o){const e=t.oxw();t.xp6(5),t.ekj("is-invalid",e.isControlInvalid("totalValue"))("is-valid",e.isControlValid("totalValue")),t.Q6J("options",t.DdM(5,X))}}function ke(o,s){if(1&o&&(t.TgZ(0,"div",5),t.TgZ(1,"div",6),t.TgZ(2,"div",7),t.TgZ(3,"label",8),t._uU(4,"Month"),t.qZA(),t.TgZ(5,"div",9),t._UZ(6,"input",20),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"div",6),t.TgZ(8,"div",7),t.TgZ(9,"label",8),t._uU(10,"Remark"),t.qZA(),t.TgZ(11,"div",9),t._UZ(12,"input",21),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&o){const e=t.oxw();t.xp6(6),t.ekj("is-invalid",e.isControlInvalid("month"))("is-valid",e.isControlValid("month")),t.xp6(6),t.ekj("is-invalid",e.isControlInvalid("remark"))("is-valid",e.isControlValid("remark"))}}function ze(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",6),t.TgZ(1,"div",7),t.TgZ(2,"label",8),t._uU(3,"Value Per Quantity"),t.qZA(),t.TgZ(4,"div",9),t.TgZ(5,"input",22),t.NdJ("ngModelChange",function(){return t.CHM(e),t.oxw().calculateTotalValue()}),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(5),t.ekj("is-invalid",e.isControlInvalid("valuePerQuantity"))("is-valid",e.isControlValid("valuePerQuantity")),t.Q6J("options",t.DdM(5,X))}}function Ne(o,s){if(1&o&&(t.TgZ(0,"div",6),t.TgZ(1,"div",7),t.TgZ(2,"label",8),t._uU(3,"Agreed SI"),t.qZA(),t.TgZ(4,"div",9),t._UZ(5,"input",23),t.qZA(),t.qZA(),t.qZA()),2&o){const e=t.oxw();t.xp6(5),t.ekj("is-invalid",e.isControlInvalid("agreedSi"))("is-valid",e.isControlValid("agreedSi")),t.Q6J("options",t.DdM(5,X))}}let ot=(()=>{class o{constructor(e,i){this.modal=e,this.cdf=i,this.type="Contents including FFF",this.pageType="Add",this.riskId=1,this.isStock=!1}ngOnInit(){this.loadForm(this.data),this.setValidator()}create(){this.modal.dismiss({data:this.calculatedbuildingForm.value,type:"save"})}loadForm(e){this.calculatedbuildingForm=new l.cw({firePolicyRiskId:new l.NI(e?e.firePolicyRiskId:this.riskId),id:new l.NI(e?e.id:""),itemDescription:new l.NI(e?e.itemDescription||e.description:""),itemName:new l.NI(e?e.itemName:""),quantity:new l.NI(e?e.quantity:""),totalValue:new l.NI(e?e.totalValue:""),updatedBy:new l.NI(e?e.updatedBy:""),valuePerQuantity:new l.NI(e?e.valuePerQuantity:""),month:new l.NI(e?e.month:""),remark:new l.NI(e?e.remark:""),stockValue:new l.NI(e?e.stockValue:""),agreedSi:new l.NI(e?e.agreedSi:"")})}setValidator(){("Contents including FFF"==this.type||"Plant and Machinery"==this.type)&&(this.calculatedbuildingForm.controls.itemDescription.setValidators([l.kI.required]),this.calculatedbuildingForm.controls.itemDescription.updateValueAndValidity(),this.calculatedbuildingForm.controls.itemName.setValidators([l.kI.required]),this.calculatedbuildingForm.controls.itemName.updateValueAndValidity(),this.calculatedbuildingForm.controls.quantity.setValidators([l.kI.required]),this.calculatedbuildingForm.controls.quantity.updateValueAndValidity(),this.calculatedbuildingForm.controls.valuePerQuantity.setValidators([l.kI.required]),this.calculatedbuildingForm.controls.valuePerQuantity.updateValueAndValidity(),this.calculatedbuildingForm.controls.totalValue.setValidators([l.kI.required]),this.calculatedbuildingForm.controls.totalValue.updateValueAndValidity()),"Stock"==this.type&&(this.calculatedbuildingForm.controls.itemDescription.setValidators([l.kI.required]),this.calculatedbuildingForm.controls.itemDescription.updateValueAndValidity(),this.calculatedbuildingForm.controls.stockValue.setValidators([l.kI.required]),this.calculatedbuildingForm.controls.stockValue.updateValueAndValidity(),this.calculatedbuildingForm.controls.month.setValidators([l.kI.required]),this.calculatedbuildingForm.controls.month.updateValueAndValidity(),this.calculatedbuildingForm.controls.remark.setValidators([l.kI.required]),this.calculatedbuildingForm.controls.remark.updateValueAndValidity(),this.calculatedbuildingForm.controls.agreedSi.setValidators([l.kI.required]),this.calculatedbuildingForm.controls.agreedSi.updateValueAndValidity())}calculateTotalValue(){this.cdf.detectChanges();let e=this.calculatedbuildingForm.value.quantity,i=this.calculatedbuildingForm.value.valuePerQuantity;console.log("quantity,value",e,i),e&&i&&this.calculatedbuildingForm.controls.totalValue.setValue(e*i)}dismissModal(){this.modal.dismiss()}isControlValid(e){const i=this.calculatedbuildingForm.controls[e];return i.valid&&(i.dirty||i.touched)}isControlInvalid(e){const i=this.calculatedbuildingForm.controls[e];return i.invalid&&(i.dirty||i.touched)}controlHasError(e,i){const n=this.calculatedbuildingForm.controls[i];return n.hasError(e)&&(n.dirty||n.touched)}isControlTouched(e){const i=this.calculatedbuildingForm.controls[e];return i.dirty||i.touched}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g.Kz),t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-add-calculated-building"]],inputs:{type:"type",pageType:"pageType",data:"data",riskId:"riskId",isStock:"isStock"},decls:27,vars:15,consts:[[1,"modal-content"],[1,"modal-header"],["id","example-modal-sizes-title-lg",1,"modal-title","h4","left-border-image"],["action","#",1,"form",3,"formGroup","ngSubmit"],[1,"overlay","overlay-block","cursor-default","modal-body"],[1,"row",2,"align-items","center"],[1,"col-sm-6"],[1,"form-group","row"],[1,"col-sm-4","col-form-label"],[1,"col-sm-8"],["type","text","name","itemDescription","autocomplete","off","formControlName","itemDescription",1,"form-control","form-control-sm"],["class","col-sm-6",4,"ngIf"],["class","row","style","align-items: center",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-light","btn-elevate","mr-2",3,"click"],["type","submit",1,"btn","btn-primary","btn-elevate",3,"disabled"],["type","text","name","itemName","autocomplete","off","formControlName","itemName",1,"form-control","form-control-sm"],["type","tel","currencyMask","","name","stockValue","autocomplete","off","formControlName","stockValue",1,"form-control","form-control-sm",3,"options"],["type","number","name","quantity","autocomplete","off","formControlName","quantity",1,"form-control","form-control-sm",3,"ngModelChange"],["type","tel","currencyMask","","name","totalValue","autocomplete","off","formControlName","totalValue","readonly","",1,"form-control","form-control-sm",3,"options"],["type","text","name","month","autocomplete","off","formControlName","month",1,"form-control","form-control-sm"],["type","text","name","remark","autocomplete","off","formControlName","remark",1,"form-control","form-control-sm"],["type","tel","currencyMask","","name","valuePerQuantity","autocomplete","off","formControlName","valuePerQuantity",1,"form-control","form-control-sm",3,"options","ngModelChange"],["type","tel","currencyMask","","name","agreedSi","autocomplete","off","formControlName","agreedSi",1,"form-control","form-control-sm",3,"options"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"form",3),t.NdJ("ngSubmit",function(){return i.create()}),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.TgZ(7,"div",6),t.TgZ(8,"div",7),t.TgZ(9,"label",8),t._uU(10,"Item Description"),t.qZA(),t.TgZ(11,"div",9),t._UZ(12,"input",10),t.qZA(),t.qZA(),t.qZA(),t.YNc(13,Me,6,4,"div",11),t.YNc(14,qe,6,6,"div",11),t.qZA(),t.TgZ(15,"div",5),t.YNc(16,Se,6,4,"div",11),t.YNc(17,Fe,6,6,"div",11),t.qZA(),t.YNc(18,ke,13,8,"div",12),t.TgZ(19,"div",5),t.YNc(20,ze,6,6,"div",11),t.YNc(21,Ne,6,6,"div",11),t.qZA(),t.qZA(),t.TgZ(22,"div",13),t.TgZ(23,"button",14),t.NdJ("click",function(){return i.dismissModal()}),t._uU(24,"Cancel"),t.qZA(),t.TgZ(25,"button",15),t._uU(26,"Save"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.AsE(" ",i.pageType," ",i.type," "),t.xp6(1),t.Q6J("formGroup",i.calculatedbuildingForm),t.xp6(8),t.ekj("is-invalid",i.isControlInvalid("itemDescription"))("is-valid",i.isControlValid("itemDescription")),t.xp6(1),t.Q6J("ngIf",!i.isStock),t.xp6(1),t.Q6J("ngIf",i.isStock),t.xp6(2),t.Q6J("ngIf",!i.isStock),t.xp6(1),t.Q6J("ngIf",!i.isStock),t.xp6(1),t.Q6J("ngIf",i.isStock),t.xp6(2),t.Q6J("ngIf",!i.isStock),t.xp6(1),t.Q6J("ngIf",i.isStock),t.xp6(4),t.Q6J("disabled",i.calculatedbuildingForm.invalid))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,m.O5,Zt.g1,l.wV],styles:[""]}),o})();const Ue=`${M.N.apiUrl}/fire-policy/content`,Be=`${M.N.apiUrl}/fire-policy/plant-machinery`,Je=`${M.N.apiUrl}/fire-policy/stock`;let Re=(()=>{class o extends k.i{constructor(e){super(e,Ue),this.httpClient=e}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(z.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),Qe=(()=>{class o extends k.i{constructor(e){super(e,Be),this.httpClient=e}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(z.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),Ee=(()=>{class o extends k.i{constructor(e){super(e,Je),this.httpClient=e}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(z.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var Ye=u(13468);function Ve(o,s){1&o&&(t.TgZ(0,"thead"),t.TgZ(1,"tr"),t.TgZ(2,"th"),t._uU(3,"Item Name"),t.qZA(),t.TgZ(4,"th"),t._uU(5,"Item Description"),t.qZA(),t.TgZ(6,"th",3),t._uU(7,"Value per Quantity"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Quantity"),t.qZA(),t.TgZ(10,"th",3),t._uU(11,"Total Value"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Action"),t.qZA(),t.qZA(),t.qZA())}function Le(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"th"),t._uU(2),t.qZA(),t.TgZ(3,"th"),t._uU(4),t.qZA(),t.TgZ(5,"th",3),t._uU(6),t.ALo(7,"number"),t.qZA(),t.TgZ(8,"th"),t._uU(9),t.qZA(),t.TgZ(10,"th",3),t._uU(11),t.ALo(12,"number"),t.qZA(),t.TgZ(13,"th"),t.TgZ(14,"a",5),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).onActionView(a,"edit","content")}),t._UZ(15,"span",6),t.qZA(),t.TgZ(16,"a",7),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).onActionView(a,"delete","content")}),t._UZ(17,"span",8),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=s.$implicit;t.xp6(2),t.hij(" ",e.itemName," "),t.xp6(2),t.hij(" ",e.itemDescription," "),t.xp6(2),t.hij(" ",t.lcZ(7,5,e.valuePerQuantity)," "),t.xp6(3),t.hij(" ",e.quantity," "),t.xp6(2),t.hij(" ",t.lcZ(12,7,e.totalValue)," ")}}function je(o,s){if(1&o&&(t.TgZ(0,"tbody"),t.YNc(1,Le,18,9,"tr",4),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.tableData)}}function Ge(o,s){1&o&&(t.TgZ(0,"thead"),t.TgZ(1,"tr"),t.TgZ(2,"th"),t._uU(3,"Item Name"),t.qZA(),t.TgZ(4,"th"),t._uU(5,"Item Description"),t.qZA(),t.TgZ(6,"th",3),t._uU(7,"Value per Quantity"),t.qZA(),t.TgZ(8,"th",3),t._uU(9,"Quantity"),t.qZA(),t.TgZ(10,"th",3),t._uU(11,"Total Value"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Action"),t.qZA(),t.qZA(),t.qZA())}function $e(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"th"),t._uU(2),t.qZA(),t.TgZ(3,"th"),t._uU(4),t.qZA(),t.TgZ(5,"th",3),t._uU(6),t.ALo(7,"number"),t.qZA(),t.TgZ(8,"th",3),t._uU(9),t.qZA(),t.TgZ(10,"th",3),t._uU(11),t.ALo(12,"number"),t.qZA(),t.TgZ(13,"th"),t.TgZ(14,"a",5),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).onActionView(a,"edit","plant")}),t._UZ(15,"span",6),t.qZA(),t.TgZ(16,"a",7),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).onActionView(a,"delete","plant")}),t._UZ(17,"span",8),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=s.$implicit;t.xp6(2),t.hij(" ",e.itemName," "),t.xp6(2),t.hij(" ",e.itemDescription," "),t.xp6(2),t.hij(" ",t.lcZ(7,5,e.valuePerQuantity)," "),t.xp6(3),t.hij(" ",e.quantity," "),t.xp6(2),t.hij(" ",t.lcZ(12,7,e.totalValue)," ")}}function He(o,s){if(1&o&&(t.TgZ(0,"tbody"),t.YNc(1,$e,18,9,"tr",4),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.tableData)}}function We(o,s){1&o&&(t.TgZ(0,"thead"),t.TgZ(1,"tr"),t.TgZ(2,"th"),t._uU(3,"Month"),t.qZA(),t.TgZ(4,"th"),t._uU(5,"Description"),t.qZA(),t.TgZ(6,"th",3),t._uU(7,"Stock Value"),t.qZA(),t.TgZ(8,"th",3),t._uU(9,"Agreed SI"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Remarks"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Action"),t.qZA(),t.qZA(),t.qZA())}function Xe(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"th"),t._uU(2),t.qZA(),t.TgZ(3,"th"),t._uU(4),t.qZA(),t.TgZ(5,"th",3),t._uU(6),t.ALo(7,"number"),t.qZA(),t.TgZ(8,"th",3),t._uU(9),t.ALo(10,"number"),t.qZA(),t.TgZ(11,"th"),t._uU(12),t.qZA(),t.TgZ(13,"th"),t.TgZ(14,"a",5),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).onActionView(a,"edit","stock")}),t._UZ(15,"span",6),t.qZA(),t.TgZ(16,"a",7),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).onActionView(a,"delete","stock")}),t._UZ(17,"span",8),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=s.$implicit;t.xp6(2),t.hij(" ",e.month," "),t.xp6(2),t.hij(" ",e.description," "),t.xp6(2),t.hij(" ",t.lcZ(7,5,e.stockValue)," "),t.xp6(3),t.hij(" ",t.lcZ(10,7,e.agreedSi)," "),t.xp6(3),t.hij(" ",e.remark," ")}}function Ke(o,s){if(1&o&&(t.TgZ(0,"tbody"),t.YNc(1,Xe,18,9,"tr",4),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.tableData)}}let ti=(()=>{class o{constructor(){this.contents=!1,this.plant=!1,this.stock=!1,this.tableData=[],this.emitter=new t.vpe}ngOnInit(){}onActionView(e,i,n){this.emitter.emit({cmd:i,data:e,tbtype:n})}ngOnDestroy(){this.emitter.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-tables"]],inputs:{contents:"contents",plant:"plant",stock:"stock",tableData:"tableData"},outputs:{emitter:"emitter"},decls:8,vars:6,consts:[[1,"table-responsive","angular-bootstrap-table"],[1,"table","table-head-custom","table-vertical-center"],[4,"ngIf"],[2,"text-align","right"],[4,"ngFor","ngForOf"],["title","Edit Form Page",1,"btn","btn-primary","btn-cus","btn-sm","mx-1",3,"click"],[1,"flaticon-edit"],["title","Delete Form Page",1,"btn","btn-danger","btn-cus","btn-sm","mx-1",3,"click"],[1,"flaticon-delete"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"table",1),t.YNc(2,Ve,14,0,"thead",2),t.YNc(3,je,2,1,"tbody",2),t.YNc(4,Ge,14,0,"thead",2),t.YNc(5,He,2,1,"tbody",2),t.YNc(6,We,14,0,"thead",2),t.YNc(7,Ke,2,1,"tbody",2),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngIf",i.contents),t.xp6(1),t.Q6J("ngIf",i.tableData.length>0&&i.contents),t.xp6(1),t.Q6J("ngIf",i.plant),t.xp6(1),t.Q6J("ngIf",i.tableData.length>0&&i.plant),t.xp6(1),t.Q6J("ngIf",i.stock),t.xp6(1),t.Q6J("ngIf",i.tableData.length>0&&i.stock))},directives:[m.O5,m.sg],pipes:[m.JJ],styles:["table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]   .th[_ngcontent-%COMP%]{text-align:center}"]}),o})();function ei(o,s){1&o&&t._UZ(0,"hr")}function ii(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"app-tables",10),t.NdJ("emitter",function(n){return t.CHM(e),t.oxw(2).actionBtn(n)}),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"div",11),t.TgZ(4,"label",12),t._uU(5,"Total Sum Insured for Contents including FFF "),t.TgZ(6,"span",13),t._uU(7),t.ALo(8,"number"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("contents",!0)("tableData",e.contentsData),t.xp6(6),t.Oqu(t.lcZ(8,3,e.totalContent))}}function ni(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",9),t.TgZ(1,"div",1),t.TgZ(2,"div",4),t.TgZ(3,"label",5),t._uU(4,"Contents including FFF"),t.qZA(),t.qZA(),t.TgZ(5,"div",6),t.TgZ(6,"mat-slide-toggle",7),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().isContents=n})("change",function(){return t.CHM(e),t.oxw().toggleChange("contents")}),t.qZA(),t.qZA(),t.TgZ(7,"div",6),t.TgZ(8,"button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().add("contents",null,"Add")}),t._uU(9,"Add"),t.qZA(),t.qZA(),t.qZA(),t.YNc(10,ii,9,5,"div",2),t.qZA()}if(2&o){const e=t.oxw();t.xp6(6),t.Q6J("ngModel",e.isContents)("color",e.primary),t.xp6(4),t.Q6J("ngIf",e.isContents&&e.contentsData)}}function oi(o,s){1&o&&t._UZ(0,"hr")}function ai(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"app-tables",14),t.NdJ("emitter",function(n){return t.CHM(e),t.oxw(2).actionBtn(n)}),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"div",11),t.TgZ(4,"label",12),t._uU(5,"Total Sum Insured for Plants and Machinery "),t.TgZ(6,"span",13),t._uU(7),t.ALo(8,"number"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("plant",!0)("tableData",e.plantData),t.xp6(6),t.Oqu(t.lcZ(8,3,e.totalPlant))}}function ri(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",1),t.TgZ(2,"div",4),t.TgZ(3,"label",5),t._uU(4,"Plant and Machinery"),t.qZA(),t.qZA(),t.TgZ(5,"div",6),t.TgZ(6,"mat-slide-toggle",7),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().isPlant=n})("change",function(){return t.CHM(e),t.oxw().toggleChange("plants")}),t.qZA(),t.qZA(),t.TgZ(7,"div",6),t.TgZ(8,"button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().add("plants",null,"Add")}),t._uU(9,"Add"),t.qZA(),t.qZA(),t.qZA(),t.YNc(10,ai,9,5,"div",2),t.qZA()}if(2&o){const e=t.oxw();t.xp6(6),t.Q6J("ngModel",e.isPlant)("color",e.primary),t.xp6(4),t.Q6J("ngIf",e.isPlant&&e.plantData)}}function si(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"app-tables",15),t.NdJ("emitter",function(n){return t.CHM(e),t.oxw().actionBtn(n)}),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"div",11),t.TgZ(4,"label",12),t._uU(5,"Total Sum Insured for Stock "),t.TgZ(6,"span",13),t._uU(7),t.ALo(8,"number"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(9,"hr"),t.qZA()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("stock",!0)("tableData",e.stockData),t.xp6(6),t.Oqu(t.lcZ(8,3,e.totalStock))}}let ci=(()=>{class o{constructor(e,i,n,a,r,c,d,p,_){this.FireContentService=e,this.FirePLantService=i,this.FireStockService=n,this.modal=a,this.auth=r,this.cdf=c,this.globalService=d,this.riskService=p,this.alertService=_,this.isContents=!1,this.isPlant=!1,this.isStock=!1,this.default=0,this.primary="primary",this.totalContent=0,this.totalPlant=0,this.totalStock=0,this.tableData=[],this.contentsData=[],this.plantData=[],this.stockData=[],this.totalSI=0,this.productDetail={},this.riskId=1,this.totalEvent=new t.vpe}ngOnInit(){this.getFireContent(),this.getFirePlant(),this.getFireStock(),this.productDetail=this.globalService.tempFormData[P.T$]||{}}actionBtn(e){console.log(e),"delete"==e.cmd&&("content"==e.tbtype&&this.deleteFireContent(e.data.id),"plant"==e.tbtype&&this.deleteFirePlant(e.data.id),"stock"==e.tbtype&&this.deleteFireStock(e.data.id)),"edit"==e.cmd&&("content"==e.tbtype&&this.add("contents",e.data,"Edit"),"plant"==e.tbtype&&this.add("plants",e.data,"Edit"),"stock"==e.tbtype&&this.add("stock",e.data,"Edit"))}add(e,i,n){if("contents"==e){let a;a=this.modal.open(ot,{size:"xl",backdrop:!1}),a.componentInstance.type="Contents including FFF",a.componentInstance.pageType=n,a.componentInstance.riskId=this.riskId,a.componentInstance.data=i,a.result.then(()=>{},r=>{if(r&&(console.log("RESSSS",r),"save"==r.type)){let c=Object.assign(Object.assign({},r.data),{createdBy:this.auth.currentUserValue.id});console.log("postData",c),this.FireContentService.save(c).toPromise().then(d=>{d&&(console.log("getFireContent-RESSS",d),this.getFireContent(),this.contentsData.push(Object.assign(Object.assign({},c),{id:d})),this.cdf.detectChanges())})}})}if("plants"==e){let a;a=this.modal.open(ot,{size:"xl",backdrop:!1}),a.componentInstance.type="Plant and Machinery",a.componentInstance.pageType=n,a.componentInstance.riskId=this.riskId,a.componentInstance.data=i,a.result.then(()=>{},r=>{if(r&&(console.log("RESSSS",r),"save"==r.type)){let c=Object.assign(Object.assign({},r.data),{createdBy:this.auth.currentUserValue.id});console.log("postData",c),this.FirePLantService.save(c).toPromise().then(d=>{d&&(console.log("getFirePlant-RESSS",d),this.getFirePlant(),this.plantData.push(Object.assign(Object.assign({},c),{id:d})),this.cdf.detectChanges())})}})}if("stock"==e){let a;a=this.modal.open(ot,{size:"xl",backdrop:!1}),a.componentInstance.type="Stock",a.componentInstance.pageType=n,a.componentInstance.riskId=this.riskId,a.componentInstance.data=i,a.componentInstance.isStock=!0,a.result.then(()=>{},r=>{if(r&&(console.log("RESSSS",r),"save"==r.type)){let c=Object.assign(Object.assign({},r.data),{createdBy:this.auth.currentUserValue.id,description:r.data.itemDescription});console.log("postData",c),this.FireStockService.save(c).toPromise().then(d=>{d&&(console.log("getFirePlant-RESSS",d),this.getFireStock(),this.stockData.push(Object.assign(Object.assign({},c),{id:d})),this.cdf.detectChanges())})}})}}getFireContent(){this.riskService.getContent(this.riskId).toPromise().then(e=>{if(console.log("getFireContent-RESSS",e),e){if(this.contentsData=e,this.contentsData.length>0){this.isContents=!0,this.totalContent=0;for(let i of this.contentsData)console.log("TSET",this.totalContent),this.totalContent+=parseInt(i.totalValue)}this.calculateProposeStock(),this.cdf.detectChanges()}})}getFirePlant(){this.riskService.getPlant(this.riskId).toPromise().then(e=>{if(e){if(console.log("getFirePlant-RESSS",e),this.plantData=e,this.plantData.length>0){this.isPlant=!0,this.totalPlant=0;for(let i of this.plantData)this.totalPlant+=parseInt(i.totalValue)}this.calculateProposeStock(),this.cdf.detectChanges()}})}getFireStock(){this.riskService.getStock(this.riskId).toPromise().then(e=>{if(e){if(console.log("getFireStock-RESSS",e),this.stockData=e,this.stockData.length>0){this.isStock=!0,this.totalStock=0;for(let i of this.stockData)this.totalStock+=parseInt(i.stockValue);this.calculateProposeStock()}this.cdf.detectChanges()}})}calculateProposeStock(){this.totalSI=this.totalStock+this.totalContent+this.totalPlant,this.totalEvent.next(this.totalSI)}deleteFireContent(e){this.alertService.activate("Are you sure want to delete?","Warning Message").then(i=>{i&&this.FireContentService.delete(e).toPromise().then(n=>{n&&(this.getFireContent(),this.alertService.activate("This record was deleted","Success Message").then(a=>{}))})})}deleteFirePlant(e){this.alertService.activate("Are you sure want to delete?","Warning Message").then(i=>{this.FirePLantService.delete(e).toPromise().then(n=>{n&&(this.getFirePlant(),this.alertService.activate("This record was deleted","Success Message").then(a=>{}))})})}deleteFireStock(e){this.alertService.activate("Are you sure want to delete?","Warning Message").then(i=>{this.FireStockService.delete(e).toPromise().then(n=>{n&&(this.getFireStock(),this.alertService.activate("This record was deleted","Success Message").then(a=>{}))})})}toggleChange(e){if("contents"==e&&(this.isContents=this.isContents,!this.isContents&&this.contentsData.lenght>0))for(let i of this.contentsData)this.deleteFireContent(i.id);if("plants"==e&&(this.isPlant=this.isPlant,!this.isPlant&&this.plantData.lenght>0))for(let i of this.plantData)this.deleteFirePlant(i.id);if("stock"==e&&(this.isStock=this.isStock,!this.isStock&&this.stockData.lenght>0))for(let i of this.stockData)this.deleteFireStock(i.id)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Re),t.Y36(Qe),t.Y36(Ee),t.Y36(g.FF),t.Y36(N.e8),t.Y36(t.sBO),t.Y36(x.Q),t.Y36(it.U),t.Y36(I.c))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-calculated-building"]],inputs:{default:"default",riskId:"riskId"},outputs:{totalEvent:"totalEvent"},decls:18,vars:7,consts:[[1,"form-group"],[1,"row",2,"align-items","center"],[4,"ngIf"],["class","px5 py5",4,"ngIf"],[1,"col-sm-8"],[1,"col-sm-6","left-border-image"],[1,"col-sm-2"],[1,"toggle","ft-right",3,"ngModel","color","ngModelChange","change"],["type","button",1,"btn","btn-primary","btn-sm","mx-2","ft-right",3,"click"],[1,"px5","py5"],[3,"contents","tableData","emitter"],[1,"col-sm-12"],[1,"col-sm-12","col-form-label","tx-right"],[2,"margin-left","29px"],[3,"plant","tableData","emitter"],[3,"stock","tableData","emitter"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"div",1),t.YNc(2,ei,1,0,"hr",2),t.YNc(3,ni,11,3,"div",3),t.YNc(4,oi,1,0,"hr",2),t.YNc(5,ri,11,3,"div",2),t._UZ(6,"hr"),t.TgZ(7,"div"),t.TgZ(8,"div",1),t.TgZ(9,"div",4),t.TgZ(10,"label",5),t._uU(11,"Stock"),t.qZA(),t.qZA(),t.TgZ(12,"div",6),t.TgZ(13,"mat-slide-toggle",7),t.NdJ("ngModelChange",function(a){return i.isStock=a})("change",function(){return i.toggleChange("stock")}),t.qZA(),t.qZA(),t.TgZ(14,"div",6),t.TgZ(15,"button",8),t.NdJ("click",function(){return i.add("stock",null,"Add")}),t._uU(16,"Add"),t.qZA(),t.qZA(),t.qZA(),t.YNc(17,si,10,5,"div",2),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngIf","T-001"==i.productDetail.policyType),t.xp6(1),t.Q6J("ngIf","T-001"==i.productDetail.policyType),t.xp6(1),t.Q6J("ngIf","T-001"==i.productDetail.policyType),t.xp6(1),t.Q6J("ngIf","T-001"==i.productDetail.policyType),t.xp6(8),t.Q6J("ngModel",i.isStock)("color",i.primary),t.xp6(4),t.Q6J("ngIf",i.isStock&&i.stockData))},directives:[m.O5,Ye.Rr,l.JJ,l.On,ti],pipes:[m.JJ],styles:[".ft-right[_ngcontent-%COMP%]{float:right}.tx-right[_ngcontent-%COMP%]{text-align:right}"]}),o})();function li(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"small",6),t.NdJ("click",function(){return t.CHM(e),t.oxw().viewOther("other")}),t._uU(1,"(View Risk Detail)"),t.qZA()}}const Ct=function(){return{prefix:"",thousands:",",precision:0,allowNegative:!1,align:"left"}};function di(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"form",7),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().createRisk()}),t.TgZ(2,"div",8),t.TgZ(3,"div",9),t.TgZ(4,"div",10),t.TgZ(5,"div",11),t.TgZ(6,"label",12),t._uU(7,"Building Description"),t.qZA(),t.TgZ(8,"div",10),t._UZ(9,"textarea",13),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"div",10),t.TgZ(11,"div",11),t.TgZ(12,"label",12),t._uU(13,"Type of Building"),t.qZA(),t.TgZ(14,"div",10),t.TgZ(15,"ng-select",14),t.NdJ("change",function(){return t.CHM(e),t.oxw().calcuRate("child")}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"div",9),t.TgZ(17,"div",10),t.TgZ(18,"div",11),t.TgZ(19,"label",12),t._uU(20,"Occupation of Building"),t.qZA(),t.TgZ(21,"div",10),t.TgZ(22,"ng-select",15),t.NdJ("change",function(){return t.CHM(e),t.oxw().calcuRate()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(23,"div",10),t.TgZ(24,"div",11),t.TgZ(25,"label",12),t._uU(26,"Building Class"),t.qZA(),t.TgZ(27,"div",10),t.TgZ(28,"ng-select",16),t.NdJ("change",function(){return t.CHM(e),t.oxw().calcuRate()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(29,"div",9),t.TgZ(30,"div",10),t.TgZ(31,"div",11),t.TgZ(32,"label",12),t._uU(33,"Construction of Roof"),t.qZA(),t.TgZ(34,"div",10),t._UZ(35,"ng-select",17),t.qZA(),t.qZA(),t.qZA(),t.TgZ(36,"div",10),t.TgZ(37,"div",11),t.TgZ(38,"label",12),t._uU(39,"Construction of Walls"),t.qZA(),t.TgZ(40,"div",10),t._UZ(41,"ng-select",18),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(42,"div",9),t.TgZ(43,"div",10),t.TgZ(44,"div",11),t.TgZ(45,"label",12),t._uU(46,"Construction of Floor"),t.qZA(),t.TgZ(47,"div",10),t._UZ(48,"ng-select",19),t.qZA(),t.qZA(),t.qZA(),t.TgZ(49,"div",10),t.TgZ(50,"div",11),t.TgZ(51,"label",12),t._uU(52,"No. of Story of Building"),t.qZA(),t.TgZ(53,"div",10),t._UZ(54,"input",20),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(55,"div",9),t.TgZ(56,"div",10),t.TgZ(57,"div",11),t.TgZ(58,"label",12),t._uU(59,"Length in Feet"),t.qZA(),t.TgZ(60,"div",10),t._UZ(61,"input",21),t.qZA(),t.qZA(),t.qZA(),t.TgZ(62,"div",10),t.TgZ(63,"div",11),t.TgZ(64,"label",12),t._uU(65,"Height in Feet"),t.qZA(),t.TgZ(66,"div",10),t.TgZ(67,"input",22),t.NdJ("change",function(){return t.CHM(e),t.oxw().calcuSquare()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(68,"div",9),t.TgZ(69,"div",10),t.TgZ(70,"div",11),t.TgZ(71,"label",12),t._uU(72,"Width in Feet"),t.qZA(),t.TgZ(73,"div",10),t.TgZ(74,"input",23),t.NdJ("change",function(){return t.CHM(e),t.oxw().calcuSquare()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(75,"div",10),t.TgZ(76,"div",11),t.TgZ(77,"label",12),t._uU(78,"Total Square in Feet"),t.qZA(),t.TgZ(79,"div",10),t._UZ(80,"input",24),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(81,"div",9),t.TgZ(82,"div",10),t.TgZ(83,"div",11),t.TgZ(84,"label",12),t._uU(85,"Year of Construction"),t.qZA(),t.TgZ(86,"div",10),t._UZ(87,"input",25),t.qZA(),t.qZA(),t.qZA(),t.TgZ(88,"div",10),t.TgZ(89,"div",11),t.TgZ(90,"label",12),t._uU(91,"Special Decoration"),t.qZA(),t.TgZ(92,"div",10),t.TgZ(93,"mat-radio-group",26),t.TgZ(94,"mat-radio-button",27),t._uU(95,"Yes "),t.qZA(),t.TgZ(96,"mat-radio-button",27),t._uU(97,"No "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(98,"div",9),t.TgZ(99,"div",10),t.TgZ(100,"div",11),t.TgZ(101,"label",12),t._uU(102,"Proposed Sum Insured"),t.qZA(),t.TgZ(103,"div",10),t._UZ(104,"input",28),t.qZA(),t.qZA(),t.qZA(),t.TgZ(105,"div",10),t.TgZ(106,"div",11),t.TgZ(107,"label",12),t._uU(108,"Proposed Stock Value"),t.qZA(),t.TgZ(109,"div",10),t._UZ(110,"input",29),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(111,"div",30),t.TgZ(112,"button",31),t.NdJ("click",function(){return t.CHM(e),t.oxw().calPremimun()}),t._uU(113,"Cancel"),t.qZA(),t.TgZ(114,"button",32),t._uU(115,"Save"),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.fireRiskform),t.xp6(8),t.ekj("is-invalid",e.isControlInvalid("buildingDescription"))("is-valid",e.isControlValid("buildingDescription")),t.xp6(6),t.ekj("is-invalid",e.isControlInvalid("typeOfBuilding"))("is-valid",e.isControlValid("typeOfBuilding")),t.Q6J("items",e.typeOfBuildingOption),t.xp6(7),t.ekj("is-invalid",e.isControlInvalid("occupationOfBuilding"))("is-valid",e.isControlValid("occupationOfBuilding")),t.Q6J("items",e.occupationOfBuildingOption),t.xp6(6),t.ekj("is-invalid",e.isControlInvalid("buildingClass"))("is-valid",e.isControlValid("buildingClass")),t.Q6J("items",e.buildingClassOption),t.xp6(7),t.ekj("is-invalid",e.isControlInvalid("constructionOfRoof"))("is-valid",e.isControlValid("constructionOfRoof")),t.Q6J("items",e.roofOption),t.xp6(6),t.ekj("is-invalid",e.isControlInvalid("constructionOfWall"))("is-valid",e.isControlValid("constructionOfWall")),t.Q6J("items",e.wallOption),t.xp6(7),t.ekj("is-invalid",e.isControlInvalid("constructionOfFloor"))("is-valid",e.isControlValid("constructionOfFloor")),t.Q6J("items",e.floorClassOption),t.xp6(6),t.ekj("is-invalid",e.isControlInvalid("storyOfBuilding"))("is-valid",e.isControlValid("storyOfBuilding")),t.xp6(7),t.ekj("is-invalid",e.isControlInvalid("length"))("is-valid",e.isControlValid("length")),t.xp6(6),t.ekj("is-invalid",e.isControlInvalid("height"))("is-valid",e.isControlValid("height")),t.xp6(7),t.ekj("is-invalid",e.isControlInvalid("width"))("is-valid",e.isControlValid("width")),t.xp6(6),t.ekj("is-invalid",e.isControlInvalid("totalSquareFoot"))("is-valid",e.isControlValid("totalSquareFoot")),t.xp6(7),t.ekj("is-invalid",e.isControlInvalid("yearOfConstruction"))("is-valid",e.isControlValid("yearOfConstruction")),t.xp6(7),t.Q6J("value",!0),t.xp6(2),t.Q6J("value",!1),t.xp6(8),t.ekj("is-invalid",e.isControlInvalid("sumInsure"))("is-valid",e.isControlValid("sumInsure")),t.Q6J("options",t.DdM(71,Ct)),t.xp6(6),t.ekj("is-invalid",e.isControlInvalid("proposeStockValue"))("is-valid",e.isControlValid("proposeStockValue")),t.Q6J("options",t.DdM(72,Ct))}}function ui(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",8),t._UZ(1,"app-surrounding-building",33),t.TgZ(2,"app-calculated-building",34),t.NdJ("totalEvent",function(n){return t.CHM(e),t.oxw().changeTotal(n)}),t.qZA(),t.qZA(),t.TgZ(3,"div",30),t.TgZ(4,"button",31),t.NdJ("click",function(){return t.CHM(e),t.oxw().calPremimun()}),t._uU(5,"Cancel"),t.qZA(),t.TgZ(6,"button",35),t.NdJ("click",function(){return t.CHM(e),t.oxw().calPremimun()}),t._uU(7,"Save"),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("riskId",e.oldData.id),t.xp6(1),t.Q6J("riskId",e.oldData.id)("default",e.buildingSi)}}let gi=(()=>{class o{constructor(e,i,n,a,r,c,d,p,_,T,v){this.modalService=e,this.modal=i,this.masterDataService=n,this.cdf=a,this.fireRiskService=r,this.auth=c,this.PremiumRateService=d,this.prodService=p,this.globalService=_,this.fireRiskRate=T,this.firebuildingService=v,this.typeOfBuildingOption=[],this.occupationOfBuildingOption=[],this.occupationOfBuildingOptions=[],this.buildingClassOption=[],this.roofOption=[],this.wallOption=[],this.floorClassOption=[],this.premiumRateOption=[],this.type="create",this.resourcesId="",this.oldData={},this.premiumAmt="",this.viewPage="form",this.buildingSi=0,this.riskSi=0,this.otherSi=0,this.fireRate=0,this.productDetail={},this.fireContentSi=0,this.firePlatSi=0,this.fireStockSi=0}ngOnInit(){this.loadForm(),this.getBuildingClass(),this.getBuildingType(),this.getBuildingOccupation(),this.getRoof(),this.getWall(),this.getFloor(),this.productDetail=this.globalService.tempFormData[P.T$]||{},"create"==this.type?this.loadForm():(this.loadForm(this.oldData),this.oldData.id&&(this.getFirePlant(),this.getFireStock(),this.getFireContent()))}getBuildingClass(){this.masterDataService.getDataByType("BUILDING_CLASS").pipe((0,R.U)(e=>this.getFormatOpt(e))).toPromise().then(e=>{e&&(this.buildingClassOption=e,this.cdf.detectChanges())})}getBuildingType(){this.masterDataService.getDataByType("BUILDING_TYPE").pipe((0,R.U)(e=>this.getFormatOpt(e))).toPromise().then(e=>{e&&(this.typeOfBuildingOption=e,this.cdf.detectChanges())})}getRoof(){this.masterDataService.getDataByType("CONSTRUCTION_ROOF").pipe((0,R.U)(e=>this.getFormatOpt(e))).toPromise().then(e=>{e&&(this.roofOption=e,this.cdf.detectChanges())})}getWall(){this.masterDataService.getDataByType("CONSTRUCTION_WALL").pipe((0,R.U)(e=>this.getFormatOpt(e))).toPromise().then(e=>{e&&(this.wallOption=e,this.cdf.detectChanges())})}getFloor(){this.masterDataService.getDataByType("CONSTRUCTION_FLOOR").pipe((0,R.U)(e=>this.getFormatOpt(e))).toPromise().then(e=>{e&&(this.floorClassOption=e,this.cdf.detectChanges())})}getBuildingOccupation(){this.masterDataService.getDataByType("BUILDING_OCCUPATION").pipe((0,R.U)(e=>this.getFormatOpt(e))).toPromise().then(e=>{if(e){this.occupationOfBuildingOptions=e;let i=this.fireRiskform.value.occupationOfBuilding,n=this.fireRiskform.value.typeOfBuilding;i&&n&&(this.occupationOfBuildingOption=this.occupationOfBuildingOptions.filter(r=>r.parent==n),this.occupationOfBuildingOption.findIndex(r=>r.code==i)<0&&this.fireRiskform.controls.occupationOfBuilding.setValue(null)),this.cdf.detectChanges()}})}getFormatOpt(e){return e.map(i=>({code:i.codeId,value:i.codeName||i.codeValue,parent:i.parentId}))}calcuRate(e){let i=this.fireRiskform.value.buildingClass,n=this.fireRiskform.value.occupationOfBuilding,a=this.fireRiskform.value.typeOfBuilding;"child"==e&&(this.occupationOfBuildingOption=this.occupationOfBuildingOptions.filter(c=>c.parent==a),this.occupationOfBuildingOption.findIndex(c=>c.code==n)<0&&this.fireRiskform.controls.occupationOfBuilding.setValue(null)),i&&n&&a&&this.getPremiumRate()}getPremiumRate(){this.PremiumRateService.getPremiumRate(this.fireRiskform.value.buildingClass,this.fireRiskform.value.occupationOfBuilding,this.fireRiskform.value.typeOfBuilding).toPromise().then(a=>{a&&this.fireRiskform.controls.rate.setValue(a.premiumRate)})}loadForm(e){this.fireRiskform=new l.cw({buildingClass:new l.NI(e?e.buildingClass:"",l.kI.required),buildingDescription:new l.NI(e?e.buildingDescription:""),occupationOfBuilding:new l.NI(e?e.occupationOfBuilding:"",l.kI.required),typeOfBuilding:new l.NI(e?e.typeOfBuilding:"",l.kI.required),constructionOfFloor:new l.NI(e?e.constructionOfFloor:""),constructionOfRoof:new l.NI(e?e.constructionOfRoof:""),constructionOfWall:new l.NI(e?e.constructionOfWall:""),height:new l.NI(e?e.height:""),length:new l.NI(e?e.length:""),width:new l.NI(e?e.width:""),rate:new l.NI(e?e.rate:""),specialDecoration:new l.NI(e?e.specialDecoration:""),storyOfBuilding:new l.NI(e?e.storyOfBuilding:""),sumInsure:new l.NI(e?e.sumInsure:""),totalSquareFoot:new l.NI(e?e.totalSquareFoot:""),yearOfConstruction:new l.NI(e?e.yearOfConstruction:""),proposeStockValue:new l.NI(e?e.proposeStockValue:0),buildingSi:new l.NI(e?e.buildingSi:0),riskSi:new l.NI(e?e.riskSi:0)}),this.riskSi=e?e.riskSi:0,this.buildingSi=e?e.buildingSi:0;let i=this.fireRiskform.value.occupationOfBuilding,n=this.fireRiskform.value.typeOfBuilding;i&&n&&this.occupationOfBuildingOptions.length>0&&(this.occupationOfBuildingOption=this.occupationOfBuildingOptions.filter(r=>r.parent==n),this.occupationOfBuildingOption.findIndex(r=>r.code==i)<0&&this.fireRiskform.controls.occupationOfBuilding.setValue(null))}createRisk(e){if(this.fireRiskform.invalid)return(0,tt.w)(this.fireRiskform),!0;let i=this.fireRiskform.getRawValue(),n=Object.assign(Object.assign(Object.assign({},this.oldData),i),{id:this.oldData.id,buildingSi:this.buildingSi,riskSi:this.riskSi,resourceData:{agentId:this.auth.currentUserValue.id||1,customerId:this.prodService.creatingCustomer.customerId||1,policyNumber:null,premium:(Number(this.premiumAmt.split(" ")[0].split(",").join(""))||0)+"",premiumView:this.premiumAmt,productId:this.prodService.createingProd.id,quotationId:this.prodService.referenceID,leadId:this.prodService.creatingLeadId||null,resourceId:this.resourcesId,type:this.prodService.type},resourceId:this.resourcesId});n.id?this.fireRiskService.updateNoID(n).toPromise().then(a=>{a&&(this.oldData=Object.assign({},n),this.viewPage="other",e&&this.modalService.dismissAll({data:n,type:"save"}))}):this.fireRiskService.save(n).toPromise().then(a=>{a&&(n.id=a,this.oldData=Object.assign({},n),this.viewPage="other",e&&this.modal.dismiss({data:n,type:"save"}))})}viewOther(e){this.viewPage!=e&&(this.viewPage=e)}dismissModal(){this.modal.dismiss()}isControlValid(e){const i=this.fireRiskform.controls[e];return i.valid&&(i.dirty||i.touched)}isControlInvalid(e){const i=this.fireRiskform.controls[e];return i.invalid&&(i.dirty||i.touched)}controlHasError(e,i){const n=this.fireRiskform.controls[i];return n.hasError(e)&&(n.dirty||n.touched)}isControlTouched(e){const i=this.fireRiskform.controls[e];return i.dirty||i.touched}calcuSquare(){let e=this.fireRiskform.controls.width.value,i=this.fireRiskform.controls.height.value;e*i&&this.fireRiskform.controls.totalSquareFoot.setValue(e*i)}calBuildingSi(){return(0,h.mG)(this,void 0,void 0,function*(){this.buildingSi=0;let e=this.oldData.sumInsure/this.oldData.totalSquareFoot,i={classNo:this.oldData.buildingClass,floorCd:this.oldData.constructionOfFloor,roofCd:this.oldData.constructionOfRoof,wallCd:this.oldData.constructionOfWall,year:this.oldData.yearOfConstruction},n=yield this.fireRiskRate.getMany(i).toPromise(),a=e;if(n){let r=n.limitedPae;a=e>r?r:e}this.buildingSi=a*this.oldData.totalSquareFoot,0==this.otherSi&&(this.otherSi=this.fireContentSi+this.firePlatSi+this.fireStockSi),this.riskSi=this.otherSi+this.buildingSi,this.oldData&&(this.oldData.buildingSi=this.buildingSi,this.oldData.riskSi=this.riskSi)})}changeTotal(e){this.otherSi=0,this.otherSi=e}calPremimun(){return(0,h.mG)(this,void 0,void 0,function*(){if(console.log("rateData,rate1,rate2,",this.oldData),this.oldData.id){"T-001"==this.productDetail.policyType?yield this.calBuildingSi():(this.riskSi=this.oldData.proposeStockValue,this.oldData.riskSi=this.riskSi);let e=0,i=this.oldData.rate,n=yield this.firebuildingService.getMaxRate(this.oldData.id).toPromise(),a=n?n.rate:0;e=this.oldData.specialDecoration?1.3*i>a?1.3*i:(1.3*i+a)/2:i>a?i:(i+a)/2,this.oldData.premium=this.globalService.calculateDecimal(this.oldData.riskSi*(e/100)),this.createRisk(!0)}else this.modal.dismiss()})}getFireContent(){this.fireRiskService.getContent(this.oldData.id).toPromise().then(e=>{e&&(this.fireContentSi=0,e.forEach(i=>{this.fireContentSi+=parseFloat(i.totalValue)}))})}getFirePlant(){this.fireRiskService.getPlant(this.oldData.id).toPromise().then(e=>{e&&(this.firePlatSi=0,e.forEach(i=>{this.firePlatSi+=parseFloat(i.totalValue)}))})}getFireStock(){this.fireRiskService.getStock(this.oldData.id).toPromise().then(e=>{e&&(this.fireStockSi=0,e.forEach(i=>{this.fireStockSi+=parseFloat(i.stockValue)}))})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g.FF),t.Y36(g.Kz),t.Y36(et.D),t.Y36(t.sBO),t.Y36(it.U),t.Y36(N.e8),t.Y36(ht),t.Y36(F.f),t.Y36(x.Q),t.Y36(Te),t.Y36(nt))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-risk-detail"]],inputs:{oldData:"oldData"},decls:8,vars:3,consts:[[1,"modal-content"],[1,"modal-header"],["id","example-modal-sizes-title-lg",1,"modal-title","h4","left-border-image"],["style","text-decoration: underline;cursor: pointer;",3,"click",4,"ngIf"],[4,"ngIf","ngIfElse"],["OtherBuilding",""],[2,"text-decoration","underline","cursor","pointer",3,"click"],["action","#",1,"form",3,"formGroup","ngSubmit"],[1,"overlay","overlay-block","cursor-default","modal-body"],[1,"row",2,"align-items","center"],[1,"col-md-6"],[1,"form-group","row"],[1,"col-md-4","col-form-label"],["type","text","name","buildingDescription","autocomplete","off","formControlName","buildingDescription",1,"form-control","form-control-sm"],["bindLabel","value","bindValue","code","formControlName","typeOfBuilding",1,"ng-custom-select",3,"items","change"],["bindLabel","value","bindValue","code","formControlName","occupationOfBuilding",1,"ng-custom-select",3,"items","change"],["bindLabel","value","bindValue","code","formControlName","buildingClass",1,"ng-custom-select",3,"items","change"],["bindLabel","value","bindValue","code","formControlName","constructionOfRoof",1,"ng-custom-select",3,"items"],["bindLabel","value","bindValue","code","formControlName","constructionOfWall",1,"ng-custom-select",3,"items"],["bindLabel","value","bindValue","code","formControlName","constructionOfFloor",1,"ng-custom-select",3,"items"],["type","number","name","storyOfBuilding","autocomplete","off","formControlName","storyOfBuilding",1,"form-control","form-control-sm"],["type","number","name","length","autocomplete","off","formControlName","length",1,"form-control","form-control-sm"],["type","number","name","height","autocomplete","off","formControlName","height",1,"form-control","form-control-sm",3,"change"],["type","number","name","width","autocomplete","off","formControlName","width",1,"form-control","form-control-sm",3,"change"],["type","number","name","totalSquareFoot","autocomplete","off","formControlName","totalSquareFoot",1,"form-control","form-control-sm"],["type","number","name","yearOfConstruction","autocomplete","off","formControlName","yearOfConstruction",1,"form-control","form-control-sm"],["formControlName","specialDecoration",1,"col-8"],[1,"mx-1",3,"value"],["type","tel","currencyMask","","name","sumInsure","autocomplete","off","formControlName","sumInsure",1,"form-control","form-control-sm",3,"options"],["type","tel","currencyMask","","name","proposeStockValue","autocomplete","off","formControlName","proposeStockValue",1,"form-control","form-control-sm",3,"options"],[1,"modal-footer"],["type","button",1,"btn","btn-light","btn-elevate","mr-2",3,"click"],["type","submit",1,"btn","btn-primary","btn-elevate"],[3,"riskId"],[3,"riskId","default","totalEvent"],["type","button",1,"btn","btn-primary","btn-elevate",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._uU(3," Fire Risk "),t.YNc(4,li,2,0,"small",3),t.qZA(),t.qZA(),t.YNc(5,di,116,73,"ng-container",4),t.YNc(6,ui,8,3,"ng-template",null,5,t.W1O),t.qZA()),2&e){const n=t.MAs(7);t.xp6(4),t.Q6J("ngIf","form"!=i.viewPage),t.xp6(1),t.Q6J("ngIf","form"==i.viewPage)("ngIfElse",n)}},directives:[m.O5,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,K.w9,l.wV,Q.VQ,Q.U0,Zt.g1,Ie,ci],styles:[""]}),o})();function pi(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"tr"),t.TgZ(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"number"),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"number"),t.qZA(),t.TgZ(10,"td"),t.TgZ(11,"a",9),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().newData("edit",a)}),t._UZ(12,"span",10),t.qZA(),t.TgZ(13,"a",11),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().delete(a)}),t._UZ(14,"span",12),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&o){const e=s.$implicit;t.xp6(3),t.Oqu(e.buildingDescription),t.xp6(2),t.Oqu(t.lcZ(6,3,e.riskSi)),t.xp6(3),t.Oqu(t.lcZ(9,5,e.premium))}}let mi=(()=>{class o{constructor(e,i,n,a,r){this.globalFun=e,this.fireRiskService=i,this.modalService=n,this.cdf=a,this.alertService=r,this.actionEvent=new t.vpe,this.premiumAmt="",this.listData=[]}ngOnInit(){this.getRiskList()}nextPage(){this.globalFun.tempFormData[P.nm]=this.listData,this.actionEvent.emit({type:Z.V.NEXT})}backPage(){this.actionEvent.emit({type:Z.V.PREV})}getRiskList(){this.fireRiskService.getMany(this.resourcesId).toPromise().then(e=>{e&&(this.globalFun.tempFormData[P.nm]=e,this.listData=e||[],this.cdf.detectChanges())})}newData(e,i){let n;n=this.modalService.open(gi,{size:"xl",backdrop:!1}),n.componentInstance.type=e,n.componentInstance.riskId=i?i.riskId:"",n.componentInstance.oldData=i||{},n.componentInstance.resourcesId=this.resourcesId,n.componentInstance.premiumAmt=this.premiumAmt,n.result.then(()=>{},a=>{if(a&&(console.log("RESSSS",a),"save"==a.type)){if(i){let r=this.listData.findIndex(c=>c.id==i.id);this.listData[r]=a.data}else this.listData.push(a.data);this.cdf.detectChanges()}})}delete(e){this.alertService.activate("Are you sure want to delete?","Warning Message").then(i=>{i&&this.fireRiskService.delete(e.id).toPromise().then(n=>{if(n){let a=this.listData.findIndex(r=>r.id==e.id);a>=0&&(this.listData.splice(a,1),this.cdf.detectChanges(),this.alertService.activate("This record was deleted","Success Message").then(r=>{}))}})})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(x.Q),t.Y36(it.U),t.Y36(g.FF),t.Y36(t.sBO),t.Y36(I.c))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-fire-risk"]],inputs:{product:"product",editData:"editData",resourcesId:"resourcesId"},outputs:{actionEvent:"actionEvent"},decls:24,vars:1,consts:[[1,"form-group"],["type","button",1,"btn","btn-primary","mx-2",3,"click"],[1,"table-responsive","angular-bootstrap-table"],[1,"table","table-head-custom","table-vertical-center"],[4,"ngFor","ngForOf"],[1,"row","mt-3"],[1,"col-sm-6","mx-auto"],[1,"btn","btn-block","btn-secondary",3,"click"],[1,"btn","btn-block","btn-primary",3,"click"],["title","Edit",1,"btn","btn-primary","btn-cus","btn-sm","mx-1",3,"click"],[1,"flaticon-edit"],["title","Delete",1,"btn","btn-danger","btn-cus","btn-sm","mx-1",3,"click"],[1,"flaticon-delete"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"button",1),t.NdJ("click",function(){return i.newData("add")}),t._uU(2,"Add New Data"),t.qZA(),t.qZA(),t.TgZ(3,"div",2),t.TgZ(4,"table",3),t.TgZ(5,"thead"),t.TgZ(6,"tr"),t.TgZ(7,"th"),t._uU(8,"Building Description"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Sum Insured"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Premium "),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Action"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"tbody"),t.YNc(16,pi,15,7,"ng-container",4),t.qZA(),t.qZA(),t.qZA(),t.TgZ(17,"div",5),t.TgZ(18,"div",6),t.TgZ(19,"button",7),t.NdJ("click",function(){return i.backPage()}),t._uU(20," Previous "),t.qZA(),t.qZA(),t.TgZ(21,"div",6),t.TgZ(22,"button",8),t.NdJ("click",function(){return i.nextPage()}),t._uU(23," Save & Next "),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(16),t.Q6J("ngForOf",i.listData))},directives:[m.sg],pipes:[m.JJ],styles:[""]}),o})();var V=u(21177),U=u(44290),at=u(92118),_i=u(75103),rt=u(57730),B=u(78480),st=u(86031),ct=u(94115);let hi=(()=>{class o{constructor(e,i,n,a,r,c,d,p,_){this.fb=e,this.prodService=i,this.auth=n,this.fireService=a,this.globalFun=r,this.addOnQuoService=c,this.coverageQuoService=d,this.alertService=p,this.cdf=_,this.actionEvent=new t.vpe,this.toMinDate=null,this.fromMinDate=null,this.toMaxDate=null,this.fromMaxDate=null,this.dobMinDate=null,this.dobMaxDate=null,this.options=[],this.options2=[],this.addOns={},this.options3=[],this.options4=[],this.staticForm=this.fb.group({startDate:[null,l.kI.compose([l.kI.required])],endDate:[null,l.kI.compose([l.kI.required])],policyType:["T-001",l.kI.compose([l.kI.required])],policyDuration:[null,l.kI.compose([l.kI.required,l.kI.max(365)])],currency:["T-001",l.kI.compose([l.kI.required])]}),this.options3=Array.from({length:10},(T,v)=>v+1)}ngOnInit(){return(0,h.mG)(this,void 0,void 0,function*(){this.options=this.product.coverages,this.options2=this.product.addOns,this.refID=this.prodService.referenceID;let e=b().subtract(5,"days");this.fromMinDate=e.format("YYYY-MM-DD"),this.toMinDate=e.format("YYYY-MM-DD");let i=b().subtract(6,"years");this.dobMaxDate=i.format("YYYY-MM-DD");let n=b().subtract(75,"years");this.dobMinDate=n.format("YYYY-MM-DD"),this.getOldData()})}doValid(){let i=this.staticForm.controls.policyDuration.value;if(this.staticForm.controls.startDate.value&&i){let n=b(this.staticForm.controls.startDate.value).add(i,"days");this.toMaxDate={year:parseInt(n.format("YYYY")),month:parseInt(n.format("M")),day:parseInt(n.format("D"))},this.staticForm.controls.endDate.setValue(n)}}calcuteDay(){let e=b(this.staticForm.controls.startDate.value),i=b(this.staticForm.controls.endDate.value),n=e.diff(i,"days")+1;this.staticForm.controls.policyDuration.setValue(n)}get controls(){return this.staticForm.controls}isControlValid(e,i){const n=i.controls[e];return n.valid&&(n.dirty||n.touched)}isControlInvalid(e,i){const n=i.controls[e];return n.invalid&&(n.dirty||n.touched)}controlHasError(e,i,n){const a=n.controls[i];return a.hasError(e)&&(a.dirty||a.touched)}isControlTouched(e,i){const n=i.controls[e];return n.dirty||n.touched}nextPage(){if(this.staticForm.invalid)return(0,tt.w)(this.staticForm),!0;this.editId?this.saveData(this.editId):this.saveData()}backPage(){this.actionEvent.emit({type:Z.V.PREV})}saveData(e){const i=this.staticForm.value;let n={id:e||null,endDate:b(i.endDate).format("YYYY-MM-DD"),startDate:b(i.startDate).format("YYYY-MM-DD"),policyType:i.policyType,policyDuration:i.policyDuration,currency:i.currency,resourceData:{agentId:this.auth.currentUserValue.id||1,customerId:this.prodService.creatingCustomer.customerId||1,policyNumber:null,premium:(Number(this.premiumAmt.split(" ")[0].split(",").join(""))||0)+"",premiumView:this.premiumAmt,productId:this.prodService.createingProd.id,quotationId:this.prodService.referenceID,leadId:this.prodService.creatingLeadId||null,type:this.prodService.type},resourceId:this.resourcesId};e?this.fireService.updateNoID(n).toPromise().then(a=>{a&&(this.editId=a.id,this.globalFun.tempFormData[P.T$]=Object.assign({id:a.id},n),this.actionEvent.emit({type:Z.V.NEXT,data:Object.assign({},a)}))}).catch(a=>a):this.fireService.save(n).toPromise().then(a=>{a&&(this.editId=a.id,this.resourcesId=a.resourceId,this.globalFun.tempFormData[P.T$]=Object.assign({id:a.id},n),this.actionEvent.emit({type:Z.V.NEXT,data:Object.assign({},a)}))}).catch(a=>a)}getOldData(e=!1){if(console.log(this.resourcesId),this.resourcesId||this.refID){let i=e?this.refID:this.resourcesId||this.refID;if(!i)return!1;this.fireService.getOne(i).toPromise().then(n=>{n?(this.oldData=Object.assign(Object.assign({},n),{id:null}),this.editId=i==this.resourcesId?n.id:null,this.reloadOldValueForm()):!e&&i!=this.refID&&this.getOldData(!0)})}}reloadOldValueForm(){this.staticForm.patchValue({startDate:b(this.oldData.startDate),endDate:b(this.oldData.endDate),policyType:this.oldData.policyType,policyDuration:this.oldData.policyDuration,currency:this.oldData.currency}),this.cdf.detectChanges()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(l.qu),t.Y36(F.f),t.Y36(N.e8),t.Y36(_i.V),t.Y36(x.Q),t.Y36(G.D),t.Y36($.a),t.Y36(I.c),t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-fire-simple-page"]],inputs:{product:"product",editData:"editData",resourcesId:"resourcesId",premiumAmt:"premiumAmt"},outputs:{actionEvent:"actionEvent"},features:[t._Bn([{provide:g.DO,useClass:V.Wv},{provide:g.NG,useClass:V.ke},{provide:U._A,useClass:at.t7,deps:[U.Ad]},{provide:U.sG,useValue:S.Gs}])],decls:61,vars:16,consts:[["action","",3,"formGroup"],[1,"row",2,"align-items","center"],[1,"col-sm-6"],[1,"form-group","row"],[1,"col-sm-4","col-form-label"],[1,"input-group"],["matInput","","formControlName","startDate","readonly","",1,"form-control-sm","date-input",3,"min","max","matDatepicker","dateChange"],["matSuffix","",3,"for"],["disabled","false"],["picker",""],[3,"control"],["matInput","","formControlName","endDate","readonly","",1,"form-control-sm","date-input",3,"min","max","matDatepicker"],["disabled","true"],["picker2",""],[1,"col-md-6"],[1,"col-4","col-form-label"],[1,"col-6"],["type","text","name","policyDuration","formControlName","policyDuration",1,"form-control","form-control-sm",3,"change"],[1,"col-2"],[1,"example-section"],[1,"col-4"],["formControlName","policyType",1,"col-8"],[1,"mx-1",3,"value"],[1,"row"],["formControlName","currency",1,"col-8"],[1,"row","mt-3"],[1,"col-sm-6","mx-auto"],[1,"btn","btn-block","btn-secondary",3,"click"],[1,"btn","btn-block","btn-primary",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"form",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"label",4),t._uU(5,"Policy Effective Date"),t.qZA(),t.TgZ(6,"div",2),t.TgZ(7,"div",5),t.TgZ(8,"input",6),t.NdJ("dateChange",function(){return i.doValid()}),t.qZA(),t._UZ(9,"mat-datepicker-toggle",7),t._UZ(10,"mat-datepicker",8,9),t._UZ(12,"app-print-error",10),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"div",2),t.TgZ(14,"div",3),t.TgZ(15,"label",4),t._uU(16,"-"),t.qZA(),t.TgZ(17,"div",2),t.TgZ(18,"div",5),t._UZ(19,"input",11),t._UZ(20,"mat-datepicker-toggle",7),t._UZ(21,"mat-datepicker",12,13),t._UZ(23,"app-print-error",10),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(24,"div",1),t.TgZ(25,"div",14),t.TgZ(26,"div",3),t.TgZ(27,"label",15),t._uU(28,"Policy Duration"),t.qZA(),t.TgZ(29,"div",16),t.TgZ(30,"input",17),t.NdJ("change",function(){return i.doValid()}),t.qZA(),t._UZ(31,"app-print-error",10),t.qZA(),t._UZ(32,"div",18),t.qZA(),t.qZA(),t.TgZ(33,"div",2),t.TgZ(34,"section",19),t.TgZ(35,"div",3),t.TgZ(36,"label",20),t._uU(37,"Policy Type"),t.qZA(),t.TgZ(38,"mat-radio-group",21),t.TgZ(39,"mat-radio-button",22),t._uU(40,"Normal "),t.qZA(),t.TgZ(41,"mat-radio-button",22),t._uU(42,"Declaration "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(43,"div",23),t.TgZ(44,"div",2),t.TgZ(45,"section",19),t.TgZ(46,"div",3),t.TgZ(47,"label",20),t._uU(48,"Currency"),t.qZA(),t.TgZ(49,"mat-radio-group",24),t.TgZ(50,"mat-radio-button",22),t._uU(51,"MMK "),t.qZA(),t.TgZ(52,"mat-radio-button",22),t._uU(53,"USD "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(54,"div",25),t.TgZ(55,"div",26),t.TgZ(56,"button",27),t.NdJ("click",function(){return i.backPage()}),t._uU(57," Previous "),t.qZA(),t.qZA(),t.TgZ(58,"div",26),t.TgZ(59,"button",28),t.NdJ("click",function(){return i.nextPage()}),t._uU(60," Save & Next "),t.qZA(),t.qZA(),t.qZA()),2&e){const n=t.MAs(11),a=t.MAs(22);t.Q6J("formGroup",i.staticForm),t.xp6(8),t.Q6J("min",i.fromMinDate)("max",i.fromMaxDate)("matDatepicker",n),t.xp6(1),t.Q6J("for",n),t.xp6(3),t.Q6J("control",i.controls.startDate),t.xp6(7),t.Q6J("min",i.toMinDate)("max",i.toMaxDate)("matDatepicker",a),t.xp6(1),t.Q6J("for",a),t.xp6(3),t.Q6J("control",i.controls.endDate),t.xp6(8),t.Q6J("control",i.controls.policyDuration),t.xp6(8),t.Q6J("value","T-001"),t.xp6(2),t.Q6J("value","T-002"),t.xp6(9),t.Q6J("value","MMK"),t.xp6(2),t.Q6J("value","USD")}},directives:[l._Y,l.JL,l.sg,rt.Nt,l.Fj,B.hl,l.JJ,l.u,B.nW,st.R9,B.Mq,ct.n,Q.VQ,Q.U0],styles:[".input-group[_ngcontent-%COMP%]   .form-control-sm[_ngcontent-%COMP%]{background-color:#fff;background-clip:padding-box;border:1px solid #E4E6EF;padding:0 .75rem}.input-group[_ngcontent-%COMP%]   .mat-datepicker-toggle[_ngcontent-%COMP%]{position:absolute;right:5px}"]}),o})();const bt=`${M.N.apiUrl}/health/coverage-rate`;let fi=(()=>{class o extends k.i{constructor(e){super(e,bt),this.httpClient=e}getOne(e,i){return this.httpClient.get(bt+"?age="+e+"&cover="+i)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(z.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var Tt=u(93931);function vi(o,s){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.qZA()),2&o){const e=s.$implicit;t.xp6(2),t.Oqu(e.keyName),t.xp6(2),t.hij("",e.value," Units")}}function Zi(o,s){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"number"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.ALo(8,"number"),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"number"),t.qZA(),t.qZA()),2&o){const e=s.$implicit,i=s.index;t.xp6(2),t.Oqu(i+1),t.xp6(2),t.Oqu(t.lcZ(5,4,e.premium)),t.xp6(3),t.Oqu(t.lcZ(8,6,e.levy)),t.xp6(3),t.Oqu(t.lcZ(11,8,e.premium+e.levy))}}let Ci=(()=>{class o{constructor(e,i,n,a,r,c,d,p){this.globalFun=e,this.alertService=i,this.healthRateService=n,this.healthPayService=a,this.cdf=r,this.auth=c,this.prodService=d,this.numberPipe=p,this.actionEvent=new t.vpe,this.showData=[],this.schedule=[],this.tempSchedule=[],this.totalP=0,this.totalL=0}ngOnInit(){this.parentData=this.globalFun.tempFormData[P.Hu],this.parentData?(this.showData.push({keyName:this.parentData.basicCoverId,value:this.parentData.sumInsuredMainCover}),this.parentData.addOns&&"Critical illness"!=this.parentData.basicCoverId&&this.product.addOns.forEach(e=>{this.parentData.addOns[e.id+"opt"]&&this.showData.push({keyName:e.description,value:this.parentData.addOns[e.id+"value"]})}),this.calculateSchedule()):this.alertService.activate("This page cann't to show because there is no health product detail data. Please add health product detail in prodcut configuration","Warning")}calculateSchedule(){this.totalP=0,this.totalL=0;let e=300,n=Math.ceil(b().diff(this.parentData.dateOfBirth,"years",!0));this.healthRateService.getOne(n,this.parentData.basicCoverId).toPromise().then(a=>{if(a){if("lump"==this.parentData.paymentFrequency){let c=a.lumpSum*this.parentData.sumInsuredMainCover,d=e*this.parentData.sumInsuredMainCover;this.totalP=this.totalP+c,this.totalL=d,this.schedule.push({premium:c,coverage:this.parentData.basicCoverId,sumInsured:this.parentData.sumInsuredMainCover,levy:d}),e=0}else{let c=a.semiAnnual*this.parentData.sumInsuredMainCover,d=e*this.parentData.sumInsuredMainCover;this.totalP=this.totalP+c,this.totalP=this.totalP+c,this.totalL=d,this.schedule.push({premium:c,coverage:this.parentData.basicCoverId,sumInsured:this.parentData.sumInsuredMainCover,levy:d}),e=0,this.schedule.push({premium:c,coverage:this.parentData.basicCoverId,sumInsured:this.parentData.sumInsuredMainCover,levy:0})}let r=this.globalFun.calculateDecimal(this.totalP/12)+this.totalL;if(this.schedule.length>0)if("lump"==this.schedule[0].paymentTerm)this.tempSchedule=[{premium:this.totalP,levy:this.totalL,total:this.totalP+this.totalL}];else{let c=this.totalP/2;this.tempSchedule=[{premium:c,levy:this.totalL,total:c+this.totalL},{premium:c,levy:0,total:c}]}this.premiumAmt=this.numberPipe.transform(r)+" MMK / month",this.globalFun.paPremiumResult.next(this.premiumAmt),"Critical illness"==this.parentData.basicCoverId?this.cdf.detectChanges():this.calculateScheduleAddOn(n)}})}calculateScheduleAddOn(e){let i=0;this.product.addOns.forEach(n=>{if(this.parentData.addOns[n.id+"opt"]){let a=this.parentData.addOns[n.id+"value"];i+=1,this.healthRateService.getOne(e,n.description).toPromise().then(r=>{if(r)if("lump"==this.parentData.paymentFrequency){let c=r.lumpSum*a;this.totalP=this.totalP+c,this.schedule.push({premium:c,coverage:n.description,sumInsured:a,levy:0})}else{let c=r.semiAnnual*a;this.totalP=this.totalP+c,this.totalP=this.totalP+c,this.schedule.push({premium:c,coverage:n.description,sumInsured:a,levy:0}),this.schedule.push({premium:c,coverage:n.description,sumInsured:a,levy:0})}if(i==this.product.addOns.length){let c=this.globalFun.calculateDecimal(this.totalP/12)+this.totalL;this.premiumAmt=this.numberPipe.transform(c)+" MMK / month",this.globalFun.paPremiumResult.next(this.premiumAmt),this.cdf.detectChanges()}}).catch(r=>{i==this.product.addOns.length&&this.cdf.detectChanges()})}})}nextPage(){return(0,h.mG)(this,void 0,void 0,function*(){let e=this.globalFun.calculateDecimal(this.totalP/12)+this.totalL;this.premiumAmt=this.numberPipe.transform(e)+" MMK / month",this.globalFun.paPremiumResult.next(this.premiumAmt),this.healthPayService.deleteMany(this.resourcesId).pipe((0,W.z)(i=>{let n={resourceData:{agentId:this.auth.currentUserValue.id||1,customerId:this.prodService.creatingCustomer.customerId||1,policyNumber:null,premium:(Number(this.premiumAmt.split(" ")[0].split(",").join(""))||0)+"",premiumView:this.premiumAmt,productId:this.product.id,quotationId:this.prodService.referenceID,type:this.prodService.type},resourceId:this.resourcesId,requests:[]};return n.requests=this.schedule.map(a=>({paymentTerm:this.parentData.paymentFrequency,plan:this.parentData.basicCoverId,premium:a.premium,levy:a.levy,coverage:a.coverage,sumInsured:a.sumInsured,resourceId:this.resourcesId,total:a.levy+a.premium})),this.healthPayService.saveAll(n)})).toPromise().then(i=>{i&&this.actionEvent.emit({type:Z.V.NEXT})})})}backPage(){this.actionEvent.emit({type:Z.V.PREV})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(x.Q),t.Y36(I.c),t.Y36(fi),t.Y36(Tt.q),t.Y36(t.sBO),t.Y36(N.e8),t.Y36(F.f),t.Y36(m.JJ))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-health-quo"]],inputs:{product:"product",editData:"editData",resourcesId:"resourcesId",premiumAmt:"premiumAmt"},outputs:{actionEvent:"actionEvent"},decls:46,vars:11,consts:[[1,"table","table-bordered"],[4,"ngFor","ngForOf"],[1,""],[2,"text-align","right"],[1,"tbody-align"],[1,"row","mt-3"],[1,"col-sm-6","mx-auto"],[1,"btn","btn-block","btn-secondary",3,"click"],[1,"btn","btn-block","btn-primary",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"table",0),t.TgZ(1,"thead"),t.TgZ(2,"tr"),t.TgZ(3,"th"),t._uU(4," Coverages/Benefit "),t.qZA(),t.TgZ(5,"th"),t._uU(6," Sum Insured "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"tbody"),t.YNc(8,vi,5,2,"tr",1),t.qZA(),t.qZA(),t._UZ(9,"hr"),t.TgZ(10,"h5",2),t._uU(11,"Payment Schedules"),t.qZA(),t.TgZ(12,"table",0),t.TgZ(13,"thead"),t.TgZ(14,"tr"),t.TgZ(15,"th"),t._uU(16," No. of Installment "),t.qZA(),t.TgZ(17,"th",3),t._uU(18," Premium "),t.qZA(),t.TgZ(19,"th",3),t._uU(20," Levy "),t.qZA(),t.TgZ(21,"th",3),t._uU(22," Total "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(23,"tbody",4),t.YNc(24,Zi,12,10,"tr",1),t.qZA(),t.TgZ(25,"tfoot",4),t.TgZ(26,"tr"),t.TgZ(27,"td"),t.TgZ(28,"b"),t._uU(29,"Total"),t.qZA(),t.qZA(),t.TgZ(30,"td"),t._uU(31),t.ALo(32,"number"),t.qZA(),t.TgZ(33,"td"),t._uU(34),t.ALo(35,"number"),t.qZA(),t.TgZ(36,"td"),t._uU(37),t.ALo(38,"number"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(39,"div",5),t.TgZ(40,"div",6),t.TgZ(41,"button",7),t.NdJ("click",function(){return i.backPage()}),t._uU(42," Previous "),t.qZA(),t.qZA(),t.TgZ(43,"div",6),t.TgZ(44,"button",8),t.NdJ("click",function(){return i.nextPage()}),t._uU(45," Save & Next "),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(8),t.Q6J("ngForOf",i.showData),t.xp6(16),t.Q6J("ngForOf",i.tempSchedule),t.xp6(7),t.Oqu(t.lcZ(32,5,i.totalP)),t.xp6(3),t.Oqu(t.lcZ(35,7,i.totalL)),t.xp6(3),t.Oqu(t.lcZ(38,9,i.totalP+i.totalL)))},directives:[m.sg],pipes:[m.JJ],styles:[""]}),o})();var Pt=u(75291);function bi(o,s){1&o&&(t.TgZ(0,"mat-radio-button",18),t._uU(1,"Critical illness "),t.qZA()),2&o&&t.Q6J("value","Critical illness")}function Ti(o,s){if(1&o&&(t.TgZ(0,"option",23),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.Q6J("value",e),t.xp6(1),t.AsE("",e," Unit",e>1?"s":"","")}}function Pi(o,s){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"number"),t.qZA(),t.qZA()),2&o){const e=s.$implicit,i=t.oxw();t.xp6(2),t.Oqu(e.plan),t.xp6(2),t.AsE("",e.sumInsured," Unit",e.sumInsured>1?"s":"",""),t.xp6(2),t.Oqu(e.coverage),t.xp6(2),t.Oqu(i.policyTerm[e.paymentTerm]||e.paymentTerm),t.xp6(2),t.hij("",t.lcZ(11,6,e.premium)," ")}}let Oi=(()=>{class o{constructor(e,i,n,a,r,c,d,p,_,T,v){this.fb=e,this.prodService=i,this.healthService=n,this.alertService=a,this.healthPayService=r,this.auth=c,this.globalFun=d,this.coverageQuoService=p,this.addOnQuoService=_,this.numberPipe=T,this.cdf=v,this.actionEvent=new t.vpe,this.toMinDate=null,this.fromMinDate=null,this.toMaxDate=null,this.fromMaxDate=null,this.dobMinDate=null,this.dobMaxDate=null,this.options=[],this.options2=[],this.addOns={},this.options3=[],this.options4=[],this.optionArray=[],this.tempArray=[],this.totalResult={unit:0,premium:0},this.policyTerm={lump:"Lump Sum",semi_annually:"Semi-Annually"},this.totalP=0,this.currentAge=0,this.dob="",this.totalL=0,this.staticForm=this.fb.group({insuranceStartDate:[{value:null,disabled:!0},l.kI.compose([l.kI.required])],insuranceEndDate:[{value:null,disabled:!0},l.kI.compose([l.kI.required])],dateOfBirth:[{value:null,disabled:!0}],basicCoverId:[{value:"Health Insurance",disabled:!0},l.kI.compose([l.kI.required])],paymentFrequency:[{value:null,disabled:!0},l.kI.compose([l.kI.required])],sumInsuredMainCover:[{value:null,disabled:!0},l.kI.compose([l.kI.required])],medicalCardNo:[{value:null,disabled:!0}]}),this.options3=Array.from({length:10},(J,q)=>q+1)}ngOnInit(){return(0,h.mG)(this,void 0,void 0,function*(){this.refID=this.prodService.referenceID,this.refID||this.alertService.activate("This page cann't to show because there is no health product detail quotation data.","Warning"),this.options=this.product.coverages,this.options2=this.product.addOns;let e=b().subtract(5,"days");this.fromMinDate={year:parseInt(e.format("YYYY")),month:parseInt(e.format("M")),day:parseInt(e.format("D"))},this.toMinDate={year:parseInt(e.format("YYYY")),month:parseInt(e.format("M")),day:parseInt(e.format("D"))},this.parentData=this.getParent(),this.dob=this.parentData.date_of_birth,this.currentAge=Math.ceil(b().diff(this.dob,"years",!0)),this.getOldData()})}getParent(){if((0,S.cU)(this.product.config)){let e=JSON.parse(this.product.config),n=("quotation"!=this.prodService.type?e.application||[]:e.quotation||[]).find(a=>"life_insured_health"==a.tableName);return n&&this.globalFun.tempFormData[n.tableName+n.id]||null}return null}get controls(){return this.staticForm.controls}isControlValid(e,i){const n=i.controls[e];return n.valid&&(n.dirty||n.touched)}isControlInvalid(e,i){const n=i.controls[e];return n.invalid&&(n.dirty||n.touched)}controlHasError(e,i,n){const a=n.controls[i];return a.hasError(e)&&(a.dirty||a.touched)}isControlTouched(e,i){const n=i.controls[e];return n.dirty||n.touched}nextPage(){this.editId?this.saveData(this.editId):this.saveData()}backPage(){this.actionEvent.emit({type:Z.V.PREV})}getOldData(){if(this.refID){let e=this.refID;if(!e)return!1;this.editData.id?(console.log(this.editData),this.healthService.getOne(this.resourcesId).pipe((0,E.w)(n=>n?(0,C.of)(n):this.healthService.getOne(this.refID))).toPromise().then(n=>{n&&(this.oldData=Object.assign(Object.assign({},n),{id:null}),this.editId=n.resourceId==this.resourcesId?n.id:null,this.getQuoData(n.resourceId!=this.resourcesId),this.getAddOn(!0),this.reloadOldValueForm())})):this.healthService.getOne(e).toPromise().then(i=>{i&&(this.oldData=Object.assign(Object.assign({},i),{id:null}),this.editId=e==this.resourcesId?i.id:null,this.getQuoData(!0),this.getAddOn(!0),this.reloadOldValueForm())})}}saveData(e){const i=this.staticForm.getRawValue();if(!this.product.coverages.find(c=>c.description==i.basicCoverId))return this.alertService.activate("This page cann't to save because there is not match coverage in product detail. Please configuration the product detail","Warning"),!1;let a=this.globalFun.calculateDecimal(this.totalP/12)+this.totalL;this.premiumAmt=this.numberPipe.transform(a)+" MMK / month",this.globalFun.paPremiumResult.next(this.premiumAmt);let r={basicCoverId:i.basicCoverId,id:e||null,insuranceEndDate:i.insuranceEndDate,insuranceStartDate:i.insuranceStartDate,medicalCardNo:i.medicalCardNo,paymentFrequency:i.paymentFrequency,dateOfBirth:this.dob,resourceData:{agentId:this.auth.currentUserValue.id||1,customerId:this.prodService.creatingCustomer.customerId||1,policyNumber:null,premium:(Number(this.premiumAmt.split(" ")[0].split(",").join(""))||0)+"",premiumView:this.premiumAmt,productId:this.prodService.createingProd.id,quotationId:this.prodService.referenceID,leadId:this.prodService.creatingLeadId||null,type:this.prodService.type},resourceId:this.resourcesId,sumInsuredMainCover:i.sumInsuredMainCover};e?this.healthService.updateNoID(r).toPromise().then(c=>{c&&(this.editId=c.id,this.saveCoverAddon(),this.globalFun.tempFormData[P.Hu]=Object.assign(Object.assign({id:c.id},r),{addOns:this.addOns}),this.actionEvent.emit({type:Z.V.NEXT,data:Object.assign({},c)}))}).catch(c=>c):this.healthService.save(r).toPromise().then(c=>{c&&(this.editId=c.id,this.resourcesId=c.resourceId,this.saveCoverAddon(),this.saveSchdule().toPromise().then(d=>{}).catch(d=>d),this.globalFun.tempFormData[P.Hu]=Object.assign(Object.assign({id:c.id},r),{addOns:this.addOns}),this.actionEvent.emit({type:Z.V.NEXT,data:{res:c}}))}).catch(c=>c)}getQuoData(e=!1){this.healthPayService.getMany(e?this.refID:this.resourcesId).toPromise().then(n=>{n&&(this.optionArray=n,this.totalResult={unit:0,premium:0},this.totalP=0,this.totalL=0,this.optionArray.forEach(a=>{this.totalP+=a.premium,this.totalL+=a.levy,this.totalResult.unit+=a.sumInsured,this.totalResult.premium+=a.premium}),this.optionArray=this.optionArray.sort((a,r)=>a.coverage>r.coverage?1:-1),this.tempArray=this.optionArray.filter((a,r,c)=>r===c.findIndex(d=>d.coverage===a.coverage)),this.cdf.detectChanges())})}reloadOldValueForm(){this.staticForm.patchValue({insuranceStartDate:this.oldData.insuranceStartDate,insuranceEndDate:this.oldData.insuranceEndDate,dateOfBirth:this.oldData.dateOfBirth,basicCoverId:this.oldData.basicCoverId,paymentFrequency:this.oldData.paymentFrequency,sumInsuredMainCover:this.oldData.sumInsuredMainCover,medicalCardNo:this.oldData.medicalCardNo})}saveCoverage(){let e=this.staticForm.controls.basicCoverId.value,i=this.staticForm.controls.sumInsuredMainCover.value,n=this.product.coverages.find(a=>a.description==e);if(n){let a={coverageId:n.id,quotationNo:this.resourcesId,sumInsured:i,unit:null,premium:null};return this.coverageQuoService.deleteAll(this.resourcesId).pipe((0,E.w)(r=>this.coverageQuoService.save(a)))}return(0,C.of)([])}getAddOn(e=!1){return(0,h.mG)(this,void 0,void 0,function*(){if(this.resourcesId||this.refID){let i=!0,n=e?this.refID:this.resourcesId||this.refID;if(!n)return!1;for(const a of this.product.addOns){let r={};try{r=yield this.addOnQuoService.getOne(a.id,n).toPromise()}catch(c){}r?(i=!1,this.addOns[a.id+"opt"]=!!r.sumInsured,this.addOns[a.id+"value"]=r.sumInsured):(this.addOns[a.id+"opt"]=!1,this.addOns[a.id+"value"]=null)}}})}saveCoverAddon(){return(0,h.mG)(this,void 0,void 0,function*(){yield this.saveCoverage().toPromise(),yield this.saveAddOn().toPromise()})}saveSchdule(){return(0,H.D)(this.optionArray.map(e=>{let i={paymentTerm:e.paymentTerm,plan:e.plan,premium:e.premium,levy:e.levy,coverage:e.coverage,sumInsured:e.sumInsured,resourceId:this.resourcesId,total:e.total,resourceData:{agentId:this.auth.currentUserValue.id||1,customerId:this.prodService.creatingCustomer.customerId||1,policyNumber:null,premium:(Number(this.premiumAmt.split(" ")[0].split(",").join(""))||0)+"",premiumView:this.premiumAmt,productId:this.product.id,quotationId:this.prodService.referenceID,type:this.prodService.type}};return this.healthPayService.save(i)}))}saveAddOn(){return this.addOnQuoService.deleteAll(this.resourcesId).pipe((0,W.z)(e=>(0,H.D)(this.options2.map(i=>this.addOns[i.id+"opt"]?this.addOnQuoService.save({addonId:i.id,quotationNo:this.resourcesId,sumInsured:this.addOns[i.id+"value"],unit:null,premium:null}):(0,C.of)(null)))))}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(l.qu),t.Y36(F.f),t.Y36(Pt.e),t.Y36(I.c),t.Y36(Tt.q),t.Y36(N.e8),t.Y36(x.Q),t.Y36($.a),t.Y36(G.D),t.Y36(m.JJ),t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-simple-page-policy"]],inputs:{product:"product",editData:"editData",resourcesId:"resourcesId",premiumAmt:"premiumAmt"},outputs:{actionEvent:"actionEvent"},features:[t._Bn([{provide:g.DO,useClass:V.Wv},{provide:g.NG,useClass:V.ke},{provide:U._A,useClass:at.t7,deps:[U.Ad]},{provide:U.sG,useValue:S.Gs}])],decls:102,vars:23,consts:[["action","",3,"formGroup"],[1,"row",2,"align-items","center"],[1,"col-6"],[1,"form-group","row"],[1,"col-sm-4","col-form-label"],[1,"col-sm-6"],[1,"input-group"],["matInput","","formControlName","insuranceStartDate","readonly","",1,"form-control-sm","date-input",3,"min","max","matDatepicker"],["matSuffix","",3,"for"],["disabled","false"],["picker",""],[3,"control"],["matInput","","formControlName","insuranceEndDate","readonly","",1,"form-control-sm","date-input",3,"min","max","matDatepicker"],["disabled","true"],["picker2",""],[1,"example-section"],[1,"col-4"],["formControlName","basicCoverId",1,"col-8"],[1,"mx-1",3,"value"],["class","mx-1",3,"value",4,"ngIf"],[1,"row"],[1,"col-4","col-form-label"],["name","payment_frequency","formControlName","paymentFrequency",1,"form-control","form-control-sm"],[3,"value"],["value","lump"],["value","semi_annually"],["name","sumInsuredMainCover","formControlName","sumInsuredMainCover",1,"form-control","form-control-sm"],[3,"value",4,"ngFor","ngForOf"],["type","text","name","medicalCardNo","formControlName","medicalCardNo",1,"form-control","form-control-sm"],[1,"row","mt-3"],[1,"col-12"],[2,"border-bottom","1px solid rgba(0, 0, 0, 0.1)","padding","20px 0px"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],[1,"col-sm-6","mx-auto"],[1,"btn","btn-block","btn-secondary",3,"click"],[1,"btn","btn-block","btn-primary",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"form",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"label",4),t._uU(5,"Period of Insurance"),t.qZA(),t.TgZ(6,"div",5),t.TgZ(7,"div",6),t._UZ(8,"input",7),t._UZ(9,"mat-datepicker-toggle",8),t._UZ(10,"mat-datepicker",9,10),t._UZ(12,"app-print-error",11),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"div",2),t.TgZ(14,"div",3),t.TgZ(15,"label",4),t._uU(16,"-"),t.qZA(),t.TgZ(17,"div",5),t.TgZ(18,"div",6),t._UZ(19,"input",12),t._UZ(20,"mat-datepicker-toggle",8),t._UZ(21,"mat-datepicker",13,14),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(23,"div",1),t.TgZ(24,"div",2),t.TgZ(25,"section",15),t.TgZ(26,"div",3),t.TgZ(27,"label",16),t._uU(28,"Basic Cover"),t.qZA(),t.TgZ(29,"mat-radio-group",17),t.TgZ(30,"mat-radio-button",18),t._uU(31,"Health Insurance "),t.qZA(),t.YNc(32,bi,2,1,"mat-radio-button",19),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(33,"div",20),t.TgZ(34,"div",2),t.TgZ(35,"div",3),t.TgZ(36,"label",21),t._uU(37,"Payment Frequency"),t.qZA(),t.TgZ(38,"div",2),t.TgZ(39,"select",22),t.TgZ(40,"option",23),t._uU(41,"Please Select Payment Frequency"),t.qZA(),t.TgZ(42,"option",24),t._uU(43,"Lump Sum"),t.qZA(),t.TgZ(44,"option",25),t._uU(45,"Semi-Annually"),t.qZA(),t.qZA(),t._UZ(46,"app-print-error",11),t.qZA(),t.qZA(),t.qZA(),t.TgZ(47,"div",2),t.TgZ(48,"div",3),t.TgZ(49,"label",21),t._uU(50,"Sum Insured of Main Cover"),t.qZA(),t.TgZ(51,"div",2),t.TgZ(52,"select",26),t.TgZ(53,"option",23),t._uU(54,"Please Select Sum Insured"),t.qZA(),t.YNc(55,Ti,2,3,"option",27),t.qZA(),t._UZ(56,"app-print-error",11),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(57,"div",20),t.TgZ(58,"div",2),t.TgZ(59,"div",3),t.TgZ(60,"label",21),t._uU(61,"Medical Card No"),t.qZA(),t.TgZ(62,"div",2),t._UZ(63,"input",28),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(64,"div",29),t.TgZ(65,"div",30),t.TgZ(66,"h5",31),t._uU(67,"Product And Riders"),t.qZA(),t.TgZ(68,"table",32),t.TgZ(69,"thead"),t.TgZ(70,"tr"),t.TgZ(71,"th"),t._uU(72," Plan "),t.qZA(),t.TgZ(73,"th"),t._uU(74," Sum Assured "),t.qZA(),t.TgZ(75,"th"),t._uU(76," Coverage Term "),t.qZA(),t.TgZ(77,"th"),t._uU(78," Payment Term "),t.qZA(),t.TgZ(79,"th"),t._uU(80," Premium "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(81,"tbody"),t.YNc(82,Pi,12,8,"tr",33),t.qZA(),t.TgZ(83,"tfoot"),t.TgZ(84,"tr"),t.TgZ(85,"td"),t.TgZ(86,"b"),t._uU(87,"Total"),t.qZA(),t.qZA(),t.TgZ(88,"td"),t._uU(89),t.qZA(),t._UZ(90,"td"),t._UZ(91,"td"),t.TgZ(92,"td"),t._uU(93),t.ALo(94,"number"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(95,"div",29),t.TgZ(96,"div",34),t.TgZ(97,"button",35),t.NdJ("click",function(){return i.backPage()}),t._uU(98," Previous "),t.qZA(),t.qZA(),t.TgZ(99,"div",34),t.TgZ(100,"button",36),t.NdJ("click",function(){return i.nextPage()}),t._uU(101," Save & Next "),t.qZA(),t.qZA(),t.qZA()),2&e){const n=t.MAs(11),a=t.MAs(22);t.Q6J("formGroup",i.staticForm),t.xp6(8),t.Q6J("min",i.fromMinDate)("max",i.fromMaxDate)("matDatepicker",n),t.xp6(1),t.Q6J("for",n),t.xp6(3),t.Q6J("control",i.controls.insuranceStartDate),t.xp6(7),t.Q6J("min",i.toMinDate)("max",i.toMaxDate)("matDatepicker",a),t.xp6(1),t.Q6J("for",a),t.xp6(10),t.Q6J("value","Health Insurance"),t.xp6(2),t.Q6J("ngIf",i.currentAge<61),t.xp6(8),t.Q6J("value",null),t.xp6(6),t.Q6J("control",i.controls.paymentFrequency),t.xp6(7),t.Q6J("value",null),t.xp6(2),t.Q6J("ngForOf",i.options3),t.xp6(1),t.Q6J("control",i.controls.sumInsuredMainCover),t.xp6(26),t.Q6J("ngForOf",i.tempArray),t.xp6(7),t.AsE("",i.totalResult.unit," Unit",i.totalResult.unit>1?"s":"",""),t.xp6(4),t.Oqu(t.lcZ(94,21,i.totalResult.premium))}},directives:[l._Y,l.JL,l.sg,rt.Nt,l.Fj,B.hl,l.JJ,l.u,B.nW,st.R9,B.Mq,ct.n,Q.VQ,Q.U0,m.O5,l.EJ,l.YN,l.Kr,m.sg],pipes:[m.JJ],styles:[".input-group[_ngcontent-%COMP%]   .form-control-sm[_ngcontent-%COMP%]{background-color:#fff;background-clip:padding-box;border:1px solid #E4E6EF;padding:0 .75rem}.input-group[_ngcontent-%COMP%]   .mat-datepicker-toggle[_ngcontent-%COMP%]{position:absolute;right:5px}"]}),o})();function Ai(o,s){if(1&o&&(t.TgZ(0,"option",22),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.Q6J("value",e),t.xp6(1),t.AsE("",e," Unit",e>1?"s":"","")}}function yi(o,s){if(1&o&&(t.TgZ(0,"option",22),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.Q6J("value",e),t.xp6(1),t.AsE("",e," Unit",e>1?"s":"","")}}const Ot=function(){return{standalone:!0}};function xi(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",2),t.TgZ(1,"div",19),t.TgZ(2,"label",42),t._uU(3,"Sum Insured"),t.qZA(),t.TgZ(4,"div",2),t.TgZ(5,"select",43),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw().$implicit;return t.oxw(2).addOns[a.id+"value"]=n}),t.YNc(6,yi,2,3,"option",26),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(5),t.Q6J("ngModel",i.addOns[e.id+"value"])("ngModelOptions",t.DdM(3,Ot)),t.xp6(1),t.Q6J("ngForOf",i.options4)}}function Di(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",37),t.TgZ(1,"label",20),t._uU(2),t.qZA(),t.TgZ(3,"div",38),t.TgZ(4,"span",39),t.TgZ(5,"label"),t.TgZ(6,"input",40),t.NdJ("ngModelChange",function(n){const r=t.CHM(e).$implicit;return t.oxw(2).addOns[r.id+"opt"]=n}),t.qZA(),t._UZ(7,"span"),t.qZA(),t.qZA(),t.qZA(),t.YNc(8,xi,7,4,"div",41),t.qZA()}if(2&o){const e=s.$implicit,i=t.oxw(2);t.xp6(2),t.Oqu(e.description),t.xp6(4),t.s9C("name",e.description),t.Q6J("ngModel",i.addOns[e.id+"opt"])("ngModelOptions",t.DdM(5,Ot)),t.xp6(2),t.Q6J("ngIf",i.addOns[e.id+"opt"])}}function wi(o,s){if(1&o&&(t.ynx(0),t.TgZ(1,"div",33),t.TgZ(2,"div",34),t.TgZ(3,"h5",35),t._uU(4,"Optional Cover"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(5,"div",19),t.TgZ(6,"div",34),t.YNc(7,Di,9,6,"div",36),t.qZA(),t.qZA(),t.BQk()),2&o){const e=t.oxw();t.xp6(7),t.Q6J("ngForOf",e.options2)}}const Ii={addon_1634010770155:$t,coverage_1634010995936:ue,static_1634018514043:(()=>{class o{constructor(e,i,n,a,r,c,d,p,_){this.fb=e,this.prodService=i,this.auth=n,this.healthService=a,this.globalFun=r,this.addOnQuoService=c,this.coverageQuoService=d,this.alertService=p,this.cdf=_,this.actionEvent=new t.vpe,this.toMinDate=null,this.fromMinDate=null,this.toMaxDate=null,this.fromMaxDate=null,this.dobMinDate=null,this.dobMaxDate=null,this.options=[],this.options2=[],this.addOns={},this.options3=[],this.options4=[],this.currentAge=0,this.dob="",this.staticForm=this.fb.group({insuranceStartDate:[null,l.kI.compose([l.kI.required])],insuranceEndDate:[null,l.kI.compose([l.kI.required])],dateOfBirth:[null],basicCoverId:["Health Insurance",l.kI.compose([l.kI.required])],paymentFrequency:[null,l.kI.compose([l.kI.required])],sumInsuredMainCover:[null,l.kI.compose([l.kI.required])],medicalCardNo:[null]}),this.options3=Array.from({length:10},(T,v)=>v+1)}ngOnInit(){return(0,h.mG)(this,void 0,void 0,function*(){this.options=this.product.coverages,this.options2=this.product.addOns,this.refID=this.prodService.referenceID;let e=b().subtract(5,"days");this.fromMinDate=e.format("YYYY-MM-DD"),this.toMinDate=e.format("YYYY-MM-DD"),this.parentData=this.getParent(),this.dob=this.parentData.date_of_birth,this.currentAge=Math.ceil(b().diff(this.dob,"years",!0)),this.getOldData()})}getParent(){if((0,S.cU)(this.product.config)){let e=JSON.parse(this.product.config),n=("quotation"!=this.prodService.type?e.application||[]:e.quotation||[]).find(a=>"life_insured_health"==a.tableName);return n&&this.globalFun.tempFormData[n.tableName+n.id]||null}return null}doValid(){if(this.staticForm.controls.insuranceStartDate.value){let i=b(this.staticForm.controls.insuranceStartDate.value).add(1,"years");this.toMaxDate={year:parseInt(i.format("YYYY")),month:parseInt(i.format("M")),day:parseInt(i.format("D"))},this.staticForm.controls.insuranceEndDate.setValue(i.format("YYYY-MM-DD"))}}getUnitOption(){let e=this.controls.sumInsuredMainCover.value;if(e!=this.options4.length){this.options4=Array.from({length:e},(i,n)=>n+1);for(let i of this.options2)this.addOns[i.id+"value"]=e}}get controls(){return this.staticForm.controls}isControlValid(e,i){const n=i.controls[e];return n.valid&&(n.dirty||n.touched)}isControlInvalid(e,i){const n=i.controls[e];return n.invalid&&(n.dirty||n.touched)}controlHasError(e,i,n){const a=n.controls[i];return a.hasError(e)&&(a.dirty||a.touched)}isControlTouched(e,i){const n=i.controls[e];return n.dirty||n.touched}nextPage(){if(this.staticForm.invalid)return(0,tt.w)(this.staticForm),!0;this.editId?this.saveData(this.editId):this.saveData()}backPage(){this.actionEvent.emit({type:Z.V.PREV})}saveData(e){const i=this.staticForm.value;if(!this.product.coverages.find(r=>r.description==i.basicCoverId))return this.alertService.activate("This page cann't to save because there is not match coverage in product detail. Please configuration the product detail","Warning"),!1;let a={basicCoverId:i.basicCoverId,id:e||null,insuranceEndDate:i.insuranceEndDate,insuranceStartDate:i.insuranceStartDate,medicalCardNo:i.medicalCardNo,paymentFrequency:i.paymentFrequency,dateOfBirth:this.dob,resourceData:{agentId:this.auth.currentUserValue.id||1,customerId:this.prodService.creatingCustomer.customerId||1,policyNumber:null,premium:(Number(this.premiumAmt.split(" ")[0].split(",").join(""))||0)+"",premiumView:this.premiumAmt,productId:this.prodService.createingProd.id,quotationId:this.prodService.referenceID,leadId:this.prodService.creatingLeadId||null,type:this.prodService.type},resourceId:this.resourcesId,sumInsuredMainCover:i.sumInsuredMainCover};e?this.healthService.updateNoID(a).toPromise().then(r=>{r&&(this.editId=r.id,this.saveCoverAddon(),this.globalFun.tempFormData[P.Hu]=Object.assign(Object.assign({id:r.id},a),{addOns:this.addOns}),this.actionEvent.emit({type:Z.V.NEXT,data:Object.assign({},r)}))}).catch(r=>r):this.healthService.save(a).toPromise().then(r=>{r&&(this.editId=r.id,this.resourcesId=r.resourceId,this.saveCoverAddon(),this.globalFun.tempFormData[P.Hu]=Object.assign(Object.assign({id:r.id},a),{addOns:this.addOns}),this.actionEvent.emit({type:Z.V.NEXT,data:Object.assign({},r)}))}).catch(r=>r)}saveCoverAddon(){return(0,h.mG)(this,void 0,void 0,function*(){yield this.saveCoverage().toPromise(),yield this.saveAddOn().toPromise()})}getOldData(e=!1){if(console.log(this.resourcesId),this.resourcesId||this.refID){let i=e?this.refID:this.resourcesId||this.refID;if(!i)return!1;this.healthService.getOne(i).toPromise().then(n=>{n?(this.oldData=Object.assign(Object.assign({},n),{id:null}),this.editId=i==this.resourcesId?n.id:null,this.getAddOn(),this.reloadOldValueForm()):!e&&i!=this.refID&&(this.getAddOn(!0),this.getOldData(!0))})}}reloadOldValueForm(){this.staticForm.patchValue({insuranceStartDate:b(this.oldData.insuranceStartDate),insuranceEndDate:b(this.oldData.insuranceEndDate),dateOfBirth:b(this.oldData.dateOfBirth),basicCoverId:this.oldData.basicCoverId,paymentFrequency:this.oldData.paymentFrequency,sumInsuredMainCover:this.oldData.sumInsuredMainCover,medicalCardNo:this.oldData.medicalCardNo}),this.getUnitOption()}saveCoverage(){let e=this.staticForm.controls.basicCoverId.value,i=this.staticForm.controls.sumInsuredMainCover.value,n=this.product.coverages.find(a=>a.description==e);if(n){let a={coverageId:n.id,quotationNo:this.resourcesId,sumInsured:i,unit:null,premium:null};return this.coverageQuoService.deleteAll(this.resourcesId).pipe((0,E.w)(r=>this.coverageQuoService.save(a)))}return(0,C.of)([])}getAddOn(e=!1){return(0,h.mG)(this,void 0,void 0,function*(){if(this.resourcesId||this.refID){let i=!0,n=e?this.refID:this.resourcesId||this.refID;if(!n)return!1;for(const a of this.product.addOns){let r={};try{r=yield this.addOnQuoService.getOne(a.id,n).toPromise()}catch(c){}r?(i=!1,this.addOns[a.id+"opt"]=!!r.sumInsured,this.addOns[a.id+"value"]=r.sumInsured):(this.addOns[a.id+"opt"]=!1,this.addOns[a.id+"value"]=null)}this.cdf.detectChanges()}})}saveAddOn(){const e=this.staticForm.value;return this.addOnQuoService.deleteAll(this.resourcesId).pipe((0,W.z)(i=>(0,H.D)(this.options2.map(n=>"Health Insurance"==e.basicCoverId?this.addOns[n.id+"opt"]?this.addOnQuoService.save({addonId:n.id,quotationNo:this.resourcesId,sumInsured:this.addOns[n.id+"value"],unit:null,premium:null}):(this.addOns[n.id+"opt"]=!1,this.addOns[n.id+"value"]=0,(0,C.of)(null)):(0,C.of)(null)))))}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(l.qu),t.Y36(F.f),t.Y36(N.e8),t.Y36(Pt.e),t.Y36(x.Q),t.Y36(G.D),t.Y36($.a),t.Y36(I.c),t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-simple-page"]],inputs:{product:"product",editData:"editData",resourcesId:"resourcesId",premiumAmt:"premiumAmt"},outputs:{actionEvent:"actionEvent"},features:[t._Bn([{provide:g.DO,useClass:V.Wv},{provide:g.NG,useClass:V.ke},{provide:U._A,useClass:at.t7,deps:[U.Ad]},{provide:U.sG,useValue:S.Gs}])],decls:73,vars:18,consts:[["action","",3,"formGroup"],[1,"row",2,"align-items","center"],[1,"col-6"],[1,"form-group","row"],[1,"col-sm-4","col-form-label"],[1,"col-sm-6"],[1,"input-group"],["matInput","","formControlName","insuranceStartDate","readonly","",1,"form-control-sm","date-input",3,"min","max","matDatepicker","dateChange"],["matSuffix","",3,"for"],["disabled","false"],["picker",""],[3,"control"],["matInput","","formControlName","insuranceEndDate","readonly","",1,"form-control-sm","date-input",3,"min","max","matDatepicker"],["disabled","true"],["picker2",""],[1,"example-section"],[1,"col-4"],["formControlName","basicCoverId",1,"col-8"],[1,"mx-1",3,"value"],[1,"row"],[1,"col-4","col-form-label"],["name","payment_frequency","formControlName","paymentFrequency",1,"form-control","form-control-sm"],[3,"value"],["value","lump"],["value","semi_annually"],["name","sumInsuredMainCover","formControlName","sumInsuredMainCover",1,"form-control","form-control-sm",3,"change"],[3,"value",4,"ngFor","ngForOf"],["type","text","name","medicalCardNo","formControlName","medicalCardNo",1,"form-control","form-control-sm"],[4,"ngIf"],[1,"row","mt-3"],[1,"col-sm-6","mx-auto"],[1,"btn","btn-block","btn-secondary",3,"click"],[1,"btn","btn-block","btn-primary",3,"click"],[1,"row","mt-5"],[1,"col-12"],[2,"border-bottom","1px solid rgba(0, 0, 0, 0.1)","padding","20px 0px"],["class","form-group row","style","align-items: center;",4,"ngFor","ngForOf"],[1,"form-group","row",2,"align-items","center"],[1,"col-2"],[1,"switch","switch-icon"],["type","checkbox",3,"name","ngModel","ngModelOptions","ngModelChange"],["class","col-6",4,"ngIf"],[1,"col-6","col-form-label"],[1,"form-control","form-control-sm",3,"ngModel","ngModelOptions","ngModelChange"]],template:function(e,i){if(1&e&&(t.TgZ(0,"form",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"label",4),t._uU(5,"Period of Insurance"),t.qZA(),t.TgZ(6,"div",5),t.TgZ(7,"div",6),t.TgZ(8,"input",7),t.NdJ("dateChange",function(){return i.doValid()}),t.qZA(),t._UZ(9,"mat-datepicker-toggle",8),t._UZ(10,"mat-datepicker",9,10),t._UZ(12,"app-print-error",11),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"div",2),t.TgZ(14,"div",3),t.TgZ(15,"label",4),t._uU(16,"-"),t.qZA(),t.TgZ(17,"div",5),t.TgZ(18,"div",6),t._UZ(19,"input",12),t._UZ(20,"mat-datepicker-toggle",8),t._UZ(21,"mat-datepicker",13,14),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(23,"div",1),t.TgZ(24,"div",2),t.TgZ(25,"section",15),t.TgZ(26,"div",3),t.TgZ(27,"label",16),t._uU(28,"Basic Cover"),t.qZA(),t.TgZ(29,"mat-radio-group",17),t.TgZ(30,"mat-radio-button",18),t._uU(31,"Health Insurance "),t.qZA(),t.TgZ(32,"mat-radio-button",18),t._uU(33,"Critical Illness "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"div",19),t.TgZ(35,"div",2),t.TgZ(36,"div",3),t.TgZ(37,"label",20),t._uU(38,"Payment Frequency"),t.qZA(),t.TgZ(39,"div",2),t.TgZ(40,"select",21),t.TgZ(41,"option",22),t._uU(42,"Please Select Payment Frequency"),t.qZA(),t.TgZ(43,"option",23),t._uU(44,"Lump Sum"),t.qZA(),t.TgZ(45,"option",24),t._uU(46,"Semi-Annually"),t.qZA(),t.qZA(),t._UZ(47,"app-print-error",11),t.qZA(),t.qZA(),t.qZA(),t.TgZ(48,"div",2),t.TgZ(49,"div",3),t.TgZ(50,"label",20),t._uU(51,"Sum Insured of Main Cover"),t.qZA(),t.TgZ(52,"div",2),t.TgZ(53,"select",25),t.NdJ("change",function(){return i.getUnitOption()}),t.TgZ(54,"option",22),t._uU(55,"Please Select Sum Insured"),t.qZA(),t.YNc(56,Ai,2,3,"option",26),t.qZA(),t._UZ(57,"app-print-error",11),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(58,"div",19),t.TgZ(59,"div",2),t.TgZ(60,"div",3),t.TgZ(61,"label",20),t._uU(62,"Medical Card No"),t.qZA(),t.TgZ(63,"div",2),t._UZ(64,"input",27),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(65,wi,8,1,"ng-container",28),t.qZA(),t.TgZ(66,"div",29),t.TgZ(67,"div",30),t.TgZ(68,"button",31),t.NdJ("click",function(){return i.backPage()}),t._uU(69," Previous "),t.qZA(),t.qZA(),t.TgZ(70,"div",30),t.TgZ(71,"button",32),t.NdJ("click",function(){return i.nextPage()}),t._uU(72," Save & Next "),t.qZA(),t.qZA(),t.qZA()),2&e){const n=t.MAs(11),a=t.MAs(22);t.Q6J("formGroup",i.staticForm),t.xp6(8),t.Q6J("min",i.fromMinDate)("max",i.fromMaxDate)("matDatepicker",n),t.xp6(1),t.Q6J("for",n),t.xp6(3),t.Q6J("control",i.controls.insuranceStartDate),t.xp6(7),t.Q6J("min",i.toMinDate)("max",i.toMaxDate)("matDatepicker",a),t.xp6(1),t.Q6J("for",a),t.xp6(10),t.Q6J("value","Health Insurance"),t.xp6(2),t.Q6J("value","Critical illness"),t.xp6(9),t.Q6J("value",null),t.xp6(6),t.Q6J("control",i.controls.paymentFrequency),t.xp6(7),t.Q6J("value",null),t.xp6(2),t.Q6J("ngForOf",i.options3),t.xp6(1),t.Q6J("control",i.controls.sumInsuredMainCover),t.xp6(8),t.Q6J("ngIf","Health Insurance"==i.controls.basicCoverId.value)}},directives:[l._Y,l.JL,l.sg,rt.Nt,l.Fj,B.hl,l.JJ,l.u,B.nW,st.R9,B.Mq,ct.n,Q.VQ,Q.U0,l.EJ,l.YN,l.Kr,m.sg,m.O5,l.Wl,l.On],styles:[".input-group[_ngcontent-%COMP%]   .form-control-sm[_ngcontent-%COMP%]{background-color:#fff;background-clip:padding-box;border:1px solid #E4E6EF;padding:0 .75rem}.input-group[_ngcontent-%COMP%]   .mat-datepicker-toggle[_ngcontent-%COMP%]{position:absolute;right:5px}"]}),o})(),static_1635218894755:Ci,static_1635309151504:ge.k,static_1635747288508:Oi,static_1641364737069:hi,static_1643116155828:mi,static_1644896661652:be,static_1644896804675:gt};let At=(()=>{class o{constructor(e,i){this.resolver=e,this.container=i,this.eventOut=new t.vpe}ngOnInit(){this.reCreate()}reCreate(){this.container.clear();const e=this.resolver.resolveComponentFactory(Ii[this.compId]);this.component=this.container.createComponent(e),this.component.instance.product=this.product,this.component.instance.editData=this.editData,this.component.instance.resourcesId=this.resourcesId,this.component.instance.premiumAmt=this.premiumAmt,this.component.instance.actionEvent.subscribe(i=>{this.eventOut.emit(i)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t._Vd),t.Y36(t.s_b))},o.\u0275dir=t.lG2({type:o,selectors:[["","staticPage",""]],inputs:{compId:"compId",product:"product",resourcesId:"resourcesId",premiumAmt:"premiumAmt",editData:"editData"},outputs:{eventOut:"eventOut"}}),o})();var Mi=u(49875),yt=u(87626),qi=u(77720);const lt=function(o,s){return{active:o,done:s}};function Si(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",16),t.NdJ("click",function(){const a=t.CHM(e).index;return t.oxw(4).changePage(a)}),t.TgZ(2,"div",17),t.TgZ(3,"div",18),t.TgZ(4,"span"),t._uU(5),t.qZA(),t._uU(6),t.qZA(),t._UZ(7,"div",19),t.qZA(),t.qZA(),t.BQk()}if(2&o){const e=s.$implicit,i=s.index,n=t.oxw(4);t.xp6(2),t.Q6J("ngClass",t.WLB(3,lt,i==n.activePage,i<n.activePage)),t.xp6(3),t.Oqu(i+1),t.xp6(1),t.hij(" ",e.pageTitle,"")}}function Fi(o,s){if(1&o&&(t.ynx(0),t.TgZ(1,"div",11),t.TgZ(2,"div",12),t.TgZ(3,"div",13),t.TgZ(4,"div",14),t.YNc(5,Si,8,6,"ng-container",15),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.BQk()),2&o){const e=t.oxw(3);t.xp6(5),t.Q6J("ngForOf",e.pageOrder)}}function ki(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",16),t.NdJ("click",function(){const a=t.CHM(e).index;return t.oxw(4).changePage(a)}),t.TgZ(2,"div",17),t._UZ(3,"i"),t.TgZ(4,"h3",18),t._uU(5),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&o){const e=s.$implicit,i=s.index,n=t.oxw(4);t.xp6(2),t.Q6J("ngClass",t.WLB(6,lt,i==n.activePage,i<n.activePage)),t.xp6(1),t.Gre("wizard-icon fa ",e.pageIcon,""),t.xp6(2),t.AsE("",i+1,") ",e.pageTitle,"")}}function zi(o,s){if(1&o&&(t.ynx(0),t.TgZ(1,"div",20),t.TgZ(2,"div",21),t.TgZ(3,"div",14),t.YNc(4,ki,6,9,"ng-container",15),t.qZA(),t.qZA(),t.qZA(),t.BQk()),2&o){const e=t.oxw(3);t.xp6(4),t.Q6J("ngForOf",e.pageOrder)}}function Ni(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",16),t.NdJ("click",function(){const a=t.CHM(e).index;return t.oxw(4).changePage(a)}),t.TgZ(2,"div",26),t.TgZ(3,"div",27),t._UZ(4,"span"),t.qZA(),t.TgZ(5,"div",28),t.TgZ(6,"div",18),t._uU(7),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&o){const e=s.$implicit,i=s.index,n=t.oxw(4);t.xp6(2),t.Q6J("ngClass",t.WLB(5,lt,i==n.activePage,i<n.activePage)),t.xp6(2),t.Gre("fa ",e.pageIcon,""),t.xp6(3),t.hij(" ",e.pageTitle,"")}}const xt=function(){return{}};function Ui(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"dynamic-form",29,30),t.NdJ("submit",function(n){return t.CHM(e),t.oxw(5).saveTemp(n)}),t.qZA(),t.BQk()}if(2&o){const e=t.oxw(5);t.xp6(1),t.Q6J("config",e.formData[e.activePage].controls)("editStage",!1)("tempData",e.tempData[e.formData[e.activePage].tableName+e.formData[e.activePage].id]||t.DdM(3,xt))}}function Bi(o,s){if(1&o&&(t.ynx(0),t.TgZ(1,"th"),t._uU(2),t.qZA(),t.BQk()),2&o){const e=s.$implicit;t.xp6(2),t.Oqu(e.title)}}function Ji(o,s){if(1&o&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit,i=t.oxw().$implicit,n=t.oxw(7);t.xp6(1),t.Oqu(n.getOtherData(e.cols,i))}}function Ri(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"td"),t.TgZ(1,"a",40),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,a=t.oxw().$implicit;return t.oxw(7).download(n.cols,a)}),t._uU(2),t.qZA(),t.qZA()}if(2&o){const e=t.oxw().$implicit,i=t.oxw().$implicit,n=t.oxw(7);t.xp6(2),t.hij(" ",n.getOtherData(e.cols,i)," ")}}function Qi(o,s){if(1&o&&(t.ynx(0),t.YNc(1,Ji,2,1,"td",10),t.YNc(2,Ri,3,1,"td",10),t.BQk()),2&o){const e=s.$implicit;t.xp6(1),t.Q6J("ngIf","file"!=e.input),t.xp6(1),t.Q6J("ngIf","file"==e.input)}}function Ei(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.YNc(3,Qi,3,2,"ng-container",15),t.TgZ(4,"td",35),t.TgZ(5,"a",36),t.NdJ("click",function(){const n=t.CHM(e),a=n.$implicit,r=n.index;return t.oxw(7).newData(a,r)}),t._UZ(6,"span",37),t.qZA(),t.TgZ(7,"a",38),t.NdJ("click",function(){const n=t.CHM(e),a=n.index,r=n.$implicit;return t.oxw(7).deleteData(a,r)}),t._UZ(8,"span",39),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=s.index,i=t.oxw(7);t.xp6(2),t.Oqu(e+1),t.xp6(1),t.Q6J("ngForOf",i.formData[i.activePage].controls),t.xp6(3),t.Q6J("inlineSVG","./assets/media/svg/icons/Communication/Write.svg")("cacheSVG",!0),t.xp6(2),t.Q6J("inlineSVG","./assets/media/svg/icons/General/Trash.svg")("cacheSVG",!0)}}function Yi(o,s){if(1&o&&(t.ynx(0),t.YNc(1,Ei,9,6,"tr",15),t.BQk()),2&o){const e=t.oxw(6);t.xp6(1),t.Q6J("ngForOf",e.tempData[e.formData[e.activePage].tableName+e.formData[e.activePage].id])}}function Vi(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",31),t.TgZ(2,"button",32),t.NdJ("click",function(){return t.CHM(e),t.oxw(5).newData()}),t._uU(3,"Add New Data"),t.qZA(),t.qZA(),t._UZ(4,"hr"),t.TgZ(5,"div",33),t.TgZ(6,"table",34),t.TgZ(7,"thead"),t.TgZ(8,"tr"),t.TgZ(9,"th"),t._uU(10,"NO"),t.qZA(),t.YNc(11,Bi,3,1,"ng-container",15),t.TgZ(12,"th"),t._uU(13,"Action"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"tbody"),t.YNc(15,Yi,2,1,"ng-container",10),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&o){const e=t.oxw(5);t.xp6(11),t.Q6J("ngForOf",e.tableReform),t.xp6(4),t.Q6J("ngIf",e.tempData[e.formData[e.activePage].tableName+e.formData[e.activePage].id])}}function Li(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",42),t.NdJ("eventE",function(n){return t.CHM(e),t.oxw(6).clickBtn(n)}),t.qZA()}if(2&o){const e=s.$implicit,i=s.index;t.IyS("col-xs-",e.size," col-sm-",e.size," ",e.position," mt-2"),t.Q6J("config",e)("index",i)("editStage",!1)}}function ji(o,s){if(1&o&&(t.ynx(0),t._UZ(1,"hr"),t.TgZ(2,"div",1),t.YNc(3,Li,1,8,"div",41),t.qZA(),t.BQk()),2&o){const e=t.oxw(5);t.xp6(3),t.Q6J("ngForOf",e.formData[e.activePage].buttons)}}function Gi(o,s){if(1&o){const e=t.EpF();t.ynx(0),t._UZ(1,"hr"),t.TgZ(2,"div",1),t.TgZ(3,"div",43),t.TgZ(4,"button",44),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(5);return n.backPage(n.activePage)}),t._uU(5," Previous "),t.qZA(),t.qZA(),t.TgZ(6,"div",43),t.TgZ(7,"button",45),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(5);return n.nextPage(n.activePage)}),t._uU(8," Save & Next "),t.qZA(),t.qZA(),t.qZA(),t.BQk()}}function $i(o,s){if(1&o&&(t.ynx(0),t.YNc(1,Ui,3,4,"ng-container",10),t.YNc(2,Vi,16,2,"ng-container",10),t.YNc(3,ji,4,1,"ng-container",10),t.YNc(4,Gi,9,0,"ng-container",10),t.BQk()),2&o){const e=t.oxw(4);t.xp6(1),t.Q6J("ngIf","table"!=e.formData[e.activePage].pageType),t.xp6(1),t.Q6J("ngIf","table"==e.formData[e.activePage].pageType),t.xp6(1),t.Q6J("ngIf","table"!=e.formData[e.activePage].pageType),t.xp6(1),t.Q6J("ngIf","table"==e.formData[e.activePage].pageType)}}function Hi(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.ynx(1,46),t.NdJ("eventOut",function(n){return t.CHM(e),t.oxw(4).staticEvent(n)}),t.BQk(),t.BQk()}if(2&o){const e=t.oxw(4);t.xp6(1),t.Q6J("compId",e.pageOrder[e.activePage].id)("product",e.item)("editData",e.editData)("resourcesId",e.resourceId)("premiumAmt",e.premiumAmt)}}function Wi(o,s){if(1&o&&(t.ynx(0),t.TgZ(1,"div",22),t.TgZ(2,"div",23),t.TgZ(3,"div",24),t.YNc(4,Ni,8,8,"ng-container",15),t.qZA(),t.qZA(),t.TgZ(5,"div",25),t.YNc(6,$i,5,4,"ng-container",10),t.YNc(7,Hi,2,5,"ng-container",10),t.qZA(),t.qZA(),t.BQk()),2&o){const e=t.oxw(3);t.xp6(4),t.Q6J("ngForOf",e.pageOrder),t.xp6(2),t.Q6J("ngIf","dyn"==e.pageOrder[e.activePage].type),t.xp6(1),t.Q6J("ngIf","static"==e.pageOrder[e.activePage].type)}}function Xi(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"dynamic-form",49,30),t.NdJ("submit",function(n){return t.CHM(e),t.oxw(5).saveTemp(n)}),t.qZA(),t.BQk()}if(2&o){const e=t.oxw(5);t.xp6(1),t.Q6J("tempData",e.tempData[e.formData[e.activePage].tableName+e.formData[e.activePage].id]||t.DdM(3,xt))("config",e.formData[e.activePage].controls)("editStage",!1)}}function Ki(o,s){if(1&o&&(t.ynx(0),t.TgZ(1,"th"),t._uU(2),t.qZA(),t.BQk()),2&o){const e=s.$implicit;t.xp6(2),t.Oqu(e.title)}}function tn(o,s){if(1&o&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit,i=t.oxw().$implicit,n=t.oxw(7);t.xp6(1),t.Oqu(n.getOtherData(e.cols,i))}}function en(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"td"),t.TgZ(1,"a",40),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,a=t.oxw().$implicit;return t.oxw(7).download(n.cols,a)}),t._uU(2),t.qZA(),t.qZA()}if(2&o){const e=t.oxw().$implicit,i=t.oxw().$implicit,n=t.oxw(7);t.xp6(2),t.hij(" ",n.getOtherData(e.cols,i)," ")}}function nn(o,s){if(1&o&&(t.ynx(0),t.YNc(1,tn,2,1,"td",10),t.YNc(2,en,3,1,"td",10),t.BQk()),2&o){const e=s.$implicit;t.xp6(1),t.Q6J("ngIf","file"!=e.type),t.xp6(1),t.Q6J("ngIf","file"==e.type)}}function on(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.YNc(3,nn,3,2,"ng-container",15),t.TgZ(4,"td",35),t.TgZ(5,"a",36),t.NdJ("click",function(){const n=t.CHM(e),a=n.$implicit,r=n.index;return t.oxw(7).newData(a,r)}),t._UZ(6,"span",37),t.qZA(),t.TgZ(7,"a",50),t.NdJ("click",function(){const n=t.CHM(e),a=n.index,r=n.$implicit;return t.oxw(7).deleteData(a,r)}),t._UZ(8,"span",39),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=s.index,i=t.oxw(7);t.xp6(2),t.Oqu(e+1),t.xp6(1),t.Q6J("ngForOf",i.tableReform),t.xp6(3),t.Q6J("inlineSVG","./assets/media/svg/icons/Communication/Write.svg")("cacheSVG",!0),t.xp6(2),t.Q6J("inlineSVG","./assets/media/svg/icons/General/Trash.svg")("cacheSVG",!0)}}function an(o,s){if(1&o&&(t.ynx(0),t.YNc(1,on,9,6,"tr",15),t.BQk()),2&o){const e=t.oxw(6);t.xp6(1),t.Q6J("ngForOf",e.tempData[e.formData[e.activePage].tableName+e.formData[e.activePage].id])}}function rn(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",31),t.TgZ(2,"button",32),t.NdJ("click",function(){return t.CHM(e),t.oxw(5).newData()}),t._uU(3,"Add New Data"),t.qZA(),t.qZA(),t._UZ(4,"hr"),t.TgZ(5,"div",33),t.TgZ(6,"table",34),t.TgZ(7,"thead"),t.TgZ(8,"tr"),t.TgZ(9,"th"),t._uU(10,"NO"),t.qZA(),t.YNc(11,Ki,3,1,"ng-container",15),t.TgZ(12,"th"),t._uU(13,"Action"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"tbody"),t.YNc(15,an,2,1,"ng-container",10),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&o){const e=t.oxw(5);t.xp6(11),t.Q6J("ngForOf",e.tableReform),t.xp6(4),t.Q6J("ngIf",e.tempData[e.formData[e.activePage].tableName+e.formData[e.activePage].id])}}function sn(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",42),t.NdJ("eventE",function(n){return t.CHM(e),t.oxw(6).clickBtn(n)}),t.qZA()}if(2&o){const e=s.$implicit,i=s.index;t.IyS("col-xs-",e.size," col-sm-",e.size," ",e.position," mt-2"),t.Q6J("config",e)("index",i)("editStage",!1)}}function cn(o,s){if(1&o&&(t.ynx(0),t._UZ(1,"hr"),t.TgZ(2,"div",1),t.YNc(3,sn,1,8,"div",41),t.qZA(),t.BQk()),2&o){const e=t.oxw(5);t.xp6(3),t.Q6J("ngForOf",e.formData[e.activePage].buttons)}}function ln(o,s){if(1&o){const e=t.EpF();t.ynx(0),t._UZ(1,"hr"),t.TgZ(2,"div",1),t.TgZ(3,"div",43),t.TgZ(4,"button",44),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(5);return n.backPage(n.activePage)}),t._uU(5," Previous "),t.qZA(),t.qZA(),t.TgZ(6,"div",43),t.TgZ(7,"button",45),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(5);return n.nextPage(n.activePage)}),t._uU(8," Save & Next "),t.qZA(),t.qZA(),t.qZA(),t.BQk()}}function dn(o,s){if(1&o&&(t.ynx(0),t.YNc(1,Xi,3,4,"ng-container",10),t.YNc(2,rn,16,2,"ng-container",10),t.YNc(3,cn,4,1,"ng-container",10),t.YNc(4,ln,9,0,"ng-container",10),t.BQk()),2&o){const e=t.oxw(4);t.xp6(1),t.Q6J("ngIf","table"!=e.formData[e.activePage].pageType),t.xp6(1),t.Q6J("ngIf","table"==e.formData[e.activePage].pageType),t.xp6(1),t.Q6J("ngIf","table"!=e.formData[e.activePage].pageType),t.xp6(1),t.Q6J("ngIf","table"==e.formData[e.activePage].pageType)}}function un(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.ynx(1,46),t.NdJ("eventOut",function(n){return t.CHM(e),t.oxw(4).staticEvent(n)}),t.BQk(),t.BQk()}if(2&o){const e=t.oxw(4);t.xp6(1),t.Q6J("compId",e.pageOrder[e.activePage].id)("product",e.item)("editData",e.editData)("resourcesId",e.resourceId)("premiumAmt",e.premiumAmt)}}function gn(o,s){if(1&o&&(t.ynx(0),t.TgZ(1,"div",47),t._UZ(2,"div",48),t.YNc(3,dn,5,4,"ng-container",10),t.YNc(4,un,2,5,"ng-container",10),t.qZA(),t.BQk()),2&o){const e=t.oxw(3);t.xp6(3),t.Q6J("ngIf","dyn"==e.pageOrder[e.activePage].type),t.xp6(1),t.Q6J("ngIf","static"==e.pageOrder[e.activePage].type)}}function pn(o,s){if(1&o&&(t.TgZ(0,"div",9),t.YNc(1,Fi,6,1,"ng-container",10),t.YNc(2,zi,5,1,"ng-container",10),t.YNc(3,Wi,8,3,"ng-container",10),t.YNc(4,gn,5,2,"ng-container",10),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf","ui3"==e.viewUI),t.xp6(1),t.Q6J("ngIf","ui1"==e.viewUI),t.xp6(1),t.Q6J("ngIf","ui2"==e.viewUI),t.xp6(1),t.Q6J("ngIf","ui2"!=e.viewUI)}}function mn(o,s){if(1&o&&(t.TgZ(0,"div",1),t.TgZ(1,"div",2),t.TgZ(2,"div",3),t.TgZ(3,"div",4),t.TgZ(4,"div",5),t.TgZ(5,"div",6),t._uU(6," PRODUCT "),t._UZ(7,"br"),t.TgZ(8,"span"),t._uU(9),t.qZA(),t.qZA(),t.TgZ(10,"div",7),t._uU(11," PREMIUM "),t._UZ(12,"br"),t.TgZ(13,"span"),t._uU(14),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",2),t.TgZ(16,"div",3),t.YNc(17,pn,5,4,"div",8),t.qZA(),t.qZA(),t.qZA()),2&o){const e=t.oxw();t.xp6(9),t.Oqu(e.item.name),t.xp6(5),t.Oqu(e.premiumAmt),t.xp6(3),t.Q6J("ngIf",e.formData.length>0)}}let _n=(()=>{class o{constructor(e,i,n,a,r,c,d,p,_,T,v,J,q,D,Zn,Cn){this.router=e,this.location=i,this.cdRef=n,this.modalService=a,this.prodService=r,this.globalFun=c,this.auth=d,this.pageDataService=p,this.addonQuo=_,this.coverageQuo=T,this.alert=v,this.downloadService=J,this.masterServer=q,this.numberPipe=D,this.datePipe=Zn,this.ngZone=Cn,this.formData=[],this.pageOrder=[],this.tempData={},this.activePage=0,this.premiumAmt="0",this.unsubscribe=[],this.coverage={isSum:!1,isUnit:!1,isPremium:!1},this.addon={isSum:!1,isUnit:!1,isPremium:!1},this.coverageData={},this.addOnData={},this.viewType="view",this.resourceId=null,this.type="",this.referenceID="",this.referenceStatus="",this.tableReform=[],this.detailInput={},this.creatingCustomer={},this.creatingLeadId=0}ngOnInit(){return(0,h.mG)(this,void 0,void 0,function*(){if("policy"==this.prodService.type&&this.prodService.createingProdRef&&(this.prodService.createingProd=this.prodService.createingProdRef,this.prodService.createingProdRef=null),this.prodService.createingProd){this.item=this.prodService.createingProd,this.viewType=this.prodService.viewType,this.referenceID=this.prodService.referenceID,this.referenceStatus=this.prodService.referenceStatus,this.creatingLeadId=this.prodService.creatingLeadId,this.type=this.prodService.type,this.editData=this.prodService.editData||{},this.creatingCustomer=this.prodService.creatingCustomer,this.premiumAmt=this.editData.premiumView||this.editData.premium||"0";let e=this.globalFun.paPremiumResult.subscribe(i=>{this.premiumAmt=i||"0",this.cdRef.detectChanges()});this.unsubscribe.push(e),this.initProductConfig()}else this.location.back()})}ngOnDestroy(){this.prodService.creatingLeadId=0,this.unsubscribe.forEach(e=>e.unsubscribe())}changePage(e){this.activePage>e&&(this.activePage=e,this.formData[this.activePage].type==w.it.STATIC&&(this.cdRef.detectChanges(),this.staticPage.reCreate()),this.dynForm&&this.formData[this.activePage].controls&&this.dynForm.newFormCreate(this.formData[this.activePage].controls,this.tempData[this.formData[this.activePage].tableName+this.formData[this.activePage].id]))}findPageValue(e,i){let n,a=!!this.referenceID;for(let r=0;r<e.length;r++)if(e[r]&&(n=e[r].fromGroup.find(c=>c.id==i),n)){n.controls.map(c=>(this.detailInput[i]&&"underline"!=c.input&&"label"!=c.input?(c.show=this.detailInput[i][c.name]>=0?this.detailInput[i][c.name]>0:c.show,this.detailInput[i][c.name]>=2&&(c.disabled=!(this.detailInput[i][c.name]>2)||a)):this.detailInput[i]&&"label"==c.input&&(c.show=this.detailInput[i][c.placeholder]>=0?this.detailInput[i][c.placeholder]>0:c.show),c));break}return n}initProductConfig(){if((0,S.cU)(this.item.config)){let e=JSON.parse(this.item.config);if(!e)return this.alert.activate("please setup page group in product configuration.","Creation Error"),this.location.back(),!1;let i=[];if("quotation"==this.prodService.type){if(!this.item.quotation)return this.alert.activate("please setup page group in product configuration.","Creation Error"),this.location.back(),!1;this.pageOrder=e.quotation||[],this.detailInput=e.quotation_input||{},this.viewUI=e.quotation_view||"ui1"}else{if(!this.item.application)return this.alert.activate("please setup page group in product configuration.","Creation Error"),this.location.back(),!1;this.pageOrder=e.application||[],this.detailInput=e.application_input||{},this.viewUI=e.application_view||"ui1"}if(0==this.pageOrder.length)return this.alert.activate("Please Create UI Configuration","Creation Error"),this.location.back(),!1;let n="policy"==this.prodService.type?"application":this.prodService.type;i=this.item.productUIs.map(r=>{if(r.type==n)return JSON.parse(r.dynamicProduct.config)});let a=0;this.pageOrder.forEach((r,c)=>{if(a+=1,("addon"==r.id&&this.item.addOns.length<1||"coverage"==r.id&&this.item.coverages.length<1)&&this.pageOrder.splice(c,1),r.type==w.it.STATIC)this.formData.push({pageTitle:"",id:(0,f.Z)(),pageIcon:"",pageType:"form",tableName:"",controls:[],buttons:[],type:r.type});else{let d=this.findPageValue(i,r.id);d.type=r.type,d&&(this.pageOrder[c].pageTitle=d.pageTitle,this.pageOrder[c].pageType=d.pageType,this.pageOrder[c].pageIcon=d.pageIcon,this.pageOrder[c].tableName=d.tableName,!this.prodService.editData&&!this.referenceID&&"policyholder_1641795142279"==d.unitCode&&this.mapPartyCustomer(d),"policyholder_1641795142279"==d.unitCode&&(d.controls=d.controls.map(p=>(p.disabled=!0,p))),this.formData.push(d))}a==this.pageOrder.length&&this.callback(i)})}}callback(e){this.prodService.editData?(this.resourceId=this.prodService.editData.id,this.getOldData(this.prodService.editData,e)):this.referenceID&&this.getOldData({id:this.referenceID},e,!0),"table"==this.formData[this.activePage].pageType&&this.reFormatTable(this.formData[this.activePage].controls)}staticEvent(e){e.type==Z.V.NEXT?(e.data&&e.data.resourceId&&(this.resourceId=e.data.resourceId),this.nextPage(this.activePage)):e.type==Z.V.PREV&&this.backPage(this.activePage)}clickBtn(e){this[e]()}saveTemp(e){let i=this.formData[this.activePage];"view"!=this.viewType?"form"==i.pageType&&this.tempData[i.tableName+i.id]&&this.tempData[i.tableName+i.id].refId?this.updateDataAPI(i,e,this.tempData[i.tableName+i.id].refId):this.saveDataAPI(i,e):("table"==i.pageType?(this.tempData[i.tableName+i.id]?this.tempData[i.tableName+i.id].push(e):this.tempData[i.tableName+i.id]=[e],this.cdRef.detectChanges()):(this.tempData[i.tableName+i.id]=e,this.dynForm.newFormCreate(this.formData[this.activePage+1].controls,this.tempData[this.formData[this.activePage+1].tableName+this.formData[this.activePage+1].id]),this.activePage+=1,"table"==this.formData[this.activePage].pageType&&this.reFormatTable(this.formData[this.activePage].controls),this.cdRef.detectChanges()),this.globalFun.tempFormData=this.tempData)}download(e,i){let n=this.getOtherData(e,i);if(n){let a=n.split("].")[0].replace("[","");this.downloadService.getDownload(a,n)}}reFormatTable(e){this.tableReform=[];let i=[],n=JSON.parse(JSON.stringify(e));for(let a of n){let r=!1;if(a.options=a.options?a.options:[],!a.isHideView)if(a.tableTitle&&(i.findIndex(d=>d==a.tableTitle)<0?i.push(a.tableTitle):r=!0),r){let c=this.tableReform.findIndex(d=>d.parent==a.dependency.parentName);c>=0&&this.tableReform[c].cols.push({name:"true"==a.master?a.name+"Value":a.name,type:a.input,subType:a.type,options:("false"==a.master||0==a.master)&&a.options.length>0?a.options:[]})}else this.tableReform.push({title:a.tableTitle||a.label||a.name,cols:[{name:"true"==a.master?a.name+"Value":a.name,type:a.input,subType:a.type,options:("false"==a.master||0==a.master)&&a.options.length>0?a.options:[]}],type:a.input,subType:a.type,parent:a.dependency?a.dependency.parentName:"",options:("false"==a.master||0==a.master)&&a.options.length>0?a.options:[]})}this.cdRef.detectChanges()}getOtherData(e,i){for(let n of e)if(i[n.name]&&(i[n.name]+"").length>0){if("input"==n.type&&"currency"==n.subType)return this.numberPipe.transform(i[n.name]);if("date"==n.type)return this.datePipe.transform(i[n.name],"dd/MM/yyyy");if(n.options.length>0){let r=n.options.find(c=>c.value==i[n.name]);if(r)return r.text}return i[n.name]}}updateDataAPI(e,i,n,a=-1){this.premiumAmt=this.premiumAmt?this.premiumAmt:"0";let r={productId:this.prodService.createingProd.id,type:this.viewType,tableName:e.tableName,resourceId:this.resourceId,refId:n,customerId:this.creatingCustomer.customerId,quotationId:this.referenceID,agentId:this.auth.currentUserValue.id||1,premium:(Number(this.premiumAmt.split(" ")[0].split(",").join(""))||0)+"",premiumView:this.premiumAmt,policyNumber:null,pageId:e.id,leadId:this.creatingLeadId||null,party:e.party||!1,data:[]};for(const[c,d]of Object.entries(i)){let p=e.controls.find(T=>T.name==c),_=d;p&&(_="input"==p.input&&"number"==p.type?Number(d):d,Array.isArray(_)&&(_=_.join("#-#"),_.includes("#-#")||(_+="#+#"))),r.data.push({column:c,value:_,party:p&&p.party||!1})}this.pageDataService.updateNoID(r).pipe((0,E.w)(c=>"table"==e.pageType?this.checkMasterValue(i,e.controls,c):(0,C.of)(c))).toPromise().then(c=>{c&&(this.updateDataStatus(),a<0?(this.tempData[e.tableName+e.id]=Object.assign(Object.assign({},i),{refId:c.refId}),"policyholder_1641795142279"==e.unitCode&&(this.tempData.policyholder_1641795142279=Object.assign(Object.assign({},i),{refId:c.refId})),this.pageOrder.length>this.activePage+1?(this.dynForm.newFormCreate(this.formData[this.activePage+1].controls,this.tempData[this.formData[this.activePage+1].tableName+this.formData[this.activePage+1].id]),this.activePage+=1,this.cdRef.detectChanges(),this.globalFun.tempFormData=this.tempData,"table"==this.formData[this.activePage].pageType&&this.reFormatTable(this.formData[this.activePage].controls)):(this.globalFun.tempFormData=this.tempData,this.goReusltPage())):(i=c.formData,this.tempData[e.tableName+e.id][a]=Object.assign(Object.assign({},i),{refId:c.refId}),this.cdRef.detectChanges()))})}goReusltPage(){this.prodService.previewType=this.type,this.premiumAmt=this.premiumAmt?this.premiumAmt:"0",this.prodService.editData={id:this.resourceId,premium:(Number(this.premiumAmt.split(" ")[0].split(",").join(""))||0)+"",premiumView:this.premiumAmt,agentFirstName:this.auth.currentUserValue.firstName,agentLastName:this.auth.currentUserValue.lastName},this.router.navigateByUrl("/resourse-detail")}saveDataAPI(e,i){this.premiumAmt=this.premiumAmt?this.premiumAmt:"0";let n={productId:this.prodService.createingProd.id,type:this.viewType,tableName:e.tableName,resourceId:this.resourceId,agentId:this.auth.currentUserValue.id||1,quotationId:this.referenceID,pageId:e.id,customerId:this.creatingCustomer.customerId,leadId:this.creatingLeadId||null,premium:(Number(this.premiumAmt.split(" ")[0].split(",").join(""))||0)+"",premiumView:this.premiumAmt,policyNumber:null,party:e.party||!1,pageData:[{data:[]}]};for(const[a,r]of Object.entries(i)){let c=e.controls.find(p=>p.name==a),d=r;c&&(d="input"==c.input&&"number"==c.type?Number(r):r,Array.isArray(d)&&(d=d.join("#-#"),d.includes("#-#")||(d+="#+#"))),n.pageData[0].data.push({column:a,value:d,party:c&&c.party||!1})}this.pageDataService.save(n).pipe((0,E.w)(a=>"table"==e.pageType?this.checkMasterValue(i,e.controls,a):(0,C.of)(a))).toPromise().then(a=>{a&&(this.updateDataStatus(),this.resourceId||(this.resourceId=a[0].resourceId),"table"==e.pageType?(i=a[0].formData,this.tempData[e.tableName+e.id]?this.tempData[e.tableName+e.id].push(Object.assign(Object.assign({},i),{refId:a[0].refId,pageId:e.id})):this.tempData[e.tableName+e.id]=[Object.assign(Object.assign({},i),{refId:a[0].refId})],this.cdRef.detectChanges()):(this.tempData[e.tableName+e.id]=Object.assign(Object.assign({},i),{refId:a[0].refId,pageId:e.id}),"policyholder_1641795142279"==e.unitCode&&(this.tempData.policyholder_1641795142279=Object.assign(Object.assign({},i),{refId:a[0].refId,pageId:e.id})),this.pageOrder.length>this.activePage+1?(this.formData[this.activePage+1].controls&&this.dynForm.newFormCreate(this.formData[this.activePage+1].controls,this.tempData[this.formData[this.activePage+1].tableName+this.formData[this.activePage+1].id]),this.activePage+=1,this.cdRef.detectChanges(),this.globalFun.tempFormData=this.tempData,"table"==this.formData[this.activePage].pageType&&this.reFormatTable(this.formData[this.activePage].controls)):(this.globalFun.tempFormData=this.tempData,this.goReusltPage())))})}newData(e,i){const n=this.formData[this.activePage],a=this.modalService.open(j,{size:"xl"});a.componentInstance.controls=this.formData[this.activePage].controls,a.componentInstance.pageName=this.formData[this.activePage].pageTitle,a.componentInstance.oldData=i>=0?e:{},a.result.then(()=>{},r=>{r&&r.data&&"save"==r.type&&(i>=0?this.updateDataAPI(n,r.data,this.tempData[n.tableName+n.id][i].refId,i):this.saveTemp(r.data))})}create(){return(0,h.mG)(this,void 0,void 0,function*(){let e=this.formData[this.activePage];if(e.function&&!(yield this.globalFun[e.function]("",this.dynForm.form.getRawValue(),[],!0))||!this.dynForm.handleSubmit())return!1;this.dynForm.reCreateFrom()})}backPage(e){this.activePage>0?(this.activePage-=1,this.cdRef.detectChanges(),this.formData[this.activePage].type==w.it.STATIC&&this.formData[this.activePage+1].type==w.it.STATIC?this.staticPage.reCreate():this.formData[this.activePage].type==w.it.DYN&&"table"==this.formData[this.activePage].pageType&&this.reFormatTable(this.formData[this.activePage].controls)):this.location.back()}nextPage(e,i){return(0,h.mG)(this,void 0,void 0,function*(){this.pageOrder.length>e+1?(this.updateDataStatus(),this.activePage+=1,this.cdRef.detectChanges(),this.formData[this.activePage].type==w.it.STATIC&&this.formData[this.activePage-1].type==w.it.STATIC?this.staticPage.reCreate():this.formData[this.activePage].type==w.it.DYN&&"table"==this.formData[this.activePage].pageType&&this.reFormatTable(this.formData[this.activePage].controls)):this.goReusltPage()})}next(){return(0,h.mG)(this,void 0,void 0,function*(){let e=this.formData[this.activePage];if(e.function&&!(yield this.globalFun[e.function]("",this.dynForm.form.getRawValue(),[],!0))||!this.dynForm.handleSubmit())return!1})}getGlobalFun(e,i,n,a){if(this.globalFun[e+"Result"]){let r=this.globalFun[e+"Result"].subscribe(c=>{this[i][n][a]=c,this.cdRef.detectChanges()});this.unsubscribe.push(r)}else e&&(this[i][n][a]=e)}previous(){this.activePage>0?(this.dynForm.newFormCreate(this.formData[this.activePage-1].controls,this.tempData[this.formData[this.activePage-1].tableName+this.formData[this.activePage-1].id]),this.activePage-=1,this.cdRef.detectChanges()):this.ngZone.run(()=>{this.location.back()})}submit(){this.next()}reset(){this.dynForm.reCreateFrom(),this.cdRef.detectChanges()}deleteData(e,i){this.alert.activate("Are you sure want to delete?","Warning Message").then(n=>{if(n){let a=this.formData[this.activePage];this.pageDataService.deleteData(a.tableName,i.refId,a.id).toPromise().then(r=>{r&&(this.tempData[a.tableName+a.id].splice(e,1),this.cdRef.detectChanges(),this.alert.activate("This record was deleted","Success Message").then(c=>{}))})}})}getOldData(e,i,n){let a=0;this.pageOrder.forEach(r=>{if(a+=1,r.type==w.it.DYN){let c=this.findPageValue(i,r.id),d="table"==c.pageType;this.pageDataService.getDetail(c.tableName,e.id,c.id,d,c.controls,!0).toPromise().then(p=>(0,h.mG)(this,void 0,void 0,function*(){if(p&&p.length>0){let _="form"==c.pageType?{}:[],T=n;0==p.length&&"policy"==this.type&&e.quotationId&&(p=yield this.pageDataService.getDetail(c.tableName,e.quotationId,c.id,d,c.controls,!0).toPromise(),T=!0);for(const J of p){let q={};for(const D of J.data)"id"==D.column&&!T&&(q.refId=D.value),q[D.column]=(D.value+"").includes("#-#")?(D.value+"").split("#-#"):(D.value+"").includes("#+#")?[D.value.replace("#+#","")]:D.value;Array.isArray(_)?_.push(q):_=q}"policyholder_1641795142279"==c.unitCode&&(_.customer_id=this.creatingCustomer.customerId,this.tempData.policyholder_1641795142279=_),this.tempData[c.tableName+c.id]=_,this.globalFun.tempFormData=this.tempData,c.function&&"form"==c.pageType&&this.globalFun[c.function]("",this.tempData[c.tableName+c.id]),r.id==this.formData[this.activePage].id&&"form"==this.formData[this.activePage].pageType&&this.formData[this.activePage].type!=w.it.STATIC&&(this.cdRef.detectChanges(),this.dynForm.reCreateFrom(),this.cdRef.detectChanges())}else"policyholder_1641795142279"==c.unitCode&&this.mapPartyCustomer(c)})).catch(p=>{"policyholder_1641795142279"==c.unitCode&&this.mapPartyCustomer(c)})}})}mapPartyCustomer(e){let i={},n=e.controls.find(a=>"customer_id"==a.name);if(n){for(let a of n.autoFields)i[a.value]=this.creatingCustomer[a.field];this.tempData[e.tableName+e.id]=i,this.tempData[e.tableName+e.id].customer_id=this.creatingCustomer.customerId,this.globalFun.tempFormData=this.tempData,this.cdRef.detectChanges(),e.type==w.it.DYN&&this.dynForm&&(this.dynForm.reCreateFrom(),this.cdRef.detectChanges())}}checkDep(e,i){return(0,Dt.J)(e,{value:i})}checkMasterValue(e,i,n){Array.isArray(n)?n[0].formData=e:n.formData=e;let a=Object.keys(e).filter(r=>(e[r]+"").includes("T-"));if(a.length>0){let c={codeBookRequest:a.map(p=>{let _=i.find(T=>T.name==p);if(_.masterData)return{codeId:e[p],codeType:_.masterData,langCd:"EN"}})},d=e;return this.masterServer.getMasterValue(c).pipe((0,R.U)(p=>(a.forEach(_=>{let T=i.find(J=>J.name==_),v=p.findIndex(J=>J.codeId==d[_]&&T.masterData==J.codeType);v>=0&&(d[_+"Value"]=p[v].codeName)}),Array.isArray(n)?n[0].formData=d:n.formData=d,n)))}return(0,C.of)(n)}updateDataStatus(){this.referenceID&&"in_progress"==this.referenceStatus&&this.pageDataService.updatePremimun({resourceId:this.referenceID,type:"quotation",status:"complete"}).toPromise().then(i=>{i&&(this.referenceStatus="complete",this.prodService.referenceStatus="complete")})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(y.F0),t.Y36(m.Ye),t.Y36(t.sBO),t.Y36(g.FF),t.Y36(F.f),t.Y36(x.Q),t.Y36(N.e8),t.Y36(dt.Q),t.Y36(G.D),t.Y36($.a),t.Y36(I.c),t.Y36(Mi.Ys),t.Y36(et.D),t.Y36(m.JJ),t.Y36(m.uU),t.Y36(t.R0b))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-product-form"]],viewQuery:function(e,i){if(1&e&&(t.Gf(O.r,5),t.Gf(At,5)),2&e){let n;t.iGM(n=t.CRH())&&(i.dynForm=n.first),t.iGM(n=t.CRH())&&(i.staticPage=n.first)}},decls:1,vars:1,consts:[["class","row",4,"ngIf"],[1,"row"],[1,"col-12"],[1,"card","card-custom","gutter-b"],[1,"card-body"],[2,"display","flex"],[1,"top-box",2,"margin-left","0px"],[1,"top-box"],["class","card-body customer-card-body",4,"ngIf"],[1,"card-body","customer-card-body"],[4,"ngIf"],[1,"wizard","wizard-3"],[1,"kt-grid__item"],[1,"wizard-nav","border-bottom","mb-1","mb-lg-5"],[1,"wizard-steps","pt-8"],[4,"ngFor","ngForOf"],["href","javascript:;",1,"wizard-step",3,"click"],[1,"wizard-label",3,"ngClass"],[1,"wizard-title"],[1,"wizard-bar"],["id","kt_wizard_v1",1,"wizard","wizard-1"],[1,"wizard-nav","border-bottom"],["id","kt_wizard_v2",1,"wizard","wizard-2"],[1,"wizard-nav","border-right","pt-8"],[1,"wizard-steps"],[1,"wizard-body","py-8","px-8","py-lg-20","px-lg-10"],[1,"wizard-wrapper",3,"ngClass"],[1,"wizard-icon"],[1,"wizard-label"],[3,"config","editStage","tempData","submit"],["dynForm",""],[1,"form-group"],["type","button",1,"btn","btn-primary","mx-2",3,"click"],[1,"table-responsive","angular-bootstrap-table"],[1,"table","table-head-custom","table-vertical-center"],[2,"white-space","nowrap"],["title","Edit Data",1,"btn","btn-icon","btn-light","btn-hover-danger","btn-sm","mx-1",3,"click"],[1,"svg-icon","svg-icon-md","svg-icon-primary",3,"inlineSVG","cacheSVG"],["title","Delete Data",1,"btn","btn-icon","btn-light","btn-hover-danger","btn-sm",3,"click"],[1,"svg-icon","svg-icon-md","svg-icon-danger",3,"inlineSVG","cacheSVG"],["href","javascript:;",3,"click"],["app-button-box","",3,"config","index","editStage","class","eventE",4,"ngFor","ngForOf"],["app-button-box","",3,"config","index","editStage","eventE"],[1,"col-sm-6","mx-auto"],[1,"btn","btn-block","btn-secondary",3,"click"],[1,"btn","btn-block","btn-primary",3,"click"],["staticPage","",3,"compId","product","editData","resourcesId","premiumAmt","eventOut"],[1,"pb-5"],[1,"mt-5"],[3,"tempData","config","editStage","submit"],["title","Delete UI",1,"btn","btn-icon","btn-light","btn-hover-danger","btn-sm",3,"click"]],template:function(e,i){1&e&&t.YNc(0,mn,18,3,"div",0),2&e&&t.Q6J("ngIf",i.item)},directives:[m.O5,m.sg,m.mk,O.r,yt.d$,qi.P,At],styles:['.wizard.wizard-1[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-wrap:wrap}.wizard.wizard-1[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center}.wizard.wizard-1[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[_ngcontent-%COMP%]   .wizard-label[_ngcontent-%COMP%]{margin-left:3.5rem;margin-right:3.5rem}.wizard.wizard-1[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[_ngcontent-%COMP%]   .wizard-label[_ngcontent-%COMP%]   .wizard-icon[_ngcontent-%COMP%]{color:#3f4254;font-size:3.75rem}.wizard.wizard-1[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[_ngcontent-%COMP%]   .wizard-label[_ngcontent-%COMP%]   .wizard-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   g[_ngcontent-%COMP%]   [fill][_ngcontent-%COMP%]{transition:fill .3s ease;fill:#3f4254}.wizard.wizard-1[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[_ngcontent-%COMP%]   .wizard-label[_ngcontent-%COMP%]   .wizard-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]:hover   g[_ngcontent-%COMP%]   [fill][_ngcontent-%COMP%]{transition:fill .3s ease}.wizard.wizard-1[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[_ngcontent-%COMP%]   .wizard-label[_ngcontent-%COMP%]   .wizard-title[_ngcontent-%COMP%]{color:#7e8299;font-size:1.1rem;font-weight:500;margin-top:.75rem}.wizard.wizard-1[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[_ngcontent-%COMP%]   .wizard-arrow[_ngcontent-%COMP%]{color:#7e8299;font-size:1.15rem}.wizard.wizard-1[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[_ngcontent-%COMP%]   .wizard-arrow.last[_ngcontent-%COMP%]{display:none}.wizard.wizard-1[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[data-wizard-state=done][_ngcontent-%COMP%]   .wizard-label[_ngcontent-%COMP%]   .wizard-icon[_ngcontent-%COMP%], .wizard.wizard-1[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[data-wizard-state=current][_ngcontent-%COMP%]   .wizard-label[_ngcontent-%COMP%]   .wizard-icon[_ngcontent-%COMP%]{color:#005f99}.wizard.wizard-1[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[data-wizard-state=done][_ngcontent-%COMP%]   .wizard-label[_ngcontent-%COMP%]   .wizard-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   g[_ngcontent-%COMP%]   [fill][_ngcontent-%COMP%], .wizard.wizard-1[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[data-wizard-state=current][_ngcontent-%COMP%]   .wizard-label[_ngcontent-%COMP%]   .wizard-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   g[_ngcontent-%COMP%]   [fill][_ngcontent-%COMP%]{transition:fill .3s ease;fill:#005f99}.wizard.wizard-1[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[data-wizard-state=done][_ngcontent-%COMP%]   .wizard-label[_ngcontent-%COMP%]   .wizard-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]:hover   g[_ngcontent-%COMP%]   [fill][_ngcontent-%COMP%], .wizard.wizard-1[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[data-wizard-state=current][_ngcontent-%COMP%]   .wizard-label[_ngcontent-%COMP%]   .wizard-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]:hover   g[_ngcontent-%COMP%]   [fill][_ngcontent-%COMP%]{transition:fill .3s ease}.wizard.wizard-1[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[data-wizard-state=done][_ngcontent-%COMP%]   .wizard-label[_ngcontent-%COMP%]   .wizard-title[_ngcontent-%COMP%], .wizard.wizard-1[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[data-wizard-state=current][_ngcontent-%COMP%]   .wizard-label[_ngcontent-%COMP%]   .wizard-title[_ngcontent-%COMP%]{color:#005f99}.wizard.wizard-1[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[data-wizard-state=done][_ngcontent-%COMP%]   .wizard-arrow[_ngcontent-%COMP%], .wizard.wizard-1[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[data-wizard-state=current][_ngcontent-%COMP%]   .wizard-arrow[_ngcontent-%COMP%]{color:#005f99}.wizard.wizard-1[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[data-wizard-state=done][_ngcontent-%COMP%]   .wizard-arrow[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   g[_ngcontent-%COMP%]   [fill][_ngcontent-%COMP%], .wizard.wizard-1[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[data-wizard-state=current][_ngcontent-%COMP%]   .wizard-arrow[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   g[_ngcontent-%COMP%]   [fill][_ngcontent-%COMP%]{transition:fill .3s ease;fill:#005f99}.wizard.wizard-1[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[data-wizard-state=done][_ngcontent-%COMP%]   .wizard-arrow[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]:hover   g[_ngcontent-%COMP%]   [fill][_ngcontent-%COMP%], .wizard.wizard-1[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[data-wizard-state=current][_ngcontent-%COMP%]   .wizard-arrow[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]:hover   g[_ngcontent-%COMP%]   [fill][_ngcontent-%COMP%]{transition:fill .3s ease}@media (min-width: 768px) and (max-width: 1199.98px){.wizard.wizard-1[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[_ngcontent-%COMP%]   .wizard-label[_ngcontent-%COMP%]{margin-left:1.5rem;margin-right:1.5rem}.wizard.wizard-1[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[_ngcontent-%COMP%]   .wizard-label[_ngcontent-%COMP%]   .wizard-icon[_ngcontent-%COMP%]{font-size:3.75rem}.wizard.wizard-1[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[_ngcontent-%COMP%]   .wizard-label[_ngcontent-%COMP%]   .wizard-title[_ngcontent-%COMP%]{margin-top:.75rem}.wizard.wizard-1[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[_ngcontent-%COMP%]   .wizard-arrow[_ngcontent-%COMP%]{font-size:1.1rem}}@media (max-width: 767.98px){.wizard.wizard-1[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]{flex-direction:column}.wizard.wizard-1[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[_ngcontent-%COMP%]{width:100%;flex-direction:row;justify-content:space-between;margin-bottom:.5rem;margin-top:.5rem}.wizard.wizard-1[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[_ngcontent-%COMP%]   .wizard-label[_ngcontent-%COMP%]{flex-direction:row;display:flex;align-items:center;margin-left:0;margin-right:0}.wizard.wizard-1[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[_ngcontent-%COMP%]   .wizard-label[_ngcontent-%COMP%]   .wizard-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:1.25rem}.wizard.wizard-1[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[_ngcontent-%COMP%]   .wizard-arrow[_ngcontent-%COMP%]{font-size:.9rem}.wizard.wizard-1[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[_ngcontent-%COMP%]   .wizard-arrow.last[_ngcontent-%COMP%]{display:block}}.wizard.wizard-3[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]{display:flex;align-items:flex-end}.wizard.wizard-3[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-wrap:wrap;flex-grow:1;margin-right:1rem}.wizard.wizard-3[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[_ngcontent-%COMP%]:last-child{margin-right:0}.wizard.wizard-3[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[_ngcontent-%COMP%]   .wizard-label[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;color:#3f4254;padding:2rem .5rem}.wizard.wizard-3[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[_ngcontent-%COMP%]   .wizard-label[_ngcontent-%COMP%]   .wizard-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;margin-bottom:.5rem;flex-wrap:wrap}.wizard.wizard-3[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[_ngcontent-%COMP%]   .wizard-label[_ngcontent-%COMP%]   .wizard-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:2rem;margin-right:.5rem}.wizard.wizard-3[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[_ngcontent-%COMP%]   .wizard-label[_ngcontent-%COMP%]   .wizard-bar[_ngcontent-%COMP%]{height:4px;width:100%;background-color:#ebedf3;position:relative}.wizard.wizard-3[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[_ngcontent-%COMP%]   .wizard-label[_ngcontent-%COMP%]   .wizard-bar[_ngcontent-%COMP%]:after{content:" ";position:absolute;top:0;left:0;height:4px;width:0;background-color:transparent;transition:color .15s ease,background-color .15s ease,border-color .15s ease,box-shadow .15s ease}.wizard.wizard-3[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[data-wizard-state=current][_ngcontent-%COMP%]   .wizard-label[_ngcontent-%COMP%]{color:#005f99}.wizard.wizard-3[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[data-wizard-state=current][_ngcontent-%COMP%]   .wizard-label[_ngcontent-%COMP%]   .wizard-bar[_ngcontent-%COMP%]:after{width:100%;background-color:#005f99}@media (max-width: 999.98px){.wizard.wizard-3[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.wizard.wizard-3[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[_ngcontent-%COMP%]{flex:0 0 100%;position:relative;width:100%}.wizard.wizard-3[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[_ngcontent-%COMP%]   .wizard-label[_ngcontent-%COMP%]{justify-content:flex-start;flex:0 0 100%;padding:1rem 0}}.wizard.wizard-2[_ngcontent-%COMP%]{display:flex}.wizard.wizard-2[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]{padding:0;flex:0 0 400px;width:400px;max-width:100%}.wizard.wizard-2[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.wizard.wizard-2[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[_ngcontent-%COMP%]{padding:.75rem 1.5rem;position:relative;border-radius:.5rem;transition:color .15s ease,background-color .15s ease,border-color .15s ease,box-shadow .15s ease}.wizard.wizard-2[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[_ngcontent-%COMP%]   .wizard-wrapper[_ngcontent-%COMP%]{display:flex}.wizard.wizard-2[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[_ngcontent-%COMP%]   .wizard-icon[_ngcontent-%COMP%]{font-size:2.5rem;margin-right:1.1rem;transition:color .15s ease,background-color .15s ease,border-color .15s ease,box-shadow .15s ease}.wizard.wizard-2[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[_ngcontent-%COMP%]   .wizard-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3f4254}.wizard.wizard-2[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[_ngcontent-%COMP%]   .wizard-icon[_ngcontent-%COMP%]   .svg-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   g[_ngcontent-%COMP%]   [fill][_ngcontent-%COMP%]{transition:fill .3s ease;fill:#3f4254}.wizard.wizard-2[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[_ngcontent-%COMP%]   .wizard-icon[_ngcontent-%COMP%]   .svg-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]:hover   g[_ngcontent-%COMP%]   [fill][_ngcontent-%COMP%]{transition:fill .3s ease}.wizard.wizard-2[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[_ngcontent-%COMP%]   .wizard-label[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.wizard.wizard-2[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[_ngcontent-%COMP%]   .wizard-label[_ngcontent-%COMP%]   .wizard-title[_ngcontent-%COMP%]{color:#181c32;font-weight:500;font-size:1.1rem}.wizard.wizard-2[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[_ngcontent-%COMP%]   .wizard-label[_ngcontent-%COMP%]   .wizard-desc[_ngcontent-%COMP%]{color:#7e8299}.wizard.wizard-2[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[_ngcontent-%COMP%]   .wizard-arrow[_ngcontent-%COMP%]{color:#7e8299;font-size:1.15rem}.wizard.wizard-2[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[_ngcontent-%COMP%]   .wizard-arrow.last[_ngcontent-%COMP%]{display:none}.wizard.wizard-2[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[data-wizard-state=current][_ngcontent-%COMP%]{background-color:#f3f6f9;transition:color .15s ease,background-color .15s ease,border-color .15s ease,box-shadow .15s ease}.wizard.wizard-2[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[data-wizard-state=current][_ngcontent-%COMP%]   .wizard-icon[_ngcontent-%COMP%]{transition:color .15s ease,background-color .15s ease,border-color .15s ease,box-shadow .15s ease}.wizard.wizard-2[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[data-wizard-state=current][_ngcontent-%COMP%]   .wizard-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#005f99!important}.wizard.wizard-2[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[data-wizard-state=current][_ngcontent-%COMP%]   .wizard-icon[_ngcontent-%COMP%]   .svg-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   g[_ngcontent-%COMP%]   [fill][_ngcontent-%COMP%]{transition:fill .3s ease;fill:#005f99!important}.wizard.wizard-2[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[data-wizard-state=current][_ngcontent-%COMP%]   .wizard-icon[_ngcontent-%COMP%]   .svg-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]:hover   g[_ngcontent-%COMP%]   [fill][_ngcontent-%COMP%]{transition:fill .3s ease}.wizard.wizard-2[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[data-wizard-state=current][_ngcontent-%COMP%]:after{left:100%;top:50%;transform:translateY(-50%);content:" ";height:0;width:0;border:solid transparent;position:absolute;border-left-color:#f3f6f9;border-width:1rem}.wizard.wizard-2[_ngcontent-%COMP%]   .wizard-body[_ngcontent-%COMP%]{width:100%}@media (min-width: 1000px) and (max-width: 1399.98px){.wizard.wizard-2[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]{flex:0 0 325px;width:325px}}@media (max-width: 999.98px){.wizard.wizard-2[_ngcontent-%COMP%]{display:block}.wizard.wizard-2[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]{width:100%;border-bottom:1px solid #EBEDF3}.wizard.wizard-2[_ngcontent-%COMP%]   .wizard-nav[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]   .wizard-step[data-wizard-state=current][_ngcontent-%COMP%]:after{content:none}.wizard.wizard-2[_ngcontent-%COMP%]   .wizard-body[_ngcontent-%COMP%]{width:100%}}.active[_ngcontent-%COMP%]   .wizard-title[_ngcontent-%COMP%], .wizard-label.active[_ngcontent-%COMP%], .done[_ngcontent-%COMP%]   .wizard-title[_ngcontent-%COMP%], .done[_ngcontent-%COMP%]{color:#3699ff!important}.active[_ngcontent-%COMP%]   .wizard-title[_ngcontent-%COMP%]   .wizard-icon[_ngcontent-%COMP%], .wizard-label.active[_ngcontent-%COMP%]   .wizard-icon[_ngcontent-%COMP%], .done[_ngcontent-%COMP%]   .wizard-title[_ngcontent-%COMP%]   .wizard-icon[_ngcontent-%COMP%], .done[_ngcontent-%COMP%]   .wizard-icon[_ngcontent-%COMP%]{color:#3699ff!important}.wizard-title[_ngcontent-%COMP%], .wizard-label[_ngcontent-%COMP%]{max-width:145px}.wizard-steps[_ngcontent-%COMP%]{align-items:flex-start!important}.wizard-wrapper.active[_ngcontent-%COMP%]   .wizard-icon[_ngcontent-%COMP%], .wizard-wrapper.active[_ngcontent-%COMP%]   .wizard-label[_ngcontent-%COMP%], .wizard-wrapper.done[_ngcontent-%COMP%]   .wizard-icon[_ngcontent-%COMP%], .wizard-wrapper.done[_ngcontent-%COMP%]   .wizard-label[_ngcontent-%COMP%]{color:#3699ff!important}.wizard-wrapper[_ngcontent-%COMP%]   .wizard-icon[_ngcontent-%COMP%], .wizard-wrapper[_ngcontent-%COMP%]   .wizard-label[_ngcontent-%COMP%]{color:#3f4254}.wizard-step[_ngcontent-%COMP%] > .wizard-label[_ngcontent-%COMP%]{margin-left:1rem!important;margin-right:1rem!important}.wizard-step[_ngcontent-%COMP%]{align-items:flex-start!important}.wizard-icon[_ngcontent-%COMP%]{font-size:2rem!important}.active[_ngcontent-%COMP%]   .wizard-bar[_ngcontent-%COMP%], .done[_ngcontent-%COMP%]   .wizard-bar[_ngcontent-%COMP%]{background-color:#3699ff!important}.top-box[_ngcontent-%COMP%]{color:#b5b5c3;margin-left:50px}.top-box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#000}']}),o})();var hn=u(70933),fn=u(59472);let vn=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[m.uU,m.JJ],imports:[[m.ez,yt.vi,l.u5,l.UX,g.bz,hn.Q,fn.Q,y.Bz.forChild([{path:"",component:_n}])]]}),o})()},43329:(L,A,u)=>{u.d(A,{D:()=>O});var m=u(18260),y=u(91691),h=u(83668),C=u(44522);const f=`${m.N.apiUrl}/quotationAddon`;let O=(()=>{class t extends y.i{constructor(g){super(g,f),this.httpClient=g}getOne(g,j){return this.httpClient.get(f+"/"+g+"/"+j)}deleteAll(g){return this.httpClient.delete(f+"/quotation/"+g)}getAllById(g){return this.httpClient.post(f+"s",g)}}return t.\u0275fac=function(g){return new(g||t)(h.LFG(C.eN))},t.\u0275prov=h.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},45570:(L,A,u)=>{u.d(A,{a:()=>O});var m=u(18260),y=u(91691),h=u(83668),C=u(44522);const f=`${m.N.apiUrl}/quotationCoverage`;let O=(()=>{class t extends y.i{constructor(g){super(g,f),this.httpClient=g}getOne(g,j){return this.httpClient.get(f+"/"+g+"/"+j)}deleteAll(g){return this.httpClient.delete(f+"/quotation/"+g)}getAllById(g){return this.httpClient.post(f+"s",g)}}return t.\u0275fac=function(g){return new(g||t)(h.LFG(C.eN))},t.\u0275prov=h.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},61438:(L,A,u)=>{u.d(A,{F:()=>O});var m=u(18260),y=u(91691),h=u(83668),C=u(44522);const f=`${m.N.apiUrl}/endowment`;let O=(()=>{class t extends y.i{constructor(g){super(g,f),this.httpClient=g}deleteMany(g){return this.httpClient.delete(f+"/resource/"+g)}getMany(g){return this.httpClient.get(f+"/resource/"+g)}saveMany(g){return this.httpClient.post(f+"s",g)}}return t.\u0275fac=function(g){return new(g||t)(h.LFG(C.eN))},t.\u0275prov=h.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},66977:(L,A,u)=>{u.d(A,{U:()=>O});var m=u(18260),y=u(91691),h=u(83668),C=u(44522);const f=`${m.N.apiUrl}/fire-policy/risk`;let O=(()=>{class t extends y.i{constructor(g){super(g,f),this.httpClient=g}deleteMany(g){return this.httpClient.delete(f+"/resource/"+g)}getMany(g){return this.httpClient.get(f+"/resource/"+g)}getStock(g){return this.httpClient.get(f+"/"+g+"/stock")}getPlant(g){return this.httpClient.get(f+"/"+g+"/plant-machinery")}getContent(g){return this.httpClient.get(f+"/"+g+"/content")}}return t.\u0275fac=function(g){return new(g||t)(h.LFG(C.eN))},t.\u0275prov=h.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},75103:(L,A,u)=>{u.d(A,{V:()=>O});var m=u(18260),y=u(91691),h=u(83668),C=u(44522);const f=`${m.N.apiUrl}/fire-policy`;let O=(()=>{class t extends y.i{constructor(g){super(g,f),this.httpClient=g}getOne(g){return console.log(g,"data"),this.httpClient.get(f+"/resource?resourceId="+g)}}return t.\u0275fac=function(g){return new(g||t)(h.LFG(C.eN))},t.\u0275prov=h.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);