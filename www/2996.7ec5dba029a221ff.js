"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2996],{2996:(N,m,l)=>{l.r(m),l.d(m,{MyCalendarModule:()=>S});var s=l(86019),g=l(49133),y=l(87626),h=l(45598),v=l(4205),d=l(85993),_=l(57842),u=l(69215),C=l(21864),r=l(74464),T=l(50273),t=l(83668);function x(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",5),t.TgZ(2,"div",6),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.oxw(2).navigateToDetail("edit",c.meta)}),t.TgZ(3,"div",7),t.TgZ(4,"div",8),t.TgZ(5,"label",9),t._uU(6),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&n){const e=o.$implicit;t.xp6(3),t.Q6J("ngClass",e.type),t.xp6(3),t.hij("",e.title," ")}}function w(n,o){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,x,7,2,"ng-container",4),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.data)}}function Z(n,o){1&n&&(t.TgZ(0,"div"),t.ynx(1),t.TgZ(2,"div",5),t.TgZ(3,"div",10),t.TgZ(4,"label"),t._uU(5,"There is no activity today "),t.qZA(),t.qZA(),t.qZA(),t.BQk(),t.qZA())}let M=(()=>{class n{constructor(e,a){this.router=e,this.modalCrl=a,this.data=[]}ngOnInit(){}navigateToDetail(e,a){this.modalCrl.dismissAll(),this.router.navigate(["/activity/activity-management-detail"],{queryParams:{pageStatus:e,pageId:a}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(v.F0),t.Y36(d.FF))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-event-list"]],inputs:{data:"data"},decls:6,vars:2,consts:[[1,"modal-content"],[1,"modal-header"],["id","example-modal-sizes-title-lg",1,"modal-title","h4","left-border-image"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"row",2,"margin","10px 0px"],[1,"col",3,"click"],[1,"card","card-custom",3,"ngClass"],[2,"text-align","center"],[2,"margin-top","20px"],[1,"col"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._uU(3," Activity List "),t.qZA(),t.qZA(),t.YNc(4,w,2,1,"div",3),t.YNc(5,Z,6,0,"div",3),t.qZA()),2&e&&(t.xp6(4),t.Q6J("ngIf",a.data.length>0),t.xp6(1),t.Q6J("ngIf",0==a.data.length))},directives:[s.O5,s.sg,s.mk],styles:[".Open[_ngcontent-%COMP%]{background-color:#3dc2ff;color:#fff}.Face[_ngcontent-%COMP%]{background-color:#3880ff;color:#fff}.Online[_ngcontent-%COMP%]{background-color:#ffc409;color:#fff}.Phone[_ngcontent-%COMP%]{background-color:#2dd36f;color:#fff}"]}),n})();var D=l(95976);const O=["modalContent"];function A(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"mwl-calendar-month-view",5),t.NdJ("dayClicked",function(i){return t.CHM(e),t.oxw().dayClicked(i.day)})("eventClicked",function(i){return t.CHM(e),t.oxw().handleEvent("Clicked",i.event)})("eventTimesChanged",function(i){return t.CHM(e),t.oxw().eventTimesChanged(i)}),t.qZA()}if(2&n){const e=t.oxw(),a=t.MAs(6);t.Q6J("cellTemplate",a)("events",e.events)("viewDate",e.viewDate)("refresh",e.refresh)("activeDayIsOpen",e.activeDayIsOpen)}}function F(n,o){if(1&n&&(t.TgZ(0,"span",10),t._uU(1),t.qZA()),2&n){const e=t.oxw().day;t.xp6(1),t.Oqu(e.badgeTotal)}}const E=function(n){return{backgroundColor:n}};function I(n,o){if(1&n&&t._UZ(0,"div",13),2&n){const e=o.$implicit,a=t.oxw(3);t.Q6J("ngStyle",t.VKq(1,E,a.getColor(e)))}}function k(n,o){if(1&n&&(t.TgZ(0,"span",10),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).day;t.xp6(1),t.hij(" + ",e.events.length-20," ")}}function b(n,o){if(1&n&&(t.TgZ(0,"div",11),t.YNc(1,I,1,3,"div",12),t.ALo(2,"slice"),t.YNc(3,k,2,1,"span",7),t.qZA()),2&n){const e=t.oxw(),a=e.day,i=e.trackByEventId,c=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.Dn7(2,3,a.events,0,c.showAll?void 0:20))("ngForTrackBy",i),t.xp6(2),t.Q6J("ngIf",a.events.length>20)}}function P(n,o){if(1&n&&(t.TgZ(0,"div",6),t.YNc(1,F,2,1,"span",7),t.TgZ(2,"span",8),t._uU(3),t.ALo(4,"calendarDate"),t.qZA(),t.qZA(),t.YNc(5,b,4,7,"div",9)),2&n){const e=o.day,a=o.locale;t.xp6(1),t.Q6J("ngIf",e.badgeTotal>0),t.xp6(2),t.Oqu(t.Dn7(4,3,e.date,"monthViewDayNumber",a)),t.xp6(2),t.Q6J("ngIf",e.events.length>0)}}const p_Face={primary:"#3880ff",secondary:"#3880ff"},p_Online={primary:"#ffc409",secondary:"#ffc409"},p_Phone={primary:"#2dd36f",secondary:"#2dd36f"};let J=(()=>{class n{constructor(e,a,i,c){this.modal=e,this.activityService=a,this.router=i,this.modalCrl=c,this.view=r.wr.Month,this.calendarView=r.wr,this.viewDate=new Date,this.showAll=!1,this.actions=[{label:'<i class="fas fa-fw fa-pencil-alt"></i>',a11yLabel:"Edit",onClick:({event:f})=>{this.handleEvent("Edited",f)}}],this.refresh=new T.x,this.eventNumber=0,this.activityList=[],this.EventData=[],this.events=[],this.activeDayIsOpen=!1}ngOnInit(){}ngAfterViewInit(){this.getActivity()}getActivity(){this.activityService.getActivityList({status:"Open"}).subscribe(a=>{a&&(console.log("RES",a),this.activityList=a,this.EventData=this.activityList.map(i=>{let c;return"Face to Face"==i.activityType?c=p_Face:"Online"==i.activityType?c=p_Online:"Phone Call"==i.activityType&&(c=p_Phone),{start:new Date(i.planDate),end:new Date(i.planDate),title:i.activityTitle+"( "+i.activityType+" )",type:i.activityType,color:c,meta:i.activityNo,actions:this.actions}}),console.log(" this.EventData",this.EventData),this.events=this.EventData,this.eventNumber=this.events.length,this.refresh.next())})}dayClicked({date:e,events:a}){(0,u.Z)(e,this.viewDate)&&(this.activeDayIsOpen=((0,C.Z)(this.viewDate,e),!1),this.viewDate=e);const i=this.modalCrl.open(M,{size:"sm",backdrop:!0});i.componentInstance.isModal=!0,i.componentInstance.data=a,i.result.then(()=>{},c=>{}),console.log("day",e,"events",a)}eventTimesChanged({event:e,newStart:a,newEnd:i}){this.events=this.events.map(c=>c===e?Object.assign(Object.assign({},e),{start:a,end:i}):c),this.handleEvent("Dropped or resized",e)}handleEvent(e,a){this.navigateToDetail("edit",a.meta)}navigateToDetail(e,a){this.router.navigate(["/activity/activity-management-detail"],{queryParams:{pageStatus:e,pageId:a}})}addEvent(e){this.navigateToDetail("create",null)}deleteEvent(e){this.events=this.events.filter(a=>a!==e)}setView(e){this.view=e}closeOpenMonthViewDay(){this.activeDayIsOpen=!1}getColor(e){var a;return null===(a=e.color)||void 0===a?void 0:a.primary}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.FF),t.Y36(D.e),t.Y36(v.F0),t.Y36(d.FF))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-mycalendar"]],viewQuery:function(e,a){if(1&e&&t.Gf(O,7),2&e){let i;t.iGM(i=t.CRH())&&(a.modalContent=i.first)}},decls:7,vars:2,consts:[[1,"row"],[1,"col-12"],[3,"ngSwitch"],[3,"cellTemplate","events","viewDate","refresh","activeDayIsOpen","dayClicked","eventClicked","eventTimesChanged",4,"ngSwitchCase"],["customCellTemplate",""],[3,"cellTemplate","events","viewDate","refresh","activeDayIsOpen","dayClicked","eventClicked","eventTimesChanged"],[1,"cal-cell-top"],["class","cal-day-badge",4,"ngIf"],[1,"cal-day-number"],["class","cal-events",4,"ngIf"],[1,"cal-day-badge"],[1,"cal-events"],["class","cal-event",3,"ngStyle",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cal-event",3,"ngStyle"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t._UZ(2,"br"),t.TgZ(3,"div",2),t.YNc(4,A,1,5,"mwl-calendar-month-view",3),t.qZA(),t.YNc(5,P,6,7,"ng-template",null,4,t.W1O),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngSwitch",a.view),t.xp6(1),t.Q6J("ngSwitchCase",a.calendarView.Month))},directives:[s.RF,s.n9,r.GH,s.O5,s.sg,s.PC],pipes:[r.vk,s.OU],styles:[".cal-month-view[_ngcontent-%COMP%]   .cal-open-day-events[_ngcontent-%COMP%]{padding:10px 15px;overflow:auto!important;max-height:120px!important;line-height:30px!important}.cal-month-view[_ngcontent-%COMP%]   .cal-open-day-events[_ngcontent-%COMP%]{color:#000!important;background-color:#e7dede!important;box-shadow:inset 0 0 15px #ece6e6d2!important}","h3[_ngcontent-%COMP%]{margin:0 0 10px}pre[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:15px}"],changeDetection:0}),n})();var L=l(31145),Q=l(92424);let S=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[s.ez,g.u5,g.UX,y.vi,h.fA,d.M,_.A0,v.Bz.forChild([{path:"",component:J}]),L.JT.forRoot(),r._8.forRoot({provide:r._A,useFactory:Q.x})]]}),n})()}}]);