"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8078],{56581:(A,d,i)=>{i.d(d,{v:()=>g});var l=i(92340),c=i(38313),p=i(5e3),m=i(40520);const v=`${l.N.apiUrl}/customer`;let g=(()=>{class r extends c.i{constructor(u){super(u,v),this.httpClient=u}}return r.\u0275fac=function(u){return new(u||r)(p.LFG(m.eN))},r.\u0275prov=p.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},39641:(A,d,i)=>{i.d(d,{j9:()=>c,kZ:()=>p,uv:()=>m});var l=i(34436);const c=[{title:"Application ID",type:l.Y.FEILD,field:"id"},{title:"Product Name",type:l.Y.FEILD,field:"productName"},{title:"Product Code",type:l.Y.FEILD,field:"productCode"},{title:"Quotation ID",type:l.Y.FEILD,field:"quotationId"},{title:"Agent Name",type:l.Y.FEILD,field:"agentFirstName"},{title:"Premium",type:l.Y.FEILD,field:"premium",amtFormat:!0},{title:"Status",type:l.Y.FEILD,field:"status",isStatus:!0},{title:"Submission Status",type:l.Y.FEILD,field:"apiStatus",isApiStatus:!0},{title:"Date",type:l.Y.FEILD,field:"createdAt",isDate:!0},{title:"Actions",type:l.Y.ACTION,field:"actions",btn:{view:!0,edit:!0,editOnState:!0}}],p=["id","productName","productCode","agentFirstName","premium","status","apiStatus","createdAt","actions"],m=[{code:"D",value:"DRAFT APPLICATION"},{code:"A",value:"APPROVED APPLICATION"},{code:"R",value:"REJECT APPLICATION"},{code:"05",value:"ACTIVE POLICY"},{code:"04",value:"APPROVE RENEWAL"},{code:"25",value:"CANCELLATION IN PROGRESS"},{code:"09",value:"CANCELLED"},{code:"06",value:"DNDORSEMENT/ALTERTION STARTED"},{code:"13",value:"EXPIRED/MATURED"},{code:"17",value:"FORFEITED"},{code:"15",value:"LAPSED"},{code:"19",value:"PAID UP"},{code:"10",value:"QUICK QUOTE"},{code:"07",value:"REFFERED TO UNDERWRITE"},{code:"12",value:"RENEWAL IN PROGRESS"},{code:"16",value:"REVIVAL IN PROGRESS"},{code:"18",value:"REVIVED POLICY"},{code:"14",value:"SPECIAL REVIVAL IN PROGRESS"},{code:"08",value:"SUSPENDED"},{code:"11",value:"WITHDRAW/SURRENDERED"},{code:"F",value:"FAIL"},{code:"S",value:"SENDING"}]},28078:(A,d,i)=>{i.r(d),i.d(d,{PolicyModule:()=>W});var l=i(69808),c=i(93075),p=i(6517),m=i(19775),v=i(80492),g=i(15439),r=i(4128),f=i(39646),u=i(70262),D=i(88757),L=i(92340),Z=i(17606),O=i(93230),S=i(17585),N=i(76394),T=i(60834),h=i(39641),t=i(5e3),P=i(63272),R=i(78680),y=i(96592),F=i(53638),M=i(56581),U=i(32157),b=i(65435),E=i(64537),Y=i(98807);function q(n,s){if(1&n){const o=t.EpF();t.TgZ(0,"app-common-list-2",28,29),t.NdJ("btnEvent",function(a){return t.CHM(o),t.oxw().actionBtn(a)}),t.qZA()}if(2&n){const o=t.oxw();t.Q6J("data",o.quoList)("type","policy")}}const I=function(n){return{activated:n}};let J=(()=>{class n{constructor(o,e,a,C,K,z,j,H){this.modalService=o,this.prodctService=e,this.router=a,this.policyService=C,this.cdRef=K,this.customerService=z,this.menuService=j,this.cdf=H,this.quoList=[],this.isTeam=!1,this.policyAccess=Z.w,this.product=[],this.productOption=[],this.applicationStatusOption=h.uv,this.Default_DOWNLOAD_URL=`${L.N.apiUrl}/attachment-downloader`,this.ELEMENT_COL=JSON.parse(JSON.stringify(h.j9)),this.displayedColumns=h.kZ,this.loadForm()}ngOnInit(){this.checkPremission(),this.getPolicyList(),this.getProduct()}loadForm(){let o=new Date,e=new Date(o.setMonth(o.getMonth()-1)),a=new Date(o.setMonth(o.getMonth()+1));this.policyForm=new c.cw({startDate:new c.NI(e),endDate:new c.NI(a),isTeam:new c.NI(null),productId:new c.NI(null),policyholderName:new c.NI(null),applicationId:new c.NI(null),quotationId:new c.NI(null),applicationStatus:new c.NI(null)})}ngOnDestroy(){}cancel(){}changeView(o){this.isTeam="team"==o,this.policyForm.controls.isTeam.setValue(this.isTeam),this.cdRef.detectChanges(),this.getPolicyList()}checkPremission(){this.menuService.dataAccess.subscribe(o=>{o&&(this.policyAccess=o.application,this.policyAccess.edit||(this.ELEMENT_COL[8].btn.edit=!1))})}createOrEdit(){const o=this.modalService.open(N.P,{size:"xl",backdrop:!1});o.componentInstance.type="modal",o.result.then(()=>{},e=>{e&&"save"==e.type&&this.chooseCustomer(e)})}chooseCustomer(o){const e=this.modalService.open(S.b,{size:"xl",backdrop:!1});e.componentInstance.isPopup=!0,e.result.then(()=>{},a=>{a&&"save"==a.type&&(this.prodctService.creatingCustomer=a.data,this.prodctService.createingProd=o.data,this.prodctService.editData=null,this.prodctService.referenceID=null,this.prodctService.viewType="policy",this.prodctService.type="policy",this.router.navigateByUrl("/product-form"))})}getPolicyList(){this.policyService.getPolicyList(this.policyForm.getRawValue()).toPromise().then(o=>{if(o){console.log(o),this.quoList=o;for(var e=0;e<this.quoList.length;e++)this.quoList[e].icon&&(this.quoList[e].productImage=this.Default_DOWNLOAD_URL+"/"+this.quoList[e].icon);this.cdRef.detectChanges(),this.commonList&&this.commonList.detchChange()}})}editLayout(o){(0,r.D)([this.prodctService.findOne(o.productId),this.customerService.findOne(o.customerId||1).pipe((0,u.K)(e=>(0,f.of)(void 0)))]).toPromise().then(e=>{e[0]&&(this.prodctService.createingProd=e[0],this.prodctService.creatingCustomer=e[1],this.prodctService.type="policy",this.prodctService.viewType="policy",this.prodctService.editData=o,this.prodctService.referenceID=o.quotationId,this.prodctService.creatingLeadId=o.leadId,this.router.navigateByUrl("/product-form"))})}getProduct(){this.prodctService.getAll("yes").toPromise().then(o=>{o&&(this.product=o,this.productOption=o.map(e=>({code:e.id,value:e.name,type:e.type})),this.cdf.detectChanges())})}clear(o){"productId"==o&&this.policyForm.controls[o].setValue(null)}FormatedDate(o){return g(o,"YYYYMMDD").format("MM/DD/YYYY")}actionBtn(o){"view"==o.cmd?this.goViewDetail(o.data):"edit"==o.cmd&&this.editLayout(o.data)}goViewDetail(o){this.prodctService.findOne(o.productId).toPromise().then(e=>{e&&(this.prodctService.createingProd=e,this.prodctService.previewType="policy",this.prodctService.editData=o,this.router.navigateByUrl("/resourse-detail"))})}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(P.FF),t.Y36(R.f),t.Y36(y.F0),t.Y36(F.d),t.Y36(t.sBO),t.Y36(M.v),t.Y36(Z.q),t.Y36(t.sBO))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-policy"]],viewQuery:function(o,e){if(1&o&&(t.Gf(O.I,5),t.Gf(T.o,5)),2&o){let a;t.iGM(a=t.CRH())&&(e.matTable=a.first),t.iGM(a=t.CRH())&&(e.commonList=a.first)}},features:[t._Bn([{provide:v._A,useClass:p.t7,deps:[m.Ad]},{provide:m.sG,useValue:D.Gs}])],decls:60,vars:24,consts:[[1,"row"],[1,"col-12","text-right","pb-5"],[1,"btn","btn-light-dark","new-btn-dark-gray","mr-2","btn-round",3,"ngClass","click"],[1,"btn","btn-light-dark","new-btn-dark-gray","btn-round",3,"ngClass","click"],[1,"col-12"],[1,"card","card-custom","gutter-b","data"],[1,"card-header"],[1,"card-title"],[1,"card-label","left-border-image"],[1,"card-toolbar"],[1,"flaticon2-magnifier-tool","search-tool",3,"click"],["type","button",1,"btn","btn-primary","ml-2",2,"min-width","50px",3,"click"],[1,""],[1,"card-body","px-10","py-3"],["action","#",1,"form",3,"formGroup"],[1,"row",2,"align-items","center"],["remove-host","",3,"formInput","colClass"],[1,"col-xl-4","col-sm-6"],[1,"form-group","row"],[1,"col-sm-4","col-form-label"],[1,"col-sm-8"],["bindLabel","value","bindValue","code","formControlName","productId",1,"ng-custom-select",3,"items","clear"],["formControlName","policyholderName","autocomplete","off",1,"form-control","form-control-sm"],["formControlName","applicationId","autocomplete","off",1,"form-control","form-control-sm"],["formControlName","quotationId","autocomplete","off",1,"form-control","form-control-sm"],["bindLabel","value","bindValue","value","formControlName","applicationStatus",1,"ng-custom-select",3,"items"],[1,"card-body","customer-card-body"],["class","data-list",3,"data","type","btnEvent",4,"ngIf"],[1,"data-list",3,"data","type","btnEvent"],["commonList",""]],template:function(o,e){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"button",2),t.NdJ("click",function(){return e.changeView("myview")}),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return e.changeView("team")}),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.qZA(),t.TgZ(8,"div",4),t.TgZ(9,"div",5),t.TgZ(10,"div",6),t.TgZ(11,"div",7),t.TgZ(12,"h3",8),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.TgZ(15,"div",9),t.TgZ(16,"span",10),t.NdJ("click",function(){return e.getPolicyList()}),t.qZA(),t.TgZ(17,"button",11),t.NdJ("click",function(){return e.cancel()}),t.TgZ(18,"span",12),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"div",13),t.TgZ(22,"form",14),t.TgZ(23,"div",15),t._UZ(24,"app-start-end-date",16),t.TgZ(25,"div",17),t.TgZ(26,"div",18),t.TgZ(27,"label",19),t._uU(28," Product Name"),t.qZA(),t.TgZ(29,"div",20),t.TgZ(30,"ng-select",21),t.NdJ("clear",function(){return e.clear("productId")}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(31,"div",17),t.TgZ(32,"div",18),t.TgZ(33,"label",19),t._uU(34," Policy Holder Name"),t.qZA(),t.TgZ(35,"div",20),t._UZ(36,"input",22),t.qZA(),t.qZA(),t.qZA(),t.TgZ(37,"div",17),t.TgZ(38,"div",18),t.TgZ(39,"label",19),t._uU(40," Application ID"),t.qZA(),t.TgZ(41,"div",20),t._UZ(42,"input",23),t.qZA(),t.qZA(),t.qZA(),t.TgZ(43,"div",17),t.TgZ(44,"div",18),t.TgZ(45,"label",19),t._uU(46,"QTG"),t.qZA(),t.TgZ(47,"div",20),t._UZ(48,"input",24),t.qZA(),t.qZA(),t.qZA(),t.TgZ(49,"div",17),t.TgZ(50,"div",18),t.TgZ(51,"label",19),t._uU(52,"Application submission status"),t.qZA(),t.TgZ(53,"div",20),t._UZ(54,"ng-select",25),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(55,"div",0),t.TgZ(56,"div",4),t.TgZ(57,"div",5),t.TgZ(58,"div",26),t.YNc(59,q,2,2,"app-common-list-2",27),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&o&&(t.xp6(2),t.Q6J("ngClass",t.VKq(20,I,!e.isTeam)),t.xp6(1),t.Oqu(t.lcZ(4,12,"FORM.my_view")),t.xp6(2),t.Q6J("ngClass",t.VKq(22,I,e.isTeam)),t.xp6(1),t.Oqu(t.lcZ(7,14,"FORM.team_veiw")),t.xp6(7),t.Oqu(t.lcZ(14,16,"FORM.application_list")),t.xp6(6),t.Oqu(t.lcZ(20,18,"FORM.btn_cancel")),t.xp6(3),t.Q6J("formGroup",e.policyForm),t.xp6(2),t.Q6J("formInput",e.policyForm)("colClass","col-xl-4 col-sm-6"),t.xp6(6),t.Q6J("items",e.productOption),t.xp6(24),t.Q6J("items",e.applicationStatusOption),t.xp6(5),t.Q6J("ngIf",e.quoList.length>0))},directives:[l.mk,c._Y,c.JL,c.sg,U.Q,b.Z,E.w9,c.JJ,c.u,c.Fj,l.O5,T.o],pipes:[Y.X],styles:[".activated[_ngcontent-%COMP%]{background-color:#ff8100!important;color:#fff!important}.input-group[_ngcontent-%COMP%]   .form-control-sm[_ngcontent-%COMP%]{background-color:#fff;background-clip:padding-box;border:1px solid #E4E6EF;padding:0;width:100%}.remove-p[_ngcontent-%COMP%]{margin-bottom:0}.col-form-label[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}.form-group.row[_ngcontent-%COMP%]{align-items:center}"]}),n})();var V=i(69544),B=i(98262),G=i(50282);let Q=(()=>{class n{ngOnInit(){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-policy-page"]],decls:1,vars:0,template:function(o,e){1&o&&t._UZ(0,"router-outlet")},directives:[y.lC],encapsulation:2}),n})();var w=i(7181),x=i(94142);let W=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[l.ez,V.vi,c.u5,c.UX,P.bz,B.ProductsModule,w.j,G.fA,E.A0,x.W,y.Bz.forChild([{path:"application",component:Q,children:[{path:"list",component:J}]}])]]}),n})()}}]);