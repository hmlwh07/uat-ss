"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8403],{88403:(W,f,i)=>{i.r(f),i.d(f,{LeadListModule:()=>H});var r=i(86019),t=i(83668),n=i(49133),N=i(90949),l=i(18510);const y=[{title:"Lead ID",type:l.Y.FEILD,field:"leadId"},{title:"Lead Name",type:l.Y.FEILD,field:"contactName"},{title:"Product",type:l.Y.FEILD,field:"productName"},{title:"Existing Customer",type:l.Y.FEILD,field:"existingCustomerName"},{title:"Source",type:l.Y.FEILD,field:"sourceValue"},{title:"Open Date",type:l.Y.FEILD,field:"openedDate",isFromatDate:!0},{title:"Campaign Name",type:l.Y.FEILD,field:"campaignName"},{title:"Status",type:l.Y.FEILD,field:"statusCode",isLeadStatus:!0},{title:"Actions",type:l.Y.ACTION,field:"actions",btn:{edit:!0}}],F=["leadId","contactName","productName","existingCustomerName","sourceValue","openedDate","campaignName","statusCode","actions"];var c=i(44290),D=i(92118),S=i(47975),O=i(11918),m=i(54753),U=i(28100),u=i(72835),p=i(82997),E=i(18260),Z=i(49065),L=i(29018),b=i(57311),x=i(26697),J=i(35618),g=i(24872),M=i(15470),V=i(85472),v=i(57842);function P(a,d){if(1&a){const e=t.EpF();t.TgZ(0,"div",22),t.TgZ(1,"div",23),t.TgZ(2,"h3",24),t._uU(3,"Lead List"),t.qZA(),t.qZA(),t.TgZ(4,"div",25),t.TgZ(5,"span",26),t.NdJ("click",function(){return t.CHM(e),t.oxw().getList()}),t.qZA(),t.TgZ(6,"button",27),t.NdJ("click",function(){return t.CHM(e),t.oxw().cancel()}),t.TgZ(7,"span",28),t._uU(8,"Cancel"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}}function Y(a,d){if(1&a){const e=t.EpF();t.TgZ(0,"app-common-list-2",31,32),t.NdJ("btnEvent",function(s){return t.CHM(e),t.oxw(2).actionBtn(s)}),t.qZA()}if(2&a){const e=t.oxw(2);t.Q6J("data",e.LeadList)("type","lead")}}function q(a,d){if(1&a&&(t.TgZ(0,"div",29),t.YNc(1,Y,2,2,"app-common-list-2",30),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.LeadList.length>0)}}let Q=(()=>{class a{constructor(e,o,s,I,z,K){this.router=e,this.cdf=o,this.LeadListService=s,this.masterDataService=I,this.productService=z,this.modalService=K,this.ELEMENT_COL=JSON.parse(JSON.stringify(y)),this.displayedColumns=JSON.parse(JSON.stringify(F)),this.LeadList=[],this.isTableView=!0,this.selectedUser=new t.vpe,this.isPopup=!1,this.show=!1,this.statusOption=[],this.sourceOption=[],this.productOption=[],this.DEFAULT_DOWNLOAD_URL=`${E.N.apiUrl}/attachment-downloader/`,this.loadForm()}ngOnInit(){this.show=!0}ngAfterViewInit(){this.getMaster(),this.getList()}getMaster(){(0,U.D)([this.getStatus(),this.getSource(),this.getProduct()]).toPromise().then(e=>{e&&(this.statusOption=e[0],this.sourceOption=e[1],this.productOption=e[2],this.cdf.detectChanges())})}loadForm(){this.LeadForm=new n.cw({campaignName:new n.NI(null),existingCustomerId:new n.NI(null),existingCustomerName:new n.NI({value:null,disabled:!0}),contactName:new n.NI(null),leadId:new n.NI(null),startDate:new n.NI(null),endDate:new n.NI(null),productId:new n.NI(null),sourceCode:new n.NI(null),statusCode:new n.NI(null)})}navigateToDetail(e,o,s){this.router.navigate(["/lead/lead-detail"],{queryParams:{pageStatus:e,pageId:o,pageSecondaryId:s,leadId:o}})}getStatus(){return this.masterDataService.getDataByType("LEAD_STATUS").pipe((0,m.U)(e=>this.getFormatOpt(e)),(0,u.K)(e=>(0,p.of)([])))}updateURL(e){e&&(e.target.src="assets/icon/general_product.svg")}getSource(){return this.masterDataService.getDataByType("LEAD_SOURCE").pipe((0,m.U)(e=>this.getFormatOpt(e)),(0,u.K)(e=>(0,p.of)([])))}getProduct(){return this.productService.getAll().pipe((0,m.U)(e=>this.getFormatOpt(e)),(0,u.K)(e=>(0,p.of)([])))}getList(){this.LeadListService.getLeadList(this.LeadForm.getRawValue()).toPromise().then(e=>{e&&(console.log("RES",e),this.LeadList=e,this.cdf.detectChanges(),this.commonList.detchChange())})}getFormatOpt(e){return e.map(o=>({code:o.codeId||o.id,value:o.codeName||o.codeValue||o.name}))}get selected(){let e;return this.matTable&&(e=this.matTable.selection.selected[0]),e||{id:0}}rowSelected(e){this.selectedUser.emit(e)}cancel(){this.LeadForm.reset(),this.getList()}actionBtn(e){"edit"==e.cmd&&this.navigateToDetail("edit",e.data.leadId,e.data.individualId),"view"==e.cmd&&this.navigateToDetail("view",e.data.leadId,e.data.individualId)}onActionEdit(){}viewExistingCustomer(){let e;e=this.modalService.open(O.b,{size:"xl",backdrop:!1}),e.componentInstance.isPopup=!0,e.result.then(()=>{},o=>{if(o&&"save"==o.type){let s=o.data;console.log("onDidDismiss =====> ",s),this.LeadForm.controls.existingCustomerId.setValue(s.customerId),this.LeadForm.controls.existingCustomerName.setValue(s.name)}})}isControlValid(e){const o=this.LeadForm.controls[e];return o.valid&&(o.dirty||o.touched)}isControlInvalid(e){const o=this.LeadForm.controls[e];return o.invalid&&(o.dirty||o.touched)}controlHasError(e,o){const s=this.LeadForm.controls[o];return s.hasError(e)&&(s.dirty||s.touched)}isControlTouched(e){const o=this.LeadForm.controls[e];return o.dirty||o.touched}reponseFromListing(e){console.log("event",e)}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(L.F0),t.Y36(t.sBO),t.Y36(b.Z),t.Y36(x.D),t.Y36(J.f),t.Y36(g.FF))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-lead-list"]],viewQuery:function(e,o){if(1&e&&(t.Gf(Z.o,5),t.Gf(N.I,5)),2&e){let s;t.iGM(s=t.CRH())&&(o.commonList=s.first),t.iGM(s=t.CRH())&&(o.matTable=s.first)}},inputs:{isPopup:"isPopup"},outputs:{selectedUser:"selectedUser"},features:[t._Bn([{provide:c._A,useClass:D.t7,deps:[c.Ad]},{provide:c.sG,useValue:S.Gs}])],decls:54,vars:36,consts:[[1,"row"],[1,"col-12"],[1,"card","card-custom","gutter-b"],["class","card-header",4,"ngIf"],[1,"card-body","px-10","py-3"],["action","#",1,"form",3,"formGroup"],[1,"row",2,"align-items","center"],["remove-host","",3,"formInput","colClass"],[1,"col-xl-4","col-sm-6"],[1,"form-group","row"],[1,"col-sm-4","col-form-label"],[1,"col-sm-8"],["type","text","name","leadId","autocomplete","off","formControlName","leadId",1,"form-control","form-control-sm"],["bindLabel","value","bindValue","code","formControlName","productId",1,"ng-custom-select",3,"items"],["bindLabel","value","bindValue","code","formControlName","sourceCode",1,"ng-custom-select",3,"items"],["type","text","name","contactName","autocomplete","off","formControlName","contactName",1,"form-control","form-control-sm"],[1,"col-sm-8",3,"click"],["type","text","name","existingCustomerName","autocomplete","off","formControlName","existingCustomerName","readonly","",1,"form-control","form-control-sm"],["bindLabel","value","bindValue","code","formControlName","statusCode",1,"ng-custom-select",3,"items"],["type","text","name","campaignName","autocomplete","off","formControlName","campaignName",1,"form-control","form-control-sm"],[1,"card","card-custom","gutter-b","data"],["class","card-body customer-card-body",4,"ngIf"],[1,"card-header"],[1,"card-title"],[1,"card-label","left-border-image"],[1,"card-toolbar"],[1,"flaticon2-magnifier-tool","search-tool",3,"click"],["type","button",1,"btn","btn-primary","ml-2",2,"min-width","50px",3,"click"],[1,""],[1,"card-body","customer-card-body"],["class","data-list",3,"data","type","btnEvent",4,"ngIf"],[1,"data-list",3,"data","type","btnEvent"],["commonList",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.YNc(3,P,9,0,"div",3),t.TgZ(4,"div",4),t.TgZ(5,"form",5),t.TgZ(6,"div",6),t._UZ(7,"app-start-end-date",7),t.TgZ(8,"div",8),t.TgZ(9,"div",9),t.TgZ(10,"label",10),t._uU(11,"Lead ID"),t.qZA(),t.TgZ(12,"div",11),t._UZ(13,"input",12),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"div",8),t.TgZ(15,"div",9),t.TgZ(16,"label",10),t._uU(17,"Product"),t.qZA(),t.TgZ(18,"div",11),t._UZ(19,"ng-select",13),t.qZA(),t.qZA(),t.qZA(),t.TgZ(20,"div",8),t.TgZ(21,"div",9),t.TgZ(22,"label",10),t._uU(23,"Source"),t.qZA(),t.TgZ(24,"div",11),t._UZ(25,"ng-select",14),t.qZA(),t.qZA(),t.qZA(),t.TgZ(26,"div",8),t.TgZ(27,"div",9),t.TgZ(28,"label",10),t._uU(29,"Lead Name"),t.qZA(),t.TgZ(30,"div",11),t._UZ(31,"input",15),t.qZA(),t.qZA(),t.qZA(),t.TgZ(32,"div",8),t.TgZ(33,"div",9),t.TgZ(34,"label",10),t._uU(35,"Existing Customer"),t.qZA(),t.TgZ(36,"div",16),t.NdJ("click",function(){return o.viewExistingCustomer()}),t._UZ(37,"input",17),t.qZA(),t.qZA(),t.qZA(),t.TgZ(38,"div",8),t.TgZ(39,"div",9),t.TgZ(40,"label",10),t._uU(41,"Status"),t.qZA(),t.TgZ(42,"div",11),t._UZ(43,"ng-select",18),t.qZA(),t.qZA(),t.qZA(),t.TgZ(44,"div",8),t.TgZ(45,"div",9),t.TgZ(46,"label",10),t._uU(47,"Campaign Name "),t.qZA(),t.TgZ(48,"div",11),t._UZ(49,"input",19),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(50,"div",0),t.TgZ(51,"div",1),t.TgZ(52,"div",20),t.YNc(53,q,2,1,"div",21),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngIf",!o.isPopup),t.xp6(2),t.Q6J("formGroup",o.LeadForm),t.xp6(2),t.Q6J("formInput",o.LeadForm)("colClass","col-xl-4 col-sm-6"),t.xp6(6),t.ekj("is-invalid",o.isControlInvalid("leadId"))("is-valid",o.isControlValid("leadId")),t.xp6(6),t.ekj("is-invalid",o.isControlInvalid("productId"))("is-valid",o.isControlValid("productId")),t.Q6J("items",o.productOption),t.xp6(6),t.ekj("is-invalid",o.isControlInvalid("sourceCode"))("is-valid",o.isControlValid("sourceCode")),t.Q6J("items",o.sourceOption),t.xp6(6),t.ekj("is-invalid",o.isControlInvalid("contactName"))("is-valid",o.isControlValid("contactName")),t.xp6(6),t.ekj("is-invalid",o.isControlInvalid("existingCustomerName"))("is-valid",o.isControlValid("existingCustomerName")),t.xp6(6),t.ekj("is-invalid",o.isControlInvalid("statusCode"))("is-valid",o.isControlValid("statusCode")),t.Q6J("items",o.statusOption),t.xp6(6),t.ekj("is-invalid",o.isControlInvalid("campaignName"))("is-valid",o.isControlValid("campaignName")),t.xp6(4),t.Q6J("ngIf",o.show))},directives:[r.O5,n._Y,n.JL,n.sg,M.Q,V.Z,n.Fj,n.JJ,n.u,v.w9,Z.o],styles:[".input-group[_ngcontent-%COMP%]   .form-control-sm[_ngcontent-%COMP%]{background-color:#fff;background-clip:padding-box;border:1px solid #e4e6ef;padding:0 .75rem;width:100%}.input-group[_ngcontent-%COMP%]   .mat-datepicker-toggle[_ngcontent-%COMP%]{position:absolute;right:5px;top:-2px}.remove-p[_ngcontent-%COMP%]{margin-bottom:0}.col-form-label[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}.form-group.row[_ngcontent-%COMP%]{align-items:center}"]}),a})();var h=i(87626),C=i(45598),w=i(55167),j=i(78480),B=i(57730),T=i(59472),G=i(90860),A=i(92275);let R=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[r.ez,n.u5,n.UX,h.vi,C.fA,w.Fk,j.FA,B.c,g.bz,T.Q,A.W,v.A0,G.m]]}),a})(),H=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[r.ez,n.u5,n.UX,h.vi,C.fA,T.Q,g.M,R,v.A0,A.W,L.Bz.forChild([{path:"",component:Q}])]]}),a})()}}]);