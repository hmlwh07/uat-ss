"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3337],{11918:(w,I,r)=>{r.d(I,{b:()=>E});var o=r(83668),d=r(49133),b=r(90949),g=r(62311),Z=r(85993),f=r(21177),p=r(44290),_=r(92118),v=r(47975),A=r(4205),S=r(99457),y=r(86019),L=r(15470),J=r(85472),Q=r(57842),Y=r(15346);function q(x,t){if(1&x){const u=o.EpF();o.TgZ(0,"button",25),o.NdJ("click",function(){return o.CHM(u),o.oxw().navigateToDetail("create")}),o._UZ(1,"span",26),o.qZA()}}function j(x,t){if(1&x){const u=o.EpF();o.ynx(0),o.TgZ(1,"div",30),o.TgZ(2,"button",31),o.NdJ("click",function(){return o.CHM(u),o.oxw(2).closeModal()}),o._uU(3,"Cancel"),o.qZA(),o.TgZ(4,"button",32),o.NdJ("click",function(){return o.CHM(u),o.oxw(2).nextProd()}),o._uU(5,"Next"),o.qZA(),o.qZA(),o.BQk()}if(2&x){const u=o.oxw(2);o.xp6(4),o.Q6J("disabled",!u.selected.customerId)}}function N(x,t){if(1&x){const u=o.EpF();o.TgZ(0,"div",27),o.TgZ(1,"app-material-table-view",28),o.NdJ("emitter",function(C){return o.CHM(u),o.oxw().actionBtn(C)})("rowselect",function(C){return o.CHM(u),o.oxw().rowSelected(C)}),o.qZA(),o.YNc(2,j,6,1,"ng-container",29),o.qZA()}if(2&x){const u=o.oxw();o.xp6(1),o.Q6J("data",u.customerList)("colum",u.ELEMENT_COL)("displayedColumns",u.displayedColumns)("selectable",u.isPopup),o.xp6(1),o.Q6J("ngIf",u.isPopup&&!u.isDynamic)}}let E=(()=>{class x{constructor(u,m,C,W){this.router=u,this.cdf=m,this.customerListService=C,this.modalService=W,this.ELEMENT_COL=JSON.parse(JSON.stringify(g.Ks)),this.displayedColumns=JSON.parse(JSON.stringify(g.Q1)),this.customerList=[],this.statusOption=g.qb,this.identityTypeOption=g.Mf,this.selectedUser=new o.vpe,this.isPopup=!1,this.party=!0,this.isDynamic=!1,this.show=!1,this.loadForm()}ngOnInit(){this.isPopup&&(this.ELEMENT_COL.splice(9,1),this.displayedColumns.splice(9,1)),this.show=!0}ngAfterViewInit(){this.getList()}loadForm(){this.customerForm=new d.cw({name:new d.NI(null),identityType:new d.NI(null),identityNumber:new d.NI(null),statusCode:new d.NI(null),partyCode:new d.NI(null),startDate:new d.NI(null),endDate:new d.NI(null)})}navigateToDetail(u,m,C){this.router.navigate(["/customer/customer-detail"],{queryParams:{pageStatus:u,pageId:m,pageSecondaryId:C}})}getList(){this.customerListService.getCustomerList(this.customerForm.value,this.party,!(!this.isPopup||this.isDynamic)).toPromise().then(m=>{m&&(this.customerList=m,this.cdf.detectChanges(),this.matTable&&this.matTable.reChangeData())})}get selected(){let u;return this.matTable&&(u=this.matTable.selection.selected[0]),u||{customerId:0}}rowSelected(u){this.selectedUser.emit(u)}cancel(){this.customerForm.reset(),this.getList()}actionBtn(u){"edit"==u.cmd&&this.navigateToDetail("edit",u.data.customerId,u.data.individualId)}isControlValid(u){const m=this.customerForm.controls[u];return m.valid&&(m.dirty||m.touched)}isControlInvalid(u){const m=this.customerForm.controls[u];return m.invalid&&(m.dirty||m.touched)}controlHasError(u,m){const C=this.customerForm.controls[m];return C.hasError(u)&&(C.dirty||C.touched)}isControlTouched(u){const m=this.customerForm.controls[u];return m.dirty||m.touched}nextProd(){this.selected.customerId&&this.modalService.dismissAll({data:this.selected,type:"save"})}closeModal(){this.modalService.dismissAll()}}return x.\u0275fac=function(u){return new(u||x)(o.Y36(A.F0),o.Y36(o.sBO),o.Y36(S.c),o.Y36(Z.FF))},x.\u0275cmp=o.Xpm({type:x,selectors:[["app-customer-list"]],viewQuery:function(u,m){if(1&u&&o.Gf(b.I,5),2&u){let C;o.iGM(C=o.CRH())&&(m.matTable=C.first)}},inputs:{isPopup:"isPopup",party:"party",isDynamic:"isDynamic"},outputs:{selectedUser:"selectedUser"},features:[o._Bn([{provide:Z.DO,useClass:f.Wv},{provide:Z.NG,useClass:f.ke},{provide:p._A,useClass:_.t7,deps:[p.Ad]},{provide:p.sG,useValue:v.Gs}])],decls:61,vars:52,consts:[[1,"row"],[1,"col-12"],[1,"card","card-custom","gutter-b"],[1,"card-header"],[1,"card-title"],[1,"card-label","left-border-image"],[1,"card-toolbar"],["type","button","class","btn btn-primary btn-circle","style","margin-right: 1rem;\n                    ",3,"click",4,"ngIf"],[1,"flaticon2-magnifier-tool","search-tool",3,"click"],["type","button",1,"btn","btn-primary","ml-2",2,"min-width","50px",3,"click"],[1,""],[1,"card-body","px-10","py-3"],["action","#",1,"form",3,"formGroup"],[1,"row",2,"align-items","center"],["remove-host","",3,"formInput","colClass"],[1,"col-md-6"],[1,"form-group","row"],[1,"col-sm-4","col-form-label"],[1,"col-sm-8"],["type","text","name","name","autocomplete","off","formControlName","name",1,"form-control","form-control-sm"],["type","text","name","partyCode","autocomplete","off","formControlName","partyCode",1,"form-control","form-control-sm"],["bindLabel","value","bindValue","code","formControlName","identityType",1,"ng-custom-select","ng-custom-select-sm",3,"items"],["type","text","name","identityNumber","autocomplete","off","formControlName","identityNumber",1,"form-control","form-control-sm"],["bindLabel","value","bindValue","code","formControlName","statusCode",1,"ng-custom-select","ng-custom-select-sm",3,"items"],["class","card-body customer-card-body",4,"ngIf"],["type","button",1,"btn","btn-primary","btn-circle",2,"margin-right","1rem",3,"click"],[1,"flaticon2-plus"],[1,"card-body","customer-card-body"],[3,"data","colum","displayedColumns","selectable","emitter","rowselect"],[4,"ngIf"],[1,"card-footer"],["type","button",1,"btn","btn-light","btn-elevate","mr-2",3,"click"],["type","button",1,"btn","btn-primary","btn-elevate",3,"disabled","click"]],template:function(u,m){1&u&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o.TgZ(3,"div",3),o.TgZ(4,"div",4),o.TgZ(5,"h3",5),o._uU(6),o.ALo(7,"translate"),o.qZA(),o.qZA(),o.TgZ(8,"div",6),o.YNc(9,q,2,0,"button",7),o.TgZ(10,"span",8),o.NdJ("click",function(){return m.getList()}),o.qZA(),o.TgZ(11,"button",9),o.NdJ("click",function(){return m.cancel()}),o.TgZ(12,"span",10),o._uU(13),o.ALo(14,"translate"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(15,"div",11),o.TgZ(16,"form",12),o.TgZ(17,"div",13),o._UZ(18,"app-start-end-date",14),o.qZA(),o.TgZ(19,"div",13),o.TgZ(20,"div",15),o.TgZ(21,"div",16),o.TgZ(22,"label",17),o._uU(23),o.ALo(24,"translate"),o.qZA(),o.TgZ(25,"div",18),o._UZ(26,"input",19),o.qZA(),o.qZA(),o.qZA(),o.TgZ(27,"div",15),o.TgZ(28,"div",16),o.TgZ(29,"label",17),o._uU(30),o.ALo(31,"translate"),o.qZA(),o.TgZ(32,"div",18),o._UZ(33,"input",20),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(34,"div",13),o.TgZ(35,"div",15),o.TgZ(36,"div",16),o.TgZ(37,"label",17),o._uU(38),o.ALo(39,"translate"),o.qZA(),o.TgZ(40,"div",18),o._UZ(41,"ng-select",21),o.qZA(),o.qZA(),o.qZA(),o.TgZ(42,"div",15),o.TgZ(43,"div",16),o.TgZ(44,"label",17),o._uU(45),o.ALo(46,"translate"),o.qZA(),o.TgZ(47,"div",18),o._UZ(48,"input",22),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(49,"div",0),o.TgZ(50,"div",15),o.TgZ(51,"div",16),o.TgZ(52,"label",17),o._uU(53),o.ALo(54,"translate"),o.qZA(),o.TgZ(55,"div",18),o._UZ(56,"ng-select",23),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(57,"div",0),o.TgZ(58,"div",1),o.TgZ(59,"div",2),o.YNc(60,N,3,5,"div",24),o.qZA(),o.qZA(),o.qZA()),2&u&&(o.xp6(2),o.ekj("remove-p",m.isPopup),o.xp6(4),o.Oqu(o.lcZ(7,38,"FORM.customer_list")),o.xp6(3),o.Q6J("ngIf",!m.isPopup),o.xp6(4),o.Oqu(o.lcZ(14,40,"FORM.btn_cancel")),o.xp6(3),o.Q6J("formGroup",m.customerForm),o.xp6(2),o.Q6J("formInput",m.customerForm)("colClass","col-md-6"),o.xp6(5),o.Oqu(o.lcZ(24,42,"FORM.name")),o.xp6(3),o.ekj("is-invalid",m.isControlInvalid("name"))("is-valid",m.isControlValid("name")),o.xp6(4),o.Oqu(o.lcZ(31,44,"FORM.party_code")),o.xp6(3),o.ekj("is-invalid",m.isControlInvalid("partyCode"))("is-valid",m.isControlValid("partyCode")),o.xp6(5),o.Oqu(o.lcZ(39,46,"FORM.id_type")),o.xp6(3),o.ekj("is-invalid",m.isControlInvalid("identityType"))("is-valid",m.isControlValid("identityType")),o.Q6J("items",m.identityTypeOption),o.xp6(4),o.Oqu(o.lcZ(46,48,"FORM.id_no")),o.xp6(3),o.ekj("is-invalid",m.isControlInvalid("identityNumber"))("is-valid",m.isControlValid("identityNumber")),o.xp6(5),o.Oqu(o.lcZ(54,50,"FORM.status")),o.xp6(3),o.ekj("is-invalid",m.isControlInvalid("statusCode"))("is-valid",m.isControlValid("statusCode")),o.Q6J("items",m.statusOption),o.xp6(3),o.ekj("remove-p",m.isPopup),o.xp6(1),o.Q6J("ngIf",m.show))},directives:[y.O5,d._Y,d.JL,d.sg,L.Q,J.Z,d.Fj,d.JJ,d.u,Q.w9,b.I],pipes:[Y.X],styles:[".remove-p[_ngcontent-%COMP%]{margin-bottom:0}.col-form-label[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}.form-group.row[_ngcontent-%COMP%]{align-items:center}.draggable[_ngcontent-%COMP%]{color:#fff;border-radius:50%;touch-action:none;-webkit-user-select:none;user-select:none;position:absolute;z-index:999}"]}),x})()},63337:(w,I,r)=>{r.r(I),r.d(I,{LeadDetailModule:()=>Pi});var o=r(86019),d=r(49133),b=r(87626),g=r(45598),Z=r(85993),f=r(4205),p=r(64762),_=r(44290),v=r(92118),A=r(62311),S=r(22030),y=r(91471),L=r(73155),J=r(63703),Q=r(76175),Y=r(17318),q=r(11918),j=r(68424),N=r(9939),E=r(92070),x=r(47975),t=r(83668),u=r(90949),m=r(18260),C=r(91691),W=r(44522);const ht=`${m.N.apiUrl}/lead`,qt=`${m.N.apiUrl}/campaigns`,Ft=`${m.N.apiUrl}/leadSource`,kt=`${m.N.apiUrl}/leadSource/score`,Rt=`${m.N.apiUrl}/leadQuality`,Ut=`${m.N.apiUrl}/validity-period/filter`;let gt=(()=>{class n extends C.i{constructor(e){super(e,ht),this.httpClient=e}updateLeadStatus(e,i){return this.httpClient.put(ht+"/"+i+"/status",e)}getCampaignList(e){let i=qt+"?";return e.cpmNumber&&(i=i+"cpmNumber="+e.cpmNumber+"&"),e.cpmName&&(i=i+"cpmName="+e.cpmName+"&"),this.httpClient.get(i)}getLeadSource(){return this.httpClient.get(Ft)}getLeadQuality(e){return this.httpClient.get(Rt+"?distributionChannelCode="+e)}getLeadScore(e,i){return this.httpClient.get(kt+"?sourceCode="+e+"&distributionChannelCode="+i)}getValidityPeriod(e,i){return this.httpClient.get(Ut+"?leadSource="+e+"&productId="+i)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(W.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Bt(n,c){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",20),t.TgZ(2,"button",21),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeModal()}),t._uU(3,"Cancel"),t.qZA(),t.TgZ(4,"button",22),t.NdJ("click",function(){return t.CHM(e),t.oxw().nextProd()}),t._uU(5,"Next"),t.qZA(),t.qZA(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(4),t.Q6J("disabled",!e.selected.cpmNumber)}}let Jt=(()=>{class n{constructor(e,i,a){this.LeadDetailService=e,this.cdf=i,this.modalService=a,this.campaignList=[],this.isPopup=!1,this.selectedCampaign=new t.vpe,this.ELEMENT_COL=JSON.parse(JSON.stringify(L.Y6)),this.displayedColumns=JSON.parse(JSON.stringify(L.NP))}ngOnInit(){this.loadForm(),this.getList()}getList(){this.LeadDetailService.getCampaignList(this.campaignForm.value).toPromise().then(e=>{e&&(this.campaignList=e,this.cdf.detectChanges(),this.matTable.reChangeData())})}cancel(){this.modalService.dismissAll()}loadForm(){this.campaignForm=new d.cw({cpmNumber:new d.NI(null),cpmName:new d.NI(null)})}rowSelected(e){this.selectedCampaign.emit(e)}closeModal(){this.modalService.dismissAll()}nextProd(){this.selected.cpmNumber&&this.modalService.dismissAll({data:this.selected,type:"save"})}get selected(){let e;return this.matTable&&(e=this.matTable.selection.selected[0]),e||{cpmNumber:0}}isControlValid(e){const i=this.campaignForm.controls[e];return i.valid&&(i.dirty||i.touched)}isControlInvalid(e){const i=this.campaignForm.controls[e];return i.invalid&&(i.dirty||i.touched)}controlHasError(e,i){const a=this.campaignForm.controls[i];return a.hasError(e)&&(a.dirty||a.touched)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(gt),t.Y36(t.sBO),t.Y36(Z.FF))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-campaign-list"]],viewQuery:function(e,i){if(1&e&&t.Gf(u.I,5),2&e){let a;t.iGM(a=t.CRH())&&(i.matTable=a.first)}},inputs:{isPopup:"isPopup"},outputs:{selectedCampaign:"selectedCampaign"},decls:32,vars:18,consts:[[1,"row"],[1,"col-12"],[1,"modal-content"],[1,"modal-header"],["id","example-modal-sizes-title-lg",1,"modal-title","h4","left-border-image"],[1,"card-toolbar"],[1,"flaticon2-magnifier-tool","search-tool",3,"click"],["type","button",1,"btn","btn-primary","ml-2",2,"min-width","50px",3,"click"],[1,""],[1,"overlay","overlay-block","cursor-default","modal-body"],["action","#",1,"form",3,"formGroup"],[1,"row",2,"align-items","center"],[1,"col-sm-6"],[1,"form-group","row"],[1,"col-sm-4","col-form-label"],[1,"col-sm-8"],["type","text","name","cpmNumber","autocomplete","off","formControlName","cpmNumber",1,"form-control","form-control-sm"],["type","text","name","cpmName","autocomplete","off","formControlName","cpmName",1,"form-control","form-control-sm"],[3,"data","colum","displayedColumns","selectable","rowselect"],[4,"ngIf"],[1,"card-footer"],["type","button",1,"btn","btn-light","btn-elevate","mr-2",3,"click"],["type","button",1,"btn","btn-primary","btn-elevate",3,"disabled","click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t._uU(5," Campaign List "),t.qZA(),t.TgZ(6,"div",5),t.TgZ(7,"span",6),t.NdJ("click",function(){return i.getList()}),t.qZA(),t.TgZ(8,"button",7),t.NdJ("click",function(){return i.cancel()}),t.TgZ(9,"span",8),t._uU(10,"Cancel"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"div",9),t.TgZ(12,"form",10),t.TgZ(13,"div",11),t.TgZ(14,"div",12),t.TgZ(15,"div",13),t.TgZ(16,"label",14),t._uU(17,"Campaign Number"),t.qZA(),t.TgZ(18,"div",15),t._UZ(19,"input",16),t.qZA(),t.qZA(),t.qZA(),t.TgZ(20,"div",12),t.TgZ(21,"div",13),t.TgZ(22,"label",14),t._uU(23,"Campaign Name"),t.qZA(),t.TgZ(24,"div",15),t._UZ(25,"input",17),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(26,"div",0),t.TgZ(27,"div",1),t.TgZ(28,"div",2),t.TgZ(29,"div",9),t.TgZ(30,"app-material-table-view",18),t.NdJ("rowselect",function(s){return i.rowSelected(s)}),t.qZA(),t.qZA(),t.YNc(31,Bt,6,1,"ng-container",19),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.ekj("remove-p",i.isPopup),t.xp6(10),t.Q6J("formGroup",i.campaignForm),t.xp6(7),t.ekj("is-invalid",i.isControlInvalid("cpmNumber"))("is-valid",i.isControlValid("cpmNumber")),t.xp6(6),t.ekj("is-invalid",i.isControlInvalid("cpmName"))("is-valid",i.isControlValid("cpmName")),t.xp6(3),t.ekj("remove-p",i.isPopup),t.xp6(2),t.Q6J("data",i.campaignList)("colum",i.ELEMENT_COL)("displayedColumns",i.displayedColumns)("selectable",i.isPopup),t.xp6(1),t.Q6J("ngIf",i.isPopup))},directives:[d._Y,d.JL,d.sg,d.Fj,d.JJ,d.u,u.I,o.O5],styles:[""]}),n})();var Qt=r(26106),ft=r(67198),vt=r(58695),tt=r(28100),O=r(82997),D=r(72835),ot=r(98849),st=r(48921),F=r(54753),k=r(37632),Yt=r(26697),Ht=r(57311),bt=r(35618),Vt=r(27738),rt=r(49875),Gt=r(95849),jt=r(28210),Wt=r(60940),lt=r(57730),K=r(78480),Kt=r(86031),et=r(57842),zt=r(15346);const $t=["fna"],Xt=["activity"],te=["application"],ee=["attachment"],ie=["quotation"];function ae(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",83),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).toggleAccordion("Detail")}),t._UZ(1,"span",84),t.qZA()}}function ne(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",85),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).toggleAccordion("Detail")}),t._UZ(1,"span",86),t.qZA()}}function oe(n,c){if(1&n&&(t.TgZ(0,"div",78),t.TgZ(1,"div",79),t.TgZ(2,"h3",58),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA(),t.TgZ(5,"div",80),t.YNc(6,ae,2,0,"button",81),t.YNc(7,ne,2,0,"button",82),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,3,"FORM.lead_detail")),t.xp6(3),t.Q6J("ngIf",e.isDetail),t.xp6(1),t.Q6J("ngIf",!e.isDetail)}}function se(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"input",87),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).openNRCModal()}),t.qZA()}if(2&n){const e=t.oxw(2);t.ekj("is-invalid",e.isControlInvalid("identityNumber"))("is-valid",e.isControlValid("identityNumber"))}}function re(n,c){if(1&n&&t._UZ(0,"input",88),2&n){const e=t.oxw(2);t.ekj("is-invalid",e.isControlInvalid("identityNumber"))("is-valid",e.isControlValid("identityNumber"))}}function le(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",89),t.TgZ(1,"a",90),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).viewProspectCustomer()}),t._UZ(2,"span",91),t.qZA(),t.qZA()}}function ce(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",89),t.TgZ(1,"button",92),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).updateLeadStatus("03")}),t.TgZ(2,"span",93),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA(),t.qZA()}2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"FORM.btn_approve")))}function de(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",89),t.TgZ(1,"button",92),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).updateLeadStatus("04")}),t.TgZ(2,"span",93),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA(),t.qZA()}2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"FORM.btn_reject")))}function me(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",89),t.TgZ(1,"button",92),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).updateLeadStatus("05")}),t.TgZ(2,"span",93),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA(),t.qZA()}2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"FORM.btn_win")))}function ue(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",89),t.TgZ(1,"button",92),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).updateLeadStatus("06")}),t.TgZ(2,"span",93),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA(),t.qZA()}2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"FORM.btn_lost")))}function pe(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",89),t.TgZ(1,"button",92),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).updateLeadStatus("save")}),t.TgZ(2,"span",93),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA(),t.qZA()}2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"FORM.btn_save")))}function _e(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",89),t.TgZ(1,"button",94),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).updateLeadStatus("cancel")}),t.TgZ(2,"span",93),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA(),t.qZA()}2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"FORM.btn_cancel")))}function he(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",102),t.NdJ("click",function(){return t.CHM(e),t.oxw(5).add("FNA")}),t._UZ(1,"span",91),t.qZA()}}function ge(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",83),t.NdJ("click",function(){return t.CHM(e),t.oxw(5).toggleAccordion("FNA")}),t._UZ(1,"span",84),t.qZA()}}function fe(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",85),t.NdJ("click",function(){return t.CHM(e),t.oxw(5).toggleAccordion("FNA")}),t._UZ(1,"span",86),t.qZA()}}function ve(n,c){if(1&n&&(t.TgZ(0,"div",78),t.TgZ(1,"div",79),t.TgZ(2,"h3",58),t._uU(3,"FNA"),t.qZA(),t.qZA(),t.TgZ(4,"div",80),t.YNc(5,he,2,0,"button",101),t.YNc(6,ge,2,0,"button",81),t.YNc(7,fe,2,0,"button",82),t.qZA(),t.qZA()),2&n){const e=t.oxw(4);t.xp6(5),t.Q6J("ngIf",3==e.statusCode&&(e.isExisting||e.isProspectCustomer)&&e.fnaAccess.create),t.xp6(1),t.Q6J("ngIf",e.isFNA),t.xp6(1),t.Q6J("ngIf",!e.isFNA)}}function be(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",4),t.YNc(1,ve,8,3,"div",5),t.TgZ(2,"div",6),t.TgZ(3,"section"),t.TgZ(4,"app-material-table-view",98,100),t.NdJ("emitter",function(a){return t.CHM(e),t.oxw(3).actionBtn(a,"FNA")}),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",!e.isPopup),t.xp6(1),t.Q6J("ngClass",e.isFNA?"active":"inactive"),t.xp6(2),t.Q6J("data",e.fnaList)("colum",e.FNAELEMENT_COL)("displayedColumns",e.FNAdisplayedColumns)("selectable",e.isPopup)}}function Ce(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",102),t.NdJ("click",function(){return t.CHM(e),t.oxw(5).add("Activity")}),t._UZ(1,"span",91),t.qZA()}}function Te(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",83),t.NdJ("click",function(){return t.CHM(e),t.oxw(5).toggleAccordion("Activity")}),t._UZ(1,"span",104),t.qZA()}}function Ze(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",85),t.NdJ("click",function(){return t.CHM(e),t.oxw(5).toggleAccordion("Activity")}),t._UZ(1,"span",105),t.qZA()}}function Ae(n,c){if(1&n&&(t.TgZ(0,"div",78),t.TgZ(1,"div",79),t.TgZ(2,"h3",58),t._uU(3,"Activity"),t.qZA(),t.qZA(),t.TgZ(4,"div",80),t.YNc(5,Ce,2,0,"button",101),t.YNc(6,Te,2,0,"button",81),t.YNc(7,Ze,2,0,"button",82),t.qZA(),t.qZA()),2&n){const e=t.oxw(4);t.xp6(5),t.Q6J("ngIf",3==e.statusCode&&(e.isExisting||e.isProspectCustomer)&&e.activityAccess.create),t.xp6(1),t.Q6J("ngIf",e.isActivity),t.xp6(1),t.Q6J("ngIf",!e.isActivity)}}function ye(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",4),t.YNc(1,Ae,8,3,"div",5),t.TgZ(2,"div",6),t.TgZ(3,"section"),t.TgZ(4,"app-material-table-view",98,103),t.NdJ("emitter",function(a){return t.CHM(e),t.oxw(3).actActionBtn(a)}),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",!e.isPopup),t.xp6(1),t.Q6J("ngClass",e.isActivity?"active":"inactive"),t.xp6(2),t.Q6J("data",e.activityList)("colum",e.ACTIVITY_ELEMENT_COL)("displayedColumns",e.ACTIVITYdisplayedColumns)("selectable",e.isPopup)}}function xe(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",102),t.NdJ("click",function(){return t.CHM(e),t.oxw(5).add("Quotation")}),t._UZ(1,"span",91),t.qZA()}}function Ie(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",83),t.NdJ("click",function(){return t.CHM(e),t.oxw(5).toggleAccordion("Quotation")}),t._UZ(1,"span",104),t.qZA()}}function Me(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",85),t.NdJ("click",function(){return t.CHM(e),t.oxw(5).toggleAccordion("Quotation")}),t._UZ(1,"span",105),t.qZA()}}function Le(n,c){if(1&n&&(t.TgZ(0,"div",78),t.TgZ(1,"div",79),t.TgZ(2,"h3",58),t._uU(3,"Quotation"),t.qZA(),t.qZA(),t.TgZ(4,"div",80),t.YNc(5,xe,2,0,"button",101),t.YNc(6,Ie,2,0,"button",81),t.YNc(7,Me,2,0,"button",82),t.qZA(),t.qZA()),2&n){const e=t.oxw(4);t.xp6(5),t.Q6J("ngIf",3==e.statusCode&&(e.isExisting||e.isProspectCustomer)&&e.quoAccess.create),t.xp6(1),t.Q6J("ngIf",e.isQuotation),t.xp6(1),t.Q6J("ngIf",!e.isQuotation)}}function Ne(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",4),t.YNc(1,Le,8,3,"div",5),t.TgZ(2,"div",6),t.TgZ(3,"section"),t.TgZ(4,"app-material-table-view",98,106),t.NdJ("emitter",function(a){return t.CHM(e),t.oxw(3).actionBtn(a,"QUO")}),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",!e.isPopup),t.xp6(1),t.Q6J("ngClass",e.isQuotation?"active":"inactive"),t.xp6(2),t.Q6J("data",e.quatationList)("colum",e.QUOTATION_ELEMENT_COL)("displayedColumns",e.QuotationdisplayedColumns)("selectable",e.isPopup)}}function Oe(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",102),t.NdJ("click",function(){return t.CHM(e),t.oxw(5).add("Application")}),t._UZ(1,"span",91),t.qZA()}}function De(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",83),t.NdJ("click",function(){return t.CHM(e),t.oxw(5).toggleAccordion("Application")}),t._UZ(1,"span",104),t.qZA()}}function Pe(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",85),t.NdJ("click",function(){return t.CHM(e),t.oxw(5).toggleAccordion("Application")}),t._UZ(1,"span",105),t.qZA()}}function Se(n,c){if(1&n&&(t.TgZ(0,"div",78),t.TgZ(1,"div",79),t.TgZ(2,"h3",58),t._uU(3,"Application"),t.qZA(),t.qZA(),t.TgZ(4,"div",80),t.YNc(5,Oe,2,0,"button",101),t.YNc(6,De,2,0,"button",81),t.YNc(7,Pe,2,0,"button",82),t.qZA(),t.qZA()),2&n){const e=t.oxw(4);t.xp6(5),t.Q6J("ngIf",3==e.statusCode&&(e.isExisting||e.isProspectCustomer)&&e.policyAccess.create),t.xp6(1),t.Q6J("ngIf",e.isApplication),t.xp6(1),t.Q6J("ngIf",!e.isApplication)}}function Ee(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",4),t.YNc(1,Se,8,3,"div",5),t.TgZ(2,"div",96),t.TgZ(3,"section",97),t.TgZ(4,"app-material-table-view",98,107),t.NdJ("emitter",function(a){return t.CHM(e),t.oxw(3).actionBtn(a,"APP")}),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",!e.isPopup),t.xp6(2),t.Q6J("ngClass",e.isApplication?"active":"inactive"),t.xp6(1),t.Q6J("data",e.applicationList)("colum",e.APPLICATION_ELEMENT_COL)("displayedColumns",e.ApplicationdisplayedColumns)("selectable",e.isPopup)}}function we(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",102),t.NdJ("click",function(){return t.CHM(e),t.oxw(4).addAttachment()}),t._UZ(1,"span",91),t.qZA()}}function qe(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",83),t.NdJ("click",function(){return t.CHM(e),t.oxw(4).toggleAccordion("Attachment")}),t._UZ(1,"span",104),t.qZA()}}function Fe(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",85),t.NdJ("click",function(){return t.CHM(e),t.oxw(4).toggleAccordion("Attachment")}),t._UZ(1,"span",105),t.qZA()}}function ke(n,c){if(1&n&&(t.TgZ(0,"div",78),t.TgZ(1,"div",79),t.TgZ(2,"h3",58),t._uU(3,"Attachment"),t.qZA(),t.qZA(),t.TgZ(4,"div",80),t.TgZ(5,"div"),t.YNc(6,we,2,0,"button",101),t.qZA(),t.YNc(7,qe,2,0,"button",81),t.YNc(8,Fe,2,0,"button",82),t.qZA(),t.qZA()),2&n){const e=t.oxw(3);t.xp6(6),t.Q6J("ngIf",3==e.statusCode&&(e.isExisting||e.isProspectCustomer)),t.xp6(1),t.Q6J("ngIf",e.isAttachment),t.xp6(1),t.Q6J("ngIf",!e.isAttachment)}}function Re(n,c){if(1&n){const e=t.EpF();t.ynx(0),t.YNc(1,be,6,6,"div",95),t.YNc(2,ye,6,6,"div",95),t.YNc(3,Ne,6,6,"div",95),t.YNc(4,Ee,6,6,"div",95),t.TgZ(5,"div",4),t.YNc(6,ke,9,3,"div",5),t.TgZ(7,"div",96),t.TgZ(8,"section",97),t.TgZ(9,"app-material-table-view",98,99),t.NdJ("emitter",function(a){return t.CHM(e),t.oxw(2).actionBtn(a,"ATT")}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.fnaAccess.view),t.xp6(1),t.Q6J("ngIf",e.activityAccess.view),t.xp6(1),t.Q6J("ngIf",e.quoAccess.view),t.xp6(1),t.Q6J("ngIf",e.policyAccess.view),t.xp6(2),t.Q6J("ngIf",!e.isPopup),t.xp6(2),t.Q6J("ngClass",e.isAttachment?"active":"inactive"),t.xp6(1),t.Q6J("data",e.attachmentList)("colum",e.ATTACHMENT_ELEMENT_COL)("displayedColumns",e.AttachmentdisplayedColumns)("selectable",e.isPopup)}}function Ue(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",1),t.TgZ(1,"div",2),t.TgZ(2,"form",3),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().createLead()}),t.TgZ(3,"div",4),t.YNc(4,oe,8,5,"div",5),t.TgZ(5,"div",6),t.TgZ(6,"div"),t.TgZ(7,"div",7),t.TgZ(8,"div",8),t.TgZ(9,"div",9),t.TgZ(10,"label",10),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"div",11),t._UZ(14,"input",12),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",8),t.TgZ(16,"div",9),t.TgZ(17,"label",10),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"div",11),t.TgZ(21,"input",13),t.NdJ("change",function(){return t.CHM(e),t.oxw().calculateLeadQuality()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"div",7),t.TgZ(23,"div",8),t.TgZ(24,"div",9),t.TgZ(25,"label",10),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.TgZ(28,"div",11),t._UZ(29,"input",14),t.qZA(),t.qZA(),t.qZA(),t.TgZ(30,"div",8),t.TgZ(31,"div",9),t.TgZ(32,"label",10),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"div",11),t.TgZ(36,"div",15),t._UZ(37,"input",16),t._UZ(38,"mat-datepicker-toggle",17),t._UZ(39,"mat-datepicker",18,19),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(41,"div",7),t.TgZ(42,"div",8),t.TgZ(43,"div",9),t.TgZ(44,"label",10),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"div",11),t._UZ(48,"input",20),t.qZA(),t.qZA(),t.qZA(),t.TgZ(49,"div",8),t.TgZ(50,"div",9),t.TgZ(51,"label",10),t._uU(52),t.ALo(53,"translate"),t.qZA(),t.TgZ(54,"div",11),t.TgZ(55,"div",15),t._UZ(56,"input",21),t._UZ(57,"mat-datepicker-toggle",17),t._UZ(58,"mat-datepicker",18,22),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(60,"div",7),t.TgZ(61,"div",23),t.TgZ(62,"div",9),t.TgZ(63,"label",24),t._uU(64),t.ALo(65,"translate"),t.qZA(),t.TgZ(66,"div",25),t.TgZ(67,"div",26),t.TgZ(68,"label",27),t._uU(69,"SMS"),t.qZA(),t._UZ(70,"input",28),t.qZA(),t.TgZ(71,"div",26),t.TgZ(72,"label",27),t._uU(73,"Email"),t.qZA(),t._UZ(74,"input",29),t.qZA(),t.TgZ(75,"div",26),t.TgZ(76,"label",27),t._uU(77,"Phone"),t.qZA(),t._UZ(78,"input",30),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(79,"div",7),t.TgZ(80,"div",8),t.TgZ(81,"div",9),t.TgZ(82,"label",10),t._uU(83),t.ALo(84,"translate"),t.qZA(),t.TgZ(85,"div",11),t.TgZ(86,"ng-select",31),t.NdJ("change",function(){return t.CHM(e),t.oxw().calculateLeadQuality("typeCode")}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(87,"div",8),t.TgZ(88,"div",9),t.TgZ(89,"label",10),t._uU(90),t.ALo(91,"translate"),t.qZA(),t.TgZ(92,"div",11),t.TgZ(93,"div",15),t._UZ(94,"input",32),t._UZ(95,"mat-datepicker-toggle",17),t._UZ(96,"mat-datepicker",18,33),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(98,"div",7),t.TgZ(99,"div",8),t.TgZ(100,"div",9),t.TgZ(101,"label",10),t._uU(102),t.ALo(103,"translate"),t.qZA(),t.TgZ(104,"div",11),t._UZ(105,"ng-select",34),t.qZA(),t.qZA(),t.qZA(),t.TgZ(106,"div",8),t.TgZ(107,"div",9),t.TgZ(108,"label",10),t._uU(109),t.ALo(110,"translate"),t.qZA(),t.TgZ(111,"div",11),t.TgZ(112,"div",15),t._UZ(113,"input",35),t._UZ(114,"mat-datepicker-toggle",17),t._UZ(115,"mat-datepicker",null,36),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(117,"div",7),t.TgZ(118,"div",8),t.TgZ(119,"div",9),t.TgZ(120,"label",10),t._uU(121),t.ALo(122,"translate"),t.qZA(),t.TgZ(123,"div",11),t._UZ(124,"ng-select",37),t.qZA(),t.qZA(),t.qZA(),t.TgZ(125,"div",8),t.TgZ(126,"div",9),t.TgZ(127,"label",10),t._uU(128),t.ALo(129,"translate"),t.qZA(),t.TgZ(130,"div",11),t._UZ(131,"ng-select",38),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(132,"div",7),t.TgZ(133,"div",8),t.TgZ(134,"div",9),t.TgZ(135,"label",10),t._uU(136),t.ALo(137,"translate"),t.qZA(),t.TgZ(138,"div",11),t.TgZ(139,"ng-select",39),t.NdJ("change",function(){return t.CHM(e),t.oxw().calculateLeadQuality("state")}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(140,"div",8),t.TgZ(141,"div",9),t.TgZ(142,"label",10),t._uU(143),t.ALo(144,"translate"),t.qZA(),t.TgZ(145,"div",11),t.TgZ(146,"ng-select",40),t.NdJ("change",function(){return t.CHM(e),t.oxw().calculateLeadQuality("district")}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(147,"div",7),t.TgZ(148,"div",8),t.TgZ(149,"div",9),t.TgZ(150,"label",10),t._uU(151),t.ALo(152,"translate"),t.qZA(),t.TgZ(153,"div",11),t.TgZ(154,"ng-select",41),t.NdJ("change",function(){return t.CHM(e),t.oxw().calculateLeadQuality()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(155,"div",8),t.TgZ(156,"div",9),t.TgZ(157,"label",10),t._uU(158),t.ALo(159,"translate"),t.qZA(),t.TgZ(160,"div",11),t.TgZ(161,"div",15),t._UZ(162,"input",42),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(163,"div",7),t.TgZ(164,"div",8),t.TgZ(165,"div",9),t.TgZ(166,"label",10),t._uU(167),t.ALo(168,"translate"),t.qZA(),t.TgZ(169,"div",11),t.TgZ(170,"ng-select",43),t.NdJ("change",function(){return t.CHM(e),t.oxw().calculateLeadQuality()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(171,"div",8),t.TgZ(172,"div",9),t.TgZ(173,"label",10),t._uU(174),t.ALo(175,"translate"),t.qZA(),t.TgZ(176,"div",11),t._UZ(177,"input",44),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(178,"div",7),t.TgZ(179,"div",8),t.TgZ(180,"div",9),t.TgZ(181,"label",10),t._uU(182),t.ALo(183,"translate"),t.qZA(),t.TgZ(184,"div",11),t.TgZ(185,"ng-select",45),t.NdJ("change",function(){return t.CHM(e),t.oxw().calculateLeadQuality("product")}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(186,"div",8),t.TgZ(187,"div",9),t.TgZ(188,"label",10),t._uU(189),t.ALo(190,"translate"),t.qZA(),t.TgZ(191,"div",11),t._UZ(192,"input",46),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(193,"div",7),t.TgZ(194,"div",8),t.TgZ(195,"div",9),t.TgZ(196,"label",10),t._uU(197),t.ALo(198,"translate"),t.qZA(),t.TgZ(199,"div",47),t.NdJ("click",function(){return t.CHM(e),t.oxw().viewCampaignList()}),t.TgZ(200,"input",48),t.NdJ("change",function(){return t.CHM(e),t.oxw().calculateLeadQuality()}),t.qZA(),t.TgZ(201,"span",49),t.NdJ("click",function(a){return t.CHM(e),t.oxw().clearDate("campaignName"),a.stopPropagation()}),t.TgZ(202,"span",50),t._uU(203,"\xd7"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(204,"div",8),t.TgZ(205,"div",9),t.TgZ(206,"label",10),t._uU(207),t.ALo(208,"translate"),t.qZA(),t.TgZ(209,"div",11),t._UZ(210,"ng-select",51),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(211,"div",7),t.TgZ(212,"div",8),t.TgZ(213,"div",9),t.TgZ(214,"label",10),t._uU(215),t.ALo(216,"translate"),t.qZA(),t.TgZ(217,"div",11),t._UZ(218,"input",52),t.TgZ(219,"span",49),t.NdJ("click",function(a){return t.CHM(e),t.oxw().clearDate("campaignNo"),a.stopPropagation()}),t.TgZ(220,"span",50),t._uU(221,"\xd7"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(222,"div",8),t.TgZ(223,"div",9),t.TgZ(224,"label",10),t._uU(225),t.ALo(226,"translate"),t.qZA(),t.TgZ(227,"div",11),t.YNc(228,se,1,4,"input",53),t.YNc(229,re,1,4,"input",54),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(230,"div",7),t.TgZ(231,"div",8),t.TgZ(232,"div",9),t.TgZ(233,"label",10),t._uU(234),t.ALo(235,"translate"),t.qZA(),t.TgZ(236,"div",11),t.TgZ(237,"ng-select",55),t.NdJ("change",function(){t.CHM(e);const a=t.oxw();return a.calculateScore(a.leadForm.value.sourceCode,null)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(238,"div",8),t.TgZ(239,"div",9),t.TgZ(240,"label",10),t._uU(241),t.ALo(242,"translate"),t.qZA(),t.TgZ(243,"div",11),t._UZ(244,"input",56),t.TgZ(245,"span",49),t.NdJ("click",function(a){return t.CHM(e),t.oxw().clearDate("existingCustomerName"),a.stopPropagation()}),t.TgZ(246,"span",50),t._uU(247,"\xd7"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(248,"div",7),t.TgZ(249,"div",8),t.TgZ(250,"div",9),t.TgZ(251,"label",10),t._uU(252),t.ALo(253,"translate"),t.qZA(),t.TgZ(254,"div",47),t.NdJ("click",function(){return t.CHM(e),t.oxw().viewExistingCustomer("ref")}),t._UZ(255,"input",57),t.TgZ(256,"span",49),t.NdJ("click",function(a){return t.CHM(e),t.oxw().clearDate("referralCustomerName"),a.stopPropagation()}),t.TgZ(257,"span",50),t._uU(258,"\xd7"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(259,"hr"),t.TgZ(260,"h3",58),t._uU(261),t.ALo(262,"translate"),t.qZA(),t.TgZ(263,"div",7),t.TgZ(264,"div",23),t.TgZ(265,"div",7),t.TgZ(266,"div",8),t.TgZ(267,"div",9),t.TgZ(268,"label",59),t._uU(269),t.ALo(270,"translate"),t.qZA(),t.TgZ(271,"div",60),t._UZ(272,"input",61),t.qZA(),t.qZA(),t.qZA(),t.TgZ(273,"div",8),t.TgZ(274,"div",9),t.TgZ(275,"label",59),t._uU(276),t.ALo(277,"translate"),t.qZA(),t.TgZ(278,"div",60),t._UZ(279,"input",62),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(280,"div",7),t.TgZ(281,"div",8),t.TgZ(282,"div",9),t.TgZ(283,"label",59),t._uU(284),t.ALo(285,"translate"),t.qZA(),t.TgZ(286,"div",60),t._UZ(287,"ng-select",63),t.qZA(),t.qZA(),t.qZA(),t.TgZ(288,"div",8),t.TgZ(289,"div",9),t.TgZ(290,"label",59),t._uU(291),t.ALo(292,"translate"),t.qZA(),t.TgZ(293,"div",60),t._UZ(294,"input",64),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(295,"div",7),t.TgZ(296,"div",8),t.TgZ(297,"div",9),t.TgZ(298,"label",59),t._uU(299),t.ALo(300,"translate"),t.qZA(),t.TgZ(301,"div",60),t._UZ(302,"input",65),t.qZA(),t.qZA(),t.qZA(),t.TgZ(303,"div",8),t.TgZ(304,"div",9),t.TgZ(305,"label",59),t._uU(306),t.ALo(307,"translate"),t.qZA(),t.TgZ(308,"div",60),t._UZ(309,"input",66),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(310,"div",7),t.TgZ(311,"div",8),t.TgZ(312,"div",9),t.TgZ(313,"label",59),t._uU(314),t.ALo(315,"translate"),t.qZA(),t.TgZ(316,"div",60),t._UZ(317,"input",67),t.qZA(),t.qZA(),t.qZA(),t.TgZ(318,"div",8),t.TgZ(319,"div",9),t.TgZ(320,"label",59),t._uU(321),t.ALo(322,"translate"),t.qZA(),t.TgZ(323,"div",60),t._UZ(324,"input",68),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(325,"div",7),t.TgZ(326,"div",8),t.TgZ(327,"div",9),t.TgZ(328,"label",59),t._uU(329),t.ALo(330,"translate"),t.qZA(),t.TgZ(331,"div",60),t._UZ(332,"input",69),t.qZA(),t.qZA(),t.qZA(),t.TgZ(333,"div",8),t.TgZ(334,"div",9),t.TgZ(335,"label",59),t._uU(336),t.ALo(337,"translate"),t.qZA(),t.TgZ(338,"div",70),t.NdJ("click",function(){return t.CHM(e),t.oxw().viewExistingCustomer("prosp")}),t._UZ(339,"input",71),t.TgZ(340,"span",49),t.NdJ("click",function(a){return t.CHM(e),t.oxw().clearDate("prospectCustomer"),a.stopPropagation()}),t.TgZ(341,"span",50),t._uU(342,"\xd7"),t.qZA(),t.qZA(),t.qZA(),t.YNc(343,le,3,0,"div",72),t.qZA(),t.qZA(),t.qZA(),t.TgZ(344,"div",7),t.TgZ(345,"div",8),t.TgZ(346,"div",9),t.TgZ(347,"label",59),t._uU(348),t.ALo(349,"translate"),t.qZA(),t.TgZ(350,"div",60),t._UZ(351,"textarea",73),t.qZA(),t.qZA(),t.qZA(),t.TgZ(352,"div",8),t.TgZ(353,"div",9),t.TgZ(354,"label",59),t._uU(355),t.ALo(356,"translate"),t.qZA(),t.TgZ(357,"div",60),t._UZ(358,"textarea",74),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(359,"hr"),t.qZA(),t.TgZ(360,"div",75),t.TgZ(361,"div",76),t.YNc(362,ce,5,3,"div",72),t.YNc(363,de,5,3,"div",72),t.YNc(364,me,5,3,"div",72),t.YNc(365,ue,5,3,"div",72),t.YNc(366,pe,5,3,"div",72),t.YNc(367,_e,5,3,"div",72),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(368,Re,11,10,"ng-container",77),t.qZA(),t.qZA()}if(2&n){const e=t.MAs(40),i=t.MAs(59),a=t.MAs(97),s=t.MAs(116),l=t.oxw();t.xp6(2),t.Q6J("formGroup",l.leadForm),t.xp6(2),t.Q6J("ngIf",!l.isPopup),t.xp6(1),t.Q6J("ngClass",l.isDetail?"active":"inactive"),t.xp6(6),t.Oqu(t.lcZ(12,191,"FORM.lead_id")),t.xp6(3),t.ekj("is-invalid",l.isControlInvalid("leadId"))("is-valid",l.isControlValid("leadId")),t.xp6(4),t.Oqu(t.lcZ(19,193,"FORM.phone_number")),t.xp6(3),t.ekj("is-invalid",l.isControlInvalid("phoneNo"))("is-valid",l.isControlValid("phoneNo")),t.xp6(5),t.Oqu(t.lcZ(27,195,"FORM.subject")),t.xp6(3),t.ekj("is-invalid",l.isControlInvalid("subject"))("is-valid",l.isControlValid("subject")),t.xp6(4),t.hij(" ",t.lcZ(34,197,"FORM.open_date"),""),t.xp6(4),t.Q6J("matDatepicker",e),t.xp6(1),t.Q6J("for",e),t.xp6(7),t.Oqu(t.lcZ(46,199,"FORM.contact")),t.xp6(3),t.ekj("is-invalid",l.isControlInvalid("contactName"))("is-valid",l.isControlValid("contactName")),t.xp6(4),t.Oqu(t.lcZ(53,201,"FORM.act_date")),t.xp6(4),t.Q6J("matDatepicker",i),t.xp6(1),t.Q6J("for",i),t.xp6(7),t.Oqu(t.lcZ(65,203,"FORM.precontact")),t.xp6(19),t.Oqu(t.lcZ(84,205,"FORM.type")),t.xp6(3),t.ekj("is-invalid",l.isControlInvalid("typeCode"))("is-valid",l.isControlValid("typeCode")),t.Q6J("items",l.typeOption),t.xp6(4),t.Oqu(t.lcZ(91,207,"FORM.close_date")),t.xp6(4),t.Q6J("matDatepicker",a),t.xp6(1),t.Q6J("for",a),t.xp6(7),t.Oqu(t.lcZ(103,209,"FORM.status")),t.xp6(3),t.ekj("is-invalid",l.isControlInvalid("statusCode"))("is-valid",l.isControlValid("statusCode")),t.Q6J("readonly",!0)("items",l.statusOption),t.xp6(4),t.Oqu(t.lcZ(110,211,"FORM.exp_date")),t.xp6(4),t.Q6J("matDatepicker",s),t.xp6(1),t.Q6J("for",s),t.xp6(7),t.Oqu(t.lcZ(122,213,"FORM.occupation")),t.xp6(3),t.ekj("is-invalid",l.isControlInvalid("occupationCode"))("is-valid",l.isControlValid("occupationCode")),t.Q6J("items",l.occupationOption),t.xp6(4),t.Oqu(t.lcZ(129,215,"FORM.company")),t.xp6(3),t.ekj("is-invalid",l.isControlInvalid("companyCode"))("is-valid",l.isControlValid("companyCode")),t.Q6J("items",l.companyOption),t.xp6(5),t.Oqu(t.lcZ(137,217,"FORM.state")),t.xp6(3),t.ekj("is-invalid",l.isControlInvalid("stateCode"))("is-valid",l.isControlValid("stateCode")),t.Q6J("items",l.stateOption),t.xp6(4),t.Oqu(t.lcZ(144,219,"FORM.district")),t.xp6(3),t.ekj("is-invalid",l.isControlInvalid("districtCode"))("is-valid",l.isControlValid("districtCode")),t.Q6J("items",l.distinctOption),t.xp6(5),t.Oqu(t.lcZ(152,221,"FORM.township")),t.xp6(3),t.ekj("is-invalid",l.isControlInvalid("townshipCode"))("is-valid",l.isControlValid("townshipCode")),t.Q6J("items",l.townshipOption),t.xp6(4),t.Oqu(t.lcZ(159,223,"FORM.validity_period")),t.xp6(4),t.ekj("is-invalid",l.isControlInvalid("validityPeriod"))("is-valid",l.isControlValid("validityPeriod")),t.xp6(5),t.Oqu(t.lcZ(168,225,"FORM.distribution_channel")),t.xp6(3),t.ekj("is-invalid",l.isControlInvalid("channelCode"))("is-valid",l.isControlValid("channelCode")),t.Q6J("items",l.channelOption),t.xp6(4),t.Oqu(t.lcZ(175,227,"FORM.assign_to")),t.xp6(3),t.ekj("is-invalid",l.isControlInvalid("assignToName"))("is-valid",l.isControlValid("assignToName")),t.xp6(5),t.Oqu(t.lcZ(183,229,"FORM.product")),t.xp6(3),t.ekj("is-invalid",l.isControlInvalid("productId"))("is-valid",l.isControlValid("productId")),t.Q6J("items",l.productOption2),t.xp6(4),t.Oqu(t.lcZ(190,231,"FORM.email")),t.xp6(3),t.ekj("is-invalid",l.isControlInvalid("email"))("is-valid",l.isControlValid("email")),t.xp6(5),t.Oqu(t.lcZ(198,233,"FORM.campaign_name")),t.xp6(10),t.Oqu(t.lcZ(208,235,"FORM.identity_type")),t.xp6(3),t.ekj("is-invalid",l.isControlInvalid("identityType"))("is-valid",l.isControlValid("identityType")),t.Q6J("items",l.identityTypeOption),t.xp6(5),t.Oqu(t.lcZ(216,237,"FORM.campaign_id")),t.xp6(3),t.ekj("is-invalid",l.isControlInvalid("campaignNo"))("is-valid",l.isControlValid("campaignNo")),t.xp6(7),t.Oqu(t.lcZ(226,239,"FORM.nrc_frc_passport")),t.xp6(3),t.Q6J("ngIf","NRC"==l.leadForm.get("identityType").value),t.xp6(1),t.Q6J("ngIf","NRC"!=l.leadForm.get("identityType").value),t.xp6(5),t.Oqu(t.lcZ(235,241,"FORM.source")),t.xp6(3),t.ekj("is-invalid",l.isControlInvalid("sourceCode"))("is-valid",l.isControlValid("sourceCode")),t.Q6J("items",l.sourceOption),t.xp6(4),t.Oqu(t.lcZ(242,243,"FORM.existing_customer")),t.xp6(11),t.Oqu(t.lcZ(253,245,"FORM.referral_customer")),t.xp6(3),t.ekj("is-invalid",l.isControlInvalid("referralCustomerName"))("is-valid",l.isControlValid("referralCustomerName")),t.xp6(6),t.Oqu(t.lcZ(262,247,"FORM.more_detail")),t.xp6(8),t.Oqu(t.lcZ(270,249,"FORM.estimate_m_income")),t.xp6(3),t.ekj("is-invalid",l.isControlInvalid("monthlyIncome"))("is-valid",l.isControlValid("monthlyIncome")),t.xp6(4),t.Oqu(t.lcZ(277,251,"FORM.facebook_acc")),t.xp6(3),t.ekj("is-invalid",l.isControlInvalid("facebookAcc"))("is-valid",l.isControlValid("facebookAcc")),t.xp6(5),t.Oqu(t.lcZ(285,253,"FORM.martial_status")),t.xp6(3),t.ekj("is-invalid",l.isControlInvalid("maritalStatus"))("is-valid",l.isControlValid("maritalStatus")),t.Q6J("items",l.maritialOption),t.xp6(4),t.Oqu(t.lcZ(292,255,"FORM.financial_plan")),t.xp6(3),t.ekj("is-invalid",l.isControlInvalid("financialPlan"))("is-valid",l.isControlValid("financialPlan")),t.xp6(5),t.Oqu(t.lcZ(300,257,"FORM.no_childern")),t.xp6(3),t.ekj("is-invalid",l.isControlInvalid("numberOfChildren"))("is-valid",l.isControlValid("numberOfChildren")),t.xp6(4),t.Oqu(t.lcZ(307,259,"FORM.existing_insurance_coverage")),t.xp6(3),t.ekj("is-invalid",l.isControlInvalid("existingInsuranceCoverage"))("is-valid",l.isControlValid("existingInsuranceCoverage")),t.xp6(5),t.Oqu(t.lcZ(315,261,"FORM.existing_insurance_plan")),t.xp6(3),t.ekj("is-invalid",l.isControlInvalid("existingInsurancePlan"))("is-valid",l.isControlValid("existingInsurancePlan")),t.xp6(4),t.Oqu(t.lcZ(322,263,"FORM.score")),t.xp6(3),t.ekj("is-invalid",l.isControlInvalid("score"))("is-valid",l.isControlValid("score")),t.xp6(5),t.Oqu(t.lcZ(330,265,"FORM.asset")),t.xp6(3),t.ekj("is-invalid",l.isControlInvalid("asset"))("is-valid",l.isControlValid("asset")),t.xp6(4),t.Oqu(t.lcZ(337,267,"FORM.prospect_customer")),t.xp6(7),t.Q6J("ngIf",!l.isAddProspect),t.xp6(5),t.Oqu(t.lcZ(349,269,"FORM.lost_reason")),t.xp6(7),t.Oqu(t.lcZ(356,271,"FORM.reject_reaosn")),t.xp6(7),t.Q6J("ngIf","02"==l.leadForm.getRawValue().statusCode),t.xp6(1),t.Q6J("ngIf","02"==l.leadForm.getRawValue().statusCode),t.xp6(1),t.Q6J("ngIf","03"==l.leadForm.getRawValue().statusCode&&l.applicationList.length>0),t.xp6(1),t.Q6J("ngIf","03"==l.leadForm.getRawValue().statusCode),t.xp6(1),t.Q6J("ngIf","03"==l.leadForm.getRawValue().statusCode),t.xp6(1),t.Q6J("ngIf","03"==l.leadForm.getRawValue().statusCode),t.xp6(1),t.Q6J("ngIf",!l.isPopup&&l.statusCode>2)}}let Be=(()=>{class n{constructor(e,i,a,s,l,h,T,G,nt,Si,Ei,wi,qi,Fi,ki,Ri,Ui,Bi,Ji,Qi,Yi){this.fb=e,this.location=i,this.masterDataService=a,this.route=s,this.LeadDetailService=l,this.cdf=h,this.LeadListService=T,this.modalService=G,this.router=nt,this.prodctService=Si,this.customerService=Ei,this.productService=wi,this.AttachmentUploadService=qi,this.LeadAttachmentService=Fi,this.AttachmentDownloadService=ki,this.fnaListService=Ri,this.authService=Ui,this.fnaService=Bi,this.alertService=Ji,this.ngZone=Qi,this.menuService=Yi,this.FNAELEMENT_COL=JSON.parse(JSON.stringify(L.ei)),this.FNAdisplayedColumns=JSON.parse(JSON.stringify(L.MN)),this.ACTIVITY_ELEMENT_COL=JSON.parse(JSON.stringify(J.n)),this.ACTIVITYdisplayedColumns=JSON.parse(JSON.stringify(J.t)),this.QUOTATION_ELEMENT_COL=JSON.parse(JSON.stringify(Y.J)),this.QuotationdisplayedColumns=JSON.parse(JSON.stringify(Y.L)),this.APPLICATION_ELEMENT_COL=JSON.parse(JSON.stringify(Q.j)),this.ApplicationdisplayedColumns=JSON.parse(JSON.stringify(Q.k)),this.ATTACHMENT_ELEMENT_COL=JSON.parse(JSON.stringify(L.uK)),this.AttachmentdisplayedColumns=JSON.parse(JSON.stringify(L.A6)),this.fnaList=[],this.activityList=[],this.quatationList=[],this.applicationList=[],this.attachmentList=[],this.isPopup=!1,this.disabled=!0,this.description="",this.channelOption=[],this.typeOption=[],this.stateOption=[],this.statusOption=[],this.distinctOption=[],this.townshipOption=[],this.assignToOption=[],this.productOption=[],this.productOption2=[],this.campaignNameOption=[],this.companyOption=[],this.sourceOption=[],this.existingOption=[],this.martialOption=[],this.occupationOption=[],this.isExisting=!1,this.isProspectCustomer=!1,this.isAddProspect=!1,this.disabledForm=!1,this.statusCode=0,this.maritialOption=[{code:"SINGLE",value:"Single"},{code:"MARRIED",value:"Married"},{code:"WIDOWER",value:"Widower"},{code:"DIVORCED",value:"Divorced"}],this.identityTypeOption=A.Mf,this.reason="",this.status="",this.config={type:"user",name:"identityNumber"},this.sourceScore=0,this.qualityScore=0,this.isFNA=!1,this.isApplication=!1,this.isAttachment=!1,this.isQuotation=!1,this.isActivity=!1,this.isMenuOpen=!1,this.isMore=!1,this.isDetail=!0,this.isValidWin=!1,this.leadQuality=[],this.Quality={Q10:"campaignNo",Q06:"channelCode",Q03:"phoneNo",Q07:"typeCode",Q12:"stateCode",Q13:"districtCode",Q05:"townshipCode",Q08:"productId"},this.leadType={"01":"GENERAL","02":"LIFE"},this.user=new ft.T_,this.leadAccess=k.w,this.activityAccess=k.w,this.policyAccess=k.w,this.quoAccess=k.w,this.attachAccess=k.w,this.fnaAccess=k.w}ngOnInit(){this.checkPremission(),this.loadForm(),this.route.queryParams.subscribe(e=>{e?(this.pageStatus=e.pageStatus,"create"!=this.pageStatus?(this.oldId=e.leadId,this.oldSecondaryId=e.pageSecondaryId,this.getOld()):this.loadForm()):this.location.back()})}checkPremission(){this.menuService.dataAccess.subscribe(e=>{e&&(this.leadAccess=e.leads,this.activityAccess=e.activity,this.policyAccess=e.application,this.quoAccess=e.quotation,this.fnaAccess=e.fna,this.fnaAccess.delete||(this.FNAELEMENT_COL[3].btn.delete=!1),this.quoAccess.edit||(this.QUOTATION_ELEMENT_COL[8].btn.edit=!1),this.policyAccess.edit||(this.APPLICATION_ELEMENT_COL[8].btn.edit=!1),this.leadAccess.view||this.location.back(),this.cdf.detectChanges())})}ngAfterViewInit(){this.user=this.authService.currentUserValue,this.getMaster(),this.getProduct()}getMaster(){(0,tt.D)([this.getChannel(),this.getType(),this.getOccupation(),this.getStatus(),this.getState(),this.getSource(),this.getCompany()]).toPromise().then(e=>{e&&(this.channelOption=e[0],this.typeOption=e[1],this.occupationOption=e[2],this.statusOption=e[3],this.stateOption=e[4],this.sourceOption=e[5],this.companyOption=e[6],this.cdf.detectChanges())})}onInitAddress(e){this.getDistrict(e.stateCode),this.getTownship(e.districtCode),this.cdf.detectChanges()}onChangeState(){this.distinctOption=[],this.townshipOption=[],this.leadForm.controls.districtCode.setValue(""),this.leadForm.controls.townshipCode.setValue(""),this.getDistrict(this.leadForm.controls.stateCode.value),this.cdf.detectChanges()}onChangeDistrict(){this.leadForm.controls.townshipCode.setValue(""),""==this.leadForm.controls.stateCode.value?this.townshipOption=[]:this.getTownship(this.leadForm.controls.districtCode.value),this.cdf.detectChanges()}getCompany(){return this.masterDataService.getDataByType("COMPANY_TYPE").pipe((0,F.U)(e=>this.getFormatOpt(e)),(0,D.K)(e=>(0,O.of)([])))}getState(){return this.masterDataService.getDataByType("STATE",!0).pipe((0,F.U)(e=>this.getFormatOpt(e)),(0,D.K)(e=>(0,O.of)([])))}getChannel(){return this.masterDataService.getDataByType("LEAD_DISTRIBUTION_CHANNEL").pipe((0,F.U)(e=>this.getFormatOpt(e)),(0,D.K)(e=>(0,O.of)([])))}getType(){return this.masterDataService.getDataByType("LEAD_TYPE").pipe((0,F.U)(e=>this.getFormatOpt(e)),(0,D.K)(e=>(0,O.of)([])))}getStatus(){return this.masterDataService.getDataByType("LEAD_STATUS").pipe((0,F.U)(e=>this.getFormatOpt(e)),(0,D.K)(e=>(0,O.of)([])))}getSource(){return this.masterDataService.getDataByType("LEAD_SOURCE").pipe((0,F.U)(e=>this.getFormatOpt(e)),(0,D.K)(e=>(0,O.of)([])))}getOccupation(){return this.masterDataService.getDataByType("OCCUPATION").pipe((0,F.U)(e=>this.getFormatOpt(e)),(0,D.K)(e=>(0,O.of)([])))}getProduct(){this.productService.getAll().toPromise().then(e=>{e&&(this.productOption=e.map(i=>({code:i.id,value:i.name,type:i.type})),this.cdf.detectChanges(),this.getProductOption())})}getLeadQuality(){let e=this.leadForm.getRawValue().channelCode;e&&this.LeadDetailService.getLeadQuality(e).toPromise().then(i=>{i&&(this.leadQuality=i,this.calculateLeadQuality(),this.getValidityPeriod())})}getDistrict(e){this.masterDataService.getAddressDataByType("DISTRICT",e).toPromise().then(i=>{i&&(this.distinctOption=i.map(a=>({code:a.codeId,value:a.codeValue})),this.cdf.detectChanges())})}getTownship(e){e&&this.masterDataService.getAddressDataByType("TOWNSHIP",e).toPromise().then(i=>{i&&(this.townshipOption=i.map(a=>({code:a.codeId,value:a.codeValue})),this.cdf.detectChanges())})}getValidityPeriod(){let e=this.leadForm.getRawValue().sourceCode,i=this.leadForm.getRawValue().productId;e&&i&&this.LeadDetailService.getValidityPeriod(e,i).toPromise().then(a=>{this.leadForm.controls.validityPeriod.setValue(null!=a.period?a.period:0)})}actActionBtn(e){"edit"==e.cmd&&this.router.navigate(["/activity/activity-management-detail"],{queryParams:{pageStatus:"edit",pageId:e.data.activityNo}})}calculateScore(e,i){let a;a=i||this.sourceOption.find(h=>h.code==e).code;let s=this.leadForm.getRawValue().channelCode;a&&s&&this.LeadDetailService.getLeadScore(a,s).toPromise().then(l=>{this.sourceScore=l,this.calculateLeadQuality(),this.getValidityPeriod()})}calculateLeadQuality(e){"typeCode"==e&&this.getProductOption(),"product"==e&&this.getValidityPeriod(),"state"==e&&this.onChangeState(),"district"==e&&this.onChangeDistrict();let i=this.sourceScore;this.leadQuality.forEach(a=>{i+=this.leadForm.getRawValue()[this.Quality[a.qualityCode]]?a.score:0}),this.leadForm.controls.score.setValue(i)}getOld(){this.LeadDetailService.findOne(this.oldId).toPromise().then(e=>{e&&(this.oldData=e,this.customer=0!=e.existingCustomerId?{customerId:e.existingCustomerId,customerName:e.existingCustomerName,customerDob:e.existingCustomerDateOfBirth}:{customerId:e.prospectCustomerId,customerName:e.prospectCustomerName,customerDob:e.prospectCustomerDateOfBirth},this.statusCode=parseInt(this.oldData.statusCode),this.oldData&&(this.isProspectCustomer=0!=this.oldData.prospectCustomerId),this.loadForm(e),this.fnaList=null!=this.oldData.fnas?this.oldData.fnas:[],this.activityList=null!=this.oldData.activities?this.oldData.activities:[],this.quatationList=null!=this.oldData.resourceQuotations?this.oldData.resourceQuotations:[],this.applicationList=null!=this.oldData.resourcePolicies?this.oldData.resourcePolicies:[],this.attachmentList=null!=this.oldData.attachments?this.oldData.attachments:[],(this.activityList.length>0||this.quatationList.length>0||this.applicationList.length>0||this.attachmentList.length>0||this.fnaList.length>0)&&(this.isAddProspect=!0,this.cdf.detectChanges()),this.onInitAddress(this.oldData),this.getProductOption(),e.fnas.length&&(this.fnaList=e.fnas),this.applicationList.length>0&&(this.isValidWin=!0),this.cdf.detectChanges(),this.statusCode>2&&(this.activitymatTable.reChangeData(),this.fnamatTable.reChangeData(),this.attachmentmatTable.reChangeData(),this.quotationmatTable.reChangeData(),this.applicationmatTable.reChangeData()))})}updateLeadStatus(e){return(0,p.mG)(this,void 0,void 0,function*(){if("save"==e)this.createLead();else if("cancel"==e)this.ngZone.run(()=>{this.location.back()});else if("04"==e||"06"==e){let i;i=this.modalService.open(y.F,{size:"md",backdrop:!1}),i.componentInstance.type="reason",i.componentInstance.status=e,i.result.then(()=>{},a=>{a&&this.updateStatus(e,a)})}else this.updateStatus(e);this.prospCustomer&&(this.customer.customerId=this.prospCustomer.customerId,this.customer.customerName=this.prospCustomer.customerName,this.customer.customerDob=this.prospCustomer.customerDob),this.existingCustomer&&(this.customer.customerId=this.existingCustomer.customerId,this.customer.customerName=this.existingCustomer.customerName,this.customer.customerDob=this.existingCustomer.customerDob)})}updateStatus(e,i){let s=Object.assign(Object.assign({},{leadId:this.oldId,statusCode:e,reason:i||""}),{leadId:this.oldId});this.LeadDetailService.updateLeadStatus(s,this.oldId).toPromise().then(l=>{l&&this.getOld()})}viewCampaignList(){if(!this.disabledForm){let e;e=this.modalService.open(Jt,{size:"xl",backdrop:!1}),e.componentInstance.isPopup=!0,e.result.then(()=>{},i=>{if(i&&"save"==i.type){let a=i.data;this.leadForm.controls.campaignName.setValue(a.cpmName),this.leadForm.controls.campaignNo.setValue(a.cpmNumber),this.calculateLeadQuality()}})}}viewExistingCustomer(e){if("ref"!=e||this.disabledForm){if(!this.isExisting&&!this.disabledForm){let i;i=this.modalService.open(q.b,{size:"xl",backdrop:!1}),i.componentInstance.isPopup=!0,i.componentInstance.party="prosp"!=e,i.result.then(()=>{},a=>{if(a&&"save"==a.type){let s=a.data;"ref"==e?(this.leadForm.controls.referralCustomerName.setValue((s.firstName||"")+" "+(s.middleName||"")+" "+(s.lastName||"")),this.leadForm.controls.referralCustomerId.setValue(s.customerId)):"prosp"==e?(this.leadForm.controls.existingCustomerName.setValue(""),this.leadForm.controls.existingCustomerId.setValue(""),this.leadForm.controls.prospectCustomer.setValue((s.firstName||"")+" "+(s.middleName||"")+" "+(s.lastName||"")),this.leadForm.controls.prospectCustomerId.setValue(s.customerId),this.prospCustomer={customerId:s.customerId,customerName:s.firstName+" "+s.middleName+" "+s.lastName,customerDob:s.dateOfBirth}):(this.existingCustomer={customerId:s.customerId,customerName:s.firstName+" "+s.middleName+" "+s.lastName,customerDob:s.dateOfBirth},this.leadForm.controls.prospectCustomer.setValue(""),this.leadForm.controls.prospectCustomerId.setValue(""),this.leadForm.controls.existingCustomerName.setValue((s.firstName||"")+" "+(s.middleName||"")+" "+(s.lastName||"")),this.leadForm.controls.existingCustomerId.setValue(s.customerId))}})}}else{let i;i=this.modalService.open(q.b,{size:"xl",backdrop:!1}),i.componentInstance.isPopup=!0,i.componentInstance.party=!0,i.result.then(()=>{},a=>{if(a&&"save"==a.type){let s=a.data;"ref"==e&&(this.leadForm.controls.referralCustomerName.setValue((s.firstName||"")+" "+(s.middleName||"")+" "+(s.lastName||"")),this.leadForm.controls.referralCustomerId.setValue(s.customerId))}})}}viewProspectCustomer(){if(!this.disabledForm){let e;e=this.modalService.open(j.h,{size:"xl",backdrop:!1}),e.componentInstance.isPopup=!0,e.componentInstance.pageStatus="create",e.componentInstance.isLead=!0;let i={identityType:this.leadForm.getRawValue().identityType,identityNumber:this.leadForm.getRawValue().identityNumber,phone:this.leadForm.getRawValue().phoneNo,email:this.leadForm.getRawValue().email,occupationCode:this.leadForm.getRawValue().occupationCode,townshipCode:this.leadForm.getRawValue().townshipCode,districtCode:this.leadForm.getRawValue().districtCode,stateCode:this.leadForm.getRawValue().stateCode};e.componentInstance.oldData=i,e.componentInstance.onInitAddress(i),e.result.then(()=>{},a=>{if(a&&"save"==a.type){let s=a.data;this.leadForm.controls.existingCustomerName.setValue(""),this.leadForm.controls.existingCustomerId.setValue(""),this.leadForm.controls.prospectCustomer.setValue(s.name),this.leadForm.controls.prospectCustomerId.setValue(s.customerId),this.isProspectCustomer=!0}})}}openNRCModal(){let e;e=this.modalService.open(S.V,{size:"xl",backdrop:!1}),e.componentInstance.config=this.config,e.componentInstance.group=this.leadForm}loadForm(e){this.disabledForm=!!e&&"03"!=e.statusCode,this.isExisting=!!e&&0!=e.existingCustomerId,this.leadForm=null,this.cdf.detectChanges(),this.leadForm=new d.cw({leadId:new d.NI({value:e?e.leadId:"",disabled:!0}),phoneNo:new d.NI({value:e?e.phoneNo:"",disabled:this.disabledForm}),openedDate:new d.NI({value:e?E(e.openedDate):"",disabled:!0}),subject:new d.NI({value:e?e.subject:"",disabled:this.disabledForm}),companyCode:new d.NI({value:e?e.companyCode:"",disabled:!0}),sms:new d.NI({value:!!e&&(e.contact+"").includes("sms"),disabled:this.disabledForm}),pemail:new d.NI({value:!!e&&(e.contact+"").includes("email"),disabled:this.disabledForm}),phone:new d.NI({value:!!e&&(e.contact+"").includes("phone"),disabled:this.disabledForm}),contactName:new d.NI({value:e?e.contactName:"",disabled:this.disabledForm}),activationDate:new d.NI({value:e?E(e.activationDate):"",disabled:!0}),channelCode:new d.NI({value:e?e.channelCode:"",disabled:!0}),occupationCode:new d.NI({value:e?e.occupationCode:"",disabled:this.disabledForm}),closedDate:new d.NI({value:e?E(e.closedDate):"",disabled:this.disabledForm}),typeCode:new d.NI({value:e?e.typeCode:"",disabled:!0}),stateCode:new d.NI({value:e?e.stateCode:"",disabled:this.disabledForm}),expirationDate:new d.NI({value:e?E(e.expirationDate):"",disabled:this.disabledForm}),statusCode:new d.NI({value:e?e.statusCode:"",disabled:!0}),districtCode:new d.NI({value:e?e.districtCode:"",disabled:this.disabledForm}),validityPeriod:new d.NI({value:e?e.validityPeriod:"",disabled:!0}),reason:new d.NI({value:e?e.reason:"",disabled:!0}),townshipCode:new d.NI({value:e?e.townshipCode:"",disabled:this.disabledForm}),assignTo:new d.NI({value:e?e.ownerId:"",disabled:this.disabledForm}),assignToName:new d.NI({value:e?e.ownerName:"",disabled:this.disabledForm}),productId:new d.NI({value:e?e.productId:"",disabled:!0}),email:new d.NI({value:e?e.email:"",disabled:this.disabledForm}),campaignName:new d.NI({value:e?e.campaignName:"",disabled:this.disabledForm}),identityType:new d.NI({value:e?e.identityType:"",disabled:!0}),sourceCode:new d.NI({value:e?e.sourceCode:"",disabled:this.disabledForm}),campaignNo:new d.NI({value:e?e.campaignNo:"",disabled:this.disabledForm}),identityNumber:new d.NI({value:e?e.nrcValue:"",disabled:!0}),existingCustomerName:new d.NI({value:e?e.existingCustomerName.trim():"",disabled:!0}),existingCustomerId:new d.NI({value:e?e.existingCustomerId:"",disabled:!0}),referralCustomerName:new d.NI({value:e?e.referralCustomerName.trim():"",disabled:this.disabledForm}),referralCustomerId:new d.NI({value:e?e.referralCustomerId:"",disabled:this.disabledForm}),monthlyIncome:new d.NI({value:e?e.monthlyIncome:"",disabled:this.disabledForm}),facebookAcc:new d.NI({value:e?e.facebookAcc:"",disabled:this.disabledForm}),maritalStatus:new d.NI({value:e?e.maritalStatus:"",disabled:this.disabledForm}),financialPlan:new d.NI({value:e?e.financialPlan:"",disabled:this.disabledForm}),numberOfChildren:new d.NI({value:e?e.numberOfChildren:"",disabled:this.disabledForm}),existingInsuranceCoverage:new d.NI({value:e?e.existingInsuranceCoverage:"",disabled:this.disabledForm}),existingInsurancePlan:new d.NI({value:e?e.existingInsurancePlan:"",disabled:this.disabledForm}),score:new d.NI({value:e?e.score:"",disabled:this.disabledForm}),asset:new d.NI({value:e?e.asset:"",disabled:this.disabledForm}),prospectCustomer:new d.NI({value:e?e.prospectCustomerName.trim():"",disabled:this.disabledForm}),prospectCustomerId:new d.NI({value:e?e.prospectCustomerId:"",disabled:this.disabledForm}),lostReason:new d.NI({value:e?e.lostReason:"",disabled:!0})}),this.cdf.detectChanges(),this.oldData&&(this.getLeadQuality(),this.calculateScore(null,this.oldData.sourceCode))}backLocation(){this.loadForm(this.oldData)}clearDate(e){"referralCustomerName"==e&&(this.leadForm.controls[e].setValue(null),this.leadForm.controls.referralCustomerId.setValue(null)),"existingCustomerName"==e&&(this.leadForm.controls[e].setValue(null),this.leadForm.controls.existingCustomerId.setValue(null)),("campaignName"==e||"campaignNo"==e)&&(this.leadForm.controls.campaignName.setValue(null),this.leadForm.controls.campaignNo.setValue(null)),"prospectCustomer"==e&&(this.leadForm.controls.prospectCustomer.setValue(null),this.leadForm.controls.prospectCustomerId.setValue(null),this.isAddProspect=!1)}createLead(){let e=this.leadForm.getRawValue();e.contact=[],e.sms&&e.contact.push("sms"),e.pemail&&e.contact.push("email"),e.phone&&e.contact.push("phone"),e.contact=e.contact.join(","),"create"==this.pageStatus?this.create(e):this.edit(e)}create(e){let i=Object.assign(Object.assign({},e),{leadId:this.oldId});this.LeadDetailService.updateNoID(i).toPromise().then(a=>{a&&this.alertService.activate("This record was created","Success Message")})}edit(e){let i=Object.assign(Object.assign({},e),{leadId:this.oldId,ownerId:e.assignTo});this.LeadDetailService.updateNoID(i).toPromise().then(a=>{a&&(this.getOld(),this.alertService.activate("This record was updated","Success Message"))})}toggleAccordion(e){"FNA"==e&&(this.isFNA=!this.isFNA,this.isFNA&&(L.k5.LEAD_ID=this.oldId)),"Application"==e&&(this.isApplication=!this.isApplication),"Quotation"==e&&(this.isQuotation=!this.isQuotation),"Attachment"==e&&(this.isAttachment=!this.isAttachment,this.isAttachment&&this.getLeadAttachment()),"Activity"==e&&(this.isActivity=!this.isActivity),"More"==e&&(this.isMore=!this.isMore),"Detail"==e&&(this.isDetail=!this.isDetail)}add(e){if("Application"==e){const i=this.modalService.open(N.P,{size:"xl",backdrop:!1});i.componentInstance.type="modal",i.result.then(()=>{},a=>{a&&"save"==a.type&&this.customerService.findOne(this.oldData.existingCustomerId?this.oldData.existingCustomerId:this.oldData.prospectCustomerId).toPromise().then(l=>{this.prodctService.creatingCustomer=l,this.prodctService.createingProd=a.data,this.prodctService.creatingLeadId=this.oldId,this.prodctService.editData=null,this.prodctService.referenceID=null,this.prodctService.viewType="policy",this.prodctService.type="policy",this.router.navigateByUrl("/product-form")})})}if("Quotation"==e){const i=this.modalService.open(N.P,{size:"xl",backdrop:!1});i.componentInstance.type="modal",i.result.then(()=>{},a=>{a&&"save"==a.type&&this.customerService.findOne(this.oldData.existingCustomerId?this.oldData.existingCustomerId:this.oldData.prospectCustomerId).toPromise().then(l=>{this.prodctService.creatingCustomer=l,this.prodctService.createingProd=a.data,this.prodctService.creatingLeadId=this.oldId,this.prodctService.editData=null,this.prodctService.referenceID=null,this.prodctService.viewType="quotation",this.prodctService.type="quotation",this.router.navigateByUrl("/product-form")})})}if("Activity"==e){let i=this.oldData.existingCustomerId?this.oldData.existingCustomerId:this.oldData.prospectCustomerId,a=this.oldData.existingCustomerName.trim()?this.oldData.existingCustomerName.trim():this.oldData.prospectCustomerName.trim(),s=this.oldData.ownerId?this.oldData.ownerId:0,l=this.oldData.ownerName?this.oldData.ownerName.trim():"";this.router.navigate(["/activity/activity-management-detail"],{queryParams:{customerId:i,name:a,leadId:this.oldId,assignTo:s,assignToName:l,isLead:!0,pageStatus:"create"}})}"FNA"==e&&this.displayFNAType()}actionBtn(e,i){this.fnaService.fnaUpdateProducts=[],"FNA"==i?"edit"==e.cmd?this.createOrEdit(e.data):this.deleteFNA(e.data.id):"QUO"==i?"edit"==e.cmd?this.editQuo(e.data):"view"==e.cmd?this.goQuoViewDetail(e.data):"create"==e.cmd&&this.createPolicy(e.data):"APP"==i?"edit"==e.cmd?this.editApp(e.data):"view"==e.cmd&&this.goAppViewDetail(e.data):"ATT"==i&&("download"==e.cmd&&this.AttachmentDownloadService.getDownload(e.data.id,e.data.fileName),"delete"==e.cmd&&this.alertService.activate("Are you sure want to delete?","Warning Message").then(a=>{a&&this.LeadAttachmentService.delete(e.data.id).toPromise().then(s=>{this.getLeadAttachment(),this.alertService.activate("This record was deleted","Success Message").then(l=>{})})}))}createPolicy(e){(0,tt.D)([this.prodctService.findOne(e.productId),this.customerService.findOne(e.customerId||1).pipe((0,D.K)(i=>(0,O.of)(void 0)))]).toPromise().then(i=>{i&&(this.prodctService.createingProdRef=i[0],this.prodctService.creatingCustomer=i[1],this.prodctService.viewType="policy",this.prodctService.type="policy",this.prodctService.referenceID=e.id,this.prodctService.editData=null,this.prodctService.creatingLeadId=e.leadId,this.prodctService.referenceStatus=e.status,this.router.navigateByUrl("/product-form"))})}goAppViewDetail(e){this.prodctService.findOne(e.productId).toPromise().then(i=>{i&&(this.prodctService.createingProd=i,this.prodctService.previewType="policy",this.prodctService.editData=e,this.router.navigateByUrl("/resourse-detail"))})}goQuoViewDetail(e){this.prodctService.findOne(e.productId).toPromise().then(i=>{i&&(this.prodctService.createingProd=i,this.prodctService.editData=e,this.prodctService.previewType="quotation",this.router.navigateByUrl("/resourse-detail"))})}editQuo(e){(0,tt.D)([this.prodctService.findOne(e.productId),this.customerService.findOne(e.customerId||1).pipe((0,D.K)(i=>(0,O.of)(void 0)))]).toPromise().then(i=>{i&&(this.prodctService.createingProd=i[0],this.prodctService.creatingCustomer=i[1],this.prodctService.type="quotation",this.prodctService.viewType="quotation",this.prodctService.editData=e,this.prodctService.referenceID=null,this.prodctService.creatingLeadId=e.leadId,this.router.navigateByUrl("/product-form"))})}editApp(e){(0,tt.D)([this.prodctService.findOne(e.productId),this.customerService.findOne(e.customerId||1).pipe((0,D.K)(i=>(0,O.of)(void 0)))]).toPromise().then(i=>{i[0]&&(this.prodctService.createingProd=i[0],this.prodctService.creatingCustomer=i[1],this.prodctService.type="policy",this.prodctService.viewType="policy",this.prodctService.editData=e,this.prodctService.referenceID=e.quotationId,this.prodctService.creatingLeadId=e.leadId,this.router.navigateByUrl("/product-form"))})}addAttachment(){return(0,p.mG)(this,void 0,void 0,function*(){let e;e=this.modalService.open(y.F,{size:"lg",backdrop:!1}),e.componentInstance.type="description",e.componentInstance.oldId=this.oldId,e.result.then(()=>{},i=>{i&&i&&(this.description=i.description,this.AttachmentUploadService.save(i.data).toPromise().then(a=>{a&&this.LeadAttachmentService.save({attachmentId:a,description:this.description,refDocNo:this.oldId,refDocType:"LEAD"}).toPromise().then(l=>{l&&this.getLeadAttachment()})}).catch(a=>{}))})})}getLeadAttachment(){return(0,p.mG)(this,void 0,void 0,function*(){this.LeadAttachmentService.getAttachmentListRef(this.oldId,"LEAD").toPromise().then(e=>{e&&(this.attachmentList=e,this.cdf.detectChanges(),this.attachmentmatTable.reChangeData(),this.getOld())})})}getProductOption(){let i=(this.productOption||[]).filter(s=>s.type==this.leadType[this.leadForm.getRawValue().typeCode]);i.findIndex(s=>s.code==this.leadForm.controls.productId.value)<0&&this.leadForm.controls.productId.value&&i.length>0&&this.leadForm.controls.productId.setValue(""),this.productOption2=i||[]}isControlValid(e){const i=this.leadForm.controls[e];return i.valid&&(i.dirty||i.touched)}isControlInvalid(e){const i=this.leadForm.controls[e];return i.invalid&&(i.dirty||i.touched)}controlHasError(e,i){const a=this.leadForm.controls[i];return a.hasError(e)&&(a.dirty||a.touched)}isControlTouched(e){const i=this.leadForm.controls[e];return i.dirty||i.touched}displayFNAType(){if(this.fnaService.fnaUpdateProducts=[],this.fnaService.fnaIncome=new ot.V,this.fnaService.fnaRetirementSaving=new st.E,this.fnaService.fnaHealths=new Array,this.fnaService.fnaEducations=new Array,this.fnaService.fnaAssect=new Array,this.fnaService.fnaProduct=new Array,this.fnaService.percentage="",this.fnaService.totalPercentageText="",this.fnaService.bgColor="",this.fnaService.fnaUpdateProducts=new Array,this.fnaService.fnaTextColor=null,null!=this.oldId&&""!=this.oldId&&null!=this.oldId&&null!=this.customer.customerId&&""!=this.customer.customerId){const e=this.modalService.open(Qt.P,{size:"xl",backdrop:!1});e.componentInstance.type="modal",e.componentInstance.leadId=this.oldId,e.componentInstance.customer=this.customer,e.componentInstance.conductedBy=this.oldData.createdBy,e.result.then(()=>{},i=>{i&&(i.customerDob=this.customer.customerDob,"BRAM"==i.fnaType&&this.router.navigate(["/fna/fna-bram"],{queryParams:{passValue:JSON.stringify({res:i})}}),"LPP"==i.fnaType&&this.router.navigate(["/fna/fna-detail"],{queryParams:{passValue:JSON.stringify(i)}}))})}}createOrEdit(e){return(0,p.mG)(this,void 0,void 0,function*(){let i;this.fnaService.fnaUpdateProducts=[],this.fnaService.fnaIncome=new ot.V,this.fnaService.fnaRetirementSaving=new st.E,this.fnaService.fnaHealths=new Array,this.fnaService.fnaEducations=new Array,this.fnaService.fnaAssect=new Array,this.fnaService.fnaProduct=new Array,this.fnaService.percentage="",this.fnaService.totalPercentageText="",this.fnaService.bgColor="",this.fnaService.fnaUpdateProducts=new Array,this.fnaService.fnaTextColor=null,e&&(i={conductedBy:this.oldData.conductedBy,conductedByName:this.oldData.conductedByName,createdAt:this.convertDateFormatDDMMYYY(e.createdAt),createdBy:e.createdBy,createdByName:e.createdByName,customerId:this.customer.customerId,customerName:this.customer.customerName,customerDob:this.customer.customerDob,updatedAt:e.updatedAt,fnaId:e.id,type:e.type,pageStatus:"edit"},null!=this.oldId&&""!=this.oldId&&null!=this.oldId&&null!=this.customer.customerId&&""!=this.customer.customerId&&("LPP"==e.fnaType?this.router.navigate(["/fna/fna-detail"],{queryParams:{passValue:JSON.stringify(i)}}):(i.grandDiscount=e.grandDiscount,i.highDiscount=e.highDiscount,vt.xT.GRAND_DISCOUNT=0,vt.xT.HIGH_DISCOUNT=0,this.router.navigate(["/fna/fna-bram"],{queryParams:{passValue:JSON.stringify(i)}}))))})}getAllFNA(){return(0,p.mG)(this,void 0,void 0,function*(){yield this.fnaListService.getAll().toPromise().then(e=>{if(this.fnaList=[],e){this.fnaList=e;for(var i=0;i<this.fnaList.length;i++)this.fnaList[i].createdAt=this.convertDateFormatMMDDYYY(this.fnaList[i].createdAt),this.fnaList[i].conductedBy=this.user.username;this.cdf.detectChanges(),this.fnamatTable.reChangeData()}})})}deleteFNA(e){return(0,p.mG)(this,void 0,void 0,function*(){this.alertService.activate("Are you sure want to delete?","Warning Message").then(i=>(0,p.mG)(this,void 0,void 0,function*(){i&&(yield this.fnaListService.delete(e).toPromise().then(a=>(0,p.mG)(this,void 0,void 0,function*(){this.fnaList=this.fnaList.filter(s=>s.id!==e),this.alertService.activate("This record was deleted","Success Message").then(s=>{}),this.cdf.detectChanges(),this.fnamatTable.reChangeData()})))})),this.fnaService.fnaUpdateProducts=[],this.fnaService.fnaIncome=new ot.V,this.fnaService.fnaRetirementSaving=new st.E,this.fnaService.fnaHealths=new Array,this.fnaService.fnaEducations=new Array,this.fnaService.fnaAssect=new Array,this.fnaService.fnaProduct=new Array,this.fnaService.percentage="",this.fnaService.totalPercentageText="",this.fnaService.bgColor="",this.fnaService.fnaUpdateProducts=new Array,this.fnaService.fnaTextColor=null})}convertDateFormatMMDDYYY(e){var i=new Date(e),a=String(i.getDate()).padStart(2,"0");return String(i.getMonth()+1).padStart(2,"0")+"/"+a+"/"+i.getFullYear()}convertDateFormatDDMMYYY(e){var i=new Date(e);return String(i.getDate()).padStart(2,"0")+"/"+String(i.getMonth()+1).padStart(2,"0")+"/"+i.getFullYear()}getFormatOpt(e){return e.map(i=>({code:i.codeId,value:i.codeName||i.codeValue}))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.qu),t.Y36(o.Ye),t.Y36(Yt.D),t.Y36(f.gz),t.Y36(gt),t.Y36(t.sBO),t.Y36(Ht.Z),t.Y36(Z.FF),t.Y36(f.F0),t.Y36(bt.f),t.Y36(Vt.v),t.Y36(bt.f),t.Y36(rt.p3),t.Y36(rt.ou),t.Y36(rt.Ys),t.Y36(Gt.i),t.Y36(ft.e8),t.Y36(jt.T),t.Y36(Wt.c),t.Y36(t.R0b),t.Y36(k.q))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-lead-detail"]],viewQuery:function(e,i){if(1&e&&(t.Gf($t,5),t.Gf(Xt,5),t.Gf(te,5),t.Gf(ee,5),t.Gf(ie,5)),2&e){let a;t.iGM(a=t.CRH())&&(i.fnamatTable=a.first),t.iGM(a=t.CRH())&&(i.activitymatTable=a.first),t.iGM(a=t.CRH())&&(i.applicationmatTable=a.first),t.iGM(a=t.CRH())&&(i.attachmentmatTable=a.first),t.iGM(a=t.CRH())&&(i.quotationmatTable=a.first)}},features:[t._Bn([{provide:_._A,useClass:v.t7,deps:[_.Ad]},{provide:_.sG,useValue:x.Gs}])],decls:1,vars:1,consts:[["class","row",4,"ngIf"],[1,"row"],[1,"col-12"],["action","#",1,"form",3,"formGroup","ngSubmit"],[1,"card","card-custom","gutter-b"],["class","card-header",4,"ngIf"],[1,"card-body","px-10","py-3",3,"ngClass"],[1,"row",2,"align-items","center"],[1,"col-sm-6"],[1,"form-group","row"],[1,"col-sm-4","col-form-label"],[1,"col-sm-8"],["type","text","name","leadId","autocomplete","off","formControlName","leadId",1,"form-control","form-control-sm"],["type","text","name","phoneNo","autocomplete","off","formControlName","phoneNo",1,"form-control","form-control-sm",3,"change"],["type","text","name","subject","autocomplete","off","formControlName","subject",1,"form-control","form-control-sm"],[1,"input-group"],["matInput","","formControlName","openedDate","readonly","",1,"form-control-sm","date-input",2,"width","100%",3,"matDatepicker"],["matSuffix","",3,"for"],["disabled","true"],["openDate",""],["type","text","name","contactName","autocomplete","off","formControlName","contactName",1,"form-control","form-control-sm"],["matInput","","formControlName","activationDate","readonly","",1,"form-control-sm","date-input",2,"width","100%",3,"matDatepicker"],["activitionDate",""],[1,"col-sm-12"],[1,"col-sm-2","col-form-label"],[1,"col-sm-10","checkgroup"],[1,"check-input"],[1,"col-form-label"],["type","checkbox","formControlName","sms"],["type","checkbox","formControlName","pemail"],["type","checkbox","formControlName","phone"],["bindLabel","value","bindValue","code","formControlName","typeCode",1,"ng-custom-select",3,"items","change"],["matInput","","formControlName","closedDate","readonly","",1,"form-con","trol-sm","date-input",2,"width","100%",3,"matDatepicker"],["closeDate",""],["bindLabel","value","bindValue","code","formControlName","statusCode",1,"ng-custom-select",3,"readonly","items"],["matInput","","formControlName","expirationDate",1,"form-control-sm","date-input",2,"width","100%",3,"matDatepicker"],["expDate",""],["bindLabel","value","bindValue","code","formControlName","occupationCode",1,"ng-custom-select",3,"items"],["bindLabel","value","bindValue","code","formControlName","companyCode",1,"ng-custom-select",3,"items"],["bindLabel","value","bindValue","code","formControlName","stateCode",1,"ng-custom-select",3,"items","change"],["bindLabel","value","bindValue","code","formControlName","districtCode",1,"ng-custom-select",3,"items","change"],["bindLabel","value","bindValue","code","formControlName","townshipCode",1,"ng-custom-select",3,"items","change"],["type","text","readonly","","name","validityPeriod","autocomplete","off","formControlName","validityPeriod",1,"form-control","form-control-sm"],["bindLabel","value","bindValue","code","formControlName","channelCode",1,"ng-custom-select",3,"items","change"],["type","text","readonly","","name","assignToName","autocomplete","off","formControlName","assignToName",1,"form-control","form-control-sm"],["bindLabel","value","bindValue","code","formControlName","productId",1,"ng-custom-select",3,"items","change"],["type","text","name","email","autocomplete","off","formControlName","email",1,"form-control","form-control-sm"],[1,"col-sm-8",3,"click"],["type","text","name","campaignName","readonly","","autocomplete","off","formControlName","campaignName",1,"form-control","form-control-sm",3,"change"],["title","Clear all",1,"ng-clear-wrapper",3,"click"],["aria-hidden","true",1,"ng-clear"],["bindLabel","value","bindValue","code","formControlName","identityType",1,"ng-custom-select",3,"items"],["type","text","name","campaignNo","autocomplete","off","formControlName","campaignNo",1,"form-control","form-control-sm"],["type","text","class","form-control form-control-sm ","name","identityNumber","autocomplete","off","formControlName","identityNumber","readonly","",3,"is-invalid","is-valid","click",4,"ngIf"],["type","text","class","form-control form-control-sm ","name","identityNumber","autocomplete","off","formControlName","identityNumber",3,"is-invalid","is-valid",4,"ngIf"],["bindLabel","value","bindValue","code","formControlName","sourceCode",1,"ng-custom-select",3,"items","change"],["type","text","name","existingCustomerName","autocomplete","off","readonly","","formControlName","existingCustomerName",1,"form-control","form-control-sm"],["type","text","name","referralCustomerName","readonly","","autocomplete","off","readonly","","formControlName","referralCustomerName",1,"form-control","form-control-sm"],[1,"card-label","left-border-image"],[1,"col-sm-5","col-form-label"],[1,"col-sm-7"],["type","text","name","monthlyIncome","autocomplete","off","formControlName","monthlyIncome",1,"form-control","form-control-sm"],["type","text","name","facebookAcc","autocomplete","off","formControlName","facebookAcc",1,"form-control","form-control-sm"],["bindLabel","value","bindValue","code","formControlName","maritalStatus",1,"ng-custom-select",3,"items"],["type","text","name","financialPlan","autocomplete","off","formControlName","financialPlan",1,"form-control","form-control-sm"],["type","number","name","numberOfChildren","autocomplete","off","formControlName","numberOfChildren",1,"form-control","form-control-sm"],["type","text","name","existingInsuranceCoverage","autocomplete","off","formControlName","existingInsuranceCoverage",1,"form-control","form-control-sm"],["type","text","name","existingInsurancePlan","autocomplete","off","formControlName","existingInsurancePlan",1,"form-control","form-control-sm"],["type","text","name","score","autocomplete","off","formControlName","score","readonly","",1,"form-control","form-control-sm"],["type","text","name","asset","autocomplete","off","formControlName","asset",1,"form-control","form-control-sm"],[1,"col-sm-5",3,"click"],["type","text","readonly","","name","prospectCustomer","autocomplete","off","formControlName","prospectCustomer",1,"form-control","form-control-sm"],["class","col-sm-2",4,"ngIf"],["type","text","readonly","","name","lostReason","autocomplete","off","formControlName","lostReason",1,"form-control","form-control-sm"],["type","text","readonly","","name","reason","autocomplete","off","formControlName","reason",1,"form-control","form-control-sm"],[1,"mt-2"],[1,"row",2,"align-items","center","justify-content","flex-end"],[4,"ngIf"],[1,"card-header"],[1,"card-title"],[1,"card-toolbar"],["type","button","class","icon",3,"click",4,"ngIf"],["type","button","class","icon ml-2",3,"click",4,"ngIf"],["type","button",1,"icon",3,"click"],[1,"flaticon2-back"],["type","button",1,"icon","ml-2",3,"click"],[1,"flaticon2-down"],["type","text","name","identityNumber","autocomplete","off","formControlName","identityNumber","readonly","",1,"form-control","form-control-sm",3,"click"],["type","text","name","identityNumber","autocomplete","off","formControlName","identityNumber",1,"form-control","form-control-sm"],[1,"col-sm-2"],["title","Edit Form Page",1,"btn","btn-primary","btn-cus","btn-sm","mx-1",3,"click"],[1,"flaticon2-plus"],["type","button",1,"btn","btn-sm","btn-primary","ml-2",2,"width","100%",3,"click"],[1,""],["type","button",1,"btn","btn-sm","btn-secondary","ml-2",2,"width","100%",3,"click"],["class","card card-custom gutter-b",4,"ngIf"],[1,"card-body","px-10","py-3"],[3,"ngClass"],[3,"data","colum","displayedColumns","selectable","emitter"],["attachment",""],["fna",""],["type","button","class","btn btn-primary btn-circle",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary","btn-circle",3,"click"],["activity",""],[1,"flaticon2-back","icon"],[1,"flaticon2-down","icon"],["quotation",""],["application",""]],template:function(e,i){1&e&&t.YNc(0,Ue,369,273,"div",0),2&e&&t.Q6J("ngIf",i.leadForm)},directives:[o.O5,d._Y,d.JL,d.sg,o.mk,d.Fj,d.JJ,d.u,lt.Nt,K.hl,K.nW,Kt.R9,K.Mq,d.Wl,et.w9,d.wV,u.I],pipes:[zt.X],styles:[".input-group[_ngcontent-%COMP%]   .form-control-sm[_ngcontent-%COMP%]{background-color:#fff;background-clip:padding-box;border:1px solid #E4E6EF;padding:0 .75rem}.input-group[_ngcontent-%COMP%]   .mat-datepicker-toggle[_ngcontent-%COMP%]{position:absolute;right:5px;top:-2px}.readonly[_ngcontent-%COMP%]{background-color:#9c9999!important;color:#fff}.tab[_ngcontent-%COMP%]{overflow:hidden;border:1px solid #ccc;background-color:#f1f1f1}.tab[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:inherit;float:left;border:none;outline:none;cursor:pointer;padding:14px 16px;transition:.3s}.tab[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#ddd}.tab[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:#ccc}.active[_ngcontent-%COMP%]{display:block}.inactive[_ngcontent-%COMP%]{display:none}.icon[_ngcontent-%COMP%]{position:relative;border:none;margin:0;font-size:1.5rem;background-color:transparent}.add[_ngcontent-%COMP%]{top:-11px;position:relative;border:none;background:#f2f2f2;margin:0}.add[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;top:-52px;right:78px;width:110px}h2[_ngcontent-%COMP%]{font-size:13px;color:#005ca2;background:#F2F2F2;border:none;cursor:pointer;position:relative;margin-top:24px;padding:12px 24px 1px}h2[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;right:14px;top:5px}h2[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:6px;height:12px;float:left}h2[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;padding-left:18px}.btn-box[_ngcontent-%COMP%]{text-align:end}.btn-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;width:127%;height:100%;opacity:0}.checkgroup[_ngcontent-%COMP%], .check-input[_ngcontent-%COMP%]{display:flex;grid-gap:10px;gap:10px;align-items:center}.ng-clear-wrapper[_ngcontent-%COMP%]   .ng-clear[_ngcontent-%COMP%]{cursor:pointer;position:absolute;right:2rem;top:.3rem;font-size:1.2rem;color:#999}.ng-clear-wrapper[_ngcontent-%COMP%]   .ng-clear[_ngcontent-%COMP%]:hover{color:#d0021b}"]}),n})();var Ct=r(55167),z=r(47497),ct=r(13242),H=r(5711);r(39555),r(50273),r(97908),r(3719),r(55077),r(89417),r(69814),r(43970),r(25488),r(86263),r(80348),r(50928),r(51628),r(58290),r(97226);let Ii=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[o.ez,_.BQ,H.eL,_.si,ct.Q8,z.rt],_.BQ]}),n})();var Mi=r(70933),Li=r(90860),Ni=r(6761),Oi=r(23457),wt=r(63699);let Di=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[o.ez,d.u5,d.UX,b.vi,g.fA,et.A0,et.A0,K.FA,Li.m,Ni.s,Oi.d,Ct.Fk,wt.j,lt.c]]}),n})(),Pi=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[o.ez,d.u5,Mi.Q,d.UX,b.vi,g.fA,Z.M,Ct.Fk,et.A0,K.FA,Ii,Di,lt.c,wt.j,f.Bz.forChild([{path:"",component:Be}])]]}),n})()},6761:(w,I,r)=>{r.d(I,{s:()=>j});var o=r(86019),d=r(49133),b=r(87626),g=r(85993),Z=r(70933),f=r(55167),p=r(45598),_=r(50053),v=r(94538),A=r(74778),S=r(85275),y=r(57842),L=r(44797),J=r(45479),Q=r(87577),Y=r(76250),q=r(83668);let j=(()=>{class N{}return N.\u0275fac=function(x){return new(x||N)},N.\u0275mod=q.oAB({type:N}),N.\u0275inj=q.cJS({providers:[_.N,v.b,A.j,A.Z,Y.B],imports:[[o.ez,b.vi,d.u5,d.UX,g.bz,Z.Q,f.Fk,p.fA,g.ZS,S.i,y.A0,L._t,Q.JX,J.U8]]}),N})()},94538:(w,I,r)=>{r.d(I,{b:()=>f});var o=r(18260),d=r(91691),b=r(83668),g=r(44522);const Z=`${o.N.apiUrl}/addon`;let f=(()=>{class p extends d.i{constructor(v){super(v,Z),this.httpClient=v}}return p.\u0275fac=function(v){return new(v||p)(b.LFG(g.eN))},p.\u0275prov=b.Yz7({token:p,factory:p.\u0275fac}),p})()},50053:(w,I,r)=>{r.d(I,{N:()=>f});var o=r(18260),d=r(91691),b=r(83668),g=r(44522);const Z=`${o.N.apiUrl}/coverage`;let f=(()=>{class p extends d.i{constructor(v){super(v,Z),this.httpClient=v}}return p.\u0275fac=function(v){return new(v||p)(b.LFG(g.eN))},p.\u0275prov=b.Yz7({token:p,factory:p.\u0275fac}),p})()},74778:(w,I,r)=>{r.d(I,{j:()=>p,Z:()=>v});var o=r(82997),d=r(18260),b=r(91691),g=r(83668),Z=r(44522);const f=`${d.N.apiUrl}/ui-product`;let p=(()=>{class A extends b.i{constructor(y){super(y,f),this.httpClient=y}}return A.\u0275fac=function(y){return new(y||A)(g.LFG(Z.eN))},A.\u0275prov=g.Yz7({token:A,factory:A.\u0275fac}),A})();const _=`${d.N.apiUrl}/delete-productUi-byproductIdandType`;let v=(()=>{class A extends b.i{constructor(y){super(y,_),this.httpClient=y}deleteMany(y){try{return this.httpClient.delete(this.baseUri+"?"+y)}catch(L){return(0,o.of)(null)}}}return A.\u0275fac=function(y){return new(y||A)(g.LFG(Z.eN))},A.\u0275prov=g.Yz7({token:A,factory:A.\u0275fac}),A})()},76250:(w,I,r)=>{r.d(I,{B:()=>f});var o=r(18260),d=r(91691),b=r(83668),g=r(44522);const Z=`${o.N.apiUrl}/validity-period`;let f=(()=>{class p extends d.i{constructor(v){super(v,Z),this.httpClient=v}}return p.\u0275fac=function(v){return new(v||p)(b.LFG(g.eN))},p.\u0275prov=b.Yz7({token:p,factory:p.\u0275fac}),p})()},85275:(w,I,r)=>{r.d(I,{i:()=>Z});var o=r(86019),d=r(49133),b=r(87626),g=r(83668);let Z=(()=>{class f{}return f.\u0275fac=function(_){return new(_||f)},f.\u0275mod=g.oAB({type:f}),f.\u0275inj=g.cJS({imports:[[o.ez,d.u5,b.vi]]}),f})()}}]);